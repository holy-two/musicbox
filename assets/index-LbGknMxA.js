var po=Object.defineProperty;var vo=(b,h,d)=>h in b?po(b,h,{enumerable:!0,configurable:!0,writable:!0,value:d}):b[h]=d;var et=(b,h,d)=>vo(b,typeof h!="symbol"?h+"":h,d);(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function d(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=d(t);fetch(t.href,a)}})();const go=(b,h)=>b===h,sa=Symbol("solid-proxy"),bo=typeof Proxy=="function",mo=Symbol("solid-track"),lt={equals:go};let xs=Es;const ze=1,ft=2,Cs={owned:null,cleanups:null,context:null,owner:null};var _e=null;let yt=null,yo=null,ke=null,Se=null,De=null,vt=0;function ot(b,h){const d=ke,o=_e,t=b.length===0,a=h===void 0?o:h,n=t?Cs:{owned:null,cleanups:null,context:a?a.context:null,owner:a},l=t?b:()=>b(()=>Fe(()=>rt(n)));_e=n,ke=null;try{return nt(l,!0)}finally{ke=d,_e=o}}function Re(b,h){h=h?Object.assign({},lt,h):lt;const d={value:b,observers:null,observerSlots:null,comparator:h.equals||void 0},o=t=>(typeof t=="function"&&(t=t(d.value)),Ss(d,t));return[Ts.bind(d),o]}function We(b,h,d){const o=fa(b,h,!1,ze);at(o)}function ks(b,h,d){xs=_o;const o=fa(b,h,!1,ze);o.user=!0,De?De.push(o):at(o)}function tt(b,h,d){d=d?Object.assign({},lt,d):lt;const o=fa(b,h,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=d.equals||void 0,at(o),Ts.bind(o)}function Fe(b){if(ke===null)return b();const h=ke;ke=null;try{return b()}finally{ke=h}}function wo(b,h,d){const o=Array.isArray(b);let t;return a=>{let n;if(o){n=Array(b.length);for(let u=0;u<b.length;u++)n[u]=b[u]()}else n=b();const l=Fe(()=>h(n,t,a));return t=n,l}}function xo(b){ks(()=>Fe(b))}function _s(b){return _e===null||(_e.cleanups===null?_e.cleanups=[b]:_e.cleanups.push(b)),b}function Ts(){if(this.sources&&this.state)if(this.state===ze)at(this);else{const b=Se;Se=null,nt(()=>ut(this),!1),Se=b}if(ke){const b=this.observers?this.observers.length:0;ke.sources?(ke.sources.push(this),ke.sourceSlots.push(b)):(ke.sources=[this],ke.sourceSlots=[b]),this.observers?(this.observers.push(ke),this.observerSlots.push(ke.sources.length-1)):(this.observers=[ke],this.observerSlots=[ke.sources.length-1])}return this.value}function Ss(b,h,d){let o=b.value;return(!b.comparator||!b.comparator(o,h))&&(b.value=h,b.observers&&b.observers.length&&nt(()=>{for(let t=0;t<b.observers.length;t+=1){const a=b.observers[t],n=yt&&yt.running;n&&yt.disposed.has(a),(n?!a.tState:!a.state)&&(a.pure?Se.push(a):De.push(a),a.observers&&As(a)),n||(a.state=ze)}if(Se.length>1e6)throw Se=[],new Error},!1)),h}function at(b){if(!b.fn)return;rt(b);const h=vt;Co(b,b.value,h)}function Co(b,h,d){let o;const t=_e,a=ke;ke=_e=b;try{o=b.fn(h)}catch(n){return b.pure&&(b.state=ze,b.owned&&b.owned.forEach(rt),b.owned=null),b.updatedAt=d+1,Ms(n)}finally{ke=a,_e=t}(!b.updatedAt||b.updatedAt<=d)&&(b.updatedAt!=null&&"observers"in b?Ss(b,o):b.value=o,b.updatedAt=d)}function fa(b,h,d,o=ze,t){const a={fn:b,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:h,owner:_e,context:_e?_e.context:null,pure:d};return _e===null||_e!==Cs&&(_e.owned?_e.owned.push(a):_e.owned=[a]),a}function ht(b){if(b.state===0)return;if(b.state===ft)return ut(b);if(b.suspense&&Fe(b.suspense.inFallback))return b.suspense.effects.push(b);const h=[b];for(;(b=b.owner)&&(!b.updatedAt||b.updatedAt<vt);)b.state&&h.push(b);for(let d=h.length-1;d>=0;d--)if(b=h[d],b.state===ze)at(b);else if(b.state===ft){const o=Se;Se=null,nt(()=>ut(b,h[0]),!1),Se=o}}function nt(b,h){if(Se)return b();let d=!1;h||(Se=[]),De?d=!0:De=[],vt++;try{const o=b();return ko(d),o}catch(o){d||(De=null),Se=null,Ms(o)}}function ko(b){if(Se&&(Es(Se),Se=null),b)return;const h=De;De=null,h.length&&nt(()=>xs(h),!1)}function Es(b){for(let h=0;h<b.length;h++)ht(b[h])}function _o(b){let h,d=0;for(h=0;h<b.length;h++){const o=b[h];o.user?b[d++]=o:ht(o)}for(h=0;h<d;h++)ht(b[h])}function ut(b,h){b.state=0;for(let d=0;d<b.sources.length;d+=1){const o=b.sources[d];if(o.sources){const t=o.state;t===ze?o!==h&&(!o.updatedAt||o.updatedAt<vt)&&ht(o):t===ft&&ut(o,h)}}}function As(b){for(let h=0;h<b.observers.length;h+=1){const d=b.observers[h];d.state||(d.state=ft,d.pure?Se.push(d):De.push(d),d.observers&&As(d))}}function rt(b){let h;if(b.sources)for(;b.sources.length;){const d=b.sources.pop(),o=b.sourceSlots.pop(),t=d.observers;if(t&&t.length){const a=t.pop(),n=d.observerSlots.pop();o<t.length&&(a.sourceSlots[n]=o,t[o]=a,d.observerSlots[o]=n)}}if(b.tOwned){for(h=b.tOwned.length-1;h>=0;h--)rt(b.tOwned[h]);delete b.tOwned}if(b.owned){for(h=b.owned.length-1;h>=0;h--)rt(b.owned[h]);b.owned=null}if(b.cleanups){for(h=b.cleanups.length-1;h>=0;h--)b.cleanups[h]();b.cleanups=null}b.state=0}function To(b){return b instanceof Error?b:new Error(typeof b=="string"?b:"Unknown error",{cause:b})}function Ms(b,h=_e){throw To(b)}const So=Symbol("fallback");function Ta(b){for(let h=0;h<b.length;h++)b[h]()}function Eo(b,h,d={}){let o=[],t=[],a=[],n=0,l=h.length>1?[]:null;return _s(()=>Ta(a)),()=>{let u=b()||[],m=u.length,y,g;return u[mo],Fe(()=>{let r,f,e,p,x,w,_,E,N;if(m===0)n!==0&&(Ta(a),a=[],o=[],t=[],n=0,l&&(l=[])),d.fallback&&(o=[So],t[0]=ot(I=>(a[0]=I,d.fallback())),n=1);else if(n===0){for(t=new Array(m),g=0;g<m;g++)o[g]=u[g],t[g]=ot(c);n=m}else{for(e=new Array(m),p=new Array(m),l&&(x=new Array(m)),w=0,_=Math.min(n,m);w<_&&o[w]===u[w];w++);for(_=n-1,E=m-1;_>=w&&E>=w&&o[_]===u[E];_--,E--)e[E]=t[_],p[E]=a[_],l&&(x[E]=l[_]);for(r=new Map,f=new Array(E+1),g=E;g>=w;g--)N=u[g],y=r.get(N),f[g]=y===void 0?-1:y,r.set(N,g);for(y=w;y<=_;y++)N=o[y],g=r.get(N),g!==void 0&&g!==-1?(e[g]=t[y],p[g]=a[y],l&&(x[g]=l[y]),g=f[g],r.set(N,g)):a[y]();for(g=w;g<m;g++)g in e?(t[g]=e[g],a[g]=p[g],l&&(l[g]=x[g],l[g](g))):t[g]=ot(c);t=t.slice(0,n=m),o=u.slice(0)}return t});function c(r){if(a[g]=r,l){const[f,e]=Re(g);return l[g]=e,h(u[g],f)}return h(u[g])}}}function He(b,h){return Fe(()=>b(h||{}))}function st(){return!0}const Ao={get(b,h,d){return h===sa?d:b.get(h)},has(b,h){return h===sa?!0:b.has(h)},set:st,deleteProperty:st,getOwnPropertyDescriptor(b,h){return{configurable:!0,enumerable:!0,get(){return b.get(h)},set:st,deleteProperty:st}},ownKeys(b){return b.keys()}};function wt(b){return(b=typeof b=="function"?b():b)?b:{}}function Mo(){for(let b=0,h=this.length;b<h;++b){const d=this[b]();if(d!==void 0)return d}}function Ns(...b){let h=!1;for(let n=0;n<b.length;n++){const l=b[n];h=h||!!l&&sa in l,b[n]=typeof l=="function"?(h=!0,tt(l)):l}if(bo&&h)return new Proxy({get(n){for(let l=b.length-1;l>=0;l--){const u=wt(b[l])[n];if(u!==void 0)return u}},has(n){for(let l=b.length-1;l>=0;l--)if(n in wt(b[l]))return!0;return!1},keys(){const n=[];for(let l=0;l<b.length;l++)n.push(...Object.keys(wt(b[l])));return[...new Set(n)]}},Ao);const d={},o=Object.create(null);for(let n=b.length-1;n>=0;n--){const l=b[n];if(!l)continue;const u=Object.getOwnPropertyNames(l);for(let m=u.length-1;m>=0;m--){const y=u[m];if(y==="__proto__"||y==="constructor")continue;const g=Object.getOwnPropertyDescriptor(l,y);if(!o[y])o[y]=g.get?{enumerable:!0,configurable:!0,get:Mo.bind(d[y]=[g.get.bind(l)])}:g.value!==void 0?g:void 0;else{const c=d[y];c&&(g.get?c.push(g.get.bind(l)):g.value!==void 0&&c.push(()=>g.value))}}}const t={},a=Object.keys(o);for(let n=a.length-1;n>=0;n--){const l=a[n],u=o[l];u&&u.get?Object.defineProperty(t,l,u):t[l]=u?u.value:void 0}return t}const No=b=>`Stale read from <${b}>.`;function Bo(b){const h="fallback"in b&&{fallback:()=>b.fallback};return tt(Eo(()=>b.each,b.children,h||void 0))}function Bs(b){const h=b.keyed,d=tt(()=>b.when,void 0,{equals:(o,t)=>h?o===t:!o==!t});return tt(()=>{const o=d();if(o){const t=b.children;return typeof t=="function"&&t.length>0?Fe(()=>t(h?o:()=>{if(!Fe(d))throw No("Show");return b.when})):t}return b.fallback},void 0,void 0)}const Lo=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Po=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Lo]),qo=new Set(["innerHTML","textContent","innerText","children"]),Do=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Fo=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Oo(b,h){const d=Fo[b];return typeof d=="object"?d[h]?d.$:void 0:d}const Io=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Ro(b,h,d){let o=d.length,t=h.length,a=o,n=0,l=0,u=h[t-1].nextSibling,m=null;for(;n<t||l<a;){if(h[n]===d[l]){n++,l++;continue}for(;h[t-1]===d[a-1];)t--,a--;if(t===n){const y=a<o?l?d[l-1].nextSibling:d[a-l]:u;for(;l<a;)b.insertBefore(d[l++],y)}else if(a===l)for(;n<t;)(!m||!m.has(h[n]))&&h[n].remove(),n++;else if(h[n]===d[a-1]&&d[l]===h[t-1]){const y=h[--t].nextSibling;b.insertBefore(d[l++],h[n++].nextSibling),b.insertBefore(d[--a],y),h[t]=d[a]}else{if(!m){m=new Map;let g=l;for(;g<a;)m.set(d[g],g++)}const y=m.get(h[n]);if(y!=null)if(l<y&&y<a){let g=n,c=1,r;for(;++g<t&&g<a&&!((r=m.get(h[g]))==null||r!==y+c);)c++;if(c>y-l){const f=h[n];for(;l<y;)b.insertBefore(d[l++],f)}else b.replaceChild(d[l++],h[n++])}else n++;else h[n++].remove()}}}const Sa="_$DX_DELEGATE";function Ho(b,h,d,o={}){let t;return ot(a=>{t=a,h===document?b():dt(h,b(),h.firstChild?null:void 0,d)},o.owner),()=>{t(),h.textContent=""}}function Xe(b,h,d){let o;const t=()=>{const n=document.createElement("template");return n.innerHTML=b,n.content.firstChild},a=()=>(o||(o=t())).cloneNode(!0);return a.cloneNode=a,a}function ha(b,h=window.document){const d=h[Sa]||(h[Sa]=new Set);for(let o=0,t=b.length;o<t;o++){const a=b[o];d.has(a)||(d.add(a),h.addEventListener(a,Vo))}}function oa(b,h,d){d==null?b.removeAttribute(h):b.setAttribute(h,d)}function zo(b,h,d){d?b.setAttribute(h,""):b.removeAttribute(h)}function ua(b,h){h==null?b.removeAttribute("class"):b.className=h}function Ls(b,h,d,o){if(o)Array.isArray(d)?(b[`$$${h}`]=d[0],b[`$$${h}Data`]=d[1]):b[`$$${h}`]=d;else if(Array.isArray(d)){const t=d[0];b.addEventListener(h,d[0]=a=>t.call(b,d[1],a))}else b.addEventListener(h,d,typeof d!="function"&&d)}function Go(b,h,d={}){const o=Object.keys(h||{}),t=Object.keys(d);let a,n;for(a=0,n=t.length;a<n;a++){const l=t[a];!l||l==="undefined"||h[l]||(Ea(b,l,!1),delete d[l])}for(a=0,n=o.length;a<n;a++){const l=o[a],u=!!h[l];!l||l==="undefined"||d[l]===u||!u||(Ea(b,l,!0),d[l]=u)}return d}function Yo(b,h,d){if(!h)return d?oa(b,"style"):h;const o=b.style;if(typeof h=="string")return o.cssText=h;typeof d=="string"&&(o.cssText=d=void 0),d||(d={}),h||(h={});let t,a;for(a in d)h[a]==null&&o.removeProperty(a),delete d[a];for(a in h)t=h[a],t!==d[a]&&(o.setProperty(a,t),d[a]=t);return d}function Ps(b,h={},d,o){const t={};return We(()=>typeof h.ref=="function"&&ca(h.ref,b)),We(()=>Wo(b,h,d,!0,t,!0)),t}function ca(b,h,d){return Fe(()=>b(h,d))}function dt(b,h,d,o){if(d!==void 0&&!o&&(o=[]),typeof h!="function")return pt(b,h,o,d);We(t=>pt(b,h(),t,d),o)}function Wo(b,h,d,o,t={},a=!1){h||(h={});for(const n in t)if(!(n in h)){if(n==="children")continue;t[n]=Aa(b,n,null,t[n],d,a,h)}for(const n in h){if(n==="children")continue;const l=h[n];t[n]=Aa(b,n,l,t[n],d,a,h)}}function Uo(b){return b.toLowerCase().replace(/-([a-z])/g,(h,d)=>d.toUpperCase())}function Ea(b,h,d){const o=h.trim().split(/\s+/);for(let t=0,a=o.length;t<a;t++)b.classList.toggle(o[t],d)}function Aa(b,h,d,o,t,a,n){let l,u,m,y,g;if(h==="style")return Yo(b,d,o);if(h==="classList")return Go(b,d,o);if(d===o)return o;if(h==="ref")a||d(b);else if(h.slice(0,3)==="on:"){const c=h.slice(3);o&&b.removeEventListener(c,o,typeof o!="function"&&o),d&&b.addEventListener(c,d,typeof d!="function"&&d)}else if(h.slice(0,10)==="oncapture:"){const c=h.slice(10);o&&b.removeEventListener(c,o,!0),d&&b.addEventListener(c,d,!0)}else if(h.slice(0,2)==="on"){const c=h.slice(2).toLowerCase(),r=Io.has(c);if(!r&&o){const f=Array.isArray(o)?o[0]:o;b.removeEventListener(c,f)}(r||d)&&(Ls(b,c,d,r),r&&ha([c]))}else h.slice(0,5)==="attr:"?oa(b,h.slice(5),d):h.slice(0,5)==="bool:"?zo(b,h.slice(5),d):(g=h.slice(0,5)==="prop:")||(m=qo.has(h))||(y=Oo(h,b.tagName))||(u=Po.has(h))||(l=b.nodeName.includes("-")||"is"in n)?(g&&(h=h.slice(5),u=!0),h==="class"||h==="className"?ua(b,d):l&&!u&&!m?b[Uo(h)]=d:b[y||h]=d):oa(b,Do[h]||h,d);return d}function Vo(b){let h=b.target;const d=`$$${b.type}`,o=b.target,t=b.currentTarget,a=u=>Object.defineProperty(b,"target",{configurable:!0,value:u}),n=()=>{const u=h[d];if(u&&!h.disabled){const m=h[`${d}Data`];if(m!==void 0?u.call(h,m,b):u.call(h,b),b.cancelBubble)return}return h.host&&typeof h.host!="string"&&!h.host._$host&&h.contains(b.target)&&a(h.host),!0},l=()=>{for(;n()&&(h=h._$host||h.parentNode||h.host););};if(Object.defineProperty(b,"currentTarget",{configurable:!0,get(){return h||document}}),b.composedPath){const u=b.composedPath();a(u[0]);for(let m=0;m<u.length-2&&(h=u[m],!!n());m++){if(h._$host){h=h._$host,l();break}if(h.parentNode===t)break}}else l();a(o)}function pt(b,h,d,o,t){for(;typeof d=="function";)d=d();if(h===d)return d;const a=typeof h,n=o!==void 0;if(b=n&&d[0]&&d[0].parentNode||b,a==="string"||a==="number"){if(a==="number"&&(h=h.toString(),h===d))return d;if(n){let l=d[0];l&&l.nodeType===3?l.data!==h&&(l.data=h):l=document.createTextNode(h),d=Ve(b,d,o,l)}else d!==""&&typeof d=="string"?d=b.firstChild.data=h:d=b.textContent=h}else if(h==null||a==="boolean")d=Ve(b,d,o);else{if(a==="function")return We(()=>{let l=h();for(;typeof l=="function";)l=l();d=pt(b,l,d,o)}),()=>d;if(Array.isArray(h)){const l=[],u=d&&Array.isArray(d);if(la(l,h,d,t))return We(()=>d=pt(b,l,d,o,!0)),()=>d;if(l.length===0){if(d=Ve(b,d,o),n)return d}else u?d.length===0?Ma(b,l,o):Ro(b,d,l):(d&&Ve(b),Ma(b,l));d=l}else if(h.nodeType){if(Array.isArray(d)){if(n)return d=Ve(b,d,o,h);Ve(b,d,null,h)}else d==null||d===""||!b.firstChild?b.appendChild(h):b.replaceChild(h,b.firstChild);d=h}}return d}function la(b,h,d,o){let t=!1;for(let a=0,n=h.length;a<n;a++){let l=h[a],u=d&&d[b.length],m;if(!(l==null||l===!0||l===!1))if((m=typeof l)=="object"&&l.nodeType)b.push(l);else if(Array.isArray(l))t=la(b,l,u)||t;else if(m==="function")if(o){for(;typeof l=="function";)l=l();t=la(b,Array.isArray(l)?l:[l],Array.isArray(u)?u:[u])||t}else b.push(l),t=!0;else{const y=String(l);u&&u.nodeType===3&&u.data===y?b.push(u):b.push(document.createTextNode(y))}}return t}function Ma(b,h,d=null){for(let o=0,t=h.length;o<t;o++)b.insertBefore(h[o],d)}function Ve(b,h,d,o){if(d===void 0)return b.textContent="";const t=o||document.createTextNode("");if(h.length){let a=!1;for(let n=h.length-1;n>=0;n--){const l=h[n];if(t!==l){const u=l.parentNode===b;!a&&!n?u?b.replaceChild(t,l):b.insertBefore(t,d):u&&l.remove()}else a=!0}}else b.insertBefore(t,d);return[t]}function Xo(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var xt,Na;function jo(){if(Na)return xt;Na=1;var b="6.4.4";return xt=b,xt}var Ct,Ba;function da(){if(Ba)return Ct;Ba=1;var b=function(d,o){var t=this;if(o||(o={}),t.qpm=o.qpm?parseInt(o.qpm,10):null,!t.qpm){var a=d.metaText?d.metaText.tempo:null;t.qpm=d.getBpm(a)}t.extraMeasuresAtBeginning=o.extraMeasuresAtBeginning?parseInt(o.extraMeasuresAtBeginning,10):0,t.beatCallback=o.beatCallback,t.eventCallback=o.eventCallback,t.lineEndCallback=o.lineEndCallback,t.lineEndAnticipation=o.lineEndAnticipation?parseInt(o.lineEndAnticipation,10):0,t.beatSubdivisions=o.beatSubdivisions?parseInt(o.beatSubdivisions,10):1,t.joggerTimer=null,t.replaceTarget=function(l){t.noteTimings=l.setTiming(t.qpm,t.extraMeasuresAtBeginning),l.noteTimings.length===0&&(t.noteTimings=l.setTiming(0,0)),t.lineEndCallback&&(t.lineEndTimings=h(l.noteTimings,t.lineEndAnticipation)),t.startTime=null,t.currentBeat=0,t.currentEvent=0,t.currentLine=0,t.currentTime=0,t.isPaused=!1,t.isRunning=!1,t.pausedPercent=null,t.justUnpaused=!1,t.newSeekPercent=0,t.lastTimestamp=0,t.noteTimings.length!==0&&(t.millisecondsPerBeat=1e3/(t.qpm/60)/t.beatSubdivisions,t.lastMoment=t.noteTimings[t.noteTimings.length-1].milliseconds,t.totalBeats=Math.round(t.lastMoment/t.millisecondsPerBeat))},t.replaceTarget(d),t.doTiming=function(l){if(t.lastTimestamp!==l&&(t.lastTimestamp=l,t.startTime||(t.startTime=l),!t.isPaused&&t.isRunning)){for(t.currentTime=l-t.startTime,t.currentTime+=16;t.noteTimings.length>t.currentEvent&&t.noteTimings[t.currentEvent].milliseconds<t.currentTime;){if(t.eventCallback&&t.noteTimings[t.currentEvent].type==="event"){var u=t.startTime;t.eventCallback(t.noteTimings[t.currentEvent]),u!==t.startTime&&(t.currentTime=l-t.startTime)}t.currentEvent++}if(t.lineEndCallback&&t.lineEndTimings.length>t.currentLine&&t.lineEndTimings[t.currentLine].milliseconds<t.currentTime&&t.currentEvent<t.noteTimings.length){var m=t.noteTimings[t.currentEvent].milliseconds===t.currentTime?t.noteTimings[t.currentEvent]:t.noteTimings[t.currentEvent-1];t.lineEndCallback(t.lineEndTimings[t.currentLine],m,{line:t.currentLine,endTimings:t.lineEndTimings,currentTime:t.currentTime}),t.currentLine++}if(t.currentTime<t.lastMoment){if(requestAnimationFrame(t.doTiming),t.currentBeat*t.millisecondsPerBeat<t.currentTime){var y=t.doBeatCallback(l);y!==null&&(t.currentTime=y)}}else if(t.currentBeat<=t.totalBeats&&t.beatCallback){var g=t.doBeatCallback(l);g!==null&&(t.currentTime=g),requestAnimationFrame(t.doTiming)}if(t.currentTime>=t.lastMoment)if(t.eventCallback){var c=t.eventCallback(null);t.shouldStop(c).then(function(r){r&&t.stop()})}else t.stop()}},t.shouldStop=function(l){return new Promise(function(u){if(!l)return u(!0);if(l==="continue")return u(!1);l.then&&l.then(function(m){u(m!=="continue")})})},t.doBeatCallback=function(l){if(t.beatCallback){for(var u=t.currentEvent;u<t.noteTimings.length&&t.noteTimings[u].left===null;)u++;var m,y;if(u<t.noteTimings.length){for(m=t.noteTimings[u].milliseconds,u=Math.max(0,t.currentEvent-1);u>=0&&t.noteTimings[u].left===null;)u--;y=t.noteTimings[u]}var g={},c={};if(y){g.top=y.top,g.height=y.height;var r=Math.max(0,l-t.startTime-y.milliseconds),f=m-y.milliseconds,e=y.endX-y.left,p=f?r*e/f:0;g.left=y.left+p,t.currentEvent===0&&y.milliseconds>l-t.startTime&&(g.left=void 0),c={timestamp:l,startTime:t.startTime,ev:y,endMs:m,offMs:r,offPx:p,gapMs:f,gapPx:e}}else c={timestamp:l,startTime:t.startTime};var x=t.startTime;if(t.beatCallback(t.currentBeat/t.beatSubdivisions,t.totalBeats/t.beatSubdivisions,t.lastMoment,g,c),x!==t.startTime)return l-t.startTime;t.currentBeat++}return null};var n=60;t.animationJogger=function(){t.isRunning&&(t.doTiming(performance.now()),t.joggerTimer=setTimeout(t.animationJogger,n))},t.start=function(l,u){if(t.isRunning=!0,t.isPaused&&(t.isPaused=!1,l===void 0&&(t.justUnpaused=!0)),l)t.setProgress(l,u);else if(l===0)t.reset();else if(t.pausedPercent!==null){var m=performance.now();t.currentTime=t.lastMoment*t.pausedPercent,t.startTime=m-t.currentTime,t.pausedPercent=null,t.reportNext=!0}requestAnimationFrame(t.doTiming),t.joggerTimer=setTimeout(t.animationJogger,n)},t.pause=function(){t.isPaused=!0;var l=performance.now();t.pausedPercent=(l-t.startTime)/t.lastMoment,t.isRunning=!1,t.joggerTimer&&(clearTimeout(t.joggerTimer),t.joggerTimer=null)},t.currentMillisecond=function(){return t.currentTime},t.reset=function(){t.currentBeat=0,t.currentEvent=0,t.currentLine=0,t.startTime=null,t.pausedPercent=null},t.stop=function(){t.pause(),t.reset()},t.setProgress=function(l,u){var m;switch(u){case"seconds":t.currentTime=l*1e3,t.currentTime<0&&(t.currentTime=0),t.currentTime>t.lastMoment&&(t.currentTime=t.lastMoment),m=t.currentTime/t.lastMoment;break;case"beats":t.currentTime=l*t.millisecondsPerBeat*t.beatSubdivisions,t.currentTime<0&&(t.currentTime=0),t.currentTime>t.lastMoment&&(t.currentTime=t.lastMoment),m=t.currentTime/t.lastMoment;break;default:m=l,m<0&&(m=0),m>1&&(m=1),t.currentTime=t.lastMoment*m;break}t.isRunning||(t.pausedPercent=m);var y=performance.now();for(t.startTime=y-t.currentTime,t.currentEvent,t.currentEvent=0;t.noteTimings.length>t.currentEvent&&t.noteTimings[t.currentEvent].milliseconds<t.currentTime;)t.currentEvent++;if(t.lineEndCallback)for(t.currentLine=0;t.lineEndTimings.length>t.currentLine&&t.lineEndTimings[t.currentLine].milliseconds+t.lineEndAnticipation<t.currentTime;)t.currentLine++;var g=t.currentBeat;t.currentBeat=Math.floor(t.currentTime/t.millisecondsPerBeat),t.beatCallback&&g!==t.currentBeat&&t.doBeatCallback(t.startTime+t.currentTime),t.eventCallback&&t.currentEvent>=0&&t.noteTimings[t.currentEvent].type==="event"&&t.eventCallback(t.noteTimings[t.currentEvent]),t.lineEndCallback&&t.lineEndCallback(t.lineEndTimings[t.currentLine],t.noteTimings[t.currentEvent],{line:t.currentLine,endTimings:t.lineEndTimings}),t.joggerTimer=setTimeout(t.animationJogger,n)}};function h(d,o){for(var t=[],a=null,n=0;n<d.length;n++){var l=d[n];l.type!=="end"&&l.top!==a&&(t.push({measureNumber:l.measureNumber,milliseconds:l.milliseconds-o,top:l.top,bottom:l.top+l.height}),a=l.top)}return t}return Ct=b,Ct}var kt,La;function $o(){if(La)return kt;La=1;var b=da(),h={};return function(){var d,o;h.startAnimation=function(t,a,n){d&&(d.stop(),d=void 0),n.showCursor&&(o=t.querySelector(".abcjs-cursor"),o||(o=document.createElement("DIV"),o.className="abcjs-cursor cursor",o.style.position="absolute",t.appendChild(o),t.style.position="relative"));function l(f){for(var e=0;e<f.length;e++){var p=f[e];p.classList.contains("abcjs-bar")||(p.style.display="none")}}var u;function m(f){if(u){var e=t.querySelectorAll(u);l(e)}u=f}function y(f){var e=t.querySelectorAll(f);l(e)}function g(f){n.hideCurrentMeasure?y(f):n.hideFinishedMeasures&&m(f)}function c(f){return".abcjs-l"+f.line+".abcjs-m"+f.measureNumber}function r(f){if(f){if(f.measureStart){var e=c(f);e&&g(e)}o&&(o.style.left=f.left+"px",o.style.top=f.top+"px",o.style.width=f.width+"px",o.style.height=f.height+"px")}else d.stop(),d=void 0}d=new b(a,{qpm:n.bpm,eventCallback:r}),d.start()},h.pauseAnimation=function(t){d&&(t?d.pause():d.start())},h.stopAnimation=function(){d&&(d.stop(),d=void 0)}}(),kt=h,kt}var _t,Pa;function Oe(){if(Pa)return _t;Pa=1;var b={};return b.cloneArray=function(h){for(var d=[],o=0;o<h.length;o++)d.push(Object.assign({},h[o]));return d},b.cloneHashOfHash=function(h){var d={};for(var o in h)h.hasOwnProperty(o)&&(d[o]=Object.assign({},h[o]));return d},b.cloneHashOfArrayOfHash=function(h){var d={};for(var o in h)h.hasOwnProperty(o)&&(d[o]=b.cloneArray(h[o]));return d},b.strip=function(h){return h.replace(/^\s+/,"").replace(/\s+$/,"")},b.startsWith=function(h,d){return h.indexOf(d)===0},b.endsWith=function(h,d){var o=h.length-d.length;return o>=0&&h.lastIndexOf(d)===o},b.last=function(h){return h.length===0?null:h[h.length-1]},_t=b,_t}var Tt,qa;function pa(){if(qa)return Tt;qa=1;var b=Oe(),h={};return function(){var d,o,t,a,n;h.initialize=function(k,T,S,O,G){d=k,o=T,t=S,a=O,n=G,l()};function l(){t.annotationfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},t.gchordfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},t.historyfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},t.infofont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},t.measurefont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},t.partsfont={face:'"Times New Roman"',size:15,weight:"normal",style:"normal",decoration:"none"},t.repeatfont={face:'"Times New Roman"',size:13,weight:"normal",style:"normal",decoration:"none"},t.textfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},t.tripletfont={face:"Times",size:11,weight:"normal",style:"italic",decoration:"none"},t.vocalfont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},t.wordsfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},a.formatting.composerfont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},a.formatting.subtitlefont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},a.formatting.tempofont={face:'"Times New Roman"',size:15,weight:"bold",style:"normal",decoration:"none"},a.formatting.titlefont={face:'"Times New Roman"',size:20,weight:"normal",style:"normal",decoration:"none"},a.formatting.footerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},a.formatting.headerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},a.formatting.voicefont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},a.formatting.tablabelfont={face:'"Trebuchet MS"',size:16,weight:"normal",style:"normal",decoration:"none"},a.formatting.tabnumberfont={face:'"Arial"',size:11,weight:"normal",style:"normal",decoration:"none"},a.formatting.tabgracefont={face:'"Arial"',size:8,weight:"normal",style:"normal",decoration:"none"},a.formatting.annotationfont=t.annotationfont,a.formatting.gchordfont=t.gchordfont,a.formatting.historyfont=t.historyfont,a.formatting.infofont=t.infofont,a.formatting.measurefont=t.measurefont,a.formatting.partsfont=t.partsfont,a.formatting.repeatfont=t.repeatfont,a.formatting.textfont=t.textfont,a.formatting.tripletfont=t.tripletfont,a.formatting.vocalfont=t.vocalfont,a.formatting.wordsfont=t.wordsfont}var u={gchordfont:!0,measurefont:!0,partsfont:!0,annotationfont:!0,composerfont:!0,historyfont:!0,infofont:!0,subtitlefont:!0,textfont:!0,titlefont:!0,voicefont:!0},m=function(k){switch(k){case"Arial-Italic":return{face:"Arial",weight:"normal",style:"italic",decoration:"none"};case"Arial-Bold":return{face:"Arial",weight:"bold",style:"normal",decoration:"none"};case"Bookman-Demi":return{face:"Bookman,serif",weight:"bold",style:"normal",decoration:"none"};case"Bookman-DemiItalic":return{face:"Bookman,serif",weight:"bold",style:"italic",decoration:"none"};case"Bookman-Light":return{face:"Bookman,serif",weight:"normal",style:"normal",decoration:"none"};case"Bookman-LightItalic":return{face:"Bookman,serif",weight:"normal",style:"italic",decoration:"none"};case"Courier":return{face:'"Courier New"',weight:"normal",style:"normal",decoration:"none"};case"Courier-Oblique":return{face:'"Courier New"',weight:"normal",style:"italic",decoration:"none"};case"Courier-Bold":return{face:'"Courier New"',weight:"bold",style:"normal",decoration:"none"};case"Courier-BoldOblique":return{face:'"Courier New"',weight:"bold",style:"italic",decoration:"none"};case"AvantGarde-Book":return{face:"AvantGarde,Arial",weight:"normal",style:"normal",decoration:"none"};case"AvantGarde-BookOblique":return{face:"AvantGarde,Arial",weight:"normal",style:"italic",decoration:"none"};case"AvantGarde-Demi":case"Avant-Garde-Demi":return{face:"AvantGarde,Arial",weight:"bold",style:"normal",decoration:"none"};case"AvantGarde-DemiOblique":return{face:"AvantGarde,Arial",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Oblique":return{face:"Helvetica",weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Bold":return{face:"Helvetica",weight:"bold",style:"normal",decoration:"none"};case"Helvetica-BoldOblique":return{face:"Helvetica",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Narrow":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"normal",decoration:"none"};case"Helvetica-Narrow-Oblique":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Narrow-Bold":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"normal",decoration:"none"};case"Helvetica-Narrow-BoldOblique":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"italic",decoration:"none"};case"Palatino-Roman":return{face:"Palatino",weight:"normal",style:"normal",decoration:"none"};case"Palatino-Italic":return{face:"Palatino",weight:"normal",style:"italic",decoration:"none"};case"Palatino-Bold":return{face:"Palatino",weight:"bold",style:"normal",decoration:"none"};case"Palatino-BoldItalic":return{face:"Palatino",weight:"bold",style:"italic",decoration:"none"};case"NewCenturySchlbk-Roman":return{face:'"New Century",serif',weight:"normal",style:"normal",decoration:"none"};case"NewCenturySchlbk-Italic":return{face:'"New Century",serif',weight:"normal",style:"italic",decoration:"none"};case"NewCenturySchlbk-Bold":return{face:'"New Century",serif',weight:"bold",style:"normal",decoration:"none"};case"NewCenturySchlbk-BoldItalic":return{face:'"New Century",serif',weight:"bold",style:"italic",decoration:"none"};case"Times":case"Times-Roman":case"Times-Narrow":case"Times-Courier":case"Times-New-Roman":return{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none"};case"Times-Italic":case"Times-Italics":return{face:'"Times New Roman"',weight:"normal",style:"italic",decoration:"none"};case"Times-Bold":return{face:'"Times New Roman"',weight:"bold",style:"normal",decoration:"none"};case"Times-BoldItalic":return{face:'"Times New Roman"',weight:"bold",style:"italic",decoration:"none"};case"ZapfChancery-MediumItalic":return{face:'"Zapf Chancery",cursive,serif',weight:"normal",style:"normal",decoration:"none"};default:return null}},y=function(k,T,S,O,G){function W(){var ue=parseInt(k[0].token);return k.shift(),T?k.length===0?{face:T.face,weight:T.weight,style:T.style,decoration:T.decoration,size:ue}:k.length===1&&k[0].token==="box"&&u[G]?{face:T.face,weight:T.weight,style:T.style,decoration:T.decoration,size:ue,box:!0}:(o("Extra parameters in font definition.",S,O),{face:T.face,weight:T.weight,style:T.style,decoration:T.decoration,size:ue}):(o("Can't set just the size of the font since there is no default value.",S,O),{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none",size:ue})}if(k[0].token==="*"){if(k.shift(),k[0].type==="number")return W();o("Expected font size number after *.",S,O)}if(k[0].type==="number")return W();for(var Y=[],K,ee="normal",$="normal",ne="none",ie=!1,Q="face",se=!1;k.length;){var te=k.shift(),J=te.token.toLowerCase();switch(Q){case"face":se||J!=="utf"&&te.type!=="number"&&J!=="bold"&&J!=="italic"&&J!=="underline"&&J!=="box"?Y.length>0&&te.token==="-"?(se=!0,Y[Y.length-1]=Y[Y.length-1]+te.token):se?(se=!1,Y[Y.length-1]=Y[Y.length-1]+te.token):Y.push(te.token):te.type==="number"?(K?o("Font size specified twice in font definition.",S,O):K=te.token,Q="modifier"):J==="bold"?ee="bold":J==="italic"?$="italic":J==="underline"?ne="underline":J==="box"?(u[G]?ie=!0:o(`This font style doesn't support "box"`,S,O),Q="finished"):J==="utf"?(te=k.shift(),Q="size"):o("Unknown parameter "+te.token+" in font definition.",S,O);break;case"size":te.type==="number"?K?o("Font size specified twice in font definition.",S,O):K=te.token:o("Expected font size in font definition.",S,O),Q="modifier";break;case"modifier":J==="bold"?ee="bold":J==="italic"?$="italic":J==="underline"?ne="underline":J==="box"?(u[G]?ie=!0:o(`This font style doesn't support "box"`,S,O),Q="finished"):o("Unknown parameter "+te.token+" in font definition.",S,O);break;case"finished":o('Extra characters found after "box" in font definition.',S,O);break}}K===void 0?T?K=T.size:(o("Must specify the size of the font since there is no default value.",S,O),K=12):K=parseFloat(K),Y=Y.join(" "),Y===""&&(T?Y=T.face:(o("Must specify the name of the font since there is no default value.",S,O),Y="sans-serif"));var ve=m(Y),fe={};return ve?(fe.face=ve.face,fe.weight=ve.weight,fe.style=ve.style,fe.decoration=ve.decoration,fe.size=K,ie&&(fe.box=!0),fe):(fe.face=Y,fe.weight=ee,fe.style=$,fe.decoration=ne,fe.size=K,ie&&(fe.box=!0),fe)},g=function(k,T,S){return T.length===0?'Directive "'+k+'" requires a font as a parameter.':(t[k]=y(T,t[k],S,0,k),t.is_in_header&&(a.formatting[k]=t[k]),null)},c=function(k,T,S){return T.length===0?'Directive "'+k+'" requires a font as a parameter.':(a.formatting[k]=y(T,a.formatting[k],S,0,k),null)},r=function(k,T){var S="";T.forEach(function(G){S+=G.token});var O=parseFloat(S);if(isNaN(O)||O===0)return'Directive "'+k+'" requires a number as a parameter.';a.formatting.scale=O},f=["acoustic-bass-drum","bass-drum-1","side-stick","acoustic-snare","hand-clap","electric-snare","low-floor-tom","closed-hi-hat","high-floor-tom","pedal-hi-hat","low-tom","open-hi-hat","low-mid-tom","hi-mid-tom","crash-cymbal-1","high-tom","ride-cymbal-1","chinese-cymbal","ride-bell","tambourine","splash-cymbal","cowbell","crash-cymbal-2","vibraslap","ride-cymbal-2","hi-bongo","low-bongo","mute-hi-conga","open-hi-conga","low-conga","high-timbale","low-timbale","high-agogo","low-agogo","cabasa","maracas","short-whistle","long-whistle","short-guiro","long-guiro","claves","hi-wood-block","low-wood-block","mute-cuica","open-cuica","mute-triangle","open-triangle"],e=function(k){var T=k.split(/\s+/);if(T.length!==2&&T.length!==3)return{error:'Expected parameters "abc-note", "drum-sound", and optionally "note-head"'};var S=T[0],O=parseInt(T[1],10);if((isNaN(O)||O<35||O>81)&&T[1]&&(O=f.indexOf(T[1].toLowerCase())+35),isNaN(O)||O<35||O>81)return{error:'Expected drum name, received "'+T[1]+'"'};var G={sound:O};return T.length===3&&(G.noteHead=T[2]),{key:S,value:G}},p=function(k,T){var S=d.getMeasurement(T);return S.used===0||T.length!==0?{error:'Directive "'+k+'" requires a measurement as a parameter.'}:S.value},x=function(k,T){var S=d.getMeasurement(T);return S.used===0||T.length!==0?'Directive "'+k+'" requires a measurement as a parameter.':(a.formatting[k]=S.value,null)},w=function(k,T,S,O,G){if(S.length!==1||S[0].type!=="number")return'Directive "'+T+'" requires a number as a parameter.';var W=S[0].intt;return O!==void 0&&W<O?'Directive "'+T+'" requires a number greater than or equal to '+O+" as a parameter.":G!==void 0&&W>G?'Directive "'+T+'" requires a number less than or equal to '+G+" as a parameter.":(t[k]=W,null)},_=function(k,T,S){if(S.length===1&&(S[0].token==="true"||S[0].token==="false"))return t[k]=S[0].token==="true",null;var O=w(k,T,S,0,1);return O!==null?O:(t[k]=t[k]===1,null)},E=function(k,T,S,O){if(S.length!==1)return'Directive "'+T+'" requires one of [ '+O.join(", ")+" ] as a parameter.";for(var G=S[0].token,W=!1,Y=0;!W&&Y<O.length;Y++)O[Y]===G&&(W=!0);return W?(t[k]=G,null):'Directive "'+T+'" requires one of [ '+O.join(", ")+" ] as a parameter."},N=["nobarlines","barlines","beataccents","nobeataccents","droneon","droneoff","drumon","drumoff","fermatafixed","fermataproportional","gchordon","gchordoff","controlcombo","temperamentnormal","noportamento"],I=["gchord","ptstress","beatstring"],R=["bassvol","chordvol","c","channel","beatmod","deltaloudness","drumbars","gracedivider","makechordchannels","randomchordattack","chordattack","stressmodel","transpose","rtranspose","vol","volinc","gchordbars"],C=["program"],B=["ratio","snt","bendvelocity","pitchbend","control","temperamentlinear"],q=["beat"],L=["drone"],D=["portamento"],P=["expand","grace","trim"],M=["drum","chordname"],A=["bassprog","chordprog"],F=function(k,T,S){var O=k.shift().token,G=[];if(N.indexOf(O)>=0)k.length!==0&&o("Unexpected parameter in MIDI "+O,S,0);else if(I.indexOf(O)>=0)k.length!==1?o("Expected one parameter in MIDI "+O,S,0):G.push(k[0].token);else if(R.indexOf(O)>=0)k.length!==1?o("Expected one parameter in MIDI "+O,S,0):k[0].type!=="number"?o("Expected one integer parameter in MIDI "+O,S,0):G.push(k[0].intt);else if(C.indexOf(O)>=0)k.length!==1&&k.length!==2?o("Expected one or two parameters in MIDI "+O,S,0):k[0].type!=="number"||k.length===2&&k[1].type!=="number"?o("Expected integer parameter in MIDI "+O,S,0):(G.push(k[0].intt),k.length===2&&G.push(k[1].intt));else if(B.indexOf(O)>=0)k.length!==2?o("Expected two parameters in MIDI "+O,S,0):k[0].type!=="number"||k[1].type!=="number"?o("Expected two integer parameters in MIDI "+O,S,0):(G.push(k[0].intt),G.push(k[1].intt));else if(D.indexOf(O)>=0)k.length!==2?o("Expected two parameters in MIDI "+O,S,0):k[0].type!=="alpha"||k[1].type!=="number"?o("Expected one string and one integer parameters in MIDI "+O,S,0):(G.push(k[0].token),G.push(k[1].intt));else if(O==="drummap")k.length===2&&k[0].type==="alpha"&&k[1].type==="number"?(T.formatting||(T.formatting={}),T.formatting.midi||(T.formatting.midi={}),T.formatting.midi.drummap||(T.formatting.midi.drummap={}),T.formatting.midi.drummap[k[0].token]=k[1].intt,G=T.formatting.midi.drummap):k.length===3&&k[0].type==="punct"&&k[1].type==="alpha"&&k[2].type==="number"?(T.formatting||(T.formatting={}),T.formatting.midi||(T.formatting.midi={}),T.formatting.midi.drummap||(T.formatting.midi.drummap={}),T.formatting.midi.drummap[k[0].token+k[1].token]=k[2].intt,G=T.formatting.midi.drummap):o("Expected one note name and one integer parameter in MIDI "+O,S,0);else if(P.indexOf(O)>=0)k.length!==3||k[0].type!=="number"||k[1].token!=="/"||k[2].type!=="number"?o("Expected fraction parameter in MIDI "+O,S,0):(G.push(k[0].intt),G.push(k[2].intt));else if(q.indexOf(O)>=0)k.length!==4?o("Expected four parameters in MIDI "+O,S,0):k[0].type!=="number"||k[1].type!=="number"||k[2].type!=="number"||k[3].type!=="number"?o("Expected four integer parameters in MIDI "+O,S,0):(G.push(k[0].intt),G.push(k[1].intt),G.push(k[2].intt),G.push(k[3].intt));else if(L.indexOf(O)>=0)k.length!==5?o("Expected five parameters in MIDI "+O,S,0):k[0].type!=="number"||k[1].type!=="number"||k[2].type!=="number"||k[3].type!=="number"||k[4].type!=="number"?o("Expected five integer parameters in MIDI "+O,S,0):(G.push(k[0].intt),G.push(k[1].intt),G.push(k[2].intt),G.push(k[3].intt),G.push(k[4].intt));else if(C.indexOf(O)>=0)k.length!==1||k.length!==4?o("Expected one or two parameters in MIDI "+O,S,0):k[0].type!=="number"?o("Expected integer parameter in MIDI "+O,S,0):k.length===4?(k[1].token!=="octave"&&o("Expected octave parameter in MIDI "+O,S,0),k[2].token!=="="&&o("Expected octave parameter in MIDI "+O,S,0),k[3].type!=="number"&&o("Expected integer parameter for octave in MIDI "+O,S,0)):(G.push(k[0].intt),k.length===4&&G.push(k[3].intt));else if(M.indexOf(O)>=0)if(k.length<2)o("Expected string parameter and at least one integer parameter in MIDI "+O,S,0);else if(k[0].type!=="alpha")o("Expected string parameter and at least one integer parameter in MIDI "+O,S,0);else{var W=k.shift();for(G.push(W.token);k.length>0;)W=k.shift(),W.type!=="number"&&o("Expected integer parameter in MIDI "+O,S,0),G.push(W.intt)}else if(A.indexOf(O)>=0){if(k.length!==1&&k.length!==2)o("Expected one or two parameters in MIDI "+O,S,0);else if(k[0].type!=="number")o("Expected integer parameter in MIDI "+O,S,0);else if(k.length===2&&k[1].type!=="alpha")o("Expected alpha parameter in MIDI "+O,S,0);else if(G.push(k[0].intt),k.length===2){var Y=k[1].token;Y.indexOf("octave=")!=-1?(Y=Y.replace("octave=",""),Y=parseInt(Y),isNaN(Y)?o("Expected octave value in MIDI"+O):(Y<-1&&(o("Expected octave= in MIDI "+O+" to be >= -1 (recv:"+Y+")"),Y=-1),Y>3&&(o("Expected octave= in MIDI "+O+" to be <= 3 (recv:"+Y+")"),Y=3),G.push(Y))):o("Expected octave= in MIDI"+O)}}n.hasBeginMusic()?n.appendElement("midi",-1,-1,{cmd:O,params:G}):(T.formatting.midi===void 0&&(T.formatting.midi={}),T.formatting.midi[O]=G)};h.parseFontChangeLine=function(k){k=k.replace(/\$\$/g,"");var T=k.split("$");if(T.length>1&&t.setfont){var S=[];T[0]!==""&&S.push({text:T[0]});for(var O=1;O<T.length;O++)if(T[O][0]==="0")S.push({text:T[O].substring(1).replace(/\x03/g,"$$")});else{var G=parseInt(T[O][0],10);t.setfont[G]?S.push({font:t.setfont[G],text:T[O].substring(1).replace(/\x03/g,"$$")}):S[S.length-1].text+="$"+T[O].replace(/\x03/g,"$$")}return S}return k.replace(/\x03/g,"$$")};var z=["auto","above","below","hidden"];h.addDirective=function(k){var T=d.tokenize(k,0,k.length);if(T.length===0||T[0].type!=="alpha")return null;var S=k.substring(k.indexOf(T[0].token)+T[0].token.length);S=d.stripComment(S);var O=T.shift().token.toLowerCase(),G="",W;switch(O){case"bagpipes":a.formatting.bagpipes=!0;break;case"flatbeams":a.formatting.flatbeams=!0;break;case"jazzchords":a.formatting.jazzchords=!0;break;case"accentAbove":a.formatting.accentAbove=!0;break;case"germanAlphabet":a.formatting.germanAlphabet=!0;break;case"landscape":t.landscape=!0;break;case"papersize":t.papersize=S;break;case"graceslurs":if(T.length!==1)return"Directive graceslurs requires one parameter: 0 or 1";if(T[0].token==="0"||T[0].token==="false")a.formatting.graceSlurs=!1;else if(T[0].token==="1"||T[0].token==="true")a.formatting.graceSlurs=!0;else return"Directive graceslurs requires one parameter: 0 or 1 (received "+T[0].token+")";break;case"lineThickness":var Y=H(T);if(Y.value!==void 0&&(a.formatting.lineThickness=Y.value),Y.error)return Y.error;break;case"stretchlast":var K=H(T);if(K.value!==void 0&&(a.formatting.stretchlast=K.value),K.error)return K.error;break;case"titlecaps":t.titlecaps=!0;break;case"titleleft":a.formatting.titleleft=!0;break;case"measurebox":a.formatting.measurebox=!0;break;case"vocal":return E("vocalPosition",O,T,z);case"dynamic":return E("dynamicPosition",O,T,z);case"gchord":return E("chordPosition",O,T,z);case"ornament":return E("ornamentPosition",O,T,z);case"volume":return E("volumePosition",O,T,z);case"botmargin":case"botspace":case"composerspace":case"indent":case"leftmargin":case"linesep":case"musicspace":case"partsspace":case"pageheight":case"pagewidth":case"rightmargin":case"stafftopmargin":case"staffsep":case"staffwidth":case"subtitlespace":case"sysstaffsep":case"systemsep":case"textspace":case"titlespace":case"topmargin":case"topspace":case"vocalspace":case"wordsspace":return x(O,T);case"voicescale":if(T.length!==1||T[0].type!=="number")return"voicescale requires one float as a parameter";var ee=T.shift();return t.currentVoice&&(t.currentVoice.scale=ee.floatt,n.changeVoiceScale(t.currentVoice.scale)),null;case"voicecolor":if(T.length!==1)return"voicecolor requires one string as a parameter";var $=T.shift();return t.currentVoice&&(t.currentVoice.color=$.token,n.changeVoiceColor(t.currentVoice.color)),null;case"vskip":var ne=Math.round(p(O,T));return ne.error?ne.error:(n.addSpacing(ne),null);case"scale":r(O,T);break;case"sep":if(T.length===0)n.addSeparator(14,14,85,{startChar:t.iChar,endChar:t.iChar+5});else{var ie=d.getMeasurement(T);if(ie.used===0)return'Directive "'+O+'" requires 3 numbers: space above, space below, length of line';var Q=ie.value;if(ie=d.getMeasurement(T),ie.used===0)return'Directive "'+O+'" requires 3 numbers: space above, space below, length of line';var se=ie.value;if(ie=d.getMeasurement(T),ie.used===0||T.length!==0)return'Directive "'+O+'" requires 3 numbers: space above, space below, length of line';var te=ie.value;n.addSeparator(Q,se,te,{startChar:t.iChar,endChar:t.iChar+S.length})}break;case"barsperstaff":if(G=w("barsperstaff",O,T),G!==null)return G;break;case"staffnonote":if(T.length!==1)return"Directive staffnonote requires one parameter: 0 or 1";if(T[0].token==="0")t.staffnonote=!0;else if(T[0].token==="1")t.staffnonote=!1;else return"Directive staffnonote requires one parameter: 0 or 1 (received "+T[0].token+")";break;case"printtempo":if(G=_("printTempo",O,T),G!==null)return G;break;case"partsbox":if(G=_("partsBox",O,T),G!==null)return G;t.partsfont.box=t.partsBox;break;case"freegchord":if(G=_("freegchord",O,T),G!==null)return G;break;case"measurenb":case"barnumbers":if(G=w("barNumbers",O,T),G!==null)return G;break;case"setbarnb":if(T.length!==1||T[0].type!=="number")return"Directive setbarnb requires a number as a parameter.";t.currBarNumber=n.setBarNumberImmediate(T[0].intt);break;case"begintext":var J="";for(W=d.nextLine();W&&W.indexOf("%%endtext")!==0;)b.startsWith(W,"%%")?J+=W.substring(2)+`
`:J+=W+`
`,W=d.nextLine();n.addText(J,{startChar:t.iChar,endChar:t.iChar+J.length+7});break;case"continueall":t.continueall=!0;break;case"beginps":for(W=d.nextLine();W&&W.indexOf("%%endps")!==0;)d.nextLine();o("Postscript ignored",k,0);break;case"deco":S.length>0&&t.ignoredDecorations.push(S.substring(0,S.indexOf(" "))),o("Decoration redefinition ignored",k,0);break;case"text":var ve=d.translateString(S);n.addText(h.parseFontChangeLine(ve),{startChar:t.iChar,endChar:t.iChar+S.length+7});break;case"center":var fe=d.translateString(S);n.addCentered(h.parseFontChangeLine(fe));break;case"font":break;case"setfont":var ue=d.tokenize(S,0,S.length);if(ue.length>=4&&ue[0].token==="-"&&ue[1].type==="number"){var de=parseInt(ue[1].token);de>=1&&de<=9&&(t.setfont||(t.setfont=[]),ue.shift(),ue.shift(),t.setfont[de]=y(ue,t.setfont[de],k,0,"setfont"))}break;case"gchordfont":case"partsfont":case"tripletfont":case"vocalfont":case"textfont":case"annotationfont":case"historyfont":case"infofont":case"measurefont":case"repeatfont":case"wordsfont":return g(O,T,k);case"composerfont":case"subtitlefont":case"tempofont":case"titlefont":case"voicefont":case"footerfont":case"headerfont":return c(O,T,k);case"barlabelfont":case"barnumberfont":case"barnumfont":return g("measurefont",T,k);case"staves":case"score":t.score_is_present=!0;for(var we=function(Te,Ke,Qe,Je,Ze){(Ke||t.staves.length===0)&&t.staves.push({index:t.staves.length,numVoices:0});var Be=b.last(t.staves);Qe!==void 0&&Be.bracket===void 0&&(Be.bracket=Qe),Je!==void 0&&Be.brace===void 0&&(Be.brace=Je),Ze&&(Be.connectBarLines="end"),t.voices[Te]===void 0&&(t.voices[Te]={staffNum:Be.index,index:Be.numVoices},Be.numVoices++)},me=!1,V=!1,j=!1,X=!1,U=!1,Z=!1,ae=!1,ce,he=function(){if(ae=!0,ce){var Te="start";ce.staffNum>0&&(t.staves[ce.staffNum-1].connectBarLines==="start"||t.staves[ce.staffNum-1].connectBarLines==="continue")&&(Te="continue"),t.staves[ce.staffNum].connectBarLines=Te}};T.length;){var re=T.shift();switch(re.token){case"(":me?o("Can't nest parenthesis in %%score",k,re.start):(me=!0,X=!0);break;case")":!me||X?o("Unexpected close parenthesis in %%score",k,re.start):me=!1;break;case"[":V?o("Can't nest brackets in %%score",k,re.start):(V=!0,U=!0);break;case"]":!V||U?o("Unexpected close bracket in %%score",k,re.start):(V=!1,t.staves[ce.staffNum].bracket="end");break;case"{":j?o("Can't nest braces in %%score",k,re.start):(j=!0,Z=!0);break;case"}":!j||Z?o("Unexpected close brace in %%score",k,re.start):(j=!1,t.staves[ce.staffNum].brace="end");break;case"|":he();break;default:for(var oe="";(re.type==="alpha"||re.type==="number")&&(oe+=re.token,re.continueId);)re=T.shift();var xe=!me||X,ye=U?"start":V?"continue":void 0,le=Z?"start":j?"continue":void 0;we(oe,xe,ye,le,ae),X=!1,U=!1,Z=!1,ae=!1,ce=t.voices[oe],O==="staves"&&he();break}}break;case"newpage":var ge=d.getInt(S);n.addNewPage(ge.digits===0?-1:ge.value);break;case"abc":var Ae=S.split(" ");switch(Ae[0]){case"-copyright":case"-creator":case"-edited-by":case"-version":case"-charset":var pe=Ae.shift();n.addMetaText(O+pe,Ae.join(" "),{startChar:t.iChar,endChar:t.iChar+S.length+5});break;default:return"Unknown directive: "+O+Ae[0]}break;case"header":case"footer":var be=d.getMeat(S,0,S.length);be=S.substring(be.start,be.end),be[0]==='"'&&be[be.length-1]==='"'&&(be=be.substring(1,be.length-1));var Me=be.split("	"),Ie={};Me.length===1?Ie={left:"",center:Me[0],right:""}:Me.length===2?Ie={left:Me[0],center:Me[1],right:""}:Ie={left:Me[0],center:Me[1],right:Me[2]},Me.length>3&&o("Too many tabs in "+O+": "+Me.length+" found.",S,0),n.addMetaTextObj(O,Ie,{startChar:t.iChar,endChar:t.iChar+k.length});break;case"midi":var Ce=d.tokenize(S,0,S.length,!0);Ce.length>0&&Ce[0].token==="="&&Ce.shift(),Ce.length===0?o("Expected midi command",S,0):F(Ce,a,S);break;case"percmap":var Le=e(S);Le.error?o(Le.error,k,8):(a.formatting.percmap||(a.formatting.percmap={}),a.formatting.percmap[Le.key]=Le.value);break;case"map":case"playtempo":case"auquality":case"continuous":case"nobarcheck":a.formatting[O]=S;break;default:return"Unknown directive: "+O}return null},h.globalFormatting=function(k){for(var T in k)if(k.hasOwnProperty(T)){var S=""+k[T],O=d.tokenize(S,0,S.length),G;switch(T){case"titlefont":case"gchordfont":case"composerfont":case"footerfont":case"headerfont":case"historyfont":case"infofont":case"measurefont":case"partsfont":case"repeatfont":case"subtitlefont":case"tempofont":case"textfont":case"voicefont":case"tripletfont":case"vocalfont":case"wordsfont":case"annotationfont":case"tablabelfont":case"tabnumberfont":case"tabgracefont":g(T,O,S);break;case"scale":r(T,O);break;case"partsbox":G=_("partsBox",T,O),G!==null&&o(G),t.partsfont.box=t.partsBox;break;case"freegchord":G=_("freegchord",T,O),G!==null&&o(G);break;case"fontboxpadding":(O.length!==1||O[0].type!=="number")&&o('Directive "'+T+'" requires a number as a parameter.'),a.formatting.fontboxpadding=O[0].floatt;break;case"stafftopmargin":(O.length!==1||O[0].type!=="number")&&o('Directive "'+T+'" requires a number as a parameter.'),a.formatting.stafftopmargin=O[0].floatt;break;case"stretchlast":var W=H(O);if(W.value!==void 0&&(a.formatting.stretchlast=W.value),W.error)return W.error;break;default:o("Formatting directive unrecognized: ",T,0)}}};function H(k){if(k.length===0)return{value:1};if(k.length===1)if(k[0].type==="number"){if(k[0].floatt>=0||k[0].floatt<=1)return{value:k[0].floatt}}else{if(k[0].token==="false")return{value:0};if(k[0].token==="true")return{value:1}}return{error:"Directive stretchlast requires zero or one parameter: false, true, or number between 0 and 1 (received "+k[0].token+")"}}}(),Tt=h,Tt}var St,Da;function Ko(){if(Da)return St;Da=1;var b={};const h=["C,,,","D,,,","E,,,","F,,,","G,,,","A,,,","B,,,","C,,","D,,","E,,","F,,","G,,","A,,","B,,","C,","D,","E,","F,","G,","A,","B,","C","D","E","F","G","A","B","c","d","e","f","g","a","b","c'","d'","e'","f'","g'","a'","b'","c''","d''","e''","f''","g''","a''","b''","c'''","d'''","e'''","f'''","g'''","a'''","b'''"];return b.pitchIndex=function(d){return h.indexOf(d)},b.noteName=function(d){return h[d]},St=b,St}var Et,Fa;function qs(){if(Fa)return Et;Fa=1;var b=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],h=["C","D♭","D","E♭","E","F","G♭","G","A♭","A","B♭","B"],d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function t(a,n,l,u){if(!n||n%12===0)return a;for(;n<0;)n+=12;n>11&&(n=n%12);var m=a.match(/^([A-G][b#♭♯]?)([^\/]+)?\/?([A-G][b#♭♯]?)?(.+)?/);if(!m)return a;var y=m[1],g=m[2],c=m[3],r=m[4],f=b.indexOf(y);if(f<0&&(f=h.indexOf(y)),f<0&&(f=d.indexOf(y)),f<0&&(f=o.indexOf(y)),f<0)return a;if(f+=n,f=f%12,l?u?a=o[f]:a=h[f]:u?a=d[f]:a=b[f],g&&(a+=g),c){var f=b.indexOf(c);f<0&&(f=h.indexOf(c)),f<0&&(f=d.indexOf(c)),f<0&&(f=o.indexOf(c)),a+="/",f>=0?(f+=n,f=f%12,l?u?a+=o[f]:a+=h[f]:u?a+=d[f]:a+=b[f]):a+=c}return r&&(a+=r),a}return Et=t,Et}var At,Oa;function Ds(){if(Oa)return At;Oa=1;var b={C:{modes:["CMaj","Amin","Am","GMix","DDor","EPhr","FLyd","BLoc"],stepsFromC:0},Db:{modes:["DbMaj","Bbmin","Bbm","AbMix","EbDor","FPhr","GbLyd","CLoc"],stepsFromC:1},D:{modes:["DMaj","Bmin","Bm","AMix","EDor","F#Phr","GLyd","C#Loc"],stepsFromC:2},Eb:{modes:["EbMaj","Cmin","Cm","BbMix","FDor","GPhr","AbLyd","DLoc"],stepsFromC:3},E:{modes:["EMaj","C#min","C#m","BMix","F#Dor","G#Phr","ALyd","D#Loc"],stepsFromC:4},F:{modes:["FMaj","Dmin","Dm","CMix","GDor","APhr","BbLyd","ELoc"],stepsFromC:5},Gb:{modes:["GbMaj","Ebmin","Ebm","DbMix","AbDor","BbPhr","CbLyd","FLoc"],stepsFromC:6},G:{modes:["GMaj","Emin","Em","DMix","ADor","BPhr","CLyd","F#Loc"],stepsFromC:7},Ab:{modes:["AbMaj","Fmin","Fm","EbMix","BbDor","CPhr","DbLyd","GLoc"],stepsFromC:8},A:{modes:["AMaj","F#min","F#m","EMix","BDor","C#Phr","DLyd","G#Loc"],stepsFromC:9},Bb:{modes:["BbMaj","Gmin","Gm","FMix","CDor","DPhr","EbLyd","ALoc"],stepsFromC:10},B:{modes:["BMaj","G#min","G#m","F#Mix","C#Dor","D#Phr","ELyd","A#Loc"],stepsFromC:11},"C#":{modes:["C#Maj","A#min","A#m","G#Mix","D#Dor","E#Phr","F#Lyd","B#Loc"],stepsFromC:1},"F#":{modes:["F#Maj","D#min","D#m","C#Mix","G#Dor","A#Phr","BLyd","E#Loc"],stepsFromC:6},Cb:{modes:["CbMaj","Abmin","Abm","GbMix","DbDor","EbPhr","FbLyd","BbLoc"],stepsFromC:11}},h=null;function d(){h={};for(var n=Object.keys(b),l=0;l<n.length;l++){var u=b[n[l]];h[n[l].toLowerCase()]=n[l];for(var m=0;m<u.modes.length;m++){var y=u.modes[m].toLowerCase();h[y]=n[l]}}}function o(n){h||d();var l=n.toLowerCase().match(/([a-g][b#]?)(maj|min|mix|dor|phr|lyd|loc|m)?/);if(!l||!l[2])return n;l=l[1]+l[2];var u=h[l];return u||n}function t(n,l){var u=b[n];if(!u||l==="")return n;var m=l.toLowerCase().match(/^(maj|min|mix|dor|phr|lyd|loc|m)/);if(!m)return n;for(var y=m[1],g=0;g<u.modes.length;g++){var c=u.modes[g],r=c.toLowerCase().indexOf(y);if(r!==-1&&r===c.length-y.length)return c.substring(0,c.length-y.length)}return n}function a(n,l){var u=b[n];if(!u)return n;for(;l<0;)l+=12;for(var m=(u.stepsFromC+l)%12,y=0;y<Object.keys(b).length;y++){var g=Object.keys(b)[y];if(b[g].stepsFromC===m)return g}return n}return At={relativeMajor:o,relativeMode:t,transposeKey:a},At}var Mt,Ia;function Fs(){if(Ia)return Mt;Ia=1;var{relativeMajor:b}=Ds(),h={acc:"sharp",note:"f"},d={acc:"sharp",note:"c"},o={acc:"sharp",note:"g"},t={acc:"sharp",note:"d"},a={acc:"sharp",note:"A"},n={acc:"sharp",note:"e"},l={acc:"sharp",note:"B"},u={acc:"flat",note:"B"},m={acc:"flat",note:"e"},y={acc:"flat",note:"A"},g={acc:"flat",note:"d"},c={acc:"flat",note:"G"},r={acc:"flat",note:"c"},f={acc:"flat",note:"F"},e={"C#":[h,d,o,t,a,n,l],"F#":[h,d,o,t,a,n],B:[h,d,o,t,a],E:[h,d,o,t],A:[h,d,o],D:[h,d],G:[h],C:[],F:[u],Bb:[u,m],Eb:[u,m,y],Cm:[u,m,y],Ab:[u,m,y,g],Db:[u,m,y,g,c],Gb:[u,m,y,g,c,r],Cb:[u,m,y,g,c,r,f],"A#":[u,m],"B#":[],"D#":[u,m,y],"E#":[u],"G#":[u,m,y,g],none:[]};function p(x){var w=e[b(x)];return w?JSON.parse(JSON.stringify(w)):null}return Mt=p,Mt}var Nt,Ra;function Os(){if(Ra)return Nt;Ra=1;var b=Ko(),h=qs(),d=Fs(),o={},t={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},a=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],n=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"];o.keySignature=function(c,r,f,e,p){if(c.clef.type==="perc"||c.clef.type==="none")return{accidentals:d(r),root:f,acc:e};p||(p=0),c.localTransposeVerticalMovement=0,c.localTransposePreferFlats=!1;var x=d(r);if(!x)return c.key;if(c.localTranspose=(c.globalTranspose?c.globalTranspose:0)+p,!c.localTranspose)return{accidentals:x,root:f,acc:e};if(c.globalTransposeOrigKeySig=x,c.localTranspose%12===0)return c.localTransposeVerticalMovement=c.localTranspose/12*7,{accidentals:x,root:f,acc:e};var w=r[0];r[1]==="b"||r[1]==="#"?(w+=r[1],r=r.substr(2)):r=r.substr(1);var _=t[w],E=_!==void 0;E||(_=0,w="C",r="");for(var N=_+c.localTranspose;N<0;)N+=12;N>11&&(N=N%12);var I=r[0]==="m"?n[N]:a[N],R=I+r,C=d(R);C.length>0&&C[0].acc==="flat"&&(c.localTransposePreferFlats=!0);var B=R.charCodeAt(0)-w.charCodeAt(0);return c.localTranspose>0?(B<0||B===0&&(w[1]==="#"||R[1]==="b"))&&(B+=7):c.localTranspose<0&&(B>0||B===0&&(w[1]==="b"||R[1]==="#"))&&(B-=7),c.localTranspose>0?c.localTransposeVerticalMovement=B+Math.floor(c.localTranspose/12)*7:c.localTransposeVerticalMovement=B+Math.ceil(c.localTranspose/12)*7,E?{accidentals:C,root:I[0],acc:I.length>1?I[1]:""}:{accidentals:[],root:f,acc:e}},o.chordName=function(c,r){return h(r,c.localTranspose,c.localTransposePreferFlats,c.freegchord)};var l=["c","d","e","f","g","a","b"];function u(c,r,f,e,p){for(var x=l[(c+49)%7],w=0,_=0;_<e.length;_++)e[_].note.toLowerCase()===x&&(w=m[e[_].acc]);for(var E=m[f],N=E-w,I=l[(r+49)%7],R=0,C=0;C<p.accidentals.length;C++)p.accidentals[C].note.toLowerCase()===I&&(R=m[p.accidentals[C].acc]);var B=N+R;return B<-2&&(r--,B+=I==="c"||I==="f"?1:2),B>2&&(r++,B-=I==="b"||I==="e"?1:2),[r,B]}var m={dblflat:-2,flat:-1,natural:0,sharp:1,dblsharp:2},y={"-2":"dblflat","-1":"flat",0:"natural",1:"sharp",2:"dblsharp"},g={"-2":"__","-1":"_",0:"=",1:"^",2:"^^"};return o.note=function(c,r){if(!(!c.localTranspose||c.clef.type==="perc")){var f=r.pitch;if(c.localTransposeVerticalMovement&&(r.pitch=r.pitch+c.localTransposeVerticalMovement,r.name)){var e=r.accidental?r.name.substring(1):r.name,p=r.accidental?r.name[0]:"",x=b.pitchIndex(e);r.name=p+b.noteName(x+c.localTransposeVerticalMovement)}if(r.accidental){var w=u(f,r.pitch,r.accidental,c.globalTransposeOrigKeySig,c.targetKey);r.pitch=w[0],r.accidental=y[w[1]],r.name&&(r.name=g[w[1]]+r.name.replace(/[_^=]/g,""))}}},Nt=o,Nt}var Bt,Ha;function va(){if(Ha)return Bt;Ha=1;var b=pa(),h=Os(),d={};return function(){var o,t,a,n;d.initialize=function(r,f,e,p,x){o=r,t=f,a=e,n=x},d.standardKey=function(r,f,e,p){return h.keySignature(a,r,f,e,p)};var l={treble:{clef:"treble",pitch:4,mid:0},"treble+8":{clef:"treble+8",pitch:4,mid:0},"treble-8":{clef:"treble-8",pitch:4,mid:0},"treble^8":{clef:"treble+8",pitch:4,mid:0},treble_8:{clef:"treble-8",pitch:4,mid:0},treble1:{clef:"treble",pitch:2,mid:2},treble2:{clef:"treble",pitch:4,mid:0},treble3:{clef:"treble",pitch:6,mid:-2},treble4:{clef:"treble",pitch:8,mid:-4},treble5:{clef:"treble",pitch:10,mid:-6},perc:{clef:"perc",pitch:6,mid:0},none:{clef:"none",mid:0},bass:{clef:"bass",pitch:8,mid:-12},"bass+8":{clef:"bass+8",pitch:8,mid:-12},"bass-8":{clef:"bass-8",pitch:8,mid:-12},"bass^8":{clef:"bass+8",pitch:8,mid:-12},bass_8:{clef:"bass-8",pitch:8,mid:-12},"bass+16":{clef:"bass",pitch:8,mid:-12},"bass-16":{clef:"bass",pitch:8,mid:-12},"bass^16":{clef:"bass",pitch:8,mid:-12},bass_16:{clef:"bass",pitch:8,mid:-12},bass1:{clef:"bass",pitch:2,mid:-6},bass2:{clef:"bass",pitch:4,mid:-8},bass3:{clef:"bass",pitch:6,mid:-10},bass4:{clef:"bass",pitch:8,mid:-12},bass5:{clef:"bass",pitch:10,mid:-14},tenor:{clef:"alto",pitch:8,mid:-8},tenor1:{clef:"alto",pitch:2,mid:-2},tenor2:{clef:"alto",pitch:4,mid:-4},tenor3:{clef:"alto",pitch:6,mid:-6},tenor4:{clef:"alto",pitch:8,mid:-8},tenor5:{clef:"alto",pitch:10,mid:-10},alto:{clef:"alto",pitch:6,mid:-6},alto1:{clef:"alto",pitch:2,mid:-2},alto2:{clef:"alto",pitch:4,mid:-4},alto3:{clef:"alto",pitch:6,mid:-6},alto4:{clef:"alto",pitch:8,mid:-8},alto5:{clef:"alto",pitch:10,mid:-10},"alto+8":{clef:"alto+8",pitch:6,mid:-6},"alto-8":{clef:"alto-8",pitch:6,mid:-6},"alto^8":{clef:"alto+8",pitch:6,mid:-6},alto_8:{clef:"alto-8",pitch:6,mid:-6}},u=function(r,f){var e=l[r],p=e?e.mid:0;return p+f};d.fixClef=function(r){var f=l[r.type];f&&(r.clefPos=f.pitch,r.type=f.clef)},d.deepCopyKey=function(r){var f={accidentals:[],root:r.root,acc:r.acc,mode:r.mode};return r.accidentals.forEach(function(e){f.accidentals.push(Object.assign({},e))}),f};var m={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};d.addPosToKey=function(r,f){var e=r.verticalPos;f.accidentals.forEach(function(p){var x=m[p.note];x=x-e,p.verticalPos=x}),f.impliedNaturals&&f.impliedNaturals.forEach(function(p){var x=m[p.note];x=x-e,p.verticalPos=x}),e<-10?(f.accidentals.forEach(function(p){p.verticalPos-=7,(p.verticalPos>=11||p.verticalPos===10&&p.acc==="flat")&&(p.verticalPos-=7),p.note==="A"&&p.acc==="sharp"&&(p.verticalPos-=7),(p.note==="G"||p.note==="F")&&p.acc==="flat"&&(p.verticalPos-=7)}),f.impliedNaturals&&f.impliedNaturals.forEach(function(p){p.verticalPos-=7,(p.verticalPos>=11||p.verticalPos===10&&p.acc==="flat")&&(p.verticalPos-=7),p.note==="A"&&p.acc==="sharp"&&(p.verticalPos-=7),(p.note==="G"||p.note==="F")&&p.acc==="flat"&&(p.verticalPos-=7)})):e<-4?(f.accidentals.forEach(function(p){p.verticalPos-=7,e===-8&&(p.note==="f"||p.note==="g")&&p.acc==="sharp"&&(p.verticalPos-=7)}),f.impliedNaturals&&f.impliedNaturals.forEach(function(p){p.verticalPos-=7,e===-8&&(p.note==="f"||p.note==="g")&&p.acc==="sharp"&&(p.verticalPos-=7)})):e>=7&&(f.accidentals.forEach(function(p){p.verticalPos+=7}),f.impliedNaturals&&f.impliedNaturals.forEach(function(p){p.verticalPos+=7}))},d.fixKey=function(r,f){var e=Object.assign({},f);return d.addPosToKey(r,e),e};var y=function(r){var f=0,e=r[f++];(e==="^"||e==="_")&&(e=r[f++]);var p=m[e];for(p===void 0&&(p=6);f<r.length;f++)if(r[f]===",")p-=7;else if(r[f]==="'")p+=7;else break;return{mid:p-6,str:r.substring(f)}},g=function(r){for(var f=0;f<r.length;f++)r[f].note==="b"?r[f].note="B":r[f].note==="a"?r[f].note="A":r[f].note==="F"?r[f].note="f":r[f].note==="E"?r[f].note="e":r[f].note==="D"?r[f].note="d":r[f].note==="C"?r[f].note="c":r[f].note==="G"&&r[f].acc==="sharp"?r[f].note="g":r[f].note==="g"&&r[f].acc==="flat"&&(r[f].note="G")};d.parseKey=function(r,f){r.length===0&&(r="none");var e=o.tokenize(r,0,r.length),p={};if(e.length===0)return t("Must pass in key signature.",r,0),p;switch(e[0].token){case"HP":b.addDirective("bagpipes"),a.key={root:"HP",accidentals:[],acc:"",mode:""},p.foundKey=!0,e.shift();break;case"Hp":b.addDirective("bagpipes"),a.key={root:"Hp",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}],acc:"",mode:""},p.foundKey=!0,e.shift();break;case"none":a.key={root:"none",accidentals:[],acc:"",mode:""},p.foundKey=!0,e.shift();break;default:var x=o.getKeyPitch(e[0].token);if(x.len>0){p.foundKey=!0;var w="",_="";e[0].token.length>1?e[0].token=e[0].token.substring(1):e.shift();var E=x.token;if(e.length>0){var N=o.getSharpFlat(e[0].token);if(N.len>0&&(e[0].token.length>1?e[0].token=e[0].token.substring(1):e.shift(),E+=N.token,w=N.token),e.length>0){var I=o.getMode(e[0].token);I.len>0&&(e.shift(),E+=I.token,_=I.token)}if(d.standardKey(E,x.token,w,0)===void 0)return t("Unsupported key signature: "+E,r,0),p}var R=d.deepCopyKey(a.key),C=!f&&a.globalTranspose?-a.globalTranspose:0,B;if(f&&(B=a.globalTransposeOrigKeySig),a.key=d.deepCopyKey(d.standardKey(E,x.token,w,C)),f&&(a.globalTransposeOrigKeySig=B),a.key.mode=_,R){for(var q,L=0;L<a.key.accidentals.length;L++)for(q=0;q<R.accidentals.length;q++)R.accidentals[q].note&&a.key.accidentals[L].note.toLowerCase()===R.accidentals[q].note.toLowerCase()&&(R.accidentals[q].note=null);for(q=0;q<R.accidentals.length;q++)R.accidentals[q].note&&(a.key.impliedNaturals||(a.key.impliedNaturals=[]),a.key.impliedNaturals.push({acc:"natural",note:R.accidentals[q].note}))}}break}if(e.length===0||(e[0].token==="exp"&&e.shift(),e.length===0)||(e[0].token==="oct"&&e.shift(),e.length===0))return p;var D=o.getKeyAccidentals2(e);if(D.warn&&t(D.warn,r,0),D.accs){p.foundKey||(p.foundKey=!0,a.key={root:"none",acc:"",mode:"",accidentals:[]}),g(D.accs);for(var P=0;P<D.accs.length;P++){for(var M=!1,A=0;A<a.key.accidentals.length&&!M;A++)a.key.accidentals[A].note===D.accs[P].note&&(M=!0,a.key.accidentals[A].acc!==D.accs[P].acc&&(a.key.accidentals[A].acc=D.accs[P].acc,a.key.explicitAccidentals||(a.key.explicitAccidentals=[]),a.key.explicitAccidentals.push(D.accs[P])));if(!M&&(a.key.explicitAccidentals||(a.key.explicitAccidentals=[]),a.key.explicitAccidentals.push(D.accs[P]),a.key.accidentals.push(D.accs[P]),a.key.impliedNaturals))for(var F=0;F<a.key.impliedNaturals.length;F++)a.key.impliedNaturals[F].note===D.accs[P].note&&a.key.impliedNaturals.splice(F,1)}}for(var z;e.length>0;)switch(e[0].token){case"m":case"middle":if(e.shift(),e.length===0)return t("Expected = after middle",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after middle",r,z.start);break}if(e.length===0)return t("Expected parameter after middle=",r,0),p;var H=o.getPitchFromTokens(e);H.warn&&t(H.warn,r,0),H.position&&(a.clef.verticalPos=H.position-6);break;case"transpose":if(e.shift(),e.length===0)return t("Expected = after transpose",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after transpose",r,z.start);break}if(e.length===0)return t("Expected parameter after transpose=",r,0),p;if(e[0].type!=="number"){t("Expected number after transpose",r,e[0].start);break}a.clef.transpose=e[0].intt,e.shift();break;case"stafflines":if(e.shift(),e.length===0)return t("Expected = after stafflines",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after stafflines",r,z.start);break}if(e.length===0)return t("Expected parameter after stafflines=",r,0),p;if(e[0].type!=="number"){t("Expected number after stafflines",r,e[0].start);break}a.clef.stafflines=e[0].intt,e.shift();break;case"staffscale":if(e.shift(),e.length===0)return t("Expected = after staffscale",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after staffscale",r,z.start);break}if(e.length===0)return t("Expected parameter after staffscale=",r,0),p;if(e[0].type!=="number"){t("Expected number after staffscale",r,e[0].start);break}a.clef.staffscale=e[0].floatt,e.shift();break;case"octave":if(e.shift(),e.length===0)return t("Expected = after octave",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after octave",r,z.start);break}if(e.length===0)return t("Expected parameter after octave=",r,0),p;if(e[0].type!=="number"){t("Expected number after octave",r,e[0].start);break}a.octave=e[0].intt,e.shift();break;case"style":if(e.shift(),e.length===0)return t("Expected = after style",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after style",r,z.start);break}if(e.length===0)return t("Expected parameter after style=",r,0),p;switch(e[0].token){case"normal":case"harmonic":case"rhythm":case"x":case"triangle":a.style=e[0].token,e.shift();break;default:t("error parsing style element: "+e[0].token,r,e[0].start);break}break;case"clef":if(e.shift(),e.length===0)return t("Expected = after clef",r,0),p;if(z=e.shift(),z.token!=="="){t("Expected = after clef",r,z.start);break}if(e.length===0)return t("Expected parameter after clef=",r,0),p;case"treble":case"bass":case"alto":case"tenor":case"perc":case"none":var k=e.shift();switch(k.token){case"treble":case"tenor":case"alto":case"bass":case"perc":case"none":break;case"C":k.token="alto";break;case"F":k.token="bass";break;case"G":k.token="treble";break;case"c":k.token="alto";break;case"f":k.token="bass";break;case"g":k.token="treble";break;default:t("Expected clef name. Found "+k.token,r,k.start);break}e.length>0&&e[0].type==="number"&&(k.token+=e[0].token,e.shift()),e.length>1&&(e[0].token==="-"||e[0].token==="+"||e[0].token==="^"||e[0].token==="_")&&e[1].token==="8"&&(k.token+=e[0].token+e[1].token,e.shift(),e.shift()),a.clef={type:k.token,verticalPos:u(k.token,0)},a.currentVoice&&a.currentVoice.transpose!==void 0&&(a.clef.transpose=a.currentVoice.transpose),p.foundClef=!0;break;default:t("Unknown parameter: "+e[0].token,r,e[0].start),e.shift()}return p};var c=function(r){var f=a.voices[r];if(!(a.currentVoice&&a.currentVoice.index===f.index&&a.currentVoice.staffNum===f.staffNum))return a.currentVoice=f,n.setCurrentVoice(f.staffNum,f.index,r)};d.parseVoice=function(r,f,e){var p=o.getMeat(r,f,e),x=p.start,w=p.end,_=o.getToken(r,x,w);if(_.length===0){t("Expected a voice id",r,x);return}var E=!1;a.voices[_]===void 0&&(a.voices[_]={},E=!0,a.score_is_present&&t("Can't have an unknown V: id when the %score directive is present",r,x)),x+=_.length,x+=o.eatWhiteSpace(r,x);for(var N={startStaff:E},I=function(H){var k=o.getVoiceToken(r,x,w);k.warn!==void 0?t("Expected value for "+H+" in voice: "+k.warn,r,x):k.err!==void 0?t("Expected value for "+H+" in voice: "+k.err,r,x):k.token.length===0&&r[x]!=='"'?t("Expected value for "+H+" in voice",r,x):N[H]=k.token,x+=k.len},R=function(H,k,T){var S=o.getVoiceToken(r,x,w);S.warn!==void 0?t("Expected value for "+k+" in voice: "+S.warn,r,x):S.err!==void 0?t("Expected value for "+k+" in voice: "+S.err,r,x):S.token.length===0&&r[x]!=='"'?t("Expected value for "+k+" in voice",r,x):(S.token=parseFloat(S.token),a.voices[H][k]=S.token),x+=S.len},C=function(H,k){var T=o.getVoiceToken(r,x,w);if(T.warn!==void 0)t("Expected value for "+H+" in voice: "+T.warn,r,x);else if(T.err!==void 0)t("Expected value for "+H+" in voice: "+T.err,r,x);else if(T.token.length===0&&r[x]!=='"')t("Expected value for "+H+" in voice",r,x);else return T.token;x+=T.len},B=function(H,k){var T={_B:2,_E:9,_b:-10,_e:-3},S=o.getVoiceToken(r,x,w);if(S.warn!==void 0)t("Expected one of (_B, _E, _b, _e) for "+k+" in voice: "+S.warn,r,x);else if(S.token.length===0&&r[x]!=='"')t("Expected one of (_B, _E, _b, _e) for "+k+" in voice",r,x);else{var O=T[S.token];O?a.voices[H][k]=O:t("Expected one of (_B, _E, _b, _e) for "+k+" in voice",r,x)}x+=S.len};x<w;){var q=o.getVoiceToken(r,x,w);if(x+=q.len,q.warn)t("Error parsing voice: "+q.warn,r,x);else{var L=null;switch(q.token){case"clef":case"cl":I("clef");var D=0;N.clef!==void 0&&(N.clef=N.clef.replace(/[',]/g,""),N.clef.indexOf("+16")!==-1&&(D+=14,N.clef=N.clef.replace("+16","")),N.verticalPos=u(N.clef,D));break;case"treble":case"bass":case"tenor":case"alto":case"perc":case"none":case"treble'":case"bass'":case"tenor'":case"alto'":case"none'":case"treble''":case"bass''":case"tenor''":case"alto''":case"none''":case"treble,":case"bass,":case"tenor,":case"alto,":case"none,":case"treble,,":case"bass,,":case"tenor,,":case"alto,,":case"none,,":var P=0;N.clef=q.token.replace(/[',]/g,""),N.verticalPos=u(N.clef,P),a.voices[_].clef=q.token;break;case"staves":case"stave":case"stv":I("staves");break;case"brace":case"brc":I("brace");break;case"bracket":case"brk":I("bracket");break;case"name":case"nm":I("name");break;case"subname":case"sname":case"snm":I("subname");break;case"merge":N.startStaff=!1;break;case"stem":case"stems":L=o.getVoiceToken(r,x,w),L.warn!==void 0?t("Expected value for stems in voice: "+L.warn,r,x):L.err!==void 0?t("Expected value for stems in voice: "+L.err,r,x):L.token==="up"||L.token==="down"?a.voices[_].stem=L.token:t("Expected up or down for voice stem",r,x),x+=L.len;break;case"up":case"down":a.voices[_].stem=q.token;break;case"middle":case"m":I("verticalPos"),N.verticalPos=y(N.verticalPos).mid;break;case"gchords":case"gch":a.voices[_].suppressChords=!0,L=o.getVoiceToken(r,x,w),L.token==="0"&&(x=x+L.len);break;case"space":case"spc":I("spacing");break;case"scale":R(_,"scale");break;case"score":B(_,"scoreTranspose");break;case"transpose":R(_,"transpose");break;case"stafflines":R(_,"stafflines");break;case"staffscale":R(_,"staffscale");break;case"octave":R(_,"octave");break;case"volume":R(_,"volume");break;case"cue":var M=C("cue");M==="on"?a.voices[_].scale=.6:a.voices[_].scale=1;break;case"style":L=o.getVoiceToken(r,x,w),L.warn!==void 0?t("Expected value for style in voice: "+L.warn,r,x):L.err!==void 0?t("Expected value for style in voice: "+L.err,r,x):L.token==="normal"||L.token==="harmonic"||L.token==="rhythm"||L.token==="x"||L.token==="triangle"?a.voices[_].style=L.token:t("Expected one of [normal, harmonic, rhythm, x, triangle] for voice style",r,x),x+=L.len;break}}x+=o.eatWhiteSpace(r,x)}if((N.startStaff||a.staves.length===0)&&(a.staves.push({index:a.staves.length,meter:a.origMeter}),a.score_is_present||(a.staves[a.staves.length-1].numVoices=0)),a.voices[_].staffNum===void 0){a.voices[_].staffNum=a.staves.length-1;var A=0;for(var F in a.voices)a.voices.hasOwnProperty(F)&&a.voices[F].staffNum===a.voices[_].staffNum&&A++;a.voices[_].index=A-1}var z=a.staves[a.voices[_].staffNum];return a.score_is_present||z.numVoices++,N.clef&&(z.clef={type:N.clef,verticalPos:N.verticalPos}),N.spacing&&(z.spacing_below_offset=N.spacing),N.verticalPos&&(z.verticalPos=N.verticalPos),N.name&&(z.name?z.name.push(N.name):z.name=[N.name]),N.subname&&(z.subname?z.subname.push(N.subname):z.subname=[N.subname]),c(_)}}(),Bt=d,Bt}var Lt,za;function Qo(){if(za)return Lt;za=1;var b=Oe(),h=pa(),d=va(),o=function(t,a,n,l,u){this.reset=function(g,c,r,f){d.initialize(g,c,r,f,u),h.initialize(g,c,r,f,u)},this.reset(t,a,n,l),this.setTitle=function(g,c){n.hasMainTitle?u.addSubtitle(g,{startChar:n.iChar,endChar:n.iChar+c+2}):(u.addMetaText("title",g,{startChar:n.iChar,endChar:n.iChar+c+2}),n.hasMainTitle=!0)},this.setMeter=function(g){if(g=t.stripComment(g),g==="C")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"common_time"};if(g==="C|")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"cut_time"};if(g==="o")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_perfectum"};if(g==="c")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_imperfectum"};if(g==="o.")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_perfectum_prolatio"};if(g==="c.")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_imperfectum_prolatio"};if(g.length===0||g.toLowerCase()==="none")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),null;var c=t.tokenize(g,0,g.length);try{var r=function(){var _={value:0,num:""},E=c.shift();for(E.token==="("&&(E=c.shift());;){if(E.type!=="number")throw"Expected top number of meter";if(_.value+=parseInt(E.token),_.num+=E.token,c.length===0||c[0].token==="/")return _;if(E=c.shift(),E.token===")"){if(c.length===0||c[0].token==="/")return _;throw"Unexpected paren in meter"}if(E.token!=="."&&E.token!=="+"||(_.num+=E.token,c.length===0))throw"Expected top number of meter";E=c.shift()}return _},f=function(){var _=r();if(c.length===0)return _;var E=c.shift();if(E.token!=="/")throw"Expected slash in meter";if(E=c.shift(),E.type!=="number")throw"Expected bottom number of meter";return _.den=E.token,_.value=_.value/parseInt(_.den),_};if(c.length===0)throw"Expected meter definition in M: line";for(var e={type:"specified",value:[]},p=0;;){var x=f();p+=x.value;var w={num:x.num};if(x.den!==void 0&&(w.den=x.den),e.value.push(w),c.length===0)break}return n.havent_set_length===!0&&(n.default_length=p<.75?.0625:.125,n.havent_set_length=!1),e}catch(_){a(_,g,0)}return null},this.calcTempo=function(g){var c=.25;n.meter&&n.meter.type==="specified"?c=1/parseInt(n.meter.value[0].den):n.origMeter&&n.origMeter.type==="specified"&&(c=1/parseInt(n.origMeter.value[0].den));for(var r=0;r<g.duration;r++)g.duration[r]=c*g.duration[r];return g},this.resolveTempo=function(){n.tempo&&(this.calcTempo(n.tempo),l.metaText.tempo=n.tempo,delete n.tempo)},this.addUserDefinition=function(g,c,r){var f=g.indexOf("=",c);if(f===-1){a("Need an = in a macro definition",g,c);return}var e=b.strip(g.substring(c,f)),p=b.strip(g.substring(f+1));if(e.length!==1){a("Macro definitions can only be one character",g,c);return}var x="HIJKLMNOPQRSTUVWXYhijklmnopqrstuvw~";if(x.indexOf(e)===-1){a("Macro definitions must be H-Y, h-w, or tilde",g,c);return}if(p.length===0){a("Missing macro definition",g,c);return}n.macros===void 0&&(n.macros={}),n.macros[e]=p},this.setDefaultLength=function(g,c,r){var f=g.substring(c,r).replace(/ /g,""),e=f.split("/");if(e.length===2){var p=parseInt(e[0]),x=parseInt(e[1]);x>0&&(n.default_length=p/x,n.havent_set_length=!1)}else e.length===1&&e[0]==="1"&&(n.default_length=1,n.havent_set_length=!1)};var m={larghissimo:20,adagissimo:24,sostenuto:28,grave:32,largo:40,lento:50,larghetto:60,adagio:68,adagietto:74,andante:80,andantino:88,"marcia moderato":84,"andante moderato":100,moderato:112,allegretto:116,"allegro moderato":120,allegro:126,animato:132,agitato:140,veloce:148,"mosso vivo":156,vivace:164,vivacissimo:172,allegrissimo:176,presto:184,prestissimo:210};this.setTempo=function(g,c,r,f){try{var e=t.tokenize(g,c,r);if(e.length===0)throw"Missing parameter in Q: field";var p={startChar:f+c-2,endChar:f+r},x=!0,w=e.shift();if(w.type==="quote"&&(p.preString=w.token,w=e.shift(),e.length===0))return m[p.preString.toLowerCase()]&&(p.bpm=m[p.preString.toLowerCase()],p.suppressBpm=!0),{type:"immediate",tempo:p};if(w.type==="alpha"&&w.token==="C"){if(e.length===0)throw"Missing tempo after C in Q: field";if(w=e.shift(),w.type==="punct"&&w.token==="="){if(e.length===0)throw"Missing tempo after = in Q: field";if(w=e.shift(),w.type!=="number")throw"Expected number after = in Q: field";p.duration=[1],p.bpm=parseInt(w.token)}else if(w.type==="number"){if(p.duration=[parseInt(w.token)],e.length===0)throw"Missing = after duration in Q: field";if(w=e.shift(),w.type!=="punct"||w.token!=="=")throw"Expected = after duration in Q: field";if(e.length===0)throw"Missing tempo after = in Q: field";if(w=e.shift(),w.type!=="number")throw"Expected number after = in Q: field";p.bpm=parseInt(w.token)}else throw"Expected number or equal after C in Q: field"}else if(w.type==="number"){var _=parseInt(w.token);if(e.length===0||e[0].type==="quote")p.duration=[1],p.bpm=_;else{if(x=!1,w=e.shift(),w.type!=="punct"&&w.token!=="/"||(w=e.shift(),w.type!=="number"))throw"Expected fraction in Q: field";var E=parseInt(w.token);for(p.duration=[_/E];e.length>0&&e[0].token!=="="&&e[0].type!=="quote";){if(w=e.shift(),w.type!=="number"||(_=parseInt(w.token),w=e.shift(),w.type!=="punct"&&w.token!=="/")||(w=e.shift(),w.type!=="number"))throw"Expected fraction in Q: field";E=parseInt(w.token),p.duration.push(_/E)}if(w=e.shift(),w.type!=="punct"&&w.token!=="=")throw"Expected = in Q: field";if(w=e.shift(),w.type!=="number")throw"Expected tempo in Q: field";p.bpm=parseInt(w.token)}}else throw"Unknown value in Q: field";if(e.length!==0&&(w=e.shift(),w.type==="quote"&&(p.postString=w.token,w=e.shift()),e.length!==0))throw"Unexpected string at end of Q: field";return n.printTempo===!1&&(p.suppress=!0),{type:x?"delaySet":"immediate",tempo:p}}catch(N){return a(N,g,c),{type:"none"}}},this.letter_to_inline_header=function(g,c,r){var f=!1,e=t.eatWhiteSpace(g,c);if(c+=e,g.length>=c+5&&g[c]==="["&&g[c+2]===":"){var p=g.indexOf("]",c),x=n.iChar+c,w=n.iChar+p+1;switch(g.substring(c,c+3)){case"[I:":var _=h.addDirective(g.substring(c+3,p));return _&&a(_,g,c),[p-c+1+e];case"[M:":var E=this.setMeter(g.substring(c+3,p));return u.hasBeginMusic()&&E?u.appendStartingElement("meter",x,w,E):n.meter=E,[p-c+1+e];case"[K:":var N=d.parseKey(g.substring(c+3,p),!0);return N.foundClef&&u.hasBeginMusic()&&u.appendStartingElement("clef",x,w,n.clef),N.foundKey&&u.hasBeginMusic()&&u.appendStartingElement("key",x,w,d.fixKey(n.clef,n.key)),[p-c+1+e];case"[P:":var I=h.parseFontChangeLine(g.substring(c+3,p));return r||l.lines.length<=l.lineNum?n.partForNextLine={title:I,startChar:x,endChar:w}:u.appendElement("part",x,w,{title:I}),[p-c+1+e];case"[L:":return this.setDefaultLength(g,c+3,p),[p-c+1+e];case"[Q:":if(p>0){var R=this.setTempo(g,c+3,p,n.iChar);return R.type==="delaySet"?u.hasBeginMusic()?u.appendElement("tempo",x,w,this.calcTempo(R.tempo)):n.tempoForNextLine=["tempo",x,w,this.calcTempo(R.tempo)]:R.type==="immediate"&&(!r&&u.hasBeginMusic()?u.appendElement("tempo",x,w,R.tempo):n.tempoForNextLine=["tempo",x,w,R.tempo]),[p-c+1+e,g[c+1],g.substring(c+3,p)]}break;case"[V:":if(p>0)return f=d.parseVoice(g,c+3,p),[p-c+1+e,g[c+1],g.substring(c+3,p),f];break;case"[r:":return[p-c+1+e]}}return[0]},this.letter_to_body_header=function(g,c){var r=!1;if(g.length>=c+3)switch(g.substring(c,c+2)){case"I:":var f=h.addDirective(g.substring(c+2));return f&&a(f,g,c),[g.length];case"M:":var e=this.setMeter(g.substring(c+2));return u.hasBeginMusic()&&e&&u.appendStartingElement("meter",n.iChar+c,n.iChar+g.length,e),[g.length];case"K:":var p=d.parseKey(g.substring(c+2),u.hasBeginMusic());return p.foundClef&&u.hasBeginMusic()&&u.appendStartingElement("clef",n.iChar+c,n.iChar+g.length,n.clef),p.foundKey&&u.hasBeginMusic()&&u.appendStartingElement("key",n.iChar+c,n.iChar+g.length,d.fixKey(n.clef,n.key)),[g.length];case"P:":return u.hasBeginMusic()&&u.appendElement("part",n.iChar+c,n.iChar+g.length,{title:g.substring(c+2)}),[g.length];case"L:":return this.setDefaultLength(g,c+2,g.length),[g.length];case"Q:":var x=g.indexOf("",c+2);x===-1&&(x=g.length);var w=this.setTempo(g,c+2,x,n.iChar);return w.type==="delaySet"?u.appendElement("tempo",n.iChar+c,n.iChar+g.length,this.calcTempo(w.tempo)):w.type==="immediate"&&u.appendElement("tempo",n.iChar+c,n.iChar+g.length,w.tempo),[x,g[c],b.strip(g.substring(c+2))];case"V:":return r=d.parseVoice(g,c+2,g.length),[g.length,g[c],b.strip(g.substring(c+2)),r]}return[0]};var y={A:"author",B:"book",C:"composer",D:"discography",F:"url",G:"group",I:"instruction",N:"notes",O:"origin",R:"rhythm",S:"source",W:"unalignedWords",Z:"transcription"};this.parseHeader=function(g){var c=y[g[0]],r=g.length-2,f=t.translateString(t.stripComment(g.substring(2)));if(c==="unalignedWords"||c==="notes")u.addMetaTextArray(c,h.parseFontChangeLine(f),{startChar:n.iChar,endChar:n.iChar+g.length});else if(c!==void 0)u.addMetaText(c,h.parseFontChangeLine(f),{startChar:n.iChar,endChar:n.iChar+g.length});else{var e=n.iChar,p=e+g.length;switch(g[0]){case"H":for(u.addMetaTextArray("history",h.parseFontChangeLine(f),{startChar:n.iChar,endChar:n.iChar+g.length}),g=t.peekLine();g&&g[1]!==":";)t.nextLine(),u.addMetaTextArray("history",h.parseFontChangeLine(t.translateString(t.stripComment(g))),{startChar:n.iChar,endChar:n.iChar+g.length}),g=t.peekLine();break;case"K":this.resolveTempo();var x=d.parseKey(g.substring(2),!1);!n.is_in_header&&u.hasBeginMusic()&&(x.foundClef&&u.appendStartingElement("clef",e,p,n.clef),x.foundKey&&u.appendStartingElement("key",e,p,d.fixKey(n.clef,n.key))),n.is_in_header=!1;break;case"L":this.setDefaultLength(g,2,g.length);break;case"M":n.origMeter=n.meter=this.setMeter(g.substring(2));break;case"P":n.is_in_header?u.addMetaText("partOrder",h.parseFontChangeLine(f),{startChar:n.iChar,endChar:n.iChar+g.length}):n.partForNextLine={title:f,startChar:e,endChar:p};break;case"Q":var w=this.setTempo(g,2,g.length,n.iChar);w.type==="delaySet"?n.tempo=w.tempo:w.type==="immediate"&&(l.metaText.tempo?n.tempoForNextLine=["tempo",e,p,w.tempo]:l.metaText.tempo=w.tempo);break;case"T":n.titlecaps&&(f=f.toUpperCase()),this.setTitle(h.parseFontChangeLine(t.theReverser(f)),r);break;case"U":this.addUserDefinition(g,2,g.length);break;case"V":if(d.parseVoice(g,2,g.length),!n.is_in_header)return{newline:!0};break;case"s":return{symbols:!0};case"w":return{words:!0};case"X":break;case"E":case"m":a("Ignored header",g,0);break;default:return{regular:!0}}}return{}}};return Lt=o,Lt}var Ne={},Ga;function Jo(){return Ga||(Ga=1,Ne.legalAccents=["trill","lowermordent","uppermordent","mordent","pralltriller","accent","fermata","invertedfermata","tenuto","0","1","2","3","4","5","+","wedge","open","thumb","snap","turn","roll","breath","shortphrase","mediumphrase","longphrase","segno","coda","D.S.","D.C.","fine","beambr1","beambr2","slide","marcato","upbow","downbow","/","//","///","////","trem1","trem2","trem3","trem4","turnx","invertedturn","invertedturnx","trill(","trill)","arpeggio","xstem","mark","umarcato","style=normal","style=harmonic","style=rhythm","style=x","style=triangle","D.C.alcoda","D.C.alfine","D.S.alcoda","D.S.alfine","editorial","courtesy"],Ne.volumeDecorations=["p","pp","f","ff","mf","mp","ppp","pppp","fff","ffff","sfz"],Ne.dynamicDecorations=["crescendo(","crescendo)","diminuendo(","diminuendo)","glissando(","glissando)","~(","~)"],Ne.accentPseudonyms=[["<","accent"],[">","accent"],["tr","trill"],["plus","+"],["emphasis","accent"],["^","umarcato"],["marcato","umarcato"]],Ne.accentDynamicPseudonyms=[["<(","crescendo("],["<)","crescendo)"],[">(","diminuendo("],[">)","diminuendo)"]],Ne.nonDecorations="ABCDEFGabcdefgxyzZ[]|^_{",Ne.durations=[.5,.75,.875,.9375,.96875,.984375,.25,.375,.4375,.46875,.484375,.4921875,.125,.1875,.21875,.234375,.2421875,.24609375,.0625,.09375,.109375,.1171875,.12109375,.123046875,.03125,.046875,.0546875,.05859375,.060546875,.0615234375,.015625,.0234375,.02734375,.029296875,.0302734375,.03076171875],Ne.pitches={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11},Ne.rests={x:"invisible",X:"invisible-multimeasure",y:"spacer",z:"rest",Z:"multimeasure"},Ne.accMap={dblflat:"__",flat:"_",natural:"=",sharp:"^",dblsharp:"^^",quarterflat:"_/",quartersharp:"^/"},Ne.tripletQ={2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2}),Ne}var Pt,Ya;function Zo(){if(Ya)return Pt;Ya=1;var b=va(),h=Os(),d,o,t,a,n,l,{legalAccents:u,volumeDecorations:m,dynamicDecorations:y,accentPseudonyms:g,accentDynamicPseudonyms:c,nonDecorations:r,durations:f,pitches:e,rests:p,accMap:x,tripletQ:w}=Jo(),_=function(k,T,S,O,G,W){d=k,o=T,t=S,a=O,n=G,l=W,this.lineContinuation=!1},E=function(k,T,S){if(k.inTie[T]===void 0)return!1;var O=k.currentVoice?k.currentVoice.staffNum*100+k.currentVoice.index:0;return!!(k.inTie[T][O]&&(S.pitches!==void 0||S.rest.type!=="spacer"))},N={};_.prototype.parseMusic=function(k){l.resolveTempo(),t.is_in_header=!1;for(var T=0,S=t.iChar;d.isWhiteSpace(k[T])&&T<k.length;)T++;if(!(T===k.length||k[T]==="%")){var O=t.start_new_line;t.continueall===void 0?t.start_new_line=!0:t.start_new_line=!1;var G=0,W=l.letter_to_body_header(k,T);W[0]>0&&(T+=W[0],W[1]==="V"&&this.startNewLine());for(var Y=0;T<k.length;){var K=T;if(k[T]==="%")break;var ee=l.letter_to_inline_header(k,T,O);if(ee[0]>0)T+=ee[0],ee[1]==="V"&&(O=!0);else{(!n.hasBeginMusic()||O&&!this.lineContinuation)&&(this.startNewLine(),O=!1);for(var $;;)if($=d.eatWhiteSpace(k,T),$>0&&(T+=$),T>0&&k[T-1]===""&&($=l.letter_to_body_header(k,T),$[0]>0&&($[1]==="V"&&this.startNewLine(),T=$[0],t.start_new_line=!1)),$=D(k,T),$[0]>0&&(T+=$[0]),$=R(k,T),$[0]>0){N.chord||(N.chord=[]);var ne=d.translateString($[1]);ne=ne.replace(/;/g,`
`);for(var ie=!1,Q=0;Q<N.chord.length;Q++)N.chord[Q].position===$[2]&&(ie=!0,N.chord[Q].name+=`
`+ne);ie===!1&&($[2]===null&&$[3]?N.chord.push({name:ne,rel_position:$[3]}):N.chord.push({name:ne,position:$[2]})),T+=$[0];var se=d.skipWhiteSpace(k.substring(T));se>0&&(N.force_end_beam_last=!0),T+=se}else if(r.indexOf(k[T])===-1?$=L(k,T):$=[0],$[0]>0)$[1]===null?T+1<k.length&&this.startNewLine():$[1].length>0&&($[1].indexOf("style=")===0?N.style=$[1].substr(6):(N.decoration===void 0&&(N.decoration=[]),$[1]==="beambr1"?N.beambr=1:$[1]==="beambr2"?N.beambr=2:N.decoration.push($[1]))),T+=$[0];else if($=C(k,T),$[0]>0)N.gracenotes=$[1],T+=$[0];else break;if($=P(k,T),$[0]>0){Y=0,N.gracenotes!==void 0&&(N.rest={type:"spacer"},N.duration=.125,t.addFormattingOptions(N,a.formatting,"note"),n.appendElement("note",S+T,S+T+$[0],N),t.measureNotEmpty=!0,N={});var te={type:$[1]};te.type.length===0?o("Unknown bar type",k,T):(t.inEnding&&te.type!=="bar_thin"&&(te.endEnding=!0,t.inEnding=!1),$[2]&&(te.startEnding=$[2],t.inEnding&&(te.endEnding=!0),t.inEnding=!0,$[1]==="bar_right_repeat"?t.restoreStartEndingHoldOvers():t.duplicateStartEndingHoldOvers()),N.decoration!==void 0&&(te.decoration=N.decoration),N.chord!==void 0&&(te.chord=N.chord),te.startEnding&&t.barFirstEndingNum===void 0?t.barFirstEndingNum=t.currBarNumber:te.startEnding&&te.endEnding&&t.barFirstEndingNum?t.currBarNumber=t.barFirstEndingNum:te.endEnding&&(t.barFirstEndingNum=void 0),te.type!=="bar_invisible"&&t.measureNotEmpty&&H()&&(t.currBarNumber++,t.barNumbers&&t.currBarNumber%t.barNumbers===0&&(te.barNumber=t.currBarNumber)),t.addFormattingOptions(N,a.formatting,"bar"),n.appendElement("bar",S+K,S+T+$[0],te),t.measureNotEmpty=!1,N={}),T+=$[0]}else if(k[T]==="&")$=B(k,T),$[0]>0&&(n.appendElement("overlay",S,S+1,{}),T+=1,Y++);else{if($=M(k,T),$.consumed>0&&($.startSlur!==void 0&&(N.startSlur=$.startSlur),$.dottedSlur&&(N.dottedSlur=!0),$.triplet!==void 0&&(G>0?o("Can't nest triplets",k,T):(N.startTriplet=$.triplet,N.tripletMultiplier=$.tripletQ/$.triplet,N.tripletR=$.num_notes,G=$.num_notes===void 0?$.triplet:$.num_notes)),T+=$.consumed),k[T]==="["){T++;for(var J=null,ve=!1,fe=!1;!fe;){var ue=L(k,T);ue[0]>0&&(T+=ue[0]);var de=F(k,T,{},!1);if(de!==null&&de.pitch!==void 0)ue[0]>0&&ue[1].indexOf("style=")!==0&&(N.decoration===void 0&&(N.decoration=[]),N.decoration.push(ue[1])),de.end_beam&&(N.end_beam=!0,delete de.end_beam),N.pitches===void 0?(N.duration=de.duration,N.pitches=[de]):N.pitches.push(de),delete de.duration,ue[0]>0&&ue[1].indexOf("style=")===0&&(N.pitches[N.pitches.length-1].style=ue[1].substr(6)),t.inTieChord[N.pitches.length]&&(de.endTie=!0,t.inTieChord[N.pitches.length]=void 0),de.startTie&&(t.inTieChord[N.pitches.length]=!0),T=de.endChar,delete de.endChar;else if(k[T]===" ")o("Spaces are not allowed in chords",k,T),T++;else{if(T<k.length&&k[T]==="]"){T++,t.next_note_duration!==0&&(N.duration=N.duration*t.next_note_duration,t.next_note_duration=0),E(t,Y,N)&&(N.pitches.forEach(function(ae){ae.endTie=!0}),I(t,Y,!1)),G>0&&!(N.rest&&N.rest.type==="spacer")&&(G--,G===0&&(N.endTriplet=!0));for(var we=!1;T<k.length&&!we;){switch(k[T]){case" ":case"	":A(N);break;case")":N.endSlur===void 0?N.endSlur=1:N.endSlur++;break;case"-":N.pitches.forEach(function(ae){ae.startTie={}}),I(t,Y,!0);break;case">":case"<":var me=z(k,T);T+=me[0]-1,t.next_note_duration=me[2],J?J=J*me[1]:J=me[1];break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":var V=d.getFraction(k,T);J=V.value,T=V.index;var j=k[T];j===" "&&(ve=!0),j==="-"||j===")"||j===" "||j==="<"||j===">"?T--:we=!0;break;case"0":J=0;break;default:we=!0;break}we||T++}}else o("Expected ']' to end the chords",k,T);N.pitches!==void 0&&(J!==null&&(N.duration=N.duration*J,ve&&A(N)),t.addFormattingOptions(N,a.formatting,"note"),n.appendElement("note",S+K,S+T,N),t.measureNotEmpty=!0,N={}),fe=!0}}}else{var X={},U=F(k,T,X,!0);if(X.endTie!==void 0&&I(t,Y,!0),U!==null){U.pitch!==void 0?(N.pitches=[{}],U.accidental!==void 0&&(N.pitches[0].accidental=U.accidental),N.pitches[0].pitch=U.pitch,N.pitches[0].name=U.name,(U.midipitch||U.midipitch===0)&&(N.pitches[0].midipitch=U.midipitch),U.endSlur!==void 0&&(N.pitches[0].endSlur=U.endSlur),U.endTie!==void 0&&(N.pitches[0].endTie=U.endTie),U.startSlur!==void 0&&(N.pitches[0].startSlur=U.startSlur),N.startSlur!==void 0&&(N.pitches[0].startSlur=N.startSlur),N.dottedSlur!==void 0&&(N.pitches[0].dottedSlur=!0),U.startTie!==void 0&&(N.pitches[0].startTie=U.startTie),N.startTie!==void 0&&(N.pitches[0].startTie=N.startTie)):(N.rest=U.rest,U.rest.type==="multimeasure"&&H()&&(t.currBarNumber+=U.rest.text-1),U.endSlur!==void 0&&(N.endSlur=U.endSlur),U.endTie!==void 0&&(N.rest.endTie=U.endTie),U.startSlur!==void 0&&(N.startSlur=U.startSlur),U.startTie!==void 0&&(N.rest.startTie=U.startTie),N.startTie!==void 0&&(N.rest.startTie=N.startTie)),U.chord!==void 0&&(N.chord=U.chord),U.duration!==void 0&&(N.duration=U.duration),U.decoration!==void 0&&(N.decoration=U.decoration),U.graceNotes!==void 0&&(N.graceNotes=U.graceNotes),delete N.startSlur,delete N.dottedSlur,E(t,Y,N)&&(N.pitches!==void 0?N.pitches[0].endTie=!0:N.rest.type!=="spacer"&&(N.rest.endTie=!0),I(t,Y,!1)),(U.startTie||N.startTie)&&I(t,Y,!0),T=U.endChar,G>0&&!(U.rest&&U.rest.type==="spacer")&&(G--,G===0&&(N.endTriplet=!0)),U.end_beam&&A(N),N.rest&&N.rest.type==="rest"&&N.duration===1&&q(t)<=1&&(N.rest.type="whole",N.duration=q(t)),N.duration<1&&f.indexOf(N.duration)===-1&&N.duration!==0&&(!N.rest||N.rest.type!=="spacer")&&o("Duration not representable: "+k.substring(K,T),k,T),t.addFormattingOptions(N,a.formatting,"note");var Z=n.appendElement("note",S+K,S+T,N);Z||(this.startNewLine(),n.appendElement("note",S+K,S+T,N)),t.measureNotEmpty=!0,N={}}}T===K&&(k[T]!==" "&&k[T]!=="`"&&o("Unknown character ignored",k,T),T++)}}}this.lineContinuation=k.indexOf("")>=0||W[0]>0,this.lineContinuation||(N={})}};var I=function(k,T,S){var O=k.currentVoice?k.currentVoice.staffNum*100+k.currentVoice.index:0;k.inTie[T]===void 0&&(k.inTie[T]=[]),k.inTie[T][O]=S},R=function(k,T){if(k[T]==='"'){var S=d.getBrackettedSubstring(k,T,5);if(S[2]||o("Missing the closing quote while parsing the chord symbol",k,T),S[0]>0&&S[1].length>0&&S[1][0]==="^")S[1]=S[1].substring(1),S[2]="above";else if(S[0]>0&&S[1].length>0&&S[1][0]==="_")S[1]=S[1].substring(1),S[2]="below";else if(S[0]>0&&S[1].length>0&&S[1][0]==="<")S[1]=S[1].substring(1),S[2]="left";else if(S[0]>0&&S[1].length>0&&S[1][0]===">")S[1]=S[1].substring(1),S[2]="right";else if(S[0]>0&&S[1].length>0&&S[1][0]==="@"){S[1]=S[1].substring(1);var O=d.getFloat(S[1]);if(O.digits===0)return o("Missing first position in absolutely positioned annotation.",k,T),S[1]=S[1].replace("@",""),S[2]="above",S;if(S[1]=S[1].substring(O.digits),S[1][0]!==",")return o("Missing comma absolutely positioned annotation.",k,T),S[1]=S[1].replace("@",""),S[2]="above",S;S[1]=S[1].substring(1);var G=d.getFloat(S[1]);if(G.digits===0)return o("Missing second position in absolutely positioned annotation.",k,T),S[1]=S[1].replace("@",""),S[2]="above",S;S[1]=S[1].substring(G.digits);var W=d.skipWhiteSpace(S[1]);S[1]=S[1].substring(W),S[2]=null,S[3]={x:O.value,y:G.value}}else t.freegchord!==!0&&(S[1]=S[1].replace(/([ABCDEFG0-9])b/g,"$1♭"),S[1]=S[1].replace(/([ABCDEFG0-9])#/g,"$1♯"),S[1]=S[1].replace(/^([ABCDEFG])([♯♭]?)o([^A-Za-z])/g,"$1$2°$3"),S[1]=S[1].replace(/^([ABCDEFG])([♯♭]?)o$/g,"$1$2°"),S[1]=S[1].replace(/^([ABCDEFG])([♯♭]?)0([^A-Za-z])/g,"$1$2ø$3"),S[1]=S[1].replace(/^([ABCDEFG])([♯♭]?)\^([^A-Za-z])/g,"$1$2∆$3")),S[2]="default",S[1]=h.chordName(t,S[1]);return S}return[0,""]},C=function(k,T){if(k[T]==="{"){var S=d.getBrackettedSubstring(k,T,1,"}");S[2]||o("Missing the closing '}' while parsing grace note",k,T),k[T+S[0]]===")"&&(S[0]++,S[1]+=")");for(var O=[],G=0,W=!1;G<S[1].length;){var Y=!1;S[1][G]==="/"&&(Y=!0,G++);var K=F(S[1],G,{},!1);K!==null?(K.duration=K.duration/(t.default_length*8),Y&&(K.acciaccatura=!0),K.rest?o("Rests not allowed as grace notes '"+S[1][G]+"' while parsing grace note",k,T):O.push(K),W&&(K.endTie=!0,W=!1),K.startTie&&(W=!0),G=K.endChar,delete K.endChar,K.end_beam&&(K.endBeam=!0,delete K.end_beam)):(S[1][G]===" "?O.length>0&&(O[O.length-1].endBeam=!0):o("Unknown character '"+S[1][G]+"' while parsing grace note",k,T),G++)}if(O.length)return[S[0],O]}return[0]};function B(k,T){if(k[T]==="&"){for(var S=T;k[T]&&k[T]!==":"&&k[T]!=="|";)T++;return[T-S,k.substring(S+1,T)]}return[0]}function q(k){var T=k.origMeter;return!T||T.type!=="specified"||!T.value||T.value.length===0?1:parseInt(T.value[0].num,10)/parseInt(T.value[0].den,10)}var L=function(k,T){var S=t.macros[k[T]];if(S!==void 0)return(S[0]==="!"||S[0]==="+")&&(S=S.substring(1)),(S[S.length-1]==="!"||S[S.length-1]==="+")&&(S=S.substring(0,S.length-1)),u.includes(S)?[1,S]:m.includes(S)?(t.volumePosition==="hidden"&&(S=""),[1,S]):y.includes(S)?(t.dynamicPosition==="hidden"&&(S=""),[1,S]):(t.ignoredDecorations.includes(S)||o("Unknown macro: "+S,k,T),[1,""]);switch(k[T]){case".":if(k[T+1]==="("||k[T+1]==="-")break;return[1,"staccato"];case"u":return[1,"upbow"];case"v":return[1,"downbow"];case"~":return[1,"irishroll"];case"!":case"+":var O=d.getBrackettedSubstring(k,T,5);if(O[1].length>1&&(O[1][0]==="^"||O[1][0]==="_")&&(O[1]=O[1].substring(1)),u.includes(O[1]))return O;if(m.includes(O[1]))return t.volumePosition==="hidden"&&(O[1]=""),O;if(y.includes(O[1]))return t.dynamicPosition==="hidden"&&(O[1]=""),O;var G=g.findIndex(function(W){return O[1]===W[0]});return G>=0?(O[1]=g[G][1],O):(G=c.findIndex(function(W){return O[1]===W[0]}),G>=0?(O[1]=c[G][1],t.dynamicPosition==="hidden"&&(O[1]=""),O):k[T]==="!"&&(O[0]===1||k[T+O[0]-1]!=="!")?[1,null]:(o("Unknown decoration: "+O[1],k,T),O[1]="",O));case"H":return[1,"fermata"];case"J":return[1,"slide"];case"L":return[1,"accent"];case"M":return[1,"mordent"];case"O":return[1,"coda"];case"P":return[1,"pralltriller"];case"R":return[1,"roll"];case"S":return[1,"segno"];case"T":return[1,"trill"]}return[0,0]},D=function(k,T){for(var S=T;d.isWhiteSpace(k[T]);)T++;return[T-S]},P=function(k,T){var S=d.getBarLine(k,T);if(S.len===0)return[0,""];if(S.warn)return o(S.warn,k,T),[S.len,""];for(var O=0;O<k.length&&k[T+S.len+O]===" ";O++);var G=S.len;if(k[T+S.len+O]==="["&&(S.len+=O+1),k[T+S.len]==='"'&&k[T+S.len-1]==="["){var W=d.getBrackettedSubstring(k,T+S.len,5);return[S.len+W[0],S.token,W[1]]}var Y=d.getTokenOf(k.substring(T+S.len),"1234567890-,");return Y.len===0||Y.token[0]==="-"?[G,S.token]:[S.len+Y.len,S.token,Y.token]},M=function(k,T){var S={},O=T;for(k[T]==="."&&k[T+1]==="("&&(S.dottedSlur=!0,T++);k[T]==="("||d.isWhiteSpace(k[T]);)k[T]==="("&&(T+1<k.length&&k[T+1]>="2"&&k[T+1]<="9"?(S.triplet!==void 0?o("Can't nest triplets",k,T):(S.triplet=k[T+1]-"0",S.tripletQ=w[S.triplet],S.num_notes=S.triplet,T+2<k.length&&k[T+2]===":"&&(T+3<k.length&&k[T+3]===":"?T+4<k.length&&k[T+4]>="1"&&k[T+4]<="9"?(S.num_notes=k[T+4]-"0",T+=3):o("expected number after the two colons after the triplet to mark the duration",k,T):T+3<k.length&&k[T+3]>="1"&&k[T+3]<="9"?(S.tripletQ=k[T+3]-"0",T+4<k.length&&k[T+4]===":"?T+5<k.length&&k[T+5]>="1"&&k[T+5]<="9"&&(S.num_notes=k[T+5]-"0",T+=4):T+=2):o("expected number after the triplet to mark the duration",k,T))),T++):S.startSlur===void 0?S.startSlur=1:S.startSlur++),T++;return S.consumed=T-O,S};_.prototype.startNewLine=function(){var k={startChar:-1,endChar:-1};t.partForNextLine.title&&(k.part=t.partForNextLine),k.clef=t.currentVoice&&t.staves[t.currentVoice.staffNum].clef!==void 0?Object.assign({},t.staves[t.currentVoice.staffNum].clef):Object.assign({},t.clef);var T=t.currentVoice?t.currentVoice.scoreTranspose:0;if(k.key=b.standardKey(t.key.root+t.key.acc+t.key.mode,t.key.root,t.key.acc,T),k.key.mode=t.key.mode,t.key.impliedNaturals&&(k.key.impliedNaturals=t.key.impliedNaturals),t.key.explicitAccidentals)for(var S=0;S<t.key.explicitAccidentals.length;S++){for(var O=!1,G=0;G<k.key.accidentals.length;G++)k.key.accidentals[G].note===t.key.explicitAccidentals[S].note&&(k.key.accidentals[G].acc=t.key.explicitAccidentals[S].acc,O=!0);O||k.key.accidentals.push(t.key.explicitAccidentals[S])}if(t.targetKey=k.key,k.key.explicitAccidentals&&delete k.key.explicitAccidentals,b.addPosToKey(k.clef,k.key),t.meter!==null?(t.currentVoice?(t.staves.forEach(function(ee){ee.meter=t.meter}),k.meter=t.staves[t.currentVoice.staffNum].meter,t.staves[t.currentVoice.staffNum].meter=null):k.meter=t.meter,t.meter=null):t.currentVoice&&t.staves[t.currentVoice.staffNum].meter&&(k.meter=t.staves[t.currentVoice.staffNum].meter,t.staves[t.currentVoice.staffNum].meter=null),t.currentVoice&&t.currentVoice.name&&(k.name=t.currentVoice.name),t.vocalfont&&(k.vocalfont=t.vocalfont),t.tripletfont&&(k.tripletfont=t.tripletfont),t.gchordfont&&(k.gchordfont=t.gchordfont),t.style&&(k.style=t.style),t.currentVoice){var W=t.staves[t.currentVoice.staffNum];W.brace&&(k.brace=W.brace),W.bracket&&(k.bracket=W.bracket),W.connectBarLines&&(k.connectBarLines=W.connectBarLines),W.name&&(k.name=W.name[t.currentVoice.index]),W.subname&&(k.subname=W.subname[t.currentVoice.index]),t.currentVoice.stem&&(k.stem=t.currentVoice.stem),t.currentVoice.stafflines&&(k.stafflines=t.currentVoice.stafflines),t.currentVoice.staffscale&&(k.staffscale=t.currentVoice.staffscale),t.currentVoice.scale&&(k.scale=t.currentVoice.scale),t.currentVoice.color&&(k.color=t.currentVoice.color),t.currentVoice.style&&(k.style=t.currentVoice.style),t.currentVoice.transpose&&(k.clef.transpose=t.currentVoice.transpose),k.currentVoice=t.currentVoice;for(var Y=Object.keys(t.voices),K=0;K<Y.length;K++)k.currentVoice.staffNum===t.voices[Y[K]].staffNum&&k.currentVoice.index===t.voices[Y[K]].index&&(k.currentVoiceName=Y[K])}t.barNumbers===0&&H()&&t.currBarNumber!==1&&(k.barNumber=t.currBarNumber),n.startNewLine(k),t.key.impliedNaturals&&delete t.key.impliedNaturals,t.partForNextLine={},t.tempoForNextLine.length===4&&n.appendElement(t.tempoForNextLine[0],t.tempoForNextLine[1],t.tempoForNextLine[2],t.tempoForNextLine[3]),t.tempoForNextLine=[]};var A=function(k){return k.duration!==void 0&&k.duration<.25&&(k.end_beam=!0),k},F=function(k,T,S,O){var G=function(Q){return Q==="octave"||Q==="duration"||Q==="Zduration"||Q==="broken_rhythm"||Q==="end_slur"},W;k[T]==="."&&k[T+1]==="-"&&(W=!0,T++);for(var Y="startSlur",K=!1;;){switch(k[T]){case"(":if(Y==="startSlur")S.startSlur===void 0?S.startSlur=1:S.startSlur++;else return G(Y)?(S.endChar=T,S):null;break;case")":if(G(Y))S.endSlur===void 0?S.endSlur=1:S.endSlur++;else return null;break;case"^":if(Y==="startSlur")S.accidental="sharp",Y="sharp2";else if(Y==="sharp2")S.accidental="dblsharp",Y="pitch";else return G(Y)?(S.endChar=T,S):null;break;case"_":if(Y==="startSlur")S.accidental="flat",Y="flat2";else if(Y==="flat2")S.accidental="dblflat",Y="pitch";else return G(Y)?(S.endChar=T,S):null;break;case"=":if(Y==="startSlur")S.accidental="natural",Y="pitch";else return G(Y)?(S.endChar=T,S):null;break;case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"a":case"b":case"c":case"d":case"e":case"f":case"g":if(Y==="startSlur"||Y==="sharp2"||Y==="flat2"||Y==="pitch"){if(S.pitch=e[k[T]],S.pitch+=7*(t.currentVoice&&t.currentVoice.octave!==void 0?t.currentVoice.octave:t.octave),S.name=k[T],S.accidental&&(S.name=x[S.accidental]+S.name),h.note(t,S),Y="octave",O&&t.next_note_duration!==0?(S.duration=t.default_length*t.next_note_duration,t.next_note_duration=0,K=!0):S.duration=t.default_length,t.clef&&t.clef.type==="perc"||t.currentVoice&&t.currentVoice.clef==="perc"){var ee=k[T];S.accidental&&(ee=x[S.accidental]+ee),a.formatting&&a.formatting.midi&&a.formatting.midi.drummap&&(S.midipitch=a.formatting.midi.drummap[ee])}}else return G(Y)?(S.endChar=T,S):null;break;case",":if(Y==="octave")S.pitch-=7,S.name+=",";else return G(Y)?(S.endChar=T,S):null;break;case"'":if(Y==="octave")S.pitch+=7,S.name+="'";else return G(Y)?(S.endChar=T,S):null;break;case"x":case"X":case"y":case"z":case"Z":if(Y==="startSlur")S.rest={type:p[k[T]]},delete S.accidental,delete S.startSlur,delete S.startTie,delete S.endSlur,delete S.endTie,delete S.end_beam,delete S.grace_notes,S.rest.type.indexOf("multimeasure")>=0?(S.duration=a.getBarLength(),S.rest.text=1,Y="Zduration"):(O&&t.next_note_duration!==0?(S.duration=t.default_length*t.next_note_duration,t.next_note_duration=0,K=!0):S.duration=t.default_length,Y="duration");else return G(Y)?(S.endChar=T,S):null;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"/":if(Y==="octave"||Y==="duration"){var $=d.getFraction(k,T);for(S.duration=S.duration*$.value,S.endChar=$.index;$.index<k.length&&(d.isWhiteSpace(k[$.index])||k[$.index]==="-");)k[$.index]==="-"?S.startTie={}:S=A(S),$.index++;T=$.index-1,Y="broken_rhythm"}else if(Y==="sharp2")S.accidental="quartersharp",Y="pitch";else if(Y==="flat2")S.accidental="quarterflat",Y="pitch";else if(Y==="Zduration"){var ne=d.getNumber(k,T);return S.duration=ne.num*a.getBarLength(),S.rest.text=ne.num,S.endChar=ne.index,S}else return null;break;case"-":if(Y==="startSlur")n.addTieToLastNote(W),S.endTie=!0;else if(Y==="octave"||Y==="duration"||Y==="end_slur")if(S.startTie={},!K&&O)Y="broken_rhythm";else return d.isWhiteSpace(k[T+1])&&A(S),S.endChar=T+1,S;else return Y==="broken_rhythm"?(S.endChar=T,S):null;break;case" ":case"	":if(G(Y)){S.end_beam=!0,W=!1;do k[T]==="."&&k[T+1]==="-"&&(W=!0,T++),k[T]==="-"&&(S.startTie={},W&&(S.startTie.style="dotted")),T++;while(T<k.length&&(d.isWhiteSpace(k[T])||k[T]==="-")||k[T]==="."&&k[T+1]==="-");if(S.endChar=T,!K&&O&&(k[T]==="<"||k[T]===">"))T--,Y="broken_rhythm";else return S}else return null;break;case">":case"<":if(G(Y))if(O){var ie=z(k,T);T+=ie[0]-1,t.next_note_duration=ie[2],S.duration=ie[1]*S.duration,Y="end_slur"}else return S.endChar=T,S;else return null;break;default:return G(Y)?(S.endChar=T,S):null}if(T++,T===k.length)return G(Y)?(S.endChar=T,S):null}return null},z=function(k,T){switch(k[T]){case">":return T<k.length-2&&k[T+1]===">"&&k[T+2]===">"?[3,1.875,.125]:T<k.length-1&&k[T+1]===">"?[2,1.75,.25]:[1,1.5,.5];case"<":return T<k.length-2&&k[T+1]==="<"&&k[T+2]==="<"?[3,.125,1.875]:T<k.length-1&&k[T+1]==="<"?[2,.25,1.75]:[1,.5,1.5]}return null};function H(){return t.currentVoice===void 0||t.currentVoice.staffNum===0&&t.currentVoice.index===0}return Pt=_,Pt}var qt,Wa;function ec(){if(Wa)return qt;Wa=1;var b=Oe(),h=function(d,o){this.lineIndex=0,this.lines=d,this.multilineVars=o,this.skipWhiteSpace=function(r){for(var f=0;f<r.length;f++)if(!this.isWhiteSpace(r[f]))return f;return r.length};var t=function(r,f){return f>=r.length};this.eatWhiteSpace=function(r,f){for(var e=f;e<r.length;e++)if(!this.isWhiteSpace(r[e]))return e-f;return e-f},this.getKeyPitch=function(r){var f=this.skipWhiteSpace(r);if(t(r,f))return{len:0};switch(r[f]){case"A":return{len:f+1,token:"A"};case"B":return{len:f+1,token:"B"};case"C":return{len:f+1,token:"C"};case"D":return{len:f+1,token:"D"};case"E":return{len:f+1,token:"E"};case"F":return{len:f+1,token:"F"};case"G":return{len:f+1,token:"G"}}return{len:0}},this.getSharpFlat=function(r){if(r==="bass")return{len:0};switch(r[0]){case"#":return{len:1,token:"#"};case"b":return{len:1,token:"b"}}return{len:0}},this.getMode=function(r){var f=function(x,w){for(;w<x.length&&(x[w]>="a"&&x[w]<="z"||x[w]>="A"&&x[w]<="Z");)w++;return w},e=this.skipWhiteSpace(r);if(t(r,e))return{len:0};var p=r.substring(e,e+3).toLowerCase();switch((p.length>1&&p[1]===" "||p[1]==="^"||p[1]==="_"||p[1]==="=")&&(p=p[0]),p){case"mix":return{len:f(r,e),token:"Mix"};case"dor":return{len:f(r,e),token:"Dor"};case"phr":return{len:f(r,e),token:"Phr"};case"lyd":return{len:f(r,e),token:"Lyd"};case"loc":return{len:f(r,e),token:"Loc"};case"aeo":return{len:f(r,e),token:"m"};case"maj":return{len:f(r,e),token:""};case"ion":return{len:f(r,e),token:""};case"min":return{len:f(r,e),token:"m"};case"m":return{len:f(r,e),token:"m"}}return{len:0}},this.getClef=function(r,f){var e=r,p=this.skipWhiteSpace(r);if(t(r,p))return{len:0};var x=!1,w=r.substring(p);if(b.startsWith(w,"clef=")&&(x=!0,w=w.substring(5),p+=5),w.length===0&&x)return{len:p+5,warn:"No clef specified: "+e};var _=this.skipWhiteSpace(w);if(t(w,_))return{len:0};_>0&&(p+=_,w=w.substring(_));var E=null;if(b.startsWith(w,"treble"))E="treble";else if(b.startsWith(w,"bass3"))E="bass3";else if(b.startsWith(w,"bass"))E="bass";else if(b.startsWith(w,"tenor"))E="tenor";else if(b.startsWith(w,"alto2"))E="alto2";else if(b.startsWith(w,"alto1"))E="alto1";else if(b.startsWith(w,"alto"))E="alto";else if(!f&&x&&b.startsWith(w,"none"))E="none";else if(b.startsWith(w,"perc"))E="perc";else if(!f&&x&&b.startsWith(w,"C"))E="tenor";else if(!f&&x&&b.startsWith(w,"F"))E="bass";else if(!f&&x&&b.startsWith(w,"G"))E="treble";else return{len:p+5,warn:"Unknown clef specified: "+e};return w=w.substring(E.length),_=this.isMatch(w,"+8"),_>0?E+="+8":(_=this.isMatch(w,"-8"),_>0&&(E+="-8")),{len:p+E.length,token:E,explicit:x}},this.getBarLine=function(r,f){switch(r[f]){case"]":switch(++f,r[f]){case"|":return{len:2,token:"bar_thick_thin"};case"[":return++f,r[f]>="1"&&r[f]<="9"||r[f]==='"'?{len:2,token:"bar_invisible"}:{len:1,warn:"Unknown bar symbol"};default:return{len:1,token:"bar_invisible"}}case":":switch(++f,r[f]){case":":return{len:2,token:"bar_dbl_repeat"};case"|":switch(++f,r[f]){case"]":switch(++f,r[f]){case"|":return++f,r[f]===":"?{len:5,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:3,token:"bar_right_repeat"}}case"|":return++f,r[f]===":"?{len:4,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:2,token:"bar_right_repeat"}}default:return{len:1,warn:"Unknown bar symbol"}}case"[":if(++f,r[f]==="|")switch(++f,r[f]){case":":return{len:3,token:"bar_left_repeat"};case"]":return{len:3,token:"bar_invisible"};default:return{len:2,token:"bar_thick_thin"}}else return r[f]>="1"&&r[f]<="9"||r[f]==='"'?{len:1,token:"bar_invisible"}:{len:0};case"|":switch(++f,r[f]){case"]":return{len:2,token:"bar_thin_thick"};case"|":return++f,r[f]===":"?{len:3,token:"bar_left_repeat"}:{len:2,token:"bar_thin_thin"};case":":for(var e=0;r[f+e]===":";)e++;return{len:1+e,token:"bar_left_repeat"};default:return{len:1,token:"bar_thin"}}}return{len:0}},this.getTokenOf=function(r,f){for(var e=0;e<r.length;e++)if(f.indexOf(r[e])<0)return{len:e,token:r.substring(0,e)};return{len:e,token:r}},this.getToken=function(r,f,e){for(var p=f;p<e&&!this.isWhiteSpace(r[p]);)p++;return r.substring(f,p)},this.isMatch=function(r,f){var e=this.skipWhiteSpace(r);return t(r,e)?0:b.startsWith(r.substring(e),f)?e+f.length:0},this.getPitchFromTokens=function(r){var f={},e={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};if(f.position=e[r[0].token],f.position===void 0)return{warn:"Pitch expected. Found: "+r[0].token};for(r.shift();r.length;)switch(r[0].token){case",":f.position-=7,r.shift();break;case"'":f.position+=7,r.shift();break;default:return f}return f},this.getKeyAccidentals2=function(r){for(var f;r.length>0;){var e;if(r[0].token==="^"){if(e="sharp",r.shift(),r.length===0)return{accs:f,warn:"Expected note name after "+e};switch(r[0].token){case"^":e="dblsharp",r.shift();break;case"/":e="quartersharp",r.shift();break}}else if(r[0].token==="=")e="natural",r.shift();else if(r[0].token==="_"){if(e="flat",r.shift(),r.length===0)return{accs:f,warn:"Expected note name after "+e};switch(r[0].token){case"_":e="dblflat",r.shift();break;case"/":e="quarterflat",r.shift();break}}else return{accs:f};if(r.length===0)return{accs:f,warn:"Expected note name after "+e};switch(r[0].token[0]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":f===void 0&&(f=[]),f.push({acc:e,note:r[0].token[0]}),r[0].token.length===1?r.shift():r[0].token=r[0].token.substring(1);break;default:return{accs:f,warn:"Expected note name after "+e+" Found: "+r[0].token}}}return{accs:f}},this.getKeyAccidental=function(r){var f={"^":"sharp","^^":"dblsharp","=":"natural",_:"flat",__:"dblflat","_/":"quarterflat","^/":"quartersharp"},e=this.skipWhiteSpace(r);if(t(r,e))return{len:0};var p=null;switch(r[e]){case"^":case"_":case"=":p=r[e];break;default:return{len:0}}if(e++,t(r,e))return{len:1,warn:"Expected note name after accidental"};switch(r[e]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:e+1,token:{acc:f[p],note:r[e]}};case"^":case"_":case"/":if(p+=r[e],e++,t(r,e))return{len:2,warn:"Expected note name after accidental"};switch(r[e]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:e+1,token:{acc:f[p],note:r[e]}};default:return{len:2,warn:"Expected note name after accidental"}}break;default:return{len:1,warn:"Expected note name after accidental"}}},this.isWhiteSpace=function(r){return r===" "||r==="	"||r===""},this.getMeat=function(r,f,e){var p=r.indexOf("%",f);for(p>=0&&p<e&&(e=p);f<e&&(r[f]===" "||r[f]==="	"||r[f]==="");)f++;for(;f<e&&(r[e-1]===" "||r[e-1]==="	"||r[e-1]==="");)e--;return{start:f,end:e}};var a=function(r){return r>="A"&&r<="Z"||r>="a"&&r<="z"},n=function(r){return r>="0"&&r<="9"};this.tokenize=function(r,f,e,p){var x=this.getMeat(r,f,e);f=x.start,e=x.end;for(var w=[],_;f<e;){if(r[f]==='"'){for(_=f+1;_<e&&r[_]!=='"';)_++;w.push({type:"quote",token:r.substring(f+1,_),start:f+1,end:_}),_++}else if(a(r[f])){if(_=f+1,p)for(;_<e&&!this.isWhiteSpace(r[_]);)_++;else for(;_<e&&a(r[_]);)_++;w.push({type:"alpha",token:r.substring(f,_),continueId:n(r[_]),start:f,end:_}),f=_+1}else if(r[f]==="."&&n(r[_+1])){_=f+1;for(var E=null,N=null;_<e&&n(r[_]);)_++;N=parseFloat(r.substring(f,_)),w.push({type:"number",token:r.substring(f,_),intt:E,floatt:N,continueId:a(r[_]),start:f,end:_}),f=_+1}else if(n(r[f])||r[f]==="-"&&n(r[_+1])){_=f+1;for(var I=null,R=null;_<e&&n(r[_]);)_++;if(r[_]==="."&&n(r[_+1]))for(_++;_<e&&n(r[_]);)_++;else I=parseInt(r.substring(f,_));R=parseFloat(r.substring(f,_)),w.push({type:"number",token:r.substring(f,_),intt:I,floatt:R,continueId:a(r[_]),start:f,end:_}),f=_+1}else r[f]===" "||r[f]==="	"||w.push({type:"punct",token:r[f],start:f,end:f+1}),_=f+1;f=_}return w},this.getVoiceToken=function(r,f,e){for(var p=f;p<e&&this.isWhiteSpace(r[p])||r[p]==="=";)p++;if(r[p]==='"'){var x=r.indexOf('"',p+1);return x===-1||x>=e?{len:1,err:"Missing close quote"}:{len:x-f+1,token:this.translateString(r.substring(p+1,x))}}else{for(var w=p;w<e&&!this.isWhiteSpace(r[w])&&r[w]!=="=";)w++;return{len:w-f+1,token:r.substring(p,w)}}};var l={"`a":"à","'a":"á","^a":"â","~a":"ã",'"a':"ä",oa:"å",aa:"å","=a":"ā",ua:"ă",";a":"ą","`e":"è","'e":"é","^e":"ê",'"e':"ë","=e":"ē",ue:"ĕ",";e":"ę",".e":"ė","`i":"ì","'i":"í","^i":"î",'"i':"ï","=i":"ī",ui:"ĭ",";i":"į","`o":"ò","'o":"ó","^o":"ô","~o":"õ",'"o':"ö","=o":"ō",uo:"ŏ","/o":"ø","`u":"ù","'u":"ú","^u":"û","~u":"ũ",'"u':"ü",ou:"ů","=u":"ū",uu:"ŭ",";u":"ų","`A":"À","'A":"Á","^A":"Â","~A":"Ã",'"A':"Ä",oA:"Å",AA:"Å","=A":"Ā",uA:"Ă",";A":"Ą","`E":"È","'E":"É","^E":"Ê",'"E':"Ë","=E":"Ē",uE:"Ĕ",";E":"Ę",".E":"Ė","`I":"Ì","'I":"Í","^I":"Î","~I":"Ĩ",'"I':"Ï","=I":"Ī",uI:"Ĭ",";I":"Į",".I":"İ","`O":"Ò","'O":"Ó","^O":"Ô","~O":"Õ",'"O':"Ö","=O":"Ō",uO:"Ŏ","/O":"Ø","`U":"Ù","'U":"Ú","^U":"Û","~U":"Ũ",'"U':"Ü",oU:"Ů","=U":"Ū",uU:"Ŭ",";U":"Ų",ae:"æ",AE:"Æ",oe:"œ",OE:"Œ",ss:"ß","'c":"ć","^c":"ĉ",uc:"č",cc:"ç",".c":"ċ",cC:"Ç","'C":"Ć","^C":"Ĉ",uC:"Č",".C":"Ċ","~N":"Ñ","~n":"ñ","=s":"š",vs:"š",DH:"Ð",dh:"ð",HO:"Ő",Ho:"ő",HU:"Ű",Hu:"ű","'Y":"Ý","'y":"ý","^Y":"Ŷ","^y":"ŷ",'"Y':"Ÿ",'"y':"ÿ",vS:"Š",vZ:"Ž",vz:"ž"},u={"#":"♯",b:"♭","=":"♮"},m={201:"♯",202:"♭",203:"♮",241:"¡",242:"¢",252:"a",262:"2",272:"o",302:"Â",312:"Ê",322:"Ò",332:"Ú",342:"â",352:"ê",362:"ò",372:"ú",243:"£",253:"«",263:"3",273:"»",303:"Ã",313:"Ë",323:"Ó",333:"Û",343:"ã",353:"ë",363:"ó",373:"û",244:"¤",254:"¬",264:"  ́",274:"1⁄4",304:"Ä",314:"Ì",324:"Ô",334:"Ü",344:"ä",354:"ì",364:"ô",374:"ü",245:"¥",255:"-",265:"μ",275:"1⁄2",305:"Å",315:"Í",325:"Õ",335:"Ý",345:"å",355:"í",365:"õ",375:"ý",246:"¦",256:"®",266:"¶",276:"3⁄4",306:"Æ",316:"Î",326:"Ö",336:"Þ",346:"æ",356:"î",366:"ö",376:"þ",247:"§",257:" ̄",267:"·",277:"¿",307:"Ç",317:"Ï",327:"×",337:"ß",347:"ç",357:"ï",367:"÷",377:"ÿ",250:" ̈",260:"°",270:" ̧",300:"À",310:"È",320:"Ð",330:"Ø",340:"à",350:"è",360:"ð",370:"ø",251:"©",261:"±",271:"1",301:"Á",311:"É",321:"Ñ",331:"Ù",341:"á",351:"é",361:"ñ",371:"ù"};this.translateString=function(r){var f=r.split("\\");if(f.length===1)return r;var e=null;return f.forEach(function(p){if(e===null)e=p;else{var x=l[p.substring(0,2)];x!==void 0?e+=x+p.substring(2):(x=m[p.substring(0,3)],x!==void 0?e+=x+p.substring(3):(x=u[p.substring(0,1)],x!==void 0?e+=x+p.substring(1):e+="\\"+p))}}),e},this.getNumber=function(r,f){for(var e=0;f<r.length;)switch(r[f]){case"0":e=e*10,f++;break;case"1":e=e*10+1,f++;break;case"2":e=e*10+2,f++;break;case"3":e=e*10+3,f++;break;case"4":e=e*10+4,f++;break;case"5":e=e*10+5,f++;break;case"6":e=e*10+6,f++;break;case"7":e=e*10+7,f++;break;case"8":e=e*10+8,f++;break;case"9":e=e*10+9,f++;break;default:return{num:e,index:f}}return{num:e,index:f}},this.getFraction=function(r,f){var e=1,p=1;if(r[f]!=="/"){var x=this.getNumber(r,f);e=x.num,f=x.index}if(r[f]==="/")if(f++,r[f]==="/"){for(var w=.5;r[f++]==="/";)w=w/2;return{value:e*w,index:f-1}}else{var _=f,E=this.getNumber(r,f);E.num===0&&_===f&&(E.num=2),E.num!==0&&(p=E.num),f=E.index}return{value:e/p,index:f}};function y(r){const e=/^(\d+)\./.exec(r);return e?e[1]:null}var g=[{match:/,\s*[Tt]he$/,replace:"The "},{match:/,\s*[Aa]$/,replace:"A "},{match:/,\s*[Aa]n$/,replace:"An "}];this.theReverser=function(r){for(var f=0;f<g.length;f++){var e=g[f],p=r.match(e.match);if(p){var x=y(r);x&&(r=r.replace(x+".",""),r=r.trim());var w=p[0].length,_=e.replace+r.substring(0,r.length-w);return x&&(_=x+". "+_),_}}return r},this.stripComment=function(r){var f=r.indexOf("%");return f>=0?b.strip(r.substring(0,f)):b.strip(r)},this.getInt=function(r){var f=parseInt(r);if(isNaN(f))return{digits:0};var e=""+f,p=r.indexOf(e);return{value:f,digits:p+e.length}},this.getFloat=function(r){var f=parseFloat(r);if(isNaN(f))return{digits:0};var e=""+f,p=r.indexOf(e);return{value:f,digits:p+e.length}},this.getMeasurement=function(r){if(r.length===0)return{used:0};var f=1,e="";if(r[0].token==="-")r.shift(),e="-",f++;else if(r[0].type!=="number")return{used:0};if(e+=r.shift().token,r.length===0)return{used:1,value:parseInt(e)};var p=r.shift();if(p.token==="."){if(f++,r.length===0)return{used:f,value:parseInt(e)};if(r[0].type==="number"&&(p=r.shift(),e=e+"."+p.token,f++,r.length===0))return{used:f,value:parseFloat(e)};p=r.shift()}switch(p.token){case"pt":return{used:f+1,value:parseFloat(e)};case"px":return{used:f+1,value:parseFloat(e)};case"cm":return{used:f+1,value:parseFloat(e)/2.54*72};case"in":return{used:f+1,value:parseFloat(e)*72};default:return r.unshift(p),{used:f,value:parseFloat(e)}}};var c=function(r){return r=r.replace(/\\n/g,`
`),r=r.replace(/\\"/g,'"'),r};this.getBrackettedSubstring=function(r,f,e,p){for(var x=p||r[f],w=f+1,_=!1;w<r.length&&(_||r[w]!==x);)_=r[w]==="\\",++w;return r[w]===x?[w-f+1,c(r.substring(f+1,w)),!0]:(w=f+e,w>r.length-1&&(w=r.length-1),[w-f+1,c(r.substring(f+1,w)),!1])}};return h.prototype.peekLine=function(){return this.lines[this.lineIndex]},h.prototype.nextLine=function(){if(this.lineIndex>0&&(this.multilineVars.iChar+=this.lines[this.lineIndex-1].length+1),this.lineIndex<this.lines.length){var d=this.lines[this.lineIndex];return this.lineIndex++,d}return null},qt=h,qt}var Dt,Ua;function Is(){if(Ua)return Dt;Ua=1;function b(y,g,c){if(!(!g||y.lines.length===0)){var r=y.deline({lineBreaks:!1}),f=d(r,g);y.lines=h(r,f,c),y.lineBreaks=f}}function h(y,g,c){for(var r=[],f=[],e=[],p=1,x=0;x<g.length;x++){var w=g[x];if(y[w.ogLine].staff){var _=y[w.ogLine].staff[w.staff];if(r[w.line]||(r[w.line]={staff:[]}),!r[w.line].staff[w.staff]){r[w.line].staff[w.staff]={voices:[]},c!==void 0&&w.staff===0&&w.line>0&&(r[w.line].staff[w.staff].barNumber=p);for(var E=Object.keys(_),N=0;N<E.length;N++){var I=E[N]==="voices";E[N]==="meter"&&w.line!==0&&(I=!0),I||(r[w.line].staff[w.staff][E[N]]=_[E[N]])}f[w.staff]&&(r[w.line].staff[w.staff].key=f[w.staff])}r[w.line].staff[w.staff].voices[w.voice]||(r[w.line].staff[w.staff].voices[w.voice]=[]),r[w.line].staff[w.staff].voices[w.voice]=y[w.ogLine].staff[w.staff].voices[w.voice].slice(w.start,w.end+1),e[w.staff*10+w.voice]&&r[w.line].staff[w.staff].voices[w.voice].unshift({el_type:"stem",direction:e[w.staff*10+w.voice].direction});for(var R=r[w.line].staff[w.staff].voices[w.voice],C=R.length-1;C>=0;C--)if(R[C].el_type==="key"){f[w.staff]={root:R[C].root,acc:R[C].acc,mode:R[C].mode,accidentals:R[C].accidentals.filter(function(q){return q.acc!=="natural"})};break}for(C=R.length-1;C>=0;C--)if(R[C].el_type==="stem"){e[w.staff*10+w.voice]={direction:R[C].direction};break}if(c!==void 0&&w.staff===0&&w.voice===0)for(C=0;C<R.length;C++)R[C].el_type==="bar"&&(p++,C===R.length-1?delete R[C].barNumber:R[C].barNumber=p)}else r[w.line]=y[w.ogLine]}for(var B=0;B<r.length;B++)r[B].staff&&(r[B].staff=r[B].staff.filter(function(q){return q!=null}));return r}function d(y,g){for(var c=[],r=0,f=0,e=0,p=0;p<y.length;p++){var x=y[p];if(x.staff){var w=f,_=g[r];r++;for(var E=0;E<x.staff.length;E++)for(var N=x.staff[E],I=0;I<N.voices.length;I++){e=w;for(var R=0,C=0,B=N.voices[I],q=0,L=0;L<B.length;L++){var D=B[L];D.el_type==="bar"&&(_[C]===R&&(c.push({ogLine:p,line:e,staff:E,voice:I,start:q,end:L}),q=L+1,e++,f=Math.max(f,e),C++),R++)}c.push({ogLine:p,line:e,staff:E,voice:I,start:q,end:B.length}),e++,f=Math.max(f,e)}}else c.push({ogLine:p,line:e}),e++,f=Math.max(f,e)}return c}function o(y,g){for(var c=[],r=[],f=0,e=0;e<y.length;e++){var p=y[e],x=f+p;if(x<g)f=x;else{var w=g-f,_=x-g;w<_&&f>0?(c.push(e-1),r.push(Math.round(f-p)),f=p):e<y.length-1&&(c.push(e),r.push(Math.round(f)),f=0)}}return r.push(Math.round(f)),{lineBreaks:c,totals:r}}function t(y){for(var g=[],c=0;c<y.length;c++)g.push(y[c]);return g}function a(y,g,c,r,f,e,p,x,w,_,E){for(var N=_;N<y.length;N++){var I=y[N];c+=I,r+=I;var R=Math.abs(c-g[x]),C=Math.abs(R-e)<g[0]/10;if(C)if(R<e){var B=t(f),q=t(w);q.push(N-1),B.push(r-I),E.push({accumulator:c,lineAccumulator:I,lineWidths:B,lastVariance:Math.abs(c-g[x+1]),highestVariance:Math.max(p,e),currLine:x+1,lineBreaks:q,startIndex:N+1})}else R>e&&N<y.length-1&&(B=t(f),q=t(w),E.push({accumulator:c,lineAccumulator:r,lineWidths:B,lastVariance:R,highestVariance:Math.max(p,R),currLine:x,lineBreaks:q,startIndex:N+1}));R>e?(w.push(N-1),x++,p=Math.max(p,e),e=Math.abs(c-g[x]),f.push(r-I),r=I):e=R}f.push(r)}function n(y,g,c,r){for(var f=Math.ceil(y.total/g),e=Math.floor(y.total/f),p=[],x=0;x<f;x++)p.push(e*(x+1));var w=[];w.push({accumulator:0,lineAccumulator:0,lineWidths:[],lastVariance:999999,highestVariance:0,currLine:0,lineBreaks:[],startIndex:0});for(var _=0;_<w.length;)a(y.measureWidths,p,w[_].accumulator,w[_].lineAccumulator,w[_].lineWidths,w[_].lastVariance,w[_].highestVariance,w[_].currLine,w[_].lineBreaks,w[_].startIndex,w),_++;for(x=0;x<w.length;x++){var E=w[x];E.variances=[],E.aveVariance=0;for(var N=0;N<E.lineWidths.length;N++){var I=E.lineWidths[N];E.variances.push(I-p[0]),E.aveVariance+=Math.abs(I-p[0])}E.aveVariance=E.aveVariance/E.lineWidths.length,r.attempts.push({type:"optimizeLineWidths",lineBreaks:E.lineBreaks,variances:E.variances,aveVariance:E.aveVariance,widths:y.measureWidths})}var R=9999999,C=-1;for(x=0;x<w.length;x++)E=w[x],E.aveVariance<R&&(R=E.aveVariance,C=x);return{failed:!1,lineBreaks:w[C].lineBreaks,variance:w[C].highestVariance}}function l(y,g,c){for(var r=[],f=[],e=0,p=!1,x=0;x<y.length;x++)e+=y[x],e>g&&(p=!0),x%c===c-1&&(x!==y.length-1&&r.push(x),f.push(Math.round(e)),e=0);return{failed:p,totals:f,lineBreaks:r}}function u(y,g,c){var r={lineBreaks:y,staffwidth:g};for(var f in c)c.hasOwnProperty(f)&&f!=="wrap"&&f!=="staffwidth"&&(r[f]=c[f]);return{revisedParams:r}}function m(y,g,c){if(g.length===0||c.staffwidth<g[0].left)return{reParse:!1,explanation:"Staff width is narrower than the margin",revisedParams:c};var r=c.scale?Math.max(c.scale,.1):1,f=c.wrap.minSpacing?Math.max(parseFloat(c.wrap.minSpacing),1):1,e=c.wrap.minSpacingLimit?Math.max(parseFloat(c.wrap.minSpacingLimit),1):f-.1,p=c.wrap.maxSpacing?Math.max(parseFloat(c.wrap.maxSpacing),1):void 0;c.wrap.lastLineLimit&&!p&&(p=Math.max(parseFloat(c.wrap.lastLineLimit),1));for(var x=c.wrap.preferredMeasuresPerLine?Math.max(parseInt(c.wrap.preferredMeasuresPerLine,10),0):void 0,w=[],_=[],E=0;E<g.length;E++){var N=g[E],I=c.staffwidth-N.left,R=I/f/r,C=I/p/r,B=I/e/r,q={widths:N,lineBreakPoint:R,minLineSize:C,attempts:[],staffWidth:c.staffwidth,minWidth:Math.round(B)},L=null;if(x){var D=l(N.measureWidths,R,x);q.attempts.push({type:"Fixed Measures Per Line",preferredMeasuresPerLine:x,lineBreaks:D.lineBreaks,failed:D.failed,totals:D.totals}),D.failed||(L=D.lineBreaks)}if(!L){var P=o(N.measureWidths,R);q.attempts.push({type:"Free Form",lineBreaks:P.lineBreaks,totals:P.totals}),L=P.lineBreaks,L.length>0&&N.measureWidths.length<25&&(P=n(N,R,L,q),q.attempts.push({type:"Optimize",failed:P.failed,reason:P.reason,lineBreaks:P.lineBreaks,totals:P.totals}),P.failed||(L=P.lineBreaks))}w.push(L),_.push(q)}var M=c.staffwidth,A=u(w,M,c);return A.explanation=_,A.reParse=!0,A}return Dt={wrapLines:b,calcLineWraps:m},Dt}var Ft,Va;function Ee(){if(Va)return Ft;Va=1;var b={};return b.FONTEM=360,b.FONTSIZE=30,b.STEP=b.FONTSIZE*93/720,b.SPACE=10,b.TOPNOTE=15,b.STAVEHEIGHT=100,b.INDENT=50,Ft=b,Ft}var Ot,Xa;function Rs(){if(Xa)return Ot;Xa=1;var b,h=Oe();return function(){var d=1,o=128;b=function(e,p){p=p||{};var x,w=p.program||0,_=p.midiTranspose||0;e.visualTranspose&&(_-=e.visualTranspose);var E=p.channel||0,N=!1,I=p.drum||"",R=p.drumBars||1,C=p.drumIntro||0,B=I!=="",q=!!p.drumOff,L=[],D=50;w=parseInt(w,10),_=parseInt(_,10),E=parseInt(E,10),E===10&&(w=o),I=I.split(" "),R=parseInt(R,10),C=parseInt(C,10);var P=e.formatting.bagpipes;P&&(w=71);var M=[];if(e.formatting.midi){var A=e.formatting.midi;A.program&&A.program.length>0&&(w=A.program[0],A.program.length>1&&(w=A.program[1],E=A.program[0]),N=!0),A.transpose&&(_=A.transpose[0]),A.channel&&(E=A.channel[0],N=!0),A.drum&&(I=A.drum),A.drumbars&&(R=A.drumbars[0]),A.drumon&&(B=!0),E===10&&(w=o),A.beat&&M.push({el_type:"beat",beats:A.beat}),A.nobeataccents&&M.push({el_type:"beataccents",value:!1})}p.qpm?x=parseInt(p.qpm,10):e.metaText.tempo?x=m(e.metaText.tempo,e.getBeatLength()):p.defaultQpm?x=p.defaultQpm:x=180;var F=[];P&&F.push({el_type:"bagpipes"}),F.push({el_type:"instrument",program:w}),E&&F.push({el_type:"channel",channel:E}),_&&F.push({el_type:"transpose",transpose:_}),F.push({el_type:"tempo",qpm:x});for(var z=0;z<M.length;z++)F.push(M[z]);var H=[],k=[],T=[],S=[0],O={};O[0]={el_type:"tempo",qpm:x,timing:0};for(var G,W=[],Y=[],K=!1,ee=e.lines,$=0;$<ee.length;$++){var ne=ee[$];if(ne.staff){let Ie=function(Ce){var Le={pppp:[15,10,5,1],ppp:[30,20,10,1],pp:[45,35,20,1],p:[60,50,35,1],mp:[75,65,50,1],mf:[90,80,65,1],f:[105,95,80,1],ff:[120,110,95,1],fff:[127,125,110,1],ffff:[127,125,110,1]},Te;if(Ce.decoration)if(Ce.decoration.indexOf("pppp")>=0?Te="pppp":Ce.decoration.indexOf("ppp")>=0?Te="ppp":Ce.decoration.indexOf("pp")>=0?Te="pp":Ce.decoration.indexOf("p")>=0?Te="p":Ce.decoration.indexOf("mp")>=0?Te="mp":Ce.decoration.indexOf("mf")>=0?Te="mf":Ce.decoration.indexOf("f")>=0?Te="f":Ce.decoration.indexOf("ff")>=0?Te="ff":Ce.decoration.indexOf("fff")>=0?Te="fff":Ce.decoration.indexOf("ffff")>=0&&(Te="ffff"),Te&&(G=Le[Te].slice(0),H[Q].push({el_type:"beat",beats:G.slice(0)}),k[J]=!1,T[J]=!1),Ce.decoration.indexOf("crescendo(")>=0){var Ke=t(ve,j,"crescendo)"),Qe=Math.min(127,G[0]+D),Je=a(ve,j+Ke+1,Object.keys(Le));Je&&(Qe=Le[Je][0]),Ke>0?k[J]=Math.floor((Qe-G[0])/Ke):k[J]=!1,T[J]=!1}else if(Ce.decoration.indexOf("crescendo)")>=0)k[J]=!1;else if(Ce.decoration.indexOf("diminuendo(")>=0){var Ze=t(ve,j,"diminuendo)"),Be=Math.max(15,G[0]-D),_a=a(ve,j+Ze+1,Object.keys(Le));_a&&(Be=Le[_a][0]),k[J]=!1,Ze>0?T[J]=Math.floor((Be-G[0])/Ze):T[J]=!1}else Ce.decoration.indexOf("diminuendo)")>=0&&(T[J]=!1)};for(var Me=Ie,ie=ne.staff,Q=0,se=0;se<ie.length;se++){var te=ie[se];if(!(te.clef&&te.clef.type==="TAB"))for(var J=0;J<te.voices.length;J++){var ve=te.voices[J];if(!H[Q]){H[Q]=[].concat(JSON.parse(JSON.stringify(F)));var fe=u(ne.staff,Q);fe&&H[Q].unshift({el_type:"name",trackName:fe})}if(_&&te.clef.type==="perc"&&H[Q].push({el_type:"transpose",transpose:0}),te.clef&&te.clef.type==="perc"&&!N)for(var ue=0;ue<H[Q].length;ue++)H[Q][ue].el_type==="instrument"&&(H[Q][ue].program=o);else te.key&&c(H[Q],te.key);te.meter&&r(H[Q],te.meter),!K&&B&&(H[Q].push({el_type:"drum",params:{pattern:I,bars:R,on:B,intro:C}}),K=!0),te.clef&&te.clef.type!=="perc"&&te.clef.transpose&&(te.clef.el_type="clef",H[Q].push({el_type:"transpose",transpose:te.clef.transpose})),te.clef&&te.clef.type&&(te.clef.type.indexOf("-8")>=0?H[Q].push({el_type:"transpose",transpose:-12}):te.clef.type.indexOf("+8")>=0&&H[Q].push({el_type:"transpose",transpose:12})),e.formatting.midi&&e.formatting.midi.drumoff&&(H[Q].push({el_type:"bar"}),H[Q].push({el_type:"drum",params:{pattern:"",on:!1}}));var de=0,we=0,me=0,V=0;G=[105,95,85,1];for(var j=0;j<ve.length;j++){var X=ve[j];switch(X.el_type){case"note":if(k[J]&&(G[0]+=k[J],G[1]+=k[J],G[2]+=k[J],H[Q].push({el_type:"beat",beats:G.slice(0)})),T[J]&&(G[0]+=T[J],G[1]+=T[J],G[2]+=T[J],H[Q].push({el_type:"beat",beats:G.slice(0)})),Ie(X),!X.rest||X.rest.type!=="spacer"){var U={elem:X,el_type:"note",timing:S[Q]};if(X.style?U.style=X.style:L[Q]&&(U.style=L[Q]),U.duration=X.duration===0?.25:X.duration,X.startTriplet){if(we=X.tripletMultiplier,me=X.startTriplet*we*X.duration,X.startTriplet!==X.tripletR&&j+X.tripletR<=ve.length){for(var Z=0,ae=j;ae<j+X.tripletR;ae++)Z+=ve[ae].duration;me=we*Z}U.duration=U.duration*we,U.duration=Math.round(U.duration*1e6)/1e6,V=U.duration}else we&&(X.endTriplet?(we=0,U.duration=Math.round((me-V)*1e6)/1e6):(U.duration=U.duration*we,U.duration=Math.round(U.duration*1e6)/1e6,V+=U.duration));X.rest&&(U.rest=X.rest),X.decoration&&(U.decoration=X.decoration.slice(0)),X.pitches&&(U.pitches=h.cloneArray(X.pitches)),X.gracenotes&&(U.gracenotes=h.cloneArray(X.gracenotes)),X.chord&&(U.chord=h.cloneArray(X.chord)),H[Q].push(U),X.style==="rhythm"&&l(H),de++,S[Q]+=U.duration}break;case"key":case"keySignature":c(H[Q],X);break;case"meter":r(H[Q],X);break;case"clef":X.transpose&&H[Q].push({el_type:"transpose",transpose:X.transpose}),X.type&&(X.type.indexOf("-8")>=0?H[Q].push({el_type:"transpose",transpose:-12}):X.type.indexOf("+8")>=0&&H[Q].push({el_type:"transpose",transpose:12}));break;case"tempo":x=m(X,e.getBeatLength()),H[Q].push({el_type:"tempo",qpm:x,timing:S[Q]}),O[""+S[Q]]={el_type:"tempo",qpm:x,timing:S[Q]};break;case"bar":de>0&&H[Q].push({el_type:"bar"}),Ie(X),de=0;var ce=X.type==="bar_right_repeat"||X.type==="bar_dbl_repeat",he=X.startEnding==="1",re=X.type==="bar_left_repeat"||X.type==="bar_dbl_repeat"||X.type==="bar_right_repeat";if(ce){var oe=W[Q];oe||(oe=0);var xe=Y[Q];xe||(xe=H[Q].length);for(var ye=oe;ye<xe;ye++){var le=Object.assign({},H[Q][ye]);le.pitches&&(le.pitches=h.cloneArray(le.pitches)),H[Q].push(le)}Y[Q]=void 0,W[Q]=void 0}he&&(Y[Q]=H[Q].length),re&&(W[Q]=H[Q].length);break;case"style":L[Q]=X.head;break;case"timeSignature":H[Q].push(y(X));break;case"part":break;case"stem":case"scale":case"break":case"font":break;case"midi":var ge=!1;switch(X.cmd){case"drumon":B=!0,ge=!0;break;case"drumoff":B=!1,ge=!0;break;case"drum":I=X.params,ge=!0;break;case"drumbars":R=X.params[0],ge=!0;break;case"drummap":break;case"channel":X.params[0]===10&&H[Q].push({el_type:"instrument",program:o});break;case"program":f(H[Q],{el_type:"instrument",program:X.params[0]}),N=!0;break;case"transpose":H[Q].push({el_type:"transpose",transpose:X.params[0]});break;case"gchordoff":H[Q].push({el_type:"gchordOn",tacet:!0});break;case"gchordon":H[Q].push({el_type:"gchordOn",tacet:!1});break;case"beat":H[Q].push({el_type:"beat",beats:X.params});break;case"nobeataccents":H[Q].push({el_type:"beataccents",value:!1});break;case"beataccents":H[Q].push({el_type:"beataccents",value:!0});break;case"vol":case"volinc":H[Q].push({el_type:X.cmd,volume:X.params[0]});break;case"swing":case"gchord":case"bassvol":case"chordvol":H[Q].push({el_type:X.cmd,param:X.params[0]});break;case"bassprog":case"chordprog":H[Q].push({el_type:X.cmd,value:X.params[0],octaveShift:X.params[1]});break;case"gchordbars":H[Q].push({el_type:X.cmd,param:X.params[0]});break;default:console.log("MIDI seq: midi cmd not handled: ",X.cmd,X)}ge&&(H[0].push({el_type:"drum",params:{pattern:I,bars:R,intro:C,on:B}}),K=!0);break;default:console.log("MIDI: element type "+X.el_type+" not handled.")}}Q++,S[Q]||(S[Q]=0)}}}}if(n(H,O),C)for(var Ae=e.getPickupLength(),pe=0;pe<H.length;pe++){for(var be=0;H[pe][be].el_type!=="note"&&H[pe].length>be;)be++;if(H[pe].length>be){for(var ae=0;ae<C;ae++)Ae===0||ae<C-1?(H[pe].splice(be,0,{el_type:"note",rest:{type:"rest"},duration:d},{el_type:"bar"}),be+=2):H[pe].splice(be++,0,{el_type:"note",rest:{type:"rest"},duration:d-Ae});q&&(B=!1,H[pe].splice(be++,0,{el_type:"drum",params:{pattern:I,bars:R,intro:C,on:B}}),q=!1)}}return H.length>0&&H[0].length>0&&(H[0][0].pickupLength=e.getPickupLength()),H};function t(e,p,x){for(var w=0,_=p+1;_<e.length;_++)if(e[_].el_type==="note"&&w++,e[_].decoration&&e[_].decoration.indexOf(x)>=0)return w;return w}function a(e,p,x){for(var w=Math.min(e.length,p+3),_=p;_<w;_++)if(e[_].el_type==="note"&&e[_].decoration){for(var E=0;E<e[_].decoration.length;E++)if(x.indexOf(e[_].decoration[E])>=0)return e[_].decoration[E]}return null}function n(e,p){if(!(!p||p.length===0))for(var x=Object.keys(p),w=0;w<e.length;w++)for(var _=e[w],E=p[0]?p[0].qpm:0,N=0;N<_.length;N++){var I=_[N];I.el_type==="tempo"&&(E=I.qpm),x.indexOf(""+I.timing)>=0&&E!==p[""+I.timing].qpm&&(E=p[""+I.timing].qpm,I.el_type==="tempo"?(I.qpm=p[""+I.timing].qpm,N++):(e[w].splice(N,0,{el_type:"tempo",qpm:p[""+I.timing].qpm,timing:I.timing}),N+=2))}}function l(e){for(var p=0;p<e.length;p++)for(var x=e[p],w=x.length-1;w>=0&&x[w].el_type!=="bar";)x[w].noChordVoice=!0,w--}function u(e,p){if(!(!e||e.length<=p||!e[p].title))return e[p].title.join(" ")}function m(e,p){var x=.25;e.duration&&(x=e.duration[0]);var w=60;return e.bpm&&(w=e.bpm),x*w/p}function y(e){var p;switch(e.type){case"common_time":p={el_type:"meter",num:4,den:4};break;case"cut_time":p={el_type:"meter",num:2,den:2};break;case"specified":p={el_type:"meter",num:e.value[0].num,den:e.value[0].den};break;default:p={el_type:"meter"}}return d=p.num/p.den,p}function g(e){for(var p=[],x=0;x<e.length;x++)e[x].acc!=="natural"&&p.push(e[x]);return p}function c(e,p){var x;p.root==="HP"?x={el_type:"key",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}]}:x={el_type:"key",accidentals:g(p.accidentals)},f(e,x)}function r(e,p){var x=y(p);f(e,x)}function f(e,p){for(var x=e.length-1;x>=0;x--)if(e[x].el_type===p.el_type){JSON.stringify(e[x])!==JSON.stringify(p)&&e.push(p);return}e.push(p)}}(),Ot=b,Ot}var It,ja;function tc(){if(ja)return It;ja=1;var b=function(m,y,g,c){this.chordTrack=[],this.chordTrackFinished=!1,this.chordChannel=m,this.currentChords=[],this.lastChord,this.chordLastBar,this.chordsOff=!!y,this.gChordTacet=this.chordsOff,this.hasRhythmHead=!1,this.transpose=0,this.lastBarTime=0,this.meter=c,this.tempoChangeFactor=1,this.bassInstrument=g.bassprog&&g.bassprog.length>=1?g.bassprog[0]:0,this.chordInstrument=g.chordprog&&g.chordprog.length>=1?g.chordprog[0]:0,this.bassOctaveShift=g.bassprog&&g.bassprog.length===2?g.bassprog[1]:0,this.chordOctaveShift=g.chordprog&&g.chordprog.length===2?g.chordprog[1]:0,this.boomVolume=g.bassvol&&g.bassvol.length===1?g.bassvol[0]:64,this.chickVolume=g.chordvol&&g.chordvol.length===1?g.chordvol[0]:48,g.gchord&&g.gchord.length>0?this.overridePattern=o(g.gchord[0]):this.overridePattern=void 0};b.prototype.setMeter=function(u){this.meter=u},b.prototype.setTempoChangeFactor=function(u){this.tempoChangeFactor=u},b.prototype.setLastBarTime=function(u){this.lastBarTime=u},b.prototype.setTranspose=function(u){this.transpose=u},b.prototype.setRhythmHead=function(u,m){this.hasRhythmHead=u;var y=[];if(u&&this.lastChord&&this.lastChord.chick)for(var g=0;g<this.lastChord.chick.length;g++){var c=Object.assign({},m.pitches[0]);c.actualPitch=this.lastChord.chick[g],y.push(c)}return y},b.prototype.barEnd=function(u){this.chordTrack.length>0&&!this.chordTrackFinished&&(this.resolveChords(this.lastBarTime,n(u.time)),this.currentChords=[]),this.chordLastBar=this.lastChord},b.prototype.gChordOn=function(u){this.chordsOff||(this.gChordTacet=u.tacet)},b.prototype.paramChange=function(u){switch(u.el_type){case"gchord":u.param&&u.param.length>0?this.overridePattern=o(u.param):this.overridePattern=void 0;break;case"bassprog":this.bassInstrument=u.value,u.octaveShift!=null&&u.octaveShift!=null?this.bassOctaveShift=u.octaveShift:this.bassOctaveShift=0;break;case"chordprog":this.chordInstrument=u.value,u.octaveShift!=null&&u.octaveShift!=null?this.chordOctaveShift=u.octaveShift:this.chordOctaveShift=0;break;case"bassvol":this.boomVolume=u.param;break;case"chordvol":this.chickVolume=u.param;break;default:console.log("unhandled midi param",u)}},b.prototype.finish=function(){this.chordTrackEmpty()||(this.chordTrackFinished=!0)},b.prototype.addTrack=function(u){this.chordTrackEmpty()||u.push(this.chordTrack)},b.prototype.findChord=function(u){if(this.gChordTacet)return"break";if(this.chordTrackFinished||!u.chord||u.chord.length===0)return null;for(var m=0;m<u.chord.length;m++){var y=u.chord[m];if(y.position==="default")return y.name;if(this.breakSynonyms.indexOf(y.name.toLowerCase())>=0)return"break"}return null},b.prototype.interpretChord=function(u){if(u.length!==0){if(u==="break")return{chick:[]};var m=u.substring(0,1);if(m==="("){if(u=u.substring(1,u.length-2),u.length===0)return;m=u.substring(0,1)}var y=this.basses[m];if(y){for(var g=this.transpose;g<-8;)g+=12;for(;g>8;)g-=12;y+=g,y<33?y+=12:y>44&&(y-=12);var c=y;y+=this.bassOctaveShift*12;var r=y-5,f;u.length===1&&(f=this.chordNotes(y,""));var e=u.substring(1),p=e.substring(0,1);p==="b"||p==="♭"?(c--,y--,r--,e=e.substring(1)):(p==="#"||p==="♯")&&(c++,y++,r++,e=e.substring(1));var x=e.split("/");if(f=this.chordNotes(c,x[0]),f.length>=3){var w=f[2]-f[0];r=r+w-7}if(x.length===2){var _=this.basses[x[1].substring(0,1)];if(_){var E=x[1].substring(1),N={"#":1,"♯":1,b:-1,"♭":-1}[E]||0;y=this.basses[x[1].substring(0,1)]+N+g,y+=this.bassOctaveShift*12,r=y}}return{boom:y,boom2:r,chick:f}}}},b.prototype.chordNotes=function(u,m){var y=this.chordIntervals[m];y||(m.slice(0,2).toLowerCase()==="ma"||m[0]==="M"?y=this.chordIntervals.M:m[0]==="m"||m[0]==="-"?y=this.chordIntervals.m:y=this.chordIntervals.M),u+=12,u+=this.chordOctaveShift*12;for(var g=[],c=0;c<y.length;c++)g.push(u+y[c]);return g},b.prototype.writeNote=function(u,m,y,g,c,r){u!==void 0&&this.chordTrack.push({cmd:"note",pitch:u,volume:y,start:this.lastBarTime+g*l(m,this.tempoChangeFactor),duration:l(c,this.tempoChangeFactor),gap:0,instrument:r})},b.prototype.chordTrackEmpty=function(){for(var u=!0,m=0;m<this.chordTrack.length&&u;m++)this.chordTrack[m].cmd==="note"&&(u=!1);return u},b.prototype.resolveChords=function(u,m){if(!this.hasRhythmHead){var y=this.meter.num,g=this.meter.den,c=1/g,r=c/2,f=parseInt(y,10)/parseInt(g,10),e=f-(m-u)/this.tempoChangeFactor;Math.abs(e)<1e-5&&(e=0),(this.currentChords.length===0||this.currentChords[0].beat!==0)&&this.currentChords.unshift({beat:0,chord:this.chordLastBar});var p=t(this.currentChords,8*y/g),x=this.overridePattern?this.overridePattern:this.rhythmPatterns[y+"/"+g];if(e){x=[];for(var w=(m-u)/this.tempoChangeFactor*8,_=0;_<w/2;_+=2)x.push("chick"),x.push("")}if(!x){x=[];for(var _=0;_<8*y/g/2;_++)x.push("chick"),x.push("")}for(var E=!0,N=Math.min(x.length,p.length),_=0;_<N;_++){_>0&&p[_-1]&&p[_]&&p[_-1].boom!==p[_].boom&&(E=!0);var I=x[_],R=I.indexOf("boom")>=0,C=!R&&_!==0&&x[0].indexOf("boom")>=0&&(!p[_-1]||p[_-1].boom!==p[_].boom),B=h(p[_],I,E,C);R&&(E=!1);for(var q=0;q<B.length;q++)this.writeNote(B[q],.125,R||C?this.boomVolume:this.chickVolume,_,r,R||C?this.bassInstrument:this.chordInstrument),C?C=!1:R=!1}}},b.prototype.processChord=function(u){if(!this.chordTrackFinished){var m=this.findChord(u);if(m){var y=this.interpretChord(m);if(y){this.chordTrack.length===0&&this.chordTrack.push({cmd:"program",channel:this.chordChannel,instrument:this.chordInstrument}),this.lastChord=y;var g=a(this.lastBarTime,n(u.time));this.currentChords.push({chord:this.lastChord,beat:g,start:n(u.time)})}}}};function h(u,m,y,g){var c=[];if(!u)return c;m.indexOf("boom")>=0?c.push(y?u.boom:u.boom2):g&&c.push(u.boom);var r=u.chick.length;if(m.indexOf("chick")>=0)for(var f=0;f<r;f++)c.push(u.chick[f]);switch(m){case"DO":c.push(u.chick[0]);break;case"MI":c.push(u.chick[1]);break;case"SOL":c.push(d(u,2));break;case"TI":c.push(d(u,3));break;case"TOP":c.push(d(u,4));break;case"do":c.push(u.chick[0]+12);break;case"mi":c.push(u.chick[1]+12);break;case"sol":c.push(d(u,2)+12);break;case"ti":c.push(d(u,3)+12);break;case"top":c.push(d(u,4)+12);break}return c}function d(u,m){var y=Math.floor(m/u.chick.length),g=u.chick[m%u.chick.length];return g+y*12}function o(u){for(var m=[],y=0;y<u.length;y++){var g=u[y];switch(g){case"z":m.push("");break;case"2":m.push("");break;case"c":m.push("chick");break;case"b":m.push("boom&chick");break;case"f":m.push("boom");break;case"G":m.push("DO");break;case"H":m.push("MI");break;case"I":m.push("SOL");break;case"J":m.push("TI");break;case"K":m.push("TOP");break;case"g":m.push("do");break;case"h":m.push("mi");break;case"i":m.push("sol");break;case"j":m.push("ti");break;case"k":m.push("top");break}}return m}function t(u,m,y){var g=[];if(u.length===0)return g;for(var c=u[0].chord,r=1;r<u.length;r++){for(var f=u[r];g.length<f.beat;)g.push(c);c=f.chord}for(;g.length<m;)g.push(c);return g}function a(u,m){var y=m-u;return y*8}b.prototype.breakSynonyms=["break","(break)","no chord","n.c.","tacet"],b.prototype.basses={A:33,B:35,C:36,D:38,E:40,F:41,G:43},b.prototype.chordIntervals={dim:[0,3,6],"°":[0,3,6],"˚":[0,3,6],dim7:[0,3,6,9],"°7":[0,3,6,9],"˚7":[0,3,6,9],ø7:[0,3,6,10],"m7(b5)":[0,3,6,10],m7b5:[0,3,6,10],"m7♭5":[0,3,6,10],"-7(b5)":[0,3,6,10],"-7b5":[0,3,6,10],"7b5":[0,4,6,10],"7(b5)":[0,4,6,10],"7♭5":[0,4,6,10],"7(b9,b5)":[0,4,6,10,13],"7b9,b5":[0,4,6,10,13],"7(#9,b5)":[0,4,6,10,15],"7#9b5":[0,4,6,10,15],"maj7(b5)":[0,4,6,11],maj7b5:[0,4,6,11],"13(b5)":[0,4,6,10,14,21],"13b5":[0,4,6,10,14,21],m:[0,3,7],"-":[0,3,7],m6:[0,3,7,9],"-6":[0,3,7,9],m7:[0,3,7,10],"-7":[0,3,7,10],"-(b6)":[0,3,7,8],"-b6":[0,3,7,8],"-6/9":[0,3,7,9,14],"-7(b9)":[0,3,7,10,13],"-7b9":[0,3,7,10,13],"-maj7":[0,3,7,11],"-9+7":[0,3,7,11,13],"-11":[0,3,7,11,14,17],m11:[0,3,7,11,14,17],"-maj9":[0,3,7,11,14],"-∆9":[0,3,7,11,14],mM9:[0,3,7,11,14],M:[0,4,7],6:[0,4,7,9],"6/9":[0,4,7,9,14],"6add9":[0,4,7,9,14],69:[0,4,7,9,14],7:[0,4,7,10],9:[0,4,7,10,14],11:[0,7,10,14,17],13:[0,4,7,10,14,21],"7b9":[0,4,7,10,13],"7♭9":[0,4,7,10,13],"7(b9)":[0,4,7,10,13],"7(#9)":[0,4,7,10,15],"7#9":[0,4,7,10,15],"(13)":[0,4,7,10,14,21],"7(9,13)":[0,4,7,10,14,21],"7(#9,b13)":[0,4,7,10,15,20],"7(#11)":[0,4,7,10,14,18],"7#11":[0,4,7,10,14,18],"7(b13)":[0,4,7,10,20],"7b13":[0,4,7,10,20],"9(#11)":[0,4,7,10,14,18],"9#11":[0,4,7,10,14,18],"13(#11)":[0,4,7,10,18,21],"13#11":[0,4,7,10,18,21],maj7:[0,4,7,11],"∆7":[0,4,7,11],Δ7:[0,4,7,11],maj9:[0,4,7,11,14],"maj7(9)":[0,4,7,11,14],"maj7(11)":[0,4,7,11,17],"maj7(#11)":[0,4,7,11,18],"maj7(13)":[0,4,7,14,21],"maj7(9,13)":[0,4,7,11,14,21],"7sus4":[0,5,7,10],m7sus4:[0,3,7,10,17],sus4:[0,5,7],sus2:[0,2,7],"7sus2":[0,2,7,10],"9sus4":[0,5,7,10,14],"13sus4":[0,5,7,10,14,21],aug7:[0,4,8,10],"+7":[0,4,8,10],"+":[0,4,8],"7#5":[0,4,8,10],"7♯5":[0,4,8,10],"7+5":[0,4,8,10],"9#5":[0,4,8,10,14],"9♯5":[0,4,8,10,14],"9+5":[0,4,8,10,14],"-7(#5)":[0,3,8,10],"-7#5":[0,3,8,10],"7(#5)":[0,4,8,10],"7(b9,#5)":[0,4,8,10,13],"7b9#5":[0,4,8,10,13],"maj7(#5)":[0,4,8,11],"maj7#5":[0,4,8,11],"maj7(#5,#11)":[0,4,8,11,18],"maj7#5#11":[0,4,8,11,18],"9(#5)":[0,4,8,10,14],"13(#5)":[0,4,8,10,14,21],"13#5":[0,4,8,10,14,21],5:[0,7],"5(8)":[0,7,12],"5add8":[0,7,12]},b.prototype.rhythmPatterns={"2/2":["boom","","","","chick","","",""],"3/2":["boom","","","","chick","","","","chick","","",""],"4/2":["boom","","","","chick","","","","boom","","","","chick","","",""],"2/4":["boom","","chick",""],"3/4":["boom","","chick","","chick",""],"4/4":["boom","","chick","","boom","","chick",""],"5/4":["boom","","chick","","chick","","boom","","chick",""],"6/4":["boom","","chick","","boom","","chick","","boom","","chick",""],"3/8":["boom","","chick"],"5/8":["boom","chick","chick","boom","chick"],"6/8":["boom","","chick","boom","","chick"],"7/8":["boom","chick","chick","boom","chick","boom","chick"],"9/8":["boom","","chick","boom","","chick","boom","","chick"],"10/8":["boom","chick","chick","boom","chick","chick","boom","chick","boom","chick"],"11/8":["boom","chick","chick","boom","chick","chick","boom","chick","boom","chick","chick"],"12/8":["boom","","chick","boom","","chick","boom","","chick","boom","","chick"]};function n(u){return u/1e6}function l(u,m){return Math.round(u*m*1e6)/1e6}return It=b,It}var Rt,$a;function Hs(){if($a)return Rt;$a=1;var b={f0:"_C",n0:"=C",s0:"^C",x0:"C",f1:"_D",n1:"=D",s1:"^D",x1:"D",f2:"_E",n2:"=E",s2:"^E",x2:"E",f3:"_F",n3:"=F",s3:"^F",x3:"F",f4:"_G",n4:"=G",s4:"^G",x4:"G",f5:"_A",n5:"=A",s5:"^A",x5:"A",f6:"_B",n6:"=B",s6:"^B",x6:"B",f7:"_c",n7:"=c",s7:"^c",x7:"c",f8:"_d",n8:"=d",s8:"^d",x8:"d",f9:"_e",n9:"=e",s9:"^e",x9:"e",f10:"_f",n10:"=f",s10:"^f",x10:"f",f11:"_g",n11:"=g",s11:"^g",x11:"g",f12:"_a",n12:"=a",s12:"^a",x12:"a",f13:"_b",n13:"=b",s13:"^b",x13:"b",f14:"_c'",n14:"=c'",s14:"^c'",x14:"c'",f15:"_d'",n15:"=d'",s15:"^d'",x15:"d'",f16:"_e'",n16:"=e'",s16:"^e'",x16:"e'"};function h(d){var o=(d.accidental?d.accidental[0]:"x")+d.verticalPos;return b[o]}return Rt=h,Rt}var Ht,Ka;function rc(){if(Ka)return Ht;Ka=1;var b,h=tc(),d=Hs();return function(){var o,t,a,n,l,u=1,m,y,g,c,r,f,e={num:4,den:4},p=128,x,w=!0,_=105,E=95,N=85,I=.25,R,C,B=0,q,L={},D,P=0,M,A=0,F=-.001,z=.4;b=function(V,j,X,U){j||(j={}),U||(U={}),o=[],t=[0,0,0,0,0,0,0],n=[],l=j.qpm,u=1,m=void 0,y=void 0,g=void 0,c=void 0,r=0,M=X,e={num:4,den:4},w=!0,_=105,E=95,N=85,I=.25,R=void 0,C=void 0,B=0,q=[],L={},D=1,V.length>0&&V[0].length>0&&(P=V[0][0].pickupLength),j.bassprog!==void 0&&!U.bassprog&&(U.bassprog=[j.bassprog]),j.bassvol!==void 0&&!U.bassvol&&(U.bassvol=[j.bassvol]),j.chordprog!==void 0&&!U.chordprog&&(U.chordprog=[j.chordprog]),j.chordvol!==void 0&&!U.chordvol&&(U.chordvol=[j.chordvol]),j.gchord!==void 0&&!U.gchord&&(U.gchord=[j.gchord]),f=new h(V.length,j.chordsOff,U,e),S(V,j);for(var Z=0;Z<V.length;Z++){a=0,f.setTranspose(a);var ae=V[Z];g=[{cmd:"program",channel:Z,instrument:m}],c=void 0,x=0,f.setLastBarTime(0);var ce=!1;(j.voicesOff===!0||j.voicesOff&&j.voicesOff.length&&j.voicesOff.indexOf(Z)>=0)&&(ce=!0);for(var he=0;he<ae.length;he++){var re=ae[he];switch(re.el_type){case"name":c={cmd:"text",type:"name",text:re.trackName};break;case"note":ee(re,ce);break;case"key":t=Q(re);break;case"meter":e=re,f.setMeter(e),I=O(e),de();break;case"tempo":l?u=re.qpm?l/re.qpm:1:l=re.qpm,f.setTempoChangeFactor(u);break;case"transpose":a=re.transpose,f.setTranspose(a);break;case"bar":f.barEnd(re),o=[],Z===0&&we(V.length+1),f.setRhythmHead(!1),x=k(re.time),f.setLastBarTime(x);break;case"bagpipes":break;case"instrument":if(m===void 0&&(m=re.program),y=re.program,g.length>0&&g[g.length-1].cmd==="program")g[g.length-1].instrument=re.program;else{var oe;for(oe=g.length-1;oe>=0&&g[oe].cmd!=="program";oe--);(oe<0||g[oe].instrument!==re.program)&&g.push({cmd:"program",channel:0,instrument:re.program})}break;case"channel":H(re.channel);break;case"drum":L=ue(re.params),de();break;case"gchordOn":f.gChordOn(re);break;case"beat":_=re.beats[0],E=re.beats[1],N=re.beats[2];break;case"vol":R=re.volume;break;case"volinc":C=re.volume;break;case"beataccents":w=re.value;break;case"gchord":case"bassprog":case"chordprog":case"bassvol":case"chordvol":case"gchordbars":f.paramChange(re);break;default:console.log("MIDI creation. Unknown el_type: "+re.el_type+`
`);break}}g[0].instrument===void 0&&(g[0].instrument=m||0),c&&g.unshift(c),n.push(g),f.finish(),q.length>0}return j.detuneOctave&&me(n,parseInt(j.detuneOctave,10)),f.addTrack(n),q.length>0&&n.push(q),{tempo:l,instrument:m,tracks:n,totalDuration:r}};function H(V){for(var j=g.length-1;j>=0;j--)if(g[j].cmd==="program"){g[j].channel=V;return}}function k(V){return V/1e6}function T(V){return Math.round(V*u*1e6)/1e6}function S(V,j){for(var X=0;X<V.length;X++){for(var U=V[X],Z={},ae=j.qpm,ce=0,he=1,re=0;re<U.length;re++){var oe=U[re];if(oe.el_type==="tempo"){ae?he=oe.qpm?ae/oe.qpm:1:ae=oe.qpm;continue}oe.time=ce;var xe=oe.duration?oe.duration:0;if(ce+=Math.round(xe*he*1e6),oe.pitches){for(var ye=0;ye<oe.pitches.length;ye++){var le=oe.pitches[ye];if(le){if(le.duration=oe.duration,le.startTie)Z[le.pitch]===void 0?Z[le.pitch]={el:re,pitch:ye}:(U[Z[le.pitch].el].pitches[Z[le.pitch].pitch].duration+=le.duration,oe.pitches[ye]=null);else if(le.endTie){var ge=Z[le.pitch];if(ge){var Ae=le.duration;delete U[ge.el].pitches[ge.pitch].startTie,U[ge.el].pitches[ge.pitch].duration+=Ae,oe.pitches[ye]=null,delete Z[le.pitch]}else delete le.endTie}}}delete oe.duration}}for(var pe in Z)if(Z.hasOwnProperty(pe)){var be=Z[pe];delete U[be.el].pitches[be.pitch].startTie}}}function O(V){switch(parseInt(V.den,10)){case 2:return .5;case 4:return .25;case 8:return V.num%3===0?.375:.125;case 16:return .125}return .25}function G(V,j,X){var U=X-V;return U/j}function W(V,j){if(j)return 0;var X;if(R!=null)X=R,R=void 0;else if(!w)X=E;else if(P>V)X=N;else{var U=G(x,O(e),V);U===0?X=_:parseInt(U,10)===U?X=E:X=N}return C&&(X+=C,C=void 0),X<0&&(X=0),X>127&&(X=127),j?0:X}function Y(V,j){var X={};if(V.decoration)for(var U=0;U<V.decoration.length;U++)V.decoration[U]==="staccato"?X.thisBreakBetweenNotes="staccato":V.decoration[U]==="tenuto"?X.thisBreakBetweenNotes="tenuto":V.decoration[U]==="accent"?X.velocity=Math.min(127,j*1.5):V.decoration[U]==="trill"?X.noteModification="trill":V.decoration[U]==="lowermordent"?X.noteModification="lowermordent":V.decoration[U]==="uppermordent"||V.decoration[U]==="mordent"?X.noteModification="mordent":V.decoration[U]==="turn"?X.noteModification="turn":V.decoration[U]==="roll"&&(X.noteModification="roll");return X}function K(V,j){var X=j.start,U=j.duration,Z=T(1/32);switch(V){case"trill":for(var ae=2;U>0;)g.push({cmd:"note",pitch:j.pitch+ae,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),ae=ae===2?0:2,U-=Z,X+=Z;break;case"mordent":g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),U-=Z,X+=Z,g.push({cmd:"note",pitch:j.pitch+2,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),U-=Z,X+=Z,g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X,duration:U,gap:0,instrument:y});break;case"lowermordent":g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),U-=Z,X+=Z,g.push({cmd:"note",pitch:j.pitch-2,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),U-=Z,X+=Z,g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X,duration:U,gap:0,instrument:y});break;case"turn":Z=j.duration/4,g.push({cmd:"note",pitch:j.pitch+2,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X+Z,duration:Z,gap:0,instrument:y,style:"decoration"}),g.push({cmd:"note",pitch:j.pitch-1,volume:j.volume,start:X+Z*2,duration:Z,gap:0,instrument:y,style:"decoration"}),g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X+Z*3,duration:Z,gap:0,instrument:y,style:"decoration"});break;case"roll":for(;U>0;)g.push({cmd:"note",pitch:j.pitch,volume:j.volume,start:X,duration:Z,gap:0,instrument:y,style:"decoration"}),U-=Z*2,X+=Z*2;break}}function ee(V,j){var X=W(k(V.time),j);f.processChord(V);var U;if(V.gracenotes&&V.pitches&&V.pitches.length>0&&V.pitches[0]&&(U=se(V.gracenotes,V.pitches[0].duration),V.elem&&(V.elem.midiGraceNotePitches=te(U,k(V.time),X*2/3,y))),V.elem){var Z=k(V.time),ae=Z/I/l*60*1e3;if(V.elem.currentTrackMilliseconds===void 0)V.elem.currentTrackMilliseconds=ae,V.elem.currentTrackWholeNotes=Z;else if(V.elem.currentTrackMilliseconds.length===void 0)V.elem.currentTrackMilliseconds!==ae&&(V.elem.currentTrackMilliseconds=[V.elem.currentTrackMilliseconds,ae],V.elem.currentTrackWholeNotes=[V.elem.currentTrackWholeNotes,Z]);else{for(var ce=!1,he=0;he<V.elem.currentTrackMilliseconds.length;he++)V.elem.currentTrackMilliseconds[he]===ae&&(ce=!0);ce||(V.elem.currentTrackMilliseconds.push(ae),V.elem.currentTrackWholeNotes.push(Z))}}if(V.pitches){var re="",oe=Y(V,X);oe.thisBreakBetweenNotes&&(re=oe.thisBreakBetweenNotes),oe.velocity&&(X=oe.velocity);var xe=V.pitches;V.style==="rhythm"&&(xe=f.setRhythmHead(!0,V)),V.elem&&(V.elem.midiPitches=[]);for(var ye=0;ye<xe.length;ye++){var le=xe[ye];if(le){le.startSlur&&(B+=le.startSlur.length),le.endSlur&&(B-=le.endSlur.length);var ge=le.actualPitch?le.actualPitch:ie(le);if(y===p&&M){var Ae=d(le);Ae&&M[Ae]&&(ge=M[Ae].sound)}var pe={cmd:"note",pitch:ge,volume:X,start:k(V.time),duration:T(le.duration),instrument:y,startChar:V.elem.startChar,endChar:V.elem.endChar};if(pe=J(pe),V.gracenotes&&(pe.duration=pe.duration/2,pe.start=pe.start+pe.duration),V.elem&&V.elem.midiPitches.push(pe),oe.noteModification)K(oe.noteModification,pe);else{switch(B>0?pe.endType="tenuto":re&&(pe.endType=re),pe.endType){case"tenuto":pe.gap=F;break;case"staccato":var be=pe.duration*z;pe.gap=l/60*be;break;default:pe.gap=A;break}g.push(pe)}}}g.length-1}var Me=$(V);r=Math.max(r,k(V.time)+T(Me))}function $(V){return V.pitches&&V.pitches.length>0&&V.pitches[0]?V.pitches[0].duration:V.elem?V.elem.duration:V.duration}var ne=[0,2,4,5,7,9,11];function ie(V){if(V.midipitch!==void 0)return V.midipitch;var j=V.pitch;if(V.accidental)switch(V.accidental){case"sharp":o[j]=1;break;case"flat":o[j]=-1;break;case"natural":o[j]=0;break;case"dblsharp":o[j]=2;break;case"dblflat":o[j]=-2;break;case"quartersharp":o[j]=.25;break;case"quarterflat":o[j]=-.25;break}var X=ve(j)*12+ne[fe(j)]+60;return o[j]!==void 0?X+=o[j]:X+=t[fe(j)],X+=a,X}function Q(V){var j=[0,0,0,0,0,0,0];if(!V.accidentals)return j;for(var X=0;X<V.accidentals.length;X++){var U=V.accidentals[X],Z;switch(U.acc){case"flat":Z=-1;break;case"quarterflat":Z=-.25;break;case"sharp":Z=1;break;case"quartersharp":Z=.25;break;default:Z=0;break}var ae=U.note.toLowerCase(),ce=fe(ae.charCodeAt(0)-99);j[ce]+=Z}return j}function se(V,j){for(var X=0,U=[],Z,ae=0;ae<V.length;ae++)Z=V[ae],X+=Z.duration;var ce=j/2/X;for(ae=0;ae<V.length;ae++){Z=V[ae];var he=ie(Z);if(y===p&&M){var re=d(Z);re&&M[re]&&(he=M[re].sound)}var oe={pitch:he,duration:Z.duration*ce};oe=J(oe),U.push(oe)}return U}function te(V,j,X,U){var Z=[];X=Math.round(X);for(var ae=0;ae<V.length;ae++){var ce=V[ae];g.push({cmd:"note",pitch:ce.pitch,volume:X,start:j,duration:ce.duration,gap:0,instrument:U,style:"grace"}),Z.push({pitch:ce.pitch,durationInMeasures:ce.duration,volume:X,instrument:U}),j+=ce.duration}return Z}function J(V){var j=""+V.pitch;return j.indexOf(".75")>=0?(V.pitch=Math.round(V.pitch),V.cents=-50):j.indexOf(".25")>=0&&(V.pitch=Math.round(V.pitch),V.cents=50),V}function ve(V){return Math.floor(V/7)}function fe(V){return V=V%7,V<0&&(V+=7),V}function ue(V){if(V.pattern.length===0||V.on===!1)return{on:!1};for(var j=V.pattern[0],X=[],U="",Z=0,ae=0;ae<j.length;ae++)if(j[ae]==="d"&&Z++,j[ae]==="d"||j[ae]==="z")U.length!==0?(X.push(U),U=j[ae]):U=U+j[ae];else{if(U.length===0)return{on:!1};U=U+j[ae]}if(U.length!==0&&X.push(U),V.pattern.length!==Z*2+1)return{on:!1};for(var ce={on:!0,bars:V.bars,pattern:[]},he=O(e),re=0,oe=0;oe<X.length;oe++){U=X[oe];for(var xe=1,ye=!1,le=0,ge=1;ge<U.length;ge++)switch(U[ge]){case"/":le!==0&&(xe*=le),le=0,ye=!0;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":le=le*10+U[ge];break;default:return{on:!1}}ye?(le===0&&(le=2),xe/=le):le&&(xe*=le),U[0]==="d"?(ce.pattern.push({len:xe*he,pitch:V.pattern[1+re],velocity:V.pattern[1+re+Z]}),re++):ce.pattern.push({len:xe*he,pitch:null})}return D=V.bars?V.bars:1,ce}function de(){if(!(!L||!L.pattern)){for(var V=L,j=0,X=e.num/e.den,U=0;U<V.pattern.length;U++)j+=V.pattern[U].len;var Z=j/D/X;for(U=0;U<V.pattern.length;U++)V.pattern[U].len=V.pattern[U].len/Z;L=V}}function we(V){if(!(q.length===0&&!L.on)){var j=e.num/e.den;if(q.length===0){if(r<j)return;q.push({cmd:"program",channel:V,instrument:p})}if(L.on)for(var X=x,U=0;U<L.pattern.length;U++){var Z=T(L.pattern[U].len);L.pattern[U].pitch&&q.push({cmd:"note",pitch:L.pattern[U].pitch,volume:L.pattern[U].velocity,start:X,duration:Z,gap:0,instrument:p}),X+=Z}}}function me(V,j){for(var X={},U=0;U<V.length;U++)for(var Z=0;Z<V[U].length;Z++){var ae=V[U][Z];ae.cmd==="note"&&(X[ae.start]===void 0&&(X[ae.start]=[]),X[ae.start].push({track:U,event:Z,pitch:ae.pitch}))}var ce=Object.keys(X);for(U=0;U<ce.length;U++){var he=X[ce[U]];if(he.length>1){he=he.sort(function(le,ge){return le.pitch-ge.pitch});var re=he[he.length-1],oe=re.pitch%12,xe=!1;for(Z=0;!xe&&Z<he.length-1;Z++)he[Z].pitch%12===oe&&(xe=!0);if(xe){var ye=V[re.track][re.event];ye.cents||(ye.cents=0),ye.cents+=j}}}}}(),Ht=b,Ht}var zt,Qa;function ac(){if(Qa)return zt;Qa=1;function b(u,m){m||(m={});for(var y=!!m.lineBreaks,g=[],c=!1,r=[],f=[],e=[],p=[],x=[],w=[],_=[],E=0;E<u.length;E++){var N=u[E];if(N.staff){if(c&&!N.vskip)for(var I=g[g.length-1],R=0;R<I.staff.length;R++){var C=N.staff[R],B=I.staff[R];if(C&&(n(C.meter,r[R])||(d(C.meter,C.voices),r[R]=C.meter,delete C.meter),n(C.key,f[R])||(o(C.key,C.voices),f[R]=C.key,delete C.key),C.title&&(B.abbrevTitle=C.title),n(C.clef,e[R])||(t(C.clef,C.voices),e[R]=C.clef,delete C.clef),n(C.vocalfont,p[R])||(a(C.vocalfont,C.voices,"vocalfont"),p[R]=C.vocalfont,delete C.vocalfont),n(C.gchordfont,x[R])||(a(C.gchordfont,C.voices,"gchordfont"),x[R]=C.gchordfont,delete C.gchordfont),n(C.tripletfont,w[R])||(a(C.tripletfont,C.voices,"tripletfont"),w[R]=C.tripletfont,delete C.tripletfont),n(C.annotationfont,_[R])||(a(C.annotationfont,C.voices,"annotationfont"),_[R]=C.annotationfont,delete C.annotationfont)),C)for(var q=0;q<B.voices.length;q++){var L=B.voices[q],D=C.voices[q];y&&L.push({el_type:"break"}),D&&(B.voices[q]=L.concat(D))}}else{for(var P=0;P<N.staff.length;P++)f[P]=N.staff[P].key,r[P]=N.staff[P].meter,e[P]=N.staff[P].clef;g.push(l(N))}c=!0}else c=!1,g.push(N)}return g}function h(u,m){return u==="abselem"?"abselem":m}function d(u,m){u.el_type="meter",u.startChar=-1,u.endChar=-1;for(var y=0;y<m.length;y++)m[y].unshift(u)}function o(u,m){u.el_type="key",u.startChar=-1,u.endChar=-1;for(var y=0;y<m.length;y++)m[y].unshift(u)}function t(u,m){u.el_type="clef",u.startChar=-1,u.endChar=-1;for(var y=0;y<m.length;y++)m[y].unshift(u)}function a(u,m,y){u.el_type="font",u.type=y,u.startChar=-1,u.endChar=-1;for(var g=0;g<m.length;g++)m[g].unshift(u)}function n(u,m){if(!u)return!0;var y=JSON.stringify(u,h),g=JSON.stringify(m,h);return y===g}function l(u){for(var m={},y=Object.keys(u),g=0;g<y.length;g++)if(y[g]!=="staff")m[y[g]]=u[y[g]];else{m.staff=[];for(var c=0;c<u.staff.length;c++){for(var r={},f=Object.keys(u.staff[c]),e=0;e<f.length;e++)if(f[e]!=="voices")r[f[e]]=u.staff[c][f[e]];else{r.voices=[];for(var p=0;p<u.staff[c].voices.length;p++)r.voices.push([].concat(u.staff[c].voices[p]))}m.staff.push(r)}}return m}return zt=b,zt}var Gt,Ja;function zs(){if(Ja)return Gt;Ja=1;var b=Oe(),h=Ee(),d=Rs(),o=rc(),t=ac(),a=function(){this.reset=function(){this.version="1.1.0",this.media="screen",this.metaText={},this.metaTextInfo={},this.formatting={},this.lines=[],this.staffNum=0,this.voiceNum=0,this.lineNum=0,this.runningFonts={},delete this.visualTranspose},this.reset();function n(c,r,f,e){for(var p=0;p<e.length;p++)c[f][e[p]]=r[f][e[p]]}this.copyTopInfo=function(c){var r=["tempo","title","header","rhythm","origin","composer","author","partOrder"];n(this,c,"metaText",r),n(this,c,"metaTextInfo",r)},this.copyBottomInfo=function(c){var r=["unalignedWords","book","source","discography","notes","transcription","history","abc-copyright","abc-creator","abc-edited-by","footer"];n(this,c,"metaText",r),n(this,c,"metaTextInfo",r)},this.getBeatLength=function(){var c=this.getMeterFraction(),r=1;return(c.num===6||c.num===9||c.num===12||c.num===3&&c.den===8)&&(r=3),r/c.den};function l(c,r){for(var f=0,e=0;e<c.length;e++)if(c[e].staff)for(var p=0;p<c[e].staff.length;p++)for(var x=0;x<c[e].staff[p].voices.length;x++)for(var w=c[e].staff[p].voices[x],_=1,E=0;E<w.length;E++){var N=w[E].rest&&w[E].rest.type==="spacer";if(w[E].startTriplet&&(_=w[E].tripletMultiplier),w[E].duration&&!N&&w[E].el_type!=="tempo"&&(f+=w[E].duration*_),w[E].endTriplet&&(_=1),f>=r&&(f-=r),w[E].el_type==="bar")return f}return f}this.getPickupLength=function(){var c=this.getBarLength(),r=l(this.lines,c);return r<1e-8||c-r<1e-8?0:r},this.getBarLength=function(){var c=this.getMeterFraction();return c.num/c.den},this.getTotalTime=function(){return this.totalTime},this.getTotalBeats=function(){return this.totalBeats},this.millisecondsPerMeasure=function(c){var r;if(c)r=c;else{var f=this.metaText?this.metaText.tempo:null;r=this.getBpm(f)}r<=0&&(r=1);var e=this.getBeatsPerMeasure(),p=e/r;return p*6e4},this.getBeatsPerMeasure=function(){var c=this.getBeatLength(),r=this.getBarLength();return r/c},this.getMeter=function(){for(var c=0;c<this.lines.length;c++){var r=this.lines[c];if(r.staff)for(var f=0;f<r.staff.length;f++){var e=r.staff[f].meter;if(e)return e}}return{type:"common_time"}},this.getMeterFraction=function(){var c=this.getMeter(),r=4,f=4;return c&&(c.type==="specified"?(r=parseInt(c.value[0].num,10),f=parseInt(c.value[0].den,10)):c.type==="cut_time"?(r=2,f=2):c.type==="common_time"&&(r=4,f=4)),this.meter={num:r,den:f},this.meter},this.getKeySignature=function(){for(var c=0;c<this.lines.length;c++){var r=this.lines[c];if(r.staff){for(var f=0;f<r.staff.length;f++)if(r.staff[f].key)return r.staff[f].key}}return{}},this.getElementFromChar=function(c){for(var r=0;r<this.lines.length;r++){var f=this.lines[r];if(f.staff)for(var e=0;e<f.staff.length;e++)for(var p=f.staff[e],x=0;x<p.voices.length;x++)for(var w=p.voices[x],_=0;_<w.length;_++){var E=w[_];if(E.startChar&&E.endChar&&E.startChar<=c&&E.endChar>c)return E}}return null};function u(c){for(var r,f,e,p,x=c.length-1;x>=0;x--){var w=c[x];w.type==="bar"?(w.top=e,w.nextTop=r,r=e,w.bottom=p,w.nextBottom=f,f=p):w.type==="event"&&(e=w.top,p=w.top+w.height)}}function m(c){var r=[];for(var f in c)c.hasOwnProperty(f)&&r.push(c[f]);return r=r.sort(function(e,p){var x=e.milliseconds-p.milliseconds;return x!==0?x:e.type==="bar"?-1:1}),r}this.addElementToEvents=function(c,r,f,e,p,x,w,_,E,N){if(r.hint)return{isTiedState:void 0,duration:0};var I=r.durationClass?r.durationClass:r.duration;if(r.abcelem.rest&&r.abcelem.rest.type==="spacer"&&(I=0),I>0){for(var R=[],C=0;C<r.elemset.length;C++)r.elemset[C]!==null&&R.push(r.elemset[C]);var B=r.startTie;if(E!==void 0)c["event"+E].elements.push(R),N&&(c["event"+f]||(c["event"+f]={type:"event",milliseconds:f,line:x,measureNumber:w,top:e,height:p,left:null,width:0,elements:[],startChar:null,endChar:null,startCharArray:[],endCharArray:[]}),c["event"+f].measureStart=!0,N=!1),B||(E=void 0);else{if(!c["event"+f])c["event"+f]={type:"event",milliseconds:f,line:x,measureNumber:w,top:e,height:p,left:r.x,width:r.w,elements:[R],startChar:r.abcelem.startChar,endChar:r.abcelem.endChar,startCharArray:[r.abcelem.startChar],endCharArray:[r.abcelem.endChar],midiPitches:r.abcelem.midiPitches?b.cloneArray(r.abcelem.midiPitches):[]},r.abcelem.midiGraceNotePitches&&(c["event"+f].midiGraceNotePitches=b.cloneArray(r.abcelem.midiGraceNotePitches));else{if(c["event"+f].left?c["event"+f].left=Math.min(c["event"+f].left,r.x):c["event"+f].left=r.x,c["event"+f].elements.push(R),c["event"+f].startCharArray.push(r.abcelem.startChar),c["event"+f].endCharArray.push(r.abcelem.endChar),c["event"+f].startChar===null&&(c["event"+f].startChar=r.abcelem.startChar),c["event"+f].endChar===null&&(c["event"+f].endChar=r.abcelem.endChar),r.abcelem.midiPitches&&r.abcelem.midiPitches.length){c["event"+f].midiPitches||(c["event"+f].midiPitches=[]);for(var C=0;C<r.abcelem.midiPitches.length;C++)c["event"+f].midiPitches.push(r.abcelem.midiPitches[C])}if(r.abcelem.midiGraceNotePitches&&r.abcelem.midiGraceNotePitches.length){c["event"+f].midiGraceNotePitches||(c["event"+f].midiGraceNotePitches=[]);for(var q=0;q<r.abcelem.midiGraceNotePitches.length;q++)c["event"+f].midiGraceNotePitches.push(r.abcelem.midiGraceNotePitches[q])}}N&&(c["event"+f].measureStart=!0,N=!1)}}return{isTiedState:E,duration:I/_,nextIsBar:N||r.type==="bar"}},this.makeVoicesArray=function(){for(var c=[],r=[],f={},e=0;e<this.engraver.staffgroups.length;e++){var p=this.engraver.staffgroups[e];if(p&&p.staffs&&p.staffs.length>0){var x=p.staffs[0],w=x.absoluteY,_=w-x.top*h.STEP,E=p.staffs[p.staffs.length-1];w=E.absoluteY;for(var N=w-E.bottom*h.STEP,I=N-_,R=p.voices,C=0;C<R.length;C++)if(!(R[C].staff&&R[C].staff.isTabStaff)){var B=!1;c[C]||(c[C]=[]),r[C]===void 0&&(r[C]=0);for(var q=R[C].children,L=0;L<q.length;L++)q[L].type==="tempo"&&(f[r[C]]=this.getBpm(q[L].abcelem)),c[C].push({top:_,height:I,line:p.line,measureNumber:r[C],elem:q[L]}),q[L].type==="bar"&&B&&r[C]++,(q[L].type==="note"||q[L].type==="rest")&&(B=!0)}}}return this.tempoLocations=f,c},this.setupEvents=function(c,r,f,e){e||(e=1);for(var p=[],x={},w=c,_,E=!0,N=this.makeVoicesArray(),I=0,R=0;R<N.length;R++){var C=w,B=Math.round(C*1e3),q=0,L=-1,D=N[R],P=f;r=this.getBeatLength()*P/60;for(var M=-1,A=0;A<D.length;A++){var F=D[A].measureNumber;M!==F&&this.tempoLocations[F]&&(P=this.tempoLocations[F],r=e*this.getBeatLength()*P/60,M=F);var z=D[A].elem,H=this.addElementToEvents(x,z,B,D[A].top,D[A].height,D[A].line,D[A].measureNumber,r,_,E);_=H.isTiedState,E=H.nextIsBar,C+=H.duration;var k;if(z.duration>0&&x["event"+B]&&(k="event"+B),B=Math.round(C*1e3),z.type==="bar"){var T=z.abcelem.type,S=T==="bar_right_repeat"||T==="bar_dbl_repeat",O=z.abcelem.startEnding==="1",G=T==="bar_left_repeat"||T==="bar_dbl_repeat"||T==="bar_right_repeat";if(S){A>0&&(x[k].endX=z.x),L===-1&&(L=A);var W=0;M=-1;for(var Y=q;Y<L;Y++){F=D[Y].measureNumber,M!==F&&this.tempoLocations[F]&&(P=this.tempoLocations[F],r=e*this.getBeatLength()*P/60,M=F);var K=D[Y].elem;H=this.addElementToEvents(x,K,B,D[Y].top,D[Y].height,D[Y].line,D[Y].measureNumber,r,_,E),_=H.isTiedState,E=H.nextIsBar,C+=H.duration,W=B,B=Math.round(C*1e3)}x["event"+W]&&(x["event"+W].endX=D[L].elem.x),E=!0,L=-1}O&&(L=A),G&&(q=A)}}I=Math.max(I,B)}return p=m(x),u(p),g(this.lines,p),p.push({type:"end",milliseconds:I}),this.addUsefulCallbackInfo(p,P*e),p},this.addUsefulCallbackInfo=function(c,r){for(var f=this.millisecondsPerMeasure(r),e=0;e<c.length;e++){var p=c[e];p.millisecondsPerMeasure=f}};function y(c,r){for(;r<c.length&&c[r].left===null;)r++;return c[r]}function g(c,r){if(!(r.length<1)){for(var f=0;f<r.length-1;f++){var e=r[f],p=y(r,f+1);if(e.left!==null){var x=p&&e.top===p.top?p.left:c[e.line].staffGroup.w;e.endX!==void 0?x>e.left&&(e.endX=Math.min(e.endX,x)):e.endX=x}}var w=r[r.length-1];w.endX=c[w.line].staffGroup.w}}this.getBpm=function(c){var r;if(c||(c=this.metaText?this.metaText.tempo:null),c){r=c.bpm;var f=this.getBeatLength(),e=c.duration&&c.duration.length>0?c.duration[0]:f;r=r*e/f}if(!r){r=180;var p=this.getMeterFraction();p&&p.num!==3&&p.num%3===0&&(r=120)}return r},this.setTiming=function(c,r){if(r=r||0,!this.engraver||!this.engraver.staffgroups)return console.log("setTiming cannot be called before the tune is drawn."),this.noteTimings=[],this.noteTimings;var f=this.metaText?this.metaText.tempo:null,e=this.getBpm(f),p=1;c?f&&(p=c/e):c=e;var x=this.getBeatLength(),w=c/60,_=this.getBarLength(),E=_/x*r/w;E&&(E-=this.getPickupLength()/x/w);var N=x*w;return this.noteTimings=this.setupEvents(E,N,c,p),this.noteTimings.length>0?(this.totalTime=this.noteTimings[this.noteTimings.length-1].milliseconds/1e3,this.totalBeats=this.totalTime*w):(this.totalTime=void 0,this.totalBeats=void 0),this.noteTimings},this.setUpAudio=function(c){c||(c={});var r=d(this,c);return o(r,c,this.formatting.percmap,this.formatting.midi)},this.deline=function(c){return t(this.lines,c)},this.findSelectableElement=function(c){return this.engraver&&this.engraver.selectables?this.engraver.findSelectableElement(c):null},this.getSelectableArray=function(){return this.engraver&&this.engraver.selectables?this.engraver.selectables:[]}};return Gt=a,Gt}var Yt,Za;function nc(){if(Za)return Yt;Za=1;var b=va(),h=function(C){var B=this,q={},L="";C.reset(),this.setVisualTranspose=function(D){D&&(C.visualTranspose=D)},this.cleanUp=function(D,P,M){r(C),delete C.runningFonts,o(C),C.metaText.tempo&&C.metaText.tempo.bpm&&!C.metaText.tempo.duration&&(C.metaText.tempo.duration=[C.getBeatLength()]);var A=!1,F,z,H;for(F=0;F<C.lines.length;F++)if(C.lines[F].staff!==void 0){var k=!1;for(z=0;z<C.lines[F].staff.length;z++)if(C.lines[F].staff[z]===void 0)A=!0,C.lines[F].staff[z]=null;else for(H=0;H<C.lines[F].staff[z].voices.length;H++)C.lines[F].staff[z].voices[H]===void 0?C.lines[F].staff[z].voices[H]=[]:f(C.lines[F].staff[z].voices[H])&&(k=!0);k||(C.lines[F]=null,A=!0)}if(A&&(C.lines=C.lines.filter(function(Y){return!!Y}),C.lines.forEach(function(Y){Y.staff&&(Y.staff=Y.staff.filter(function(K){return!!K}))})),D)for(;u(C.lines,D););if(P){for(A=!1,F=0;F<C.lines.length;F++)if(C.lines[F].staff!==void 0)for(z=0;z<C.lines[F].staff.length;z++){var T=!1;for(H=0;H<C.lines[F].staff[z].voices.length;H++)e(C.lines[F].staff[z].voices[H])&&(T=!0);T||(A=!0,C.lines[F].staff[z]=null)}A&&C.lines.forEach(function(Y){Y.staff&&(Y.staff=Y.staff.filter(function(K){return!!K}))})}for(n(C.lines),F=0;F<C.lines.length;F++)if(C.lines[F].staff)for(z=0;z<C.lines[F].staff.length;z++)delete C.lines[F].staff[z].workingClef;for(;t(C););for(var F=0;F<C.lines.length;F++){var S=C.lines[F].staff;if(S)for(C.staffNum=0;C.staffNum<S.length;C.staffNum++)for(S[C.staffNum].clef&&b.fixClef(S[C.staffNum].clef),C.voiceNum=0;C.voiceNum<S[C.staffNum].voices.length;C.voiceNum++){var O=S[C.staffNum].voices[C.voiceNum];l(O,C.staffNum,C.voiceNum,M);for(var G=0;G<O.length;G++)O[G].el_type==="clef"&&b.fixClef(O[G]);if(O.length>0&&O[O.length-1].barNumber){var W=y(C.lines,F);W&&(W.staff[0].barNumber=O[O.length-1].barNumber),delete O[O.length-1].barNumber}}}return delete C.staffNum,delete C.voiceNum,delete C.lineNum,delete C.potentialStartBeam,delete C.potentialEndBeam,delete C.vskipPending,M},this.addTieToLastNote=function(D){var P=g(C);return P&&P.pitches&&P.pitches.length>0?(P.pitches[0].startTie={},D&&(P.pitches[0].startTie.style="dotted"),!0):!1},this.appendElement=function(D,P,M,A){if(A.el_type=D,P!==null&&(A.startChar=P),M!==null&&(A.endChar=M),D==="note"){var F=c(A);F>=.25||A.force_end_beam_last&&C.potentialStartBeam!==void 0?_(C):A.end_beam&&C.potentialStartBeam!==void 0?A.rest===void 0?w(A,C):_(C):A.rest===void 0&&(C.potentialStartBeam===void 0?A.end_beam||(C.potentialStartBeam=A,delete C.potentialEndBeam):C.potentialEndBeam=A)}else _(C);return delete A.end_beam,delete A.force_end_beam_last,A.rest&&A.rest.type==="invisible"&&delete A.decoration,C.lines.length<=C.lineNum||C.lines[C.lineNum].staff.length<=C.staffNum?!1:(x(B,C,A,q,L),!0)},this.appendStartingElement=function(D,P,M,A){r(C);var F;D==="key"&&(F=A.impliedNaturals,delete A.impliedNaturals,delete A.explicitAccidentals);var z=Object.assign({},A);if(C.lines[C.lineNum]){var H=C.lines[C.lineNum].staff;if(H){H.length<=C.staffNum&&(H[C.staffNum]={},H[C.staffNum].clef=Object.assign({},H[0].clef),H[C.staffNum].key=Object.assign({},H[0].key),H[0].meter&&(H[C.staffNum].meter=Object.assign({},H[0].meter)),H[C.staffNum].workingClef=Object.assign({},H[0].workingClef),H[C.staffNum].voices=[[]]),D==="clef"&&(H[C.staffNum].workingClef=z);for(var k=H[C.staffNum].voices[C.voiceNum],T=0;T<k.length;T++){if(k[T].el_type==="note"||k[T].el_type==="bar"){z.el_type=D,z.startChar=P,z.endChar=M,F&&(z.accidentals=F.concat(z.accidentals)),k.push(z);return}if(k[T].el_type===D){z.el_type=D,z.startChar=P,z.endChar=M,F&&(z.accidentals=F.concat(z.accidentals)),k[T]=z;return}}H[C.staffNum][D]=A}}},this.addSubtitle=function(D,P){p(C,{subtitle:{text:D,startChar:P.startChar,endChar:P.endChar}})},this.addSpacing=function(D){C.vskipPending=D},this.addNewPage=function(D){p(C,{newpage:D})},this.addSeparator=function(D,P,M,A){p(C,{separator:{spaceAbove:Math.round(D),spaceBelow:Math.round(P),lineLength:Math.round(M),startChar:A.startChar,endChar:A.endChar}})},this.addText=function(D,P){p(C,{text:{text:D,startChar:P.startChar,endChar:P.endChar}})},this.addCentered=function(D){p(C,{text:[{text:D,center:!0}]})},this.changeVoiceScale=function(D){B.appendElement("scale",null,null,{size:D})},this.changeVoiceColor=function(D){B.appendElement("color",null,null,{color:D})},this.startNewLine=function(D){r(C),D.currentVoiceName&&(L=D.currentVoiceName,q[D.currentVoiceName]=D),C.lines[C.lineNum]===void 0?R(B,C,D):C.lines[C.lineNum].staff===void 0?(C.lineNum++,this.startNewLine(D)):C.lines[C.lineNum].staff[C.staffNum]===void 0?I(B,C,D):C.lines[C.lineNum].staff[C.staffNum].voices[C.voiceNum]===void 0?N(B,C,D):f(C.lines[C.lineNum].staff[C.staffNum].voices[C.voiceNum])?(C.lineNum++,this.startNewLine(D)):D.part&&B.appendElement("part",D.part.startChar,D.part.endChar,{title:D.part.title})},this.setRunningFont=function(D,P){C.runningFonts[D]=P},this.setBarNumberImmediate=function(D){var P=this.getCurrentVoice();if(P&&P.length>0){var M=P[P.length-1];if(M.el_type==="bar")M.barNumber!==void 0&&(M.barNumber=D);else return D-1}return D},this.hasBeginMusic=function(){for(var D=0;D<C.lines.length;D++)if(C.lines[D].staff)return!0;return!1},this.isFirstLine=function(D){for(var P=D-1;P>=0;P--)if(C.lines[P].staff!==void 0)return!1;return!0},this.getCurrentVoice=function(){var D=m(C.lines,C.lineNum);if(!D)return null;var P=D.staff[C.staffNum];return P&&P.voices[C.voiceNum]!==void 0?P.voices[C.voiceNum]:null},this.setCurrentVoice=function(D,P,M){C.staffNum=D,C.voiceNum=P,L=M;for(var A=0;A<C.lines.length;A++)if(C.lines[A].staff&&(C.lines[A].staff[D]===void 0||C.lines[A].staff[D].voices[P]===void 0||!f(C.lines[A].staff[D].voices[P])))return C.lineNum=A,!!(!C.lines[A].staff[D]||C.lines[A].staff[D].voices[P]);return C.lineNum=A,!1},this.addMetaText=function(D,P,M){C.metaText[D]===void 0?(C.metaText[D]=P,C.metaTextInfo[D]=M):(typeof C.metaText[D]=="string"&&typeof P=="string"?C.metaText[D]+=`
`+P:(C.metaText[D]==="string"&&(C.metaText[D]=[{text:C.metaText[D]}]),typeof P=="string"&&(P=[{text:P}]),C.metaText[D]=C.metaText[D].concat(P)),C.metaTextInfo[D].endChar=M.endChar)},this.addMetaTextArray=function(D,P,M){C.metaText[D]===void 0?(C.metaText[D]=[P],C.metaTextInfo[D]=M):(C.metaText[D].push(P),C.metaTextInfo[D].endChar=M.endChar)},this.addMetaTextObj=function(D,P,M){C.metaText[D]=P,C.metaTextInfo[D]=M}};function d(C){if(!C||typeof C=="string")return!1;for(var B=0;B<C.length;B++)if(typeof C[B]!="string")return!1;return!0}function o(C){d(C.metaText.notes)&&(C.metaText.notes=C.metaText.notes.join(`
`)),d(C.metaText.history)&&(C.metaText.history=C.metaText.history.join(`
`))}function t(C){for(var B=!1,q=[],L=0;L<C.lines.length;L++){var D=C.lines[L];if(D.staff)for(var P=0;P<D.staff.length;P++){for(var M=D.staff[P],A=[],F=0;F<M.voices.length;F++){var z=M.voices[F];A.push({hasOverlay:!1,voice:[],snip:[]}),q[L]=0;for(var H=0,k=!1,T=-1,S=0;S<z.length;S++){var O=z[S];if(O.el_type==="overlay"&&!k){B=!0,k=!0,T=S,A[F].hasOverlay=!0;for(var G=0;G<L;G++)q[G]&&C.lines[G].staff&&M.voices.length>=C.lines[G].staff[0].voices.length&&C.lines[G].staff[0].voices.push([{el_type:"note",duration:q[G],rest:{type:"invisible"},startChar:O.startChar,endChar:O.endChar}])}else O.el_type==="bar"?(k?(k=!1,A[F].snip.push({start:T,len:S-T}),A[F].voice.push(O)):(H>0&&A[F].voice.push({el_type:"note",duration:H,rest:{type:"invisible"},startChar:O.startChar,endChar:O.endChar}),A[F].voice.push(O)),H=0):O.el_type==="note"?k?A[F].voice.push(O):(H+=O.duration,q[L]+=O.duration):(O.el_type==="scale"||O.el_type==="stem"||O.el_type==="overlay"||O.el_type==="style"||O.el_type==="transpose"||O.el_type==="color")&&A[F].voice.push(O)}A[F].hasOverlay&&A[F].snip.length===0&&A[F].snip.push({start:T,len:z.length-T})}for(F=0;F<A.length;F++){var W=A[F];if(W.hasOverlay){W.voice.splice(0,0,{el_type:"stem",direction:"down"}),M.voices.push(W.voice);for(var Y=W.snip.length-1;Y>=0;Y--){var K=W.snip[Y];M.voices[F].splice(K.start,K.len),M.voices[F].splice(K.start+1,0,{el_type:"stem",direction:"auto"});var ee=a(M.voices[F],K.start);M.voices[F].splice(ee,0,{el_type:"stem",direction:"up"})}for(Y=0;Y<M.voices[M.voices.length-1].length;Y++){M.voices[M.voices.length-1][Y]=Object.assign({},M.voices[M.voices.length-1][Y]);var $=M.voices[M.voices.length-1][Y];$.el_type==="bar"&&$.startEnding&&delete $.startEnding,$.el_type==="bar"&&$.endEnding&&delete $.endEnding}}}}}return B}function a(C,B){for(var q=B-1;q>0&&C[q].el_type!=="bar";q--);return q}function n(C){for(var B=!0,q=0;q<C.length;q++){var L=C[q];if(L.staff){for(var D=0;D<L.staff.length;D++){var P=L.staff[D];if(P.title){for(var M=!1,A=0;A<P.title.length;A++)P.title[A]?(P.title[A]=B?P.title[A].name:P.title[A].subname,P.title[A]?M=!0:P.title[A]=""):P.title[A]="";M||delete P.title}}B=!1}}}function l(C,B,q,L){L[B]||(L[B]=[]),L[B][q]||(L[B][q]=[]);for(var D,P=function(Y,K,ee){if(L[B][q][ee]===void 0){for(D=0;D<L[B][q].length;D++)if(L[B][q][D]!==void 0){ee=D;break}if(L[B][q][ee]===void 0){var $=ee*100+1;Y.endSlur.forEach(function(Q){$===Q&&--$}),L[B][q][ee]=[$]}}for(var ne,ie=0;ie<K;ie++)ne=L[B][q][ee].pop(),Y.endSlur.push(ne);return L[B][q][ee].length===0&&delete L[B][q][ee],ne},M=function(Y,K,ee,$){Y.startSlur=[],L[B][q][ee]===void 0&&(L[B][q][ee]=[]);for(var ne=ee*100+1,ie=0;ie<K;ie++)$&&($.forEach(function(Q){ne===Q&&++ne}),$.forEach(function(Q){ne===Q&&++ne}),$.forEach(function(Q){ne===Q&&++ne})),L[B][q][ee].forEach(function(Q){ne===Q&&++ne}),L[B][q][ee].forEach(function(Q){ne===Q&&++ne}),L[B][q][ee].push(ne),Y.startSlur.push({label:ne}),Y.dottedSlur&&(Y.startSlur[Y.startSlur.length-1].style="dotted",delete Y.dottedSlur),ne++},A=0;A<C.length;A++){var F=C[A];if(F.el_type==="note"){if(F.gracenotes)for(var z=0;z<F.gracenotes.length;z++){if(F.gracenotes[z].endSlur){var H=F.gracenotes[z].endSlur;F.gracenotes[z].endSlur=[];for(var k=0;k<H;k++)P(F.gracenotes[z],1,20)}F.gracenotes[z].startSlur&&(D=F.gracenotes[z].startSlur,M(F.gracenotes[z],D,20))}if(F.endSlur&&(D=F.endSlur,F.endSlur=[],P(F,D,0)),F.startSlur&&(D=F.startSlur,M(F,D,0)),F.pitches){for(var T=[],S=0;S<F.pitches.length;S++)if(F.pitches[S].endSlur){var O=F.pitches[S].endSlur;F.pitches[S].endSlur=[];for(var G=0;G<O;G++){var W=P(F.pitches[S],1,S+1);T.push(W)}}for(S=0;S<F.pitches.length;S++)F.pitches[S].startSlur&&(D=F.pitches[S].startSlur,M(F.pitches[S],D,S+1,T));F.gracenotes&&F.pitches[0].endSlur&&F.pitches[0].endSlur[0]===100&&F.pitches[0].startSlur&&(F.gracenotes[0].endSlur?F.gracenotes[0].endSlur.push(F.pitches[0].startSlur[0].label):F.gracenotes[0].endSlur=[F.pitches[0].startSlur[0].label],F.pitches[0].endSlur.length===1?delete F.pitches[0].endSlur:F.pitches[0].endSlur[0]===100?F.pitches[0].endSlur.shift():F.pitches[0].endSlur[F.pitches[0].endSlur.length-1]===100&&F.pitches[0].endSlur.pop(),L[B][q][1].length===1?delete L[B][q][1]:L[B][q][1].pop())}}}}function u(C,B){for(i=0;i<C.length;i++)if(C[i].staff!==void 0)for(s=0;s<C[i].staff.length;s++){var q=[];for(v=0;v<C[i].staff[s].voices.length;v++)for(var L=C[i].staff[s].voices[v],D=0,P=0;P<L.length;P++)if(L[P].el_type==="bar"){if(D++,D>=B&&P<L.length-1){var M=y(C,i);if(!M){var A=JSON.parse(JSON.stringify(C[i]));C.push(Object.assign({},A)),M=C[C.length-1];for(var F=0;F<M.staff.length;F++)for(var z=0;z<M.staff[F].voices.length;z++)M.staff[F].voices[z]=[]}var H=P+1,k=C[i].staff[s].voices[v].slice(H);return C[i].staff[s].voices[v]=C[i].staff[s].voices[v].slice(0,H),M.staff[s].voices[v]=q.concat(k.concat(M.staff[s].voices[v])),!0}}else L[P].duration||q.push(L[P])}return!1}function m(C,B){for(;B>=0;){if(C[B].staff)return C[B];B--}return null}function y(C,B){for(B++;C.length>B;){if(C[B].staff)return C[B];B++}return null}function g(C){if(!C.lines[C.lineNum]||!C.lines[C.lineNum].staff||!C.lines[C.lineNum].staff[C.staffNum])return null;var B=C.lines[C.lineNum].staff[C.staffNum].voices[C.voiceNum];if(!B)return null;for(var q=B.length-1;q>=0;q--){var L=B[q];if(L.el_type==="note")return L}return null}function c(C){return C.duration?C.duration:0}function r(C){C.potentialStartBeam&&C.potentialEndBeam&&(C.potentialStartBeam.startBeam=!0,C.potentialEndBeam.endBeam=!0),delete C.potentialStartBeam,delete C.potentialEndBeam}function f(C){for(var B=0;B<C.length;B++)if(C[B].el_type==="note"||C[B].el_type==="bar")return!0;return!1}function e(C){for(var B=0;B<C.length;B++)if(C[B].el_type==="note"&&(C[B].rest===void 0||C[B].chord!==void 0))return!0;return!1}function p(C,B){C.vskipPending&&(B.vskip=C.vskipPending,delete C.vskipPending),C.lines.push(B)}function x(C,B,q,L,D){var P=B.lines[B.lineNum].staff[B.staffNum];if(q.pitches!==void 0){var M=P.workingClef.verticalPos;q.pitches.forEach(function(F){F.verticalPos=F.pitch-M})}if(q.gracenotes!==void 0){var A=P.workingClef.verticalPos;q.gracenotes.forEach(function(F){F.verticalPos=F.pitch-A})}P.voices.length<=B.voiceNum&&(L[D]||(L[D]={}),N(C,B,L[D])),P.voices[B.voiceNum].push(q)}function w(C,B){B.potentialStartBeam.startBeam=!0,C.endBeam=!0,delete B.potentialStartBeam,delete B.potentialEndBeam}function _(C){C.potentialStartBeam!==void 0&&C.potentialEndBeam!==void 0&&(C.potentialStartBeam.startBeam=!0,C.potentialEndBeam.endBeam=!0),delete C.potentialStartBeam,delete C.potentialEndBeam}function E(C,B,q){if(C.runningFonts[B]){for(var L=!1,D=Object.keys(q),P=0;P<D.length;P++)C.runningFonts[B][D[P]]!==q[D[P]]&&(L=!0);L&&(C.lines[C.lineNum].staff[C.staffNum][B]=q)}C.runningFonts[B]=q}function N(C,B,q){var L=B.lines[B.lineNum].staff[B.staffNum];if(L.voices[B.voiceNum]=[],L.title||(L.title=[]),L.title[B.voiceNum]={name:q.name,subname:q.subname},q.style&&C.appendElement("style",null,null,{head:q.style}),q.stem)C.appendElement("stem",null,null,{direction:q.stem});else if(B.voiceNum>0){if(L.voices[0]!==void 0){for(var D=!1,P=0;P<L.voices[0].length;P++)L.voices[0].el_type==="stem"&&(D=!0);if(!D){var M={el_type:"stem",direction:"up"};L.voices[0].splice(0,0,M)}}C.appendElement("stem",null,null,{direction:"down"})}q.scale&&C.appendElement("scale",null,null,{size:q.scale}),q.color&&C.appendElement("color",null,null,{color:q.color})}function I(C,B,q){q.key&&q.key.impliedNaturals&&(q.key.accidentals=q.key.accidentals.concat(q.key.impliedNaturals),delete q.key.impliedNaturals),B.lines[B.lineNum].staff[B.staffNum]={voices:[],clef:q.clef,key:q.key,workingClef:q.clef};var L=B.lines[B.lineNum].staff[B.staffNum];q.stafflines!==void 0&&(L.clef.stafflines=q.stafflines,L.workingClef.stafflines=q.stafflines),q.staffscale&&(L.staffscale=q.staffscale),q.annotationfont&&E(B,"annotationfont",q.annotationfont),q.gchordfont&&E(B,"gchordfont",q.gchordfont),q.tripletfont&&E(B,"tripletfont",q.tripletfont),q.vocalfont&&E(B,"vocalfont",q.vocalfont),q.bracket&&(L.bracket=q.bracket),q.brace&&(L.brace=q.brace),q.connectBarLines&&(L.connectBarLines=q.connectBarLines),q.barNumber&&(L.barNumber=q.barNumber),N(C,B,q),q.part&&C.appendElement("part",q.part.startChar,q.part.endChar,{title:q.part.title}),q.meter!==void 0&&(L.meter=q.meter),B.vskipPending&&(B.lines[B.lineNum].vskip=B.vskipPending,delete B.vskipPending)}function R(C,B,q){B.lines[B.lineNum]={staff:[]},I(C,B,q)}return Yt=h,Yt}var Wt,en;function Gs(){if(en)return Wt;en=1;var b=Oe(),h=pa(),d=Qo(),o=Zo(),t=ec(),a=Is(),n=zs(),l=nc(),u=function(){var m=new n,y=new l(m),g,c="",r="";this.getTune=function(){var P={formatting:m.formatting,lines:m.lines,media:m.media,metaText:m.metaText,metaTextInfo:m.metaTextInfo,version:m.version,addElementToEvents:m.addElementToEvents,addUsefulCallbackInfo:m.addUsefulCallbackInfo,getTotalTime:m.getTotalTime,getTotalBeats:m.getTotalBeats,getBarLength:m.getBarLength,getBeatLength:m.getBeatLength,getBeatsPerMeasure:m.getBeatsPerMeasure,getBpm:m.getBpm,getMeter:m.getMeter,getMeterFraction:m.getMeterFraction,getPickupLength:m.getPickupLength,getKeySignature:m.getKeySignature,getElementFromChar:m.getElementFromChar,makeVoicesArray:m.makeVoicesArray,millisecondsPerMeasure:m.millisecondsPerMeasure,setupEvents:m.setupEvents,setTiming:m.setTiming,setUpAudio:m.setUpAudio,deline:m.deline,findSelectableElement:m.findSelectableElement,getSelectableArray:m.getSelectableArray};return m.lineBreaks&&(P.lineBreaks=m.lineBreaks),m.visualTranspose&&(P.visualTranspose=m.visualTranspose),P};function f(P,M,A){P.positioning||(P.positioning={}),P.positioning[M]=A}function e(P,M,A){P.fonts||(P.fonts={}),P.fonts[M]=A}var p={reset:function(){for(var P in this)this.hasOwnProperty(P)&&typeof this[P]!="function"&&delete this[P];this.iChar=0,this.key={accidentals:[],root:"none",acc:"",mode:""},this.meter=null,this.origMeter=null,this.hasMainTitle=!1,this.default_length=.125,this.clef={type:"treble",verticalPos:0},this.octave=0,this.next_note_duration=0,this.start_new_line=!0,this.is_in_header=!0,this.partForNextLine={},this.tempoForNextLine=[],this.havent_set_length=!0,this.voices={},this.staves=[],this.macros={},this.currBarNumber=1,this.barCounter={},this.ignoredDecorations=[],this.score_is_present=!1,this.inEnding=!1,this.inTie=[],this.inTieChord={},this.vocalPosition="auto",this.dynamicPosition="auto",this.chordPosition="auto",this.ornamentPosition="auto",this.volumePosition="auto",this.openSlurs=[],this.freegchord=!1,this.endingHoldOver={}},differentFont:function(P,M){return this[P].decoration!==M[P].decoration||this[P].face!==M[P].face||this[P].size!==M[P].size||this[P].style!==M[P].style||this[P].weight!==M[P].weight},addFormattingOptions:function(P,M,A){A==="note"?(this.vocalPosition!=="auto"&&f(P,"vocalPosition",this.vocalPosition),this.dynamicPosition!=="auto"&&f(P,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&f(P,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&f(P,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&f(P,"volumePosition",this.volumePosition),this.differentFont("annotationfont",M)&&e(P,"annotationfont",this.annotationfont),this.differentFont("gchordfont",M)&&e(P,"gchordfont",this.gchordfont),this.differentFont("vocalfont",M)&&e(P,"vocalfont",this.vocalfont),this.differentFont("tripletfont",M)&&e(P,"tripletfont",this.tripletfont)):A==="bar"&&(this.dynamicPosition!=="auto"&&f(P,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&f(P,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&f(P,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&f(P,"volumePosition",this.volumePosition),this.differentFont("measurefont",M)&&e(P,"measurefont",this.measurefont),this.differentFont("repeatfont",M)&&e(P,"repeatfont",this.repeatfont))},duplicateStartEndingHoldOvers:function(){this.endingHoldOver={inTie:[],inTieChord:{}};for(var P=0;P<this.inTie.length;P++)if(this.endingHoldOver.inTie.push([]),this.inTie[P])for(var M=0;M<this.inTie[P].length;M++)this.endingHoldOver.inTie[P].push(this.inTie[P][M]);for(var A in this.inTieChord)this.inTieChord.hasOwnProperty(A)&&(this.endingHoldOver.inTieChord[A]=this.inTieChord[A])},restoreStartEndingHoldOvers:function(){if(this.endingHoldOver.inTie){this.inTie=[],this.inTieChord={};for(var P=0;P<this.endingHoldOver.inTie.length;P++){this.inTie.push([]);for(var M=0;M<this.endingHoldOver.inTie[P].length;M++)this.inTie[P].push(this.endingHoldOver.inTie[P][M])}for(var A in this.endingHoldOver.inTieChord)this.endingHoldOver.inTieChord.hasOwnProperty(A)&&(this.inTieChord[A]=this.endingHoldOver.inTieChord[A])}}},x=function(P){p.warnings||(p.warnings=[]),p.warnings.push(P)},w=function(P){p.warningObjects||(p.warningObjects=[]),p.warningObjects.push(P)},_=function(P){var M=P.replace(/\x12/g," ");return M=M.replace(/&/g,"&amp;"),M=M.replace(/</g,"&lt;"),M.replace(/>/g,"&gt;")},E=function(P,M,A){M||(M=" ");var F=M[A];(F===" "||!F)&&(F="SPACE");var z=_(M.substring(A-64,A))+'<span style="text-decoration:underline;font-size:1.3em;font-weight:bold;">'+F+"</span>"+_(M.substring(A+1).substring(0,64));x("Music Line:"+g.lineIndex+":"+(A+1)+": "+P+":  "+z),w({message:P,line:M,startChar:p.iChar+A,column:A})},N,I;this.getWarnings=function(){return p.warnings},this.getWarningObjects=function(){return p.warningObjects};var R=function(P,M){if(M.indexOf("")>=0){c+=M;return}if(M=c+M,c="",!P){E("Can't add words before the first line of music",P,0);return}M=b.strip(M),M[M.length-1]!=="-"&&(M=M+" ");for(var A=[],F=0,z=!1,H=function(S){var O=b.strip(M.substring(F,S));if(O=O.replace(/\\([-_*|~])/g,"$1"),F=S+1,O.length>0){z&&(O=O.replace(/~/g," "));var G=M[S];return G!=="_"&&G!=="-"&&(G=" "),A.push({syllable:g.translateString(O),divider:G}),z=!1,!0}return!1},k=!1,T=0;T<M.length;T++){switch(M[T]){case" ":case"":H(T);break;case"-":!k&&!H(T)&&A.length>0&&(b.last(A).divider="-",A.push({skip:!0,to:"next"}));break;case"_":k||(H(T),A.push({skip:!0,to:"slur"}));break;case"*":k||(H(T),A.push({skip:!0,to:"next"}));break;case"|":k||(H(T),A.push({skip:!0,to:"bar"}));break;case"~":k||(z=!0);break}k=M[T]==="\\"}P.forEach(function(S){if(A.length!==0){if(A[0].skip){switch(A[0].to){case"next":S.el_type==="note"&&S.pitches!==null&&A.shift();break;case"slur":S.el_type==="note"&&S.pitches!==null&&A.shift();break;case"bar":S.el_type==="bar"&&A.shift();break}S.el_type!=="bar"&&(S.lyric===void 0?S.lyric=[{syllable:"",divider:" "}]:S.lyric.push({syllable:"",divider:" "}))}else if(S.el_type==="note"&&S.rest===void 0){var O=A.shift();O.syllable&&(O.syllable=O.syllable.replace(/ +/g," ")),S.lyric===void 0?S.lyric=[O]:S.lyric.push(O)}}})},C=function(P,M){if(M.indexOf("")>=0){r+=M;return}if(M=r+M,r="",!P){E("Can't add symbols before the first line of music",P,0);return}M=b.strip(M),M[M.length-1]!=="-"&&(M=M+" ");for(var A=[],F=0,z=!1,H=function(T){var S=b.strip(M.substring(F,T));if(F=T+1,S.length>0){z&&(S=S.replace(/~/g," "));var O=M[T];return O!=="_"&&O!=="-"&&(O=" "),A.push({syllable:g.translateString(S),divider:O}),z=!1,!0}return!1},k=0;k<M.length;k++)switch(M[k]){case" ":case"":H(k);break;case"-":!H(k)&&A.length>0&&(b.last(A).divider="-",A.push({skip:!0,to:"next"}));break;case"_":H(k),A.push({skip:!0,to:"slur"});break;case"*":H(k),A.push({skip:!0,to:"next"});break;case"|":H(k),A.push({skip:!0,to:"bar"});break;case"~":z=!0;break}P.forEach(function(T){if(A.length!==0){if(A[0].skip)switch(A[0].to){case"next":T.el_type==="note"&&T.pitches!==null&&A.shift();break;case"slur":T.el_type==="note"&&T.pitches!==null&&A.shift();break;case"bar":T.el_type==="bar"&&A.shift();break}else if(T.el_type==="note"&&T.rest===void 0){var S=A.shift();T.lyric===void 0?T.lyric=[S]:T.lyric.push(S)}}})},B=function(P){if(b.startsWith(P,"%%")){var M=h.addDirective(P.substring(2));M&&E(M,P,2);return}var A=P.indexOf("%");if(A>=0&&(P=P.substring(0,A)),P=P.replace(/\s+$/,""),P.length!==0){if(c){R(y.getCurrentVoice(),P.substring(2));return}if(r){C(y.getCurrentVoice(),P.substring(2));return}if(P.length<2||P[1]!==":"||I.lineContinuation){I.parseMusic(P);return}var F=N.parseHeader(P);F.regular&&I.parseMusic(P),F.newline&&I.startNewLine(),F.words&&R(y.getCurrentVoice(),P.substring(2)),F.symbols&&C(y.getCurrentVoice(),P.substring(2))}};function q(P,M){P.push({el_type:"hint"});for(var A=0;A<M.length;A++){var F=M[A],z=Object.assign({},F);if(P.push(z),F.el_type==="bar")return}}function L(P,M){for(var A=0;A<P.length;A++){var F=P[A],z=M[A];if(z)for(var H=0;H<z.voices.length;H++){var k=z.voices[H],T=F.voices[H];T&&q(T,k)}}}function D(){for(var P=0;P<m.lines.length;P++){var M=m.lines[P].staff;if(M){for(var A=P+1;A<m.lines.length&&m.lines[A].staff===void 0;)A++;if(A<m.lines.length){var F=m.lines[A].staff;L(M,F)}}}}this.parse=function(P,M,A){M||(M={}),A||(A=0),m.reset(),P=P.replace(/\r\n?/g,`
`)+`
`;var F=P.split(`
\\`);if(F.length>1){for(var z=1;z<F.length;z++)for(;F[z].length>0&&F[z][0]!==`
`;)F[z]=F[z].substr(1),F[z-1]+=" ";P=F.join("  ")}P=P.replace(/\\([ \t]*)(%.*)*\n/g,function(W,Y,K){var ee=K?Array(K.length+1).join(" "):"";return Y+""+ee+`
`});var H=P.split(`
`);b.last(H).length===0&&H.pop(),g=new t(H,p),N=new d(g,E,p,m,y),I=new o(g,E,p,m,y,N),M.print&&(m.media="print"),p.reset(),p.iChar=A,M.visualTranspose?(p.globalTranspose=parseInt(M.visualTranspose),p.globalTranspose===0?p.globalTranspose=void 0:y.setVisualTranspose(M.visualTranspose)):p.globalTranspose=void 0,M.lineBreaks&&(p.lineBreaks=M.lineBreaks),N.reset(g,E,p,m);try{M.format&&h.globalFormatting(M.format);for(var k=g.nextLine();k;){if(M.header_only&&p.is_in_header===!1||M.stop_on_warning&&p.warnings)throw"normal_abort";var T=p.is_in_header;B(k),T&&!p.is_in_header&&(y.setRunningFont("annotationfont",p.annotationfont),y.setRunningFont("gchordfont",p.gchordfont),y.setRunningFont("tripletfont",p.tripletfont),y.setRunningFont("vocalfont",p.vocalfont)),k=g.nextLine()}c&&R(y.getCurrentVoice(),""),r&&C(y.getCurrentVoice(),""),p.openSlurs=y.cleanUp(p.barsperstaff,p.staffnonote,p.openSlurs)}catch(W){if(W!=="normal_abort")throw W}var S=11*72,O=8.5*72;switch(p.papersize){case"legal":S=14*72,O=8.5*72;break;case"A4":S=11.7*72,O=8.3*72;break}if(p.landscape){var G=S;S=O,O=G}m.formatting.pagewidth||(m.formatting.pagewidth=O),m.formatting.pageheight||(m.formatting.pageheight=S),M.hint_measures&&D(),a.wrapLines(m,p.lineBreaks,p.barNumbers)}};return Wt=u,Wt}var Ut,tn;function ic(){if(tn)return Ut;tn=1;var b=Oe(),h=function(d){var o="",t=d.match(/(\s*)/);d=b.strip(d);for(var a=d.split(`
X:`),n=1;n<a.length;n++)a[n]="X:"+a[n];var l=t?t[0].length:0,u=[];if(a.forEach(function(c){u.push({abc:c,startPos:l}),l+=c.length+1}),u.length>1&&!b.startsWith(u[0].abc,"X:")){var m=u.shift(),y=m.abc.split(`
`);y.forEach(function(c){b.startsWith(c,"%%")&&(o+=c+`
`)})}var g=o;return u.forEach(function(c){var r=c.abc.indexOf(`

`);r>0&&(c.abc=c.abc.substring(0,r)),c.pure=c.abc,c.abc=o+c.abc,c.title="";var f=c.pure.split("T:");f.length>1&&(f=f[1].split(`
`),c.title=b.strip(f[0]));var e=c.pure.substring(2,c.pure.indexOf(`
`));c.id=b.strip(e)}),{header:g,tunes:u}};return Ut=h,Ut}var Vt,rn;function sc(){if(rn)return Vt;rn=1;function b(h,d){this.numLines=h,this.lineSpace=d,this.verticalSize=this.numLines*this.lineSpace;var o=3;this.bar={pitch:o,pitch2:d*h,height:5}}return b.prototype.bypass=function(h){var d=h.staffGroup.voices;return!!(d.length>0&&d[0].isPercussion)},b.prototype.setRelative=function(h,d,o){switch(h.type){case"bar":d.pitch=this.bar.pitch,d.pitch2=this.bar.pitch2,d.height=this.height;break;case"symbol":var t=this.bar.pitch2/2;if(h.name=="dots.dot")return o?(d.pitch=t,!1):(d.pitch=t+this.lineSpace,!0);break}return o},Vt=b,Vt}var Xt,an;function Ys(){if(an)return Xt;an=1;var b=function(d,o){this.children=[],this.beams=[],this.otherchildren=[],this.w=0,this.duplicate=!1,this.voicenumber=d,this.voicetotal=o,this.bottom=7,this.top=7,this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return b.prototype.addChild=function(h){if(h.type==="bar"){for(var d=!0,o=0;d&&o<this.children.length;o++)this.children[o].type.indexOf("staff-extra")<0&&this.children[o].type!=="tempo"&&(d=!1);d||(this.beams.push("bar"),this.otherchildren.push("bar"))}this.children[this.children.length]=h,this.setRange(h)},b.prototype.setLimit=function(h,d){var o=d.specialY;o||(o=d),o[h]&&(this.specialY[h]?this.specialY[h]=Math.max(this.specialY[h],o[h]):this.specialY[h]=o[h])},b.prototype.adjustRange=function(h){h.bottom!==void 0&&(this.bottom=Math.min(this.bottom,h.bottom)),h.top!==void 0&&(this.top=Math.max(this.top,h.top))},b.prototype.setRange=function(h){this.adjustRange(h),this.setLimit("tempoHeightAbove",h),this.setLimit("partHeightAbove",h),this.setLimit("volumeHeightAbove",h),this.setLimit("dynamicHeightAbove",h),this.setLimit("endingHeightAbove",h),this.setLimit("chordHeightAbove",h),this.setLimit("lyricHeightAbove",h),this.setLimit("lyricHeightBelow",h),this.setLimit("chordHeightBelow",h),this.setLimit("volumeHeightBelow",h),this.setLimit("dynamicHeightBelow",h)},b.prototype.addOther=function(h){this.otherchildren.push(h),this.setRange(h)},b.prototype.addBeam=function(h){this.beams.push(h)},b.prototype.setWidth=function(h){this.w=h},Xt=b,Xt}var jt,nn;function ga(){if(nn)return jt;nn=1;var b=function(h,d,o,t){if(h)for(var a=0;a<h.length;a++){var n=h[a],l=n.getAttribute("highlight");l||(l="fill"),n.setAttribute(l,t);var u=n.getAttribute("class");u||(u=""),u=u.replace(o,""),u=u.replace(d,""),d.length>0&&(u.length>0&&u[u.length-1]!==" "&&(u+=" "),u+=d),n.setAttribute("class",u)}};return jt=b,jt}var $t,sn;function Ws(){if(sn)return $t;sn=1;var b=ga(),h=function(d,o){d===void 0&&(d="abcjs-note_selected"),o===void 0&&(o="#ff0000"),b(this.elemset,d,"",o)};return $t=h,$t}var Kt,on;function Us(){if(on)return Kt;on=1;var b=ga(),h=function(d,o){d===void 0&&(d="abcjs-note_selected"),o===void 0&&(o="#000000"),b(this.elemset,"",d,o)};return Kt=h,Kt}var Qt,cn;function je(){if(cn)return Qt;cn=1;var b=Ws(),h=Us(),d=function(t,a,n,l,u,m){m||(m={}),this.tuneNumber=u,this.abcelem=t,this.duration=a,this.durationClass=m.durationClassOveride?m.durationClassOveride:this.duration,this.minspacing=n||0,this.x=0,this.children=[],this.heads=[],this.extra=[],this.extraw=0,this.w=0,this.right=[],this.invisible=!1,this.bottom=void 0,this.top=void 0,this.type=l,this.fixed={w:0,t:void 0,b:void 0},this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return d.prototype.getFixedCoords=function(){return{x:this.x,w:this.fixed.w,t:this.fixed.t,b:this.fixed.b}},d.prototype.addExtra=function(o){this.fixed.w=Math.max(this.fixed.w,o.dx+o.w),this.fixed.t===void 0?this.fixed.t=o.top:this.fixed.t=Math.max(this.fixed.t,o.top),this.fixed.b===void 0?this.fixed.b=o.bottom:this.fixed.b=Math.min(this.fixed.b,o.bottom),o.dx<this.extraw&&(this.extraw=o.dx),this.extra[this.extra.length]=o,this._addChild(o)},d.prototype.addHead=function(o){o.dx<this.extraw&&(this.extraw=o.dx),this.heads[this.heads.length]=o,this.addRight(o)},d.prototype.addRight=function(o){this.fixed.w=Math.max(this.fixed.w,o.dx+o.w),o.top!==void 0&&(this.fixed.t===void 0?this.fixed.t=o.top:this.fixed.t=Math.max(this.fixed.t,o.top)),o.bottom!==void 0&&(this.fixed.b===void 0?this.fixed.b=o.bottom:this.fixed.b=Math.min(this.fixed.b,o.bottom)),o.dx+o.w>this.w&&(this.w=o.dx+o.w),this.right[this.right.length]=o,this._addChild(o)},d.prototype.addFixed=function(o){this._addChild(o)},d.prototype.addFixedX=function(o){this._addChild(o)},d.prototype.addCentered=function(o){var t=o.w/2;-t<this.extraw&&(this.extraw=-t),this.extra[this.extra.length]=o,o.dx+t>this.w&&(this.w=o.dx+t),this.right[this.right.length]=o,this._addChild(o)},d.prototype.setLimit=function(o,t){t[o]&&(this.specialY[o]?this.specialY[o]=Math.max(this.specialY[o],t[o]):this.specialY[o]=t[o])},d.prototype._addChild=function(o){var t=!0;this.abcelem.el_type=="clef"&&o.type=="barNumber"&&(t=!1),o.parent=this,this.children[this.children.length]=o,t&&this.pushTop(o.top),this.pushBottom(o.bottom),this.setLimit("tempoHeightAbove",o),this.setLimit("partHeightAbove",o),this.setLimit("volumeHeightAbove",o),this.setLimit("dynamicHeightAbove",o),this.setLimit("endingHeightAbove",o),this.setLimit("chordHeightAbove",o),this.setLimit("lyricHeightAbove",o),this.setLimit("lyricHeightBelow",o),this.setLimit("chordHeightBelow",o),this.setLimit("volumeHeightBelow",o),this.setLimit("dynamicHeightBelow",o)},d.prototype.pushTop=function(o){o!==void 0&&(this.top===void 0?this.top=o:this.top=Math.max(o,this.top))},d.prototype.pushBottom=function(o){o!==void 0&&(this.bottom===void 0?this.bottom=o:this.bottom=Math.min(o,this.bottom))},d.prototype.setX=function(o){this.x=o;for(var t=0;t<this.children.length;t++)this.children[t].setX(o)},d.prototype.center=function(o,t){var a=(t.x-o.x)/2+o.x;this.x=a-this.w/2;for(var n=0;n<this.children.length;n++)this.children[n].setX(this.x)},d.prototype.setHint=function(){this.hint=!0},d.prototype.highlight=function(o,t){b.bind(this)(o,t)},d.prototype.unhighlight=function(o,t){h.bind(this)(o,t)},Qt=d,Qt}var Jt,ln;function Pe(){if(ln)return Jt;ln=1;var b=function(d,o,t,a,n){switch(n=n||{},this.x=0,this.c=d,this.dx=o,this.w=t,this.pitch=a,this.scalex=n.scalex||1,this.scaley=n.scaley||1,this.type=n.type||"symbol",this.pitch2=n.pitch2,this.linewidth=n.linewidth,this.klass=n.klass,this.anchor=n.anchor?n.anchor:"middle",this.top=a,this.pitch2!==void 0&&this.pitch2>this.top&&(this.top=this.pitch2),this.bottom=a,this.pitch2!==void 0&&this.pitch2<this.bottom&&(this.bottom=this.pitch2),n.thickness&&(this.top+=n.thickness/2,this.bottom-=n.thickness/2),n.stemHeight&&(n.stemHeight>0?this.top+=n.stemHeight:this.bottom+=n.stemHeight),n.dim&&(this.dim=n.dim),n.position&&(this.position=n.position),this.height=n.height?n.height:4,n.top&&(this.top=n.top),n.bottom&&(this.bottom=n.bottom),n.name?this.name=n.name:this.c?this.name=this.c:this.name=this.type,n.realWidth?this.realWidth=n.realWidth:this.realWidth=this.w,this.centerVertically=!1,this.type){case"debug":this.chordHeightAbove=this.height;break;case"lyric":n.position&&n.position==="below"?this.lyricHeightBelow=this.height:this.lyricHeightAbove=this.height;break;case"chord":n.position&&n.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height;break;case"text":this.pitch===void 0?n.position&&n.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height:this.centerVertically=!0;break;case"part":this.partHeightAbove=this.height;break}};return b.prototype.getChordDim=function(){if(this.type==="debug"||!this.chordHeightAbove&&!this.chordHeightBelow)return null;var h=0,d=this.type==="chord"?this.realWidth/2:0,o=this.x-d-h,t=o+this.realWidth+h;return{left:o,right:t}},b.prototype.invertLane=function(h){this.lane===void 0&&(this.lane=0),this.lane=h-this.lane-1},b.prototype.putChordInLane=function(h){this.lane=h,this.chordHeightAbove?this.chordHeightAbove=this.height*1.25*this.lane:this.chordHeightBelow=this.height*1.25*this.lane},b.prototype.getLane=function(){return this.lane===void 0?0:this.lane},b.prototype.setX=function(h){this.x=h+this.dx},Jt=b,Jt}var Zt,fn;function oc(){if(fn)return Zt;fn=1;var b=je(),h=Pe();function d(e){return e!=null&&e.constructor===Object}function o(e,p){for(var x in p)p.hasOwnProperty(x)&&(Array.isArray(p[x])||d(p[x])||(e[x]=p[x]))}function t(e){var p=new b("",0,0,"",0);return o(p,e),p.top=0,p.bottom=-1,e.abcelem&&(p.abcelem={},o(p.abcelem,e.abcelem),p.abcelem.el_type==="note"&&(p.abcelem.el_type="tabNumber")),e.cloned=p,p}function a(e,p){var x=t(e);if(p)for(var w=e.children,_=!0,E=0;E<w.length;E++){var N=w[E],I=new h("",0,0,0,"");o(I,N),_=p.tablature.setRelative(N,I,_),x.children.push(I)}return x}function n(e,p,x){var w="tab.tiny",_=7.5;e.isTabBig&&(w="tab.big",_=10);var E={el_type:"tab",icon:w,Ypos:_};if(_+=e.tabSymbolOffset,!e.hideTabSymbol){var N=new b(E,0,0,"symbol",0);N.x=p;var I=new h(w,0,0,7.5,"tab");I.x=x,N.children.push(I),N.abcelem.el_type=="tab"&&(I.pitch=_)}return N}function l(e){if(e.extra)for(var p=0;p<e.extra.length;p++){var x=e.extra[p];if(x.type=="lyric")return{bottom:x.bottom,height:x.height}}return null}function u(){this.accidentals=null}function m(e){for(var p=0,x=0;x<e.length;x++)e[x].tabNameInfos||p++;return p}function y(e,p,x,w,_){var E=w.num;w.note.quarter!=null&&(E=E.toString(),E+=w.note.quarter);var N=e.semantics.stringToPitch(w.str);x.notes.push({num:E,str:w.str,pitch:w.note.emit()});var I={type:"tabNumber"},R=new h(E,0,0,N+.3,I);return R.x=p,R.isGrace=_,R.isAltered=w.note.isAltered,R}function g(e,p){var x=0;if(e.extra){for(var w=0;w<e.extra.length;w++)if(e.extra[w].c.indexOf("noteheads")>=0){if(x===p)return e.extra[w].x+e.extra[w].w/2;x++}}return-1}function c(e){if(e.abcelem){var p=e.abcelem;if(p.rest)return p.gracenotes}return null}function r(e,p,x){var w=e.semantics.notesToNumber(p,x);if(w.error)return e.setError(w.error),w;if(w.graces&&w.notes){var _=w.notes.length-1;w.notes[_].graces=w.graces}return w}function f(e,p,x,w,_){for(var E=0;E<w.length;E++){var N={el_type:"note",startChar:x.abcelem.startChar,endChar:x.abcelem.endChar,notes:[],grace:!0},I=g(x,E),R=w[E],C=y(e,I,N,R,!0);p.children.push(C),_.push(N)}}return u.prototype.build=function(e,p,x,w,_,E,N){m(p);var I=p[_+w],R=p[N],C=null,B=null;I.children[0].abcelem.el_type!="clef"&&E!="none"&&I.children.splice(0,0,E);for(var q=0;q<I.children.length;q++){var L=I.children[q],D=L.x,P=D;switch(L.isClef&&(R.children.push(n(e,D,P)),L.abcelem.type.indexOf("-8")>=0&&(e.semantics.clefTranspose=-12),L.abcelem.type.indexOf("+8")>=0&&(e.semantics.clefTranspose=12)),L.type){case"staff-extra key-signature":this.accidentals=L.abcelem.accidentals,e.semantics.accidentals=this.accidentals;break;case"bar":e.semantics.measureAccidentals={};var M=!1;q===I.children.length-1&&(M=!0);var A=a(L,e);if(A.abcelem.barNumber){delete A.abcelem.barNumber;for(var F=0;F<A.children.length;F++)if(A.children[F].type==="barNumber"){A.children.splice(F,1);break}}A.abcelem.lastBar=M,R.children.push(A),x.push({el_type:L.abcelem.el_type,type:L.abcelem.type,endChar:L.abcelem.endChar,startChar:L.abcelem.startChar,abselem:A});break;case"rest":var z=c(L);if(z){if(C=r(e,null,z),C.error)return;Y={el_type:"note",startChar:L.abcelem.startChar,endChar:L.abcelem.endChar,notes:[],grace:!0},f(e,H,L,C.graces,x)}break;case"note":var H=t(L);H.x=L.heads[0].x+L.heads[0].w/2,H.lyricDim=l(L);var k=L.abcelem.pitches,T=L.abcelem.gracenotes;if(H.type="tabNumber",C=r(e,k,T),C.error)return;if(C.graces){var S=C.notes.length-1;C.notes[S].graces=C.graces}B={el_type:"note",startChar:L.abcelem.startChar,endChar:L.abcelem.endChar,notes:[]};for(var O=0;O<C.notes.length;O++){var G=C.notes[O];if(G.graces)for(var W=0;W<G.graces.length;W++){var Y={el_type:"note",startChar:L.abcelem.startChar,endChar:L.abcelem.endChar,notes:[],grace:!0},K=g(L,W),ee=G.graces[W],$=y(e,K,Y,ee,!0);H.children.push($),x.push(Y)}var ne=y(e,H.x+L.heads[O].dx,B,G,!1);H.children.push(ne)}B.notes.length>0&&(B.abselem=H,x.push(B),R.children.push(H));break}}},Zt=u,Zt}var e0,hn;function cc(){if(hn)return e0;hn=1;var b=Ys(),h=oc(),d=Ee();function o(){return{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}}function t(e){for(var p=0,x=0;x<e.children.length;x++){var w=e.children[x];w.specialY&&w.specialY.lyricHeightBelow>p&&(p=w.specialY.lyricHeightBelow)}return p}function a(e,p,x){var w=e.semantics,_=p.controller.getTextSize,E=w.tabInfos(e),N=w.suppress(e),I=!0;if(N&&(I=!1),I){var R=_.calc(E,"tablabelfont","text instrumentname");return x.tabNameInfos={textSize:{height:R.height,width:R.width},name:E},R.height}return 0}function n(e,p){return p[e].isTabStaff?e===p.length-1?!0:!p[e+1].isTabStaff:!1}function l(e){for(var p=0,x=0;x<e.length;x++)e[x].isTabStaff||p++;return p}function u(e,p){for(var x=p;x>=0;x--)if(!e[x].isTabStaff)return x;return-1}function m(e){for(var p=0;p<e.length;p++)if(e[p].isTabStaff){var x=u(e,p);e[p].hasStaff=e[x],e[x].hasTab||(e[x].hasTab=[]),e[x].hasTab.push(e[p])}}function y(e,p){return l(e)===1&&p.voices.length>1}function g(e,p){for(var x=0,w=0,_=!0,E=0;_;){if(!p[x])return-1;if(p[x].isTabStaff||(E=p[x].voices.length),p[x].isTabStaff){if(w++,n(x,p)&&w<E)return x+1}else if(w=0,x>=e&&(x+1==p.length||!p[x+1].isTabStaff))return x+1;if(x++,x>p.length)return-1}}function c(e,p){for(var x=p;x>=0;x--)if(!e[x].isTabStaff)return e[x];return null}function r(e,p){var x=e[p],w=x.children[0].abcelem;return w.el_type==="clef"?null:p==0?"none":e[p-1].children[0]}function f(e,p,x,w){var _=new h,E={clef:{type:"TAB"}},N=e.linePitch*e.nbLines,I=x.staff;if(I){var R=I[0];if(R&&R.clef&&R.clef.stafflines==0){e.setError("No tablatures when stafflines=0");return}I.splice(I.length,0,E)}var C=x.staffGroup,B=C.voices,q=B[0],L=t(q),D=3,P=w,M=C.staffs[P],A=N+D-M.bottom-L;M.isTabStaff&&(A=M.top);var F={bottom:-1,isTabStaff:!0,specialY:o(),lines:e.nbLines,linePitch:e.linePitch,dy:.15,top:A},z=g(w,C.staffs);if(z!==-1){F.parentIndex=z-1,C.staffs.splice(z,0,F),C.height+=N+D;var H=c(C.staffs,z),k=1;y(C.staffs,H)&&(k=H.voices.length),E.voices=[];for(var T=0;T<k;T++){var S=new b(0,0);T>0&&(S.duplicate=!0);var O=a(e,p,S)/d.STEP;O=Math.max(O,1),C.staffs[w].top+=1,C.height+=O,S.staff=F;var G=B.length;B.splice(B.length,0,S);var W=r(B,T+w);E.voices[T]=[],_.build(e,B,E.voices[T],T,w,W,G)}m(C.staffs)}}return e0=f,e0}var t0,un;function Vs(){if(un)return t0;un=1;var b={__:-2,_:-1,"_/":-.5,"=":0,"":0,"^/":.5,"^":1,"^^":2},h=["C","-","D","-","E","F","-","G","-","A","-","B","c","-","d","-","e","f","-","g","-","a","-","b"];function d(t){var a=t.match(/([_^\/]*)([ABCDEFGabcdefg])(,*)('*)/);if(a&&a.length===5){var n=b[a[1]],l=h.indexOf(a[2]),u=a[4].length-a[3].length;return 48+l+n+u*12}return 0}function o(t){t=parseInt(t,10);var a=Math.floor(t/12),n=t%12,l=h[n];if(l==="-"&&(l="^"+h[n-1]),a>4)for(l=l.toLowerCase(),a-=5;a>0;)l+="'",a--;else for(;a<4;)l+=",",a++;return l}return t0={noteToMidi:d,midiToNote:o},t0}var r0,dn;function Xs(){if(dn)return r0;dn=1;var{noteToMidi:b,midiToNote:h}=Vs();function d(t,a){var n=b(t);a&&(n+=a);var l=h(n),u=!1,m=!1,y=!1,g=null,c=null,r=!1,f=0;t.startsWith("_")?(u=!0,f=-1,t[1]=="/"?(u=!1,c="v",f=0):t[1]=="_"&&(r=!0,f-=1)):t.startsWith("^")?(m=!0,f=1,t[1]=="/"?(m=!1,c="^",f=0):t[1]=="^"&&(r=!0,f+=1)):t.startsWith("=")&&(g=!0,f=0),y=u||m||c!=null,(y||g)&&(c!=null||r?l=t.slice(2):l=t.slice(1));var e=(l.match(/,/g)||[]).length,p=(l.match(/'/g)||[]).length;this.pitch=n,this.pitchAltered=0,this.name=l,this.acc=f,this.isSharp=m,this.isKeySharp=!1,this.isDouble=r,this.isAltered=y,this.isFlat=u,this.isKeyFlat=!1,this.natural=g,this.quarter=c,this.isLower=this.name==this.name.toLowerCase(),this.name=this.name[0].toUpperCase(),this.hasComma=e,this.isQuoted=p}function o(t){var a=t.name,n=new d(a);return n.pitch=t.pitch,n.hasComma=t.hasComma,n.isLower=t.isLower,n.isQuoted=t.isQuoted,n.isSharp=t.isSharp,n.isKeySharp=t.isKeySharp,n.isFlat=t.isFlat,n.isKeyFlat=t.isKeyFlat,n}return d.prototype.sameNoteAs=function(t){return t.pitch===this.pitch},d.prototype.isLowerThan=function(t){return t.pitch>this.pitch},d.prototype.checkKeyAccidentals=function(t,a){if(!(this.isAltered||this.natural)){if(a[this.name.toUpperCase()])switch(a[this.name.toUpperCase()]){case"__":this.acc=-2,this.pitchAltered=-2;return;case"_":this.acc=-1,this.pitchAltered=-1;return;case"=":this.acc=0,this.pitchAltered=0;return;case"^":this.acc=1,this.pitchAltered=1;return;case"^^":this.acc=2,this.pitchAltered=2;return}else if(t)for(var n=this.name,l=0;l<t.length;l++){var u=t[l];n==u.note.toUpperCase()&&(u.acc=="flat"&&(this.acc=-1,this.isKeyFlat=!0,this.pitchAltered=-1),u.acc=="sharp"&&(this.acc=1,this.isKeySharp=!0,this.pitchAltered=1))}}},d.prototype.getAccidentalEquiv=function(){var t=o(this);return t.isSharp||t.isKeySharp?(t=t.nextNote(),t.isFlat=!0,t.isSharp=!1,t.isKeySharp=!1):(t.isFlat||t.isKeyFlat)&&(t=t.prevNote(),t.isSharp=!0,t.isFlat=!1,t.isKeyFlat=!1),t},d.prototype.nextNote=function(){var t=h(this.pitch+1+this.pitchAltered);return new d(t)},d.prototype.prevNote=function(){var t=h(this.pitch-1+this.pitchAltered);return new d(t)},d.prototype.emitNoAccidentals=function(){var t=this.name;this.isLower&&(t=t.toLowerCase());for(var a=0;a<this.isQuoted;a++)t+="'";for(var n=0;n<this.hasComma;n++)t+=",";return t},d.prototype.emit=function(){var t=this.name;(this.isSharp||this.isKeySharp)&&(t="^"+t,this.isDouble&&(t="^"+t)),(this.isFlat||this.isKeyFlat)&&(t="_"+t,this.isDouble&&(t="_"+t)),this.quarter&&(this.quarter=="^"?t="^/"+t:t="_/"+t),this.natural&&(t="="+t);for(var a=1;a<=this.hasComma;a++)t+=",";if(this.isLower){t=t.toLowerCase();for(var n=1;n<=this.isQuoted;n++)t+="'"}return t},r0=d,r0}var a0,pn;function lc(){if(pn)return a0;pn=1;var b=Xs(),h=["A","B","C","D","E","F","G"];function d(o,t){var a=new b(o),n=new b(t);if(n.isLowerThan(a)){var l=a.emit(),u=n.emit();return{error:"Invalid string Instrument tuning : "+u+" string lower than "+l+" string"}}var m=[],y=h.indexOf(a.name),g=h.indexOf(n.name);if(y==-1||g==-1)return m;for(var c=!1;!c;)m.push(a.emit()),a=a.nextNote(),a.sameNoteAs(n)&&(c=!0);return m}return a0=d,a0}var n0,vn;function fc(){if(vn)return n0;vn=1;const{noteToMidi:b}=Vs();var h=Xs(),d=lc();function o(c){var r=null,f=c.tuning;if(c.capo>0){r=[];for(var e=0;e<f.length;e++){for(var p=new h(f[e]),x=0;x<c.capo;x++)p=p.nextNote();r[e]=p.emit()}}return r}function t(c){var r=[],f=c.tuning;c.capo>0&&(f=c.capoTuning);for(var e=f.length-1,p=0;p<f.length;p++){var x=c.highestNote;p!=f.length-1&&(x=f[p+1]);var w=d(f[p],x);if(w.error)return w;r[e--]=w}return r}function a(c){var r=[];r[0]=[];for(var f=c.strings,e=1;e<f.length;e++)r[e]=f[e-1];return r}function n(c,r){for(var f=0;f<r.length-1;f++){var e=r[f],p=r[f+1];if(e.str==p.str){if(e.str==c.strings.length-1){e.num="?",p.num="?";return}p.num<e.num?(p.str++,p=u(c,p.note,p.str,c.secondPos,c.strings[p.str].length)):(e.str++,e=u(c,e.note,e.str,c.secondPos,c.strings[e.str].length)),r[f]=e,r[f+1]=p}}return null}function l(c,r){for(var f=[],e=0;e<r.length;e++)if(!r[e].endTie){var p=new h(r[e].name,c.clefTranspose);p.checkKeyAccidentals(c.accidentals,c.measureAccidentals);var x=m(c,p);f.push(x)}return n(c,f),f}function u(c,r,f,e,p){var x=c.strings;r.checkKeyAccidentals(c.accidentals,c.measureAccidentals),e&&(x=e);var w=r.emitNoAccidentals(),_=x[f].indexOf(w),E=r.acc;if(_!=-1){if(e&&(_+=p),(r.isFlat||r.acc==-1)&&_==0){var N=r.getAccidentalEquiv();f++,_=x[f].indexOf(N.emit()),E=0}return{num:_+E,str:f,note:r}}return null}function m(c,r){if(r.isAltered||r.natural){var f;r.isFlat?r.isDouble?f="__":f="_":r.isSharp?r.isDouble?f="^^":f="^":r.natural&&(f="="),c.measureAccidentals[r.name.toUpperCase()]=f}for(var e=c.stringPitches.length-1;e>=0;e--)if(r.pitch+r.pitchAltered>=c.stringPitches[e]){var p=r.pitch+r.pitchAltered-c.stringPitches[e];return r.quarter==="^"?p-=.5:r.quarter==="v"&&(p+=.5),{num:Math.round(p),str:c.stringPitches.length-1-e,note:r}}return{num:"?",str:c.stringPitches.length-1,note:r}}g.prototype.stringToPitch=function(c){var r=5.3,f=this.strings.length-1;return r+(f-c)*this.linePitch};function y(c,r){var f={num:"?",str:0,note:r};c.push(f),c.error=r.emit()+": unexpected note for instrument"}g.prototype.notesToNumber=function(c,r){var f,e,p=null,x=null;if(c&&(x=[],c.length>1?(x=l(this,c),x.error&&(p=x.error)):c[0].endTie||(f=new h(c[0].name,this.clefTranspose),f.checkKeyAccidentals(this.accidentals,this.measureAccidentals),e=m(this,f),e?x.push(e):(y(x,f),p=x.error))),p)return x;var w=null;if(r){w=[];for(var _=0;_<r.length;_++)f=new h(r[_].name,this.clefTranspose),f.checkKeyAccidentals(this.accidentals,this.measureAccidentals),e=m(this,f),e?w.push(e):(y(w,f),p=x.error)}return{notes:x,graces:w,error:p}},g.prototype.toString=function(){for(var c=[],r=0;r<this.tuning.length;r++){var f=this.tuning[r].replaceAll(",","").replaceAll("'","").toUpperCase();f[0]==="_"?f=f[1]+"b ":f[0]==="^"&&(f=f[1]+"# "),c.push(f)}return c.join("")},g.prototype.tabInfos=function(c){var r=c.params.label;if(r){var f=r.indexOf("%T"),e="";return f!=-1&&(e=this.toString(),c.capo>0&&(e+=" capo:"+c.capo),r=r.replace("%T",e)),r}return""},g.prototype.suppress=function(c){var r=c.params.suppress;return!!r};function g(c){var r=c.tuning,f=c.capo,e=c.params.highestNote;this.linePitch=c.linePitch,this.highestNote="a'",e&&(this.highestNote=e),this.measureAccidentals={},this.capo=0,f&&(this.capo=parseInt(f,10)),this.transpose=c.transpose?c.transpose:0,this.tuning=r,this.stringPitches=[];for(var p=0;p<this.tuning.length;p++){var x=b(this.tuning[p])+this.capo;this.stringPitches.push(x)}if(this.capo>0&&(this.capoTuning=o(this)),this.strings=t(this),this.strings.error){c.setError(this.strings.error),c.inError=!0;return}this.secondPos=a(this)}return n0=g,n0}var i0,gn;function hc(){if(gn)return i0;gn=1;var b=sc(),h=cc(),d=fc();o.prototype.init=function(a,n,l,u){this.tune=a,this.params=l,this.tuneNumber=n,this.inError=!1,this.abcTune=a,this.linePitch=3,this.nbLines=u.defaultTuning.length,this.isTabBig=u.isTabBig,this.tabSymbolOffset=u.tabSymbolOffset,this.capo=l.capo,this.transpose=l.visualTranspose,this.hideTabSymbol=l.hideTabSymbol,this.tablature=new b(this.nbLines,this.linePitch);var m=l.tuning;m||(m=u.defaultTuning),this.tuning=m,this.semantics=new d(this)},o.prototype.setError=function(a){a&&(this.error=a,this.inError=!0,this.tune.warnings?this.tune.warnings.push(a):this.tune.warnings=[a])},o.prototype.render=function(a,n,l){this.inError||this.tablature.bypass(n)||h(this,a,n,l)};function o(){}var t=function(){return{name:"StringTab",tablature:o}};return i0=t,i0}var s0,bn;function js(){if(bn)return s0;bn=1;var b=hc(),h={violin:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},fiddle:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},mandolin:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},guitar:{name:"StringTab",defaultTuning:["E,","A,","D","G","B","e"],isTabBig:!0,tabSymbolOffset:0},fiveString:{name:"StringTab",defaultTuning:["C,","G,","D","A","e"],isTabBig:!1,tabSymbolOffset:-.95}},d={inited:!1,plugins:{},register:function(o){var t=o.name,a=o.tablature;this.plugins[t]=a},setError:function(o,t){o.warnings?o.warning.push(t):o.warnings=[t]},preparePlugins:function(o,t,a){this.inited||(this.register(new b),this.inited=!0);var n=null;if(a.tablature){var l=a.tablature;n=[];for(var u=0;u<l.length;u++){var m=l[u],y=m.instrument;if(y==null)return this.setError(o,"tablature 'instrument' is missing"),n;var g=h[y],c=null;if(g&&(c=this.plugins[g.name]),c){a.visualTranspose!=0&&(m.visualTranspose=a.visualTranspose),m.abcSrc=a.tablature.abcSrc;var r={classz:c,tuneNumber:t,params:m,instance:null,tabType:g};n.push(r)}else if(y==="")n.push(null);else return this.setError(o,"Undefined tablature plugin: "+y),n}}return n},layoutTablatures:function(t,a){var n=a.tablatures,l=0;if(n&&n.length>0)for(var u=n.length,m=0;m<u;++m)n[m]&&n[m].params.firstStaffOnly&&(n[m].params.suppress=!1);for(var y=0;y<a.lines.length;y++){var g=a.lines[y];if(g.staff&&l++,l>1&&n&&n.length>0)for(var u=n.length,m=0;m<u;++m)n[m].params.firstStaffOnly&&(n[m].params.suppress=!0);var c=g.staff;if(c){for(var r=c.length,f=0;f<c.length;f++)if(n[f]&&f<r){var e=n[f];e.instance==null&&(e.instance=new e.classz,e.instance.init(a,e.tuneNumber,e.params,e.tabType)),e.instance.render(t,g,f)}}}}};return s0=d,s0}var o0,mn;function gt(){if(mn)return o0;mn=1;var b=Gs(),h=ic(),d=js(),o={};return function(){o.numberOfTunes=function(a){var n=a.split(`
X:`),l=n.length;return l===0&&(l=1),l};var t=o.TuneBook=function(a){var n=h(a);this.header=n.header,this.tunes=n.tunes};t.prototype.getTuneById=function(a){for(var n=0;n<this.tunes.length;n++)if(this.tunes[n].id===""+a)return this.tunes[n];return null},t.prototype.getTuneByTitle=function(a){for(var n=0;n<this.tunes.length;n++)if(this.tunes[n].title===a)return this.tunes[n];return null},o.parseOnly=function(a,n){for(var l=o.numberOfTunes(a),u=[],m=0;m<l;m++)u.push(1);function y(){}return o.renderEngine(y,u,a,n)},o.renderEngine=function(a,n,l,u){var m=[],y=function(_){return _&&!_.propertyIsEnumerable("length")&&typeof _=="object"&&typeof _.length=="number"};if(!(n===void 0||l===void 0)){y(n)||(n=[n]),u===void 0&&(u={});for(var g=u.startingTune?parseInt(u.startingTune,10):0,c=new t(l),r=new b,f=0;f<n.length;f++){var e=n[f];if(e==="*"||typeof e=="string"&&(e=document.getElementById(e)),e)if(g>=0&&g<c.tunes.length){r.parse(c.tunes[g].abc,u,c.tunes[g].startPos-c.header.length);var p=r.getTune();u.tablature&&(p.tablatures=d.preparePlugins(p,g,u));var x=r.getWarnings();x&&(p.warnings=x);var w=a(e,p,f,c.tunes[g].abc);m.push(w||p)}else e.innerHTML&&(e.innerHTML="");g++}return m}},o.extractMeasures=function(a){for(var n=[],l=new t(a),u=0;u<l.tunes.length;u++){for(var m=l.tunes[u],y=m.abc.split("K:"),g=y[1].split(`
`),c=y[0]+"K:"+g[0]+`
`,r=null,f=null,e=null,p=[],x=!1,w=o.parseOnly(m.abc)[0],_=w.getPickupLength()>0,E=0;E<w.lines.length;E++){var N=w.lines[E];if(N.staff)for(var I=0;I<1;I++)for(var R=N.staff[I],C=0;C<1;C++)for(var B=R.voices[C],q=0;q<B.length;q++){var L=B[q];if(e===null&&L.startChar>=0&&(e=L.startChar,L.chord===void 0?f=r:f=null),L.chord&&(r=L),L.el_type==="bar"){if(x){var D=m.abc.substring(e,L.endChar),P={abc:D};r=f&&f.chord&&f.chord.length>0?f.chord[0].name:null,r&&(P.lastChord=r),L.startEnding&&(P.startEnding=L.startEnding),L.endEnding&&(P.endEnding=L.endEnding),p.push(P),e=null,x=!1}}else L.el_type==="note"&&(x=!0)}}n.push({header:c,measures:p,hasPickup:_})}return n}}(),o0=o,o0}var c0,yn;function uc(){if(yn)return c0;yn=1;var b=Fs(),{relativeMajor:h,transposeKey:d,relativeMode:o}=Ds(),t=qs(),a;return function(){a=function(B,q,L){if(q==="TEST")return{keyAccidentals:b,relativeMajor:h,transposeKey:d,relativeMode:o,transposeChordName:t};L=parseInt(L,10);var D=[],P;for(P=0;P<q.length;P++)D=D.concat(n(B,q[P],L));D=D.sort(function(F,z){return z.start-F.start});var M=B.split("");for(P=0;P<D.length;P++){var A=D[P];M.splice(A.start,A.end-A.start,A.note)}return M.join("")};function n(B,q,L){var D=[],P=q.getKeySignature();if(P.root==="Hp"||P.root==="HP")return D;D=D.concat(l(B,L));for(var M=0;M<q.lines.length;M++){var A=q.lines[M].staff;if(A)for(var F=0;F<A.length;F++){var z=A[F];z.clef.type!=="perc"&&(D=D.concat(u(B,z.voices,z.key,L)))}}return D}function l(B,q){for(var L=[],D=B.split("K:"),P=D[0].length,M=1;M<D.length;M++){var A=D[M],F=A.match(/^( *)([A-G])([#b]?)(\w*)/);if(F){var z=P+2+F[1].length,H=F[2]+F[3]+F[4],k=f({root:F[2],acc:F[3],mode:F[4]},q),T=k.root+k.acc+k.mode;L.push({start:z,end:z+H.length,note:T})}P+=A.length+2}return L}function u(B,q,L,D){for(var P=[],M=f(L,D),A=0;A<q.length;A++)P=P.concat(g(B,q[A],L.root,m(L),M,D));return P}function m(B){for(var q={},L=0;L<B.accidentals.length;L++){var D=B.accidentals[L];D.acc==="flat"?q[D.note.toUpperCase()]="_":D.acc==="sharp"&&(q[D.note.toUpperCase()]="^")}return q}function y(B,q,L){var D=c.indexOf(B.root)-c.indexOf(q);return q==="none"&&(D=c.indexOf(B.root)),D===0?L>2?D+=7:L===-12&&(D-=7):L>0&&D<0?D+=7:L<0&&D>0&&(D-=7),L>12?D+=7:L<-12&&(D-=7),D}function g(B,q,L,D,P,M){for(var A=[],F=y(P,L,M),z={},H={},k=0;k<q.length;k++){var T=q[k];if(T.chord)for(var S=0;S<T.chord.length;S++){var O=T.chord[S];if(O.position==="default"){var G=P.accidentals.length&&P.accidentals[0].acc==="flat",W=t(O.name,M,G,!0);W=W.replace(/♭/g,"b").replace(/♯/g,"#"),W!==O.name&&A.push(R(B,T.startChar,T.endChar,W))}}if(T.el_type==="note"&&T.pitches){for(var Y=0;Y<T.pitches.length;Y++){var K=E(T.pitches[Y].name,L,D,z);K.acc&&(z[K.name.toUpperCase()]=K.acc);var ee=e(K,P,F,H);ee.acc&&(H[ee.upper]=ee.acc),A.push(N(B,T.startChar,T.endChar,ee.acc+ee.name,Y))}if(T.gracenotes)for(var $=0;$<T.gracenotes.length;$++){var ne=E(T.gracenotes[$].name,L,D,z);ne.acc&&(z[ne.name.toUpperCase()]=ne.acc);var ie=e(ne,P,F,z);ie.acc&&(H[ie.upper]=ie.acc),A.push(I(B,T.startChar,T.endChar,ie.acc+ie.name,$))}}else T.el_type==="bar"?(z={},H={}):T.el_type==="keySignature"&&(L=T.root,D=m(T),P=f(T,M),F=y(P,L,M))}return A}var c="CDEFGAB",r=[",,,,",",,,",",,",",","","'","''","'''","''''"];function f(B,q){if(B.root==="none")return{root:d("C",q),mode:"",acc:"",accidentals:[]};var L=h(B.root+B.acc+B.mode),D=d(L,q),P=o(D,B.mode),M=b(D);return{root:P[0],mode:B.mode,acc:P.length>1?P[1]:"",accidentals:M}}function e(B,q,L,D){for(var P=B.pitch,M=c.indexOf(B.name),A=c.indexOf(q.root),F=(A+P)%7,z=M+L,H=B.oct;z>6;)H++,z-=7;for(;z<0;)H--,z+=7;for(var k=c[F],T="",S=B.adj,O="=",G=0;G<q.accidentals.length;G++)if(q.accidentals[G].note.toLowerCase()===k.toLowerCase()){S=S+(q.accidentals[G].acc==="flat"?-1:1),O=q.accidentals[G].acc==="flat"?"_":"^";break}switch(S){case-2:T="__";break;case-1:T="_";break;case 0:T="=";break;case 1:T="^";break;case 2:T="^^";break;case-3:var W={};return W.pitch=B.pitch-1,W.oct=B.oct,W.name=c[c.indexOf(B.name)-1],W.name||(W.name="B",W.oct--),W.name==="B"||W.name==="E"?W.adj=B.adj+1:W.adj=B.adj+2,e(W,q,L+1,D);case 3:var W={};return W.pitch=B.pitch+1,W.oct=B.oct,W.name=c[c.indexOf(B.name)+1],W.name||(W.name="C",W.oct++),W.name==="C"||W.name==="F"?W.adj=B.adj-1:W.adj=B.adj-2,e(W,q,L+1,D)}switch((D[k]===T||!D[k]&&T===O)&&!B.courtesy&&(T=""),H){case 0:k=k+",,,";break;case 1:k=k+",,";break;case 2:k=k+",";break;case 4:k=k.toLowerCase();break;case 5:k=k.toLowerCase()+"'";break;case 6:k=k.toLowerCase()+"''";break;case 7:k=k.toLowerCase()+"'''";break;case 8:k=k.toLowerCase()+"''''";break}return H>4&&(k=k.toLowerCase()),{acc:T,name:k,upper:k.toUpperCase()}}var p=/([_^=]*)([A-Ga-g])([,']*)/,x=/([_^=]*[A-Ga-g][,']*)(\d*\/*\d*)([\>\<\-\)\.\s\\]*)/,w=/([_^=]*[A-Ga-g][,']*)?(\d*\/*\d*)?([\>\<\-\)]*)?/,_=/(\s*)$/;function E(B,q,L,D){var P=q==="none"?0:c.indexOf(q),M=B.match(p),A=M[2].toUpperCase(),F=c.indexOf(A)-P;F<0&&(F+=7);var z=r.indexOf(M[3]);A===M[2]&&z--;var H=D[A]||L[A]||"=";return{acc:M[1],name:A,pitch:F,oct:z,adj:C(M[1],L[A],D[A]),courtesy:M[1]===H}}function N(B,q,L,D,P){var M=B.substring(q,L),A=M.match(new RegExp(x.source+_.source),"");if(A){var F=A[1].length,z=A[2].length+A[3].length+A[4].length,H=L-q-F-z;q+=H,L-=z}else{var k=/([^\[]*)/,T=/\[/,S=/\-?](\d*\/*\d*)?([\>\<\-\)]*)/;if(A=M.match(new RegExp(k.source+T.source+w.source+w.source+w.source+w.source+w.source+w.source+w.source+w.source+S.source+_.source)),A){for(var O=1+A[1].length,G=0;G<P;G++)A[G*3+2]&&(O+=A[G*3+2].length),A[G*3+3]&&(O+=A[G*3+3].length),A[G*3+4]&&(O+=A[G*3+4].length);q+=O;var W=A[P*3+2]?A[P*3+2].length:0;L=q+W}}return{start:q,end:L,note:D}}function I(B,q,L,D,P){var M=B.substring(q,L),A=/\{/,F=/\}/,z=/([^\{]*)/,H=/(\/*)/,k=M.match(new RegExp(z.source+A.source+H.source+w.source+H.source+w.source+H.source+w.source+H.source+w.source+H.source+w.source+H.source+w.source+H.source+w.source+H.source+w.source+F.source));if(k){for(var T=1+k[1].length,S=0;S<P;S++)k[S*3+2]&&(T+=k[S*3+2].length),k[S*3+3]&&(T+=k[S*3+3].length),k[S*3+4]&&(T+=k[S*3+4].length),k[S*3+5]&&(T+=k[S*3+5].length);k[P*3+2]&&(T+=k[S*3+2].length),q+=T;var O=k[P*3+3]?k[P*3+3].length:0;O+=k[P*3+4]?k[P*3+4].length:0,O+=k[P*3+5]?k[P*3+5].length:0,L=q+O}return{start:q,end:L,note:D}}function R(B,q,L,D){var P=B.substring(q,L).match(/([^"]+)?(".+")+/);return P[1]&&(q+=P[1].length),L=q+P[2].length,{start:q+1,end:L-1,note:D}}function C(B,q,L){if(!B&&L&&(B=L),!B)return 0;switch(q){case void 0:switch(B){case"__":return-2;case"_":return-1;case"=":return 0;case"^":return 1;case"^^":return 2;default:return 0}case"_":switch(B){case"__":return-1;case"_":return 0;case"=":return 1;case"^":return 2;case"^^":return 3;default:return 0}case"^":switch(B){case"__":return-3;case"_":return-2;case"=":return-1;case"^":return 0;case"^^":return 1;default:return 0}}return 0}}(),c0=a,c0}var l0,wn;function dc(){if(wn)return l0;wn=1;var b=function(o,t,a,n){this.type="BeamElem",this.isflat=!!a,this.isgrace=!!(t&&t==="grace"),this.forceup=!!(this.isgrace||t&&t==="up"),this.forcedown=!!(t&&t==="down"),this.elems=[],this.total=0,this.average=6,this.allrests=!0,this.stemHeight=o,this.beams=[],n&&n.duration?(this.duration=n.duration,n.startTriplet&&(this.duration*=n.tripletMultiplier),this.duration=Math.round(this.duration*1e3)/1e3):this.duration=0};b.prototype.setHint=function(){this.hint=!0},b.prototype.runningDirection=function(d){var o=d.averagepitch;o!==void 0&&(this.total=Math.round(this.total+o),this.count||(this.count=0),this.count++)},b.prototype.add=function(d){var o=d.abcelem.averagepitch;o!==void 0&&(d.abcelem.rest||(this.allrests=!1),d.beam=this,this.elems.push(d),this.total=Math.round(this.total+o),(this.min===void 0||d.abcelem.minpitch<this.min)&&(this.min=d.abcelem.minpitch),(this.max===void 0||d.abcelem.maxpitch>this.max)&&(this.max=d.abcelem.maxpitch))},b.prototype.addBeam=function(d){this.beams.push(d)},b.prototype.setStemDirection=function(){if(this.average=h(this.total,this.count),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var d=6;this.stemsUp=this.average<d}delete this.count,this.total=0},b.prototype.calcDir=function(){if(this.average=h(this.total,this.elems.length),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var d=6;this.stemsUp=this.average<d}for(var o=this.stemsUp?"up":"down",t=0;t<this.elems.length;t++)for(var a=0;a<this.elems[t].heads.length;a++)this.elems[t].heads[a].stemDir=o};function h(d,o){return o?d/o:0}return l0=b,l0}var f0,xn;function pc(){if(xn)return f0;xn=1;var b=function(d,o){this.startVoice=d,this.type=o};return b.prototype.setBottomStaff=function(h){this.endVoice=h,this.startVoice.header&&!this.endVoice.header&&(this.header=this.startVoice.header,delete this.startVoice.header)},b.prototype.continuing=function(h){this.lastContinuedVoice=h},b.prototype.getWidth=function(){return 10},b.prototype.isStartVoice=function(h){return!!(this.startVoice&&this.startVoice.staff&&this.startVoice.staff.voices.length>0&&this.startVoice.staff.voices[0]===h)},f0=b,f0}var h0,Cn;function Ge(){if(Cn)return h0;Cn=1;var b=Ee(),h={0:{d:[["M",4.83,-14.97],["c",.33,-.03,1.11,0,1.47,.06],["c",1.68,.36,2.97,1.59,3.78,3.6],["c",1.2,2.97,.81,6.96,-.9,9.27],["c",-.78,1.08,-1.71,1.71,-2.91,1.95],["c",-.45,.09,-1.32,.09,-1.77,0],["c",-.81,-.18,-1.47,-.51,-2.07,-1.02],["c",-2.34,-2.07,-3.15,-6.72,-1.74,-10.2],["c",.87,-2.16,2.28,-3.42,4.14,-3.66],["z"],["m",1.11,.87],["c",-.21,-.06,-.69,-.09,-.87,-.06],["c",-.54,.12,-.87,.42,-1.17,.99],["c",-.36,.66,-.51,1.56,-.6,3],["c",-.03,.75,-.03,4.59,0,5.31],["c",.09,1.5,.27,2.4,.6,3.06],["c",.24,.48,.57,.78,.96,.9],["c",.27,.09,.78,.09,1.05,0],["c",.39,-.12,.72,-.42,.96,-.9],["c",.33,-.66,.51,-1.56,.6,-3.06],["c",.03,-.72,.03,-4.56,0,-5.31],["c",-.09,-1.47,-.27,-2.37,-.6,-3.03],["c",-.24,-.48,-.54,-.78,-.93,-.9],["z"]],w:10.78,h:14.959},1:{d:[["M",3.3,-15.06],["c",.06,-.06,.21,-.03,.66,.15],["c",.81,.39,1.08,.39,1.83,.03],["c",.21,-.09,.39,-.15,.42,-.15],["c",.12,0,.21,.09,.27,.21],["c",.06,.12,.06,.33,.06,5.94],["c",0,3.93,0,5.85,.03,6.03],["c",.06,.36,.15,.69,.27,.96],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.12,-.27,.21,-.6,.27,-.96],["c",.03,-.18,.03,-1.59,.03,-4.29],["c",0,-3.87,0,-4.05,-.06,-4.14],["c",-.09,-.15,-.18,-.24,-.39,-.24],["c",-.12,0,-.15,.03,-.21,.06],["c",-.03,.06,-.45,.99,-.96,2.13],["c",-.48,1.14,-.9,2.1,-.93,2.16],["c",-.06,.15,-.21,.24,-.33,.24],["c",-.24,0,-.42,-.18,-.42,-.39],["c",0,-.06,3.27,-7.62,3.33,-7.74],["z"]],w:8.94,h:15.058},2:{d:[["M",4.23,-14.97],["c",.57,-.06,1.68,0,2.34,.18],["c",.69,.18,1.5,.54,2.01,.9],["c",1.35,.96,1.95,2.25,1.77,3.81],["c",-.15,1.35,-.66,2.34,-1.68,3.15],["c",-.6,.48,-1.44,.93,-3.12,1.65],["c",-1.32,.57,-1.8,.81,-2.37,1.14],["c",-.57,.33,-.57,.33,-.24,.27],["c",.39,-.09,1.26,-.09,1.68,0],["c",.72,.15,1.41,.45,2.1,.9],["c",.99,.63,1.86,.87,2.55,.75],["c",.24,-.06,.42,-.15,.57,-.3],["c",.12,-.09,.3,-.42,.3,-.51],["c",0,-.09,.12,-.21,.24,-.24],["c",.18,-.03,.39,.12,.39,.3],["c",0,.12,-.15,.57,-.3,.87],["c",-.54,1.02,-1.56,1.74,-2.79,2.01],["c",-.42,.09,-1.23,.09,-1.62,.03],["c",-.81,-.18,-1.32,-.45,-2.01,-1.11],["c",-.45,-.45,-.63,-.57,-.96,-.69],["c",-.84,-.27,-1.89,.12,-2.25,.9],["c",-.12,.21,-.21,.54,-.21,.72],["c",0,.12,-.12,.21,-.27,.24],["c",-.15,0,-.27,-.03,-.33,-.15],["c",-.09,-.21,.09,-1.08,.33,-1.71],["c",.24,-.66,.66,-1.26,1.29,-1.89],["c",.45,-.45,.9,-.81,1.92,-1.56],["c",1.29,-.93,1.89,-1.44,2.34,-1.98],["c",.87,-1.05,1.26,-2.19,1.2,-3.63],["c",-.06,-1.29,-.39,-2.31,-.96,-2.91],["c",-.36,-.33,-.72,-.51,-1.17,-.54],["c",-.84,-.03,-1.53,.42,-1.59,1.05],["c",-.03,.33,.12,.6,.57,1.14],["c",.45,.54,.54,.87,.42,1.41],["c",-.15,.63,-.54,1.11,-1.08,1.38],["c",-.63,.33,-1.2,.33,-1.83,0],["c",-.24,-.12,-.33,-.18,-.54,-.39],["c",-.18,-.18,-.27,-.3,-.36,-.51],["c",-.24,-.45,-.27,-.84,-.21,-1.38],["c",.12,-.75,.45,-1.41,1.02,-1.98],["c",.72,-.72,1.74,-1.17,2.85,-1.32],["z"]],w:10.764,h:14.97},3:{d:[["M",3.78,-14.97],["c",.3,-.03,1.41,0,1.83,.06],["c",2.22,.3,3.51,1.32,3.72,2.91],["c",.03,.33,.03,1.26,-.03,1.65],["c",-.12,.84,-.48,1.47,-1.05,1.77],["c",-.27,.15,-.36,.24,-.45,.39],["c",-.09,.21,-.09,.36,0,.57],["c",.09,.15,.18,.24,.51,.39],["c",.75,.42,1.23,1.14,1.41,2.13],["c",.06,.42,.06,1.35,0,1.71],["c",-.18,.81,-.48,1.38,-1.02,1.95],["c",-.75,.72,-1.8,1.2,-3.18,1.38],["c",-.42,.06,-1.56,.06,-1.95,0],["c",-1.89,-.33,-3.18,-1.29,-3.51,-2.64],["c",-.03,-.12,-.03,-.33,-.03,-.6],["c",0,-.36,0,-.42,.06,-.63],["c",.12,-.3,.27,-.51,.51,-.75],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.51,.36,-.63,.54,-.6,.87],["c",.06,.54,.54,.9,1.38,.99],["c",.36,.06,.72,.03,.96,-.06],["c",.81,-.27,1.29,-1.23,1.44,-2.79],["c",.03,-.45,.03,-1.95,-.03,-2.37],["c",-.09,-.75,-.33,-1.23,-.75,-1.44],["c",-.33,-.18,-.45,-.18,-1.98,-.18],["c",-1.35,0,-1.41,0,-1.5,-.06],["c",-.18,-.12,-.24,-.39,-.12,-.6],["c",.12,-.15,.15,-.15,1.68,-.15],["c",1.5,0,1.62,0,1.89,-.15],["c",.18,-.09,.42,-.36,.54,-.57],["c",.18,-.42,.27,-.9,.3,-1.95],["c",.03,-1.2,-.06,-1.8,-.36,-2.37],["c",-.24,-.48,-.63,-.81,-1.14,-.96],["c",-.3,-.06,-1.08,-.06,-1.38,.03],["c",-.6,.15,-.9,.42,-.96,.84],["c",-.03,.3,.06,.45,.63,.84],["c",.33,.24,.42,.39,.45,.63],["c",.03,.72,-.57,1.5,-1.32,1.65],["c",-1.05,.27,-2.1,-.57,-2.1,-1.65],["c",0,-.45,.15,-.96,.39,-1.38],["c",.12,-.21,.54,-.63,.81,-.81],["c",.57,-.42,1.38,-.69,2.25,-.81],["z"]],w:9.735,h:14.967},4:{d:[["M",8.64,-14.94],["c",.27,-.09,.42,-.12,.54,-.03],["c",.09,.06,.15,.21,.15,.3],["c",-.03,.06,-1.92,2.31,-4.23,5.04],["c",-2.31,2.73,-4.23,4.98,-4.26,5.01],["c",-.03,.06,.12,.06,2.55,.06],["l",2.61,0],["l",0,-2.37],["c",0,-2.19,.03,-2.37,.06,-2.46],["c",.03,-.06,.21,-.18,.57,-.42],["c",1.08,-.72,1.38,-1.08,1.86,-2.16],["c",.12,-.3,.24,-.54,.27,-.57],["c",.12,-.12,.39,-.06,.45,.12],["c",.06,.09,.06,.57,.06,3.96],["l",0,3.9],["l",1.08,0],["c",1.05,0,1.11,0,1.2,.06],["c",.24,.15,.24,.54,0,.69],["c",-.09,.06,-.15,.06,-1.2,.06],["l",-1.08,0],["l",0,.33],["c",0,.57,.09,1.11,.3,1.53],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.21,-.42,.3,-.96,.3,-1.53],["l",0,-.33],["l",-2.7,0],["c",-2.91,0,-2.85,0,-3.09,-.15],["c",-.18,-.12,-.3,-.39,-.27,-.54],["c",.03,-.06,.18,-.24,.33,-.45],["c",.75,-.9,1.59,-2.07,2.13,-3.03],["c",.33,-.54,.84,-1.62,1.05,-2.16],["c",.57,-1.41,.84,-2.64,.9,-4.05],["c",.03,-.63,.06,-.72,.24,-.81],["l",.12,-.06],["l",.45,.12],["c",.66,.18,1.02,.24,1.47,.27],["c",.6,.03,1.23,-.09,2.01,-.33],["z"]],w:11.795,h:14.994},5:{d:[["M",1.02,-14.94],["c",.12,-.09,.03,-.09,1.08,.06],["c",2.49,.36,4.35,.36,6.96,-.06],["c",.57,-.09,.66,-.06,.81,.06],["c",.15,.18,.12,.24,-.15,.51],["c",-1.29,1.26,-3.24,2.04,-5.58,2.31],["c",-.6,.09,-1.2,.12,-1.71,.12],["c",-.39,0,-.45,0,-.57,.06],["c",-.09,.06,-.15,.12,-.21,.21],["l",-.06,.12],["l",0,1.65],["l",0,1.65],["l",.21,-.21],["c",.66,-.57,1.41,-.96,2.19,-1.14],["c",.33,-.06,1.41,-.06,1.95,0],["c",2.61,.36,4.02,1.74,4.26,4.14],["c",.03,.45,.03,1.08,-.03,1.44],["c",-.18,1.02,-.78,2.01,-1.59,2.7],["c",-.72,.57,-1.62,1.02,-2.49,1.2],["c",-1.38,.27,-3.03,.06,-4.2,-.54],["c",-1.08,-.54,-1.71,-1.32,-1.86,-2.28],["c",-.09,-.69,.09,-1.29,.57,-1.74],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.18,.12,-.36,.3,-.42,.33],["c",-.36,.42,-.18,.99,.36,1.26],["c",.51,.27,1.47,.36,2.01,.27],["c",.93,-.21,1.47,-1.17,1.65,-2.91],["c",.06,-.45,.06,-1.89,0,-2.31],["c",-.15,-1.2,-.51,-2.1,-1.05,-2.55],["c",-.21,-.18,-.54,-.36,-.81,-.39],["c",-.3,-.06,-.84,-.03,-1.26,.06],["c",-.93,.18,-1.65,.6,-2.16,1.2],["c",-.15,.21,-.27,.3,-.39,.3],["c",-.15,0,-.3,-.09,-.36,-.18],["c",-.06,-.09,-.06,-.15,-.06,-3.66],["c",0,-3.39,0,-3.57,.06,-3.66],["c",.03,-.06,.09,-.15,.15,-.18],["z"]],w:10.212,h:14.997},6:{d:[["M",4.98,-14.97],["c",.36,-.03,1.2,0,1.59,.06],["c",.9,.15,1.68,.51,2.25,1.05],["c",.57,.51,.87,1.23,.84,1.98],["c",-.03,.51,-.21,.9,-.6,1.26],["c",-.24,.24,-.45,.39,-.75,.51],["c",-.21,.06,-.27,.06,-.6,.06],["c",-.33,0,-.39,0,-.6,-.06],["c",-.3,-.12,-.51,-.27,-.75,-.51],["c",-.39,-.36,-.57,-.78,-.57,-1.26],["c",0,-.27,0,-.3,.09,-.42],["c",.03,-.09,.18,-.21,.3,-.3],["c",.12,-.09,.3,-.21,.39,-.27],["c",.09,-.06,.21,-.18,.27,-.24],["c",.06,-.12,.09,-.15,.09,-.33],["c",0,-.18,-.03,-.24,-.09,-.36],["c",-.24,-.39,-.75,-.6,-1.38,-.57],["c",-.54,.03,-.9,.18,-1.23,.48],["c",-.81,.72,-1.08,2.16,-.96,5.37],["l",0,.63],["l",.3,-.12],["c",.78,-.27,1.29,-.33,2.1,-.27],["c",1.47,.12,2.49,.54,3.27,1.29],["c",.48,.51,.81,1.11,.96,1.89],["c",.06,.27,.06,.42,.06,.93],["c",0,.54,0,.69,-.06,.96],["c",-.15,.78,-.48,1.38,-.96,1.89],["c",-.54,.51,-1.17,.87,-1.98,1.08],["c",-1.14,.3,-2.4,.33,-3.24,.03],["c",-1.5,-.48,-2.64,-1.89,-3.27,-4.02],["c",-.36,-1.23,-.51,-2.82,-.42,-4.08],["c",.3,-3.66,2.28,-6.3,4.95,-6.66],["z"],["m",.66,7.41],["c",-.27,-.09,-.81,-.12,-1.08,-.06],["c",-.72,.18,-1.08,.69,-1.23,1.71],["c",-.06,.54,-.06,3,0,3.54],["c",.18,1.26,.72,1.77,1.8,1.74],["c",.39,-.03,.63,-.09,.9,-.27],["c",.66,-.42,.9,-1.32,.9,-3.24],["c",0,-2.22,-.36,-3.12,-1.29,-3.42],["z"]],w:9.956,h:14.982},7:{d:[["M",.21,-14.97],["c",.21,-.06,.45,0,.54,.15],["c",.06,.09,.06,.15,.06,.39],["c",0,.24,0,.33,.06,.42],["c",.06,.12,.21,.24,.27,.24],["c",.03,0,.12,-.12,.24,-.21],["c",.96,-1.2,2.58,-1.35,3.99,-.42],["c",.15,.12,.42,.3,.54,.45],["c",.48,.39,.81,.57,1.29,.6],["c",.69,.03,1.5,-.3,2.13,-.87],["c",.09,-.09,.27,-.3,.39,-.45],["c",.12,-.15,.24,-.27,.3,-.3],["c",.18,-.06,.39,.03,.51,.21],["c",.06,.18,.06,.24,-.27,.72],["c",-.18,.24,-.54,.78,-.78,1.17],["c",-2.37,3.54,-3.54,6.27,-3.87,9],["c",-.03,.33,-.03,.66,-.03,1.26],["c",0,.9,0,1.08,.15,1.89],["c",.06,.45,.06,.48,.03,.6],["c",-.06,.09,-.21,.21,-.3,.21],["c",-.03,0,-.27,-.06,-.54,-.15],["c",-.84,-.27,-1.11,-.3,-1.65,-.3],["c",-.57,0,-.84,.03,-1.56,.27],["c",-.6,.18,-.69,.21,-.81,.15],["c",-.12,-.06,-.21,-.18,-.21,-.3],["c",0,-.15,.6,-1.44,1.2,-2.61],["c",1.14,-2.22,2.73,-4.68,5.1,-8.01],["c",.21,-.27,.36,-.48,.33,-.48],["c",0,0,-.12,.06,-.27,.12],["c",-.54,.3,-.99,.39,-1.56,.39],["c",-.75,.03,-1.2,-.18,-1.83,-.75],["c",-.99,-.9,-1.83,-1.17,-2.31,-.72],["c",-.18,.15,-.36,.51,-.45,.84],["c",-.06,.24,-.06,.33,-.09,1.98],["c",0,1.62,-.03,1.74,-.06,1.8],["c",-.15,.24,-.54,.24,-.69,0],["c",-.06,-.09,-.06,-.15,-.06,-3.57],["c",0,-3.42,0,-3.48,.06,-3.57],["c",.03,-.06,.09,-.12,.15,-.15],["z"]],w:10.561,h:15.093},8:{d:[["M",4.98,-14.97],["c",.33,-.03,1.02,-.03,1.32,0],["c",1.32,.12,2.49,.6,3.21,1.32],["c",.39,.39,.66,.81,.78,1.29],["c",.09,.36,.09,1.08,0,1.44],["c",-.21,.84,-.66,1.59,-1.59,2.55],["l",-.3,.3],["l",.27,.18],["c",1.47,.93,2.31,2.31,2.25,3.75],["c",-.03,.75,-.24,1.35,-.63,1.95],["c",-.45,.66,-1.02,1.14,-1.83,1.53],["c",-1.8,.87,-4.2,.87,-6,.03],["c",-1.62,-.78,-2.52,-2.16,-2.46,-3.66],["c",.06,-.99,.54,-1.77,1.8,-2.97],["c",.54,-.51,.54,-.54,.48,-.57],["c",-.39,-.27,-.96,-.78,-1.2,-1.14],["c",-.75,-1.11,-.87,-2.4,-.3,-3.6],["c",.69,-1.35,2.25,-2.25,4.2,-2.4],["z"],["m",1.53,.69],["c",-.42,-.09,-1.11,-.12,-1.38,-.06],["c",-.3,.06,-.6,.18,-.81,.3],["c",-.21,.12,-.6,.51,-.72,.72],["c",-.51,.87,-.42,1.89,.21,2.52],["c",.21,.21,.36,.3,1.95,1.23],["c",.96,.54,1.74,.99,1.77,1.02],["c",.09,0,.63,-.6,.99,-1.11],["c",.21,-.36,.48,-.87,.57,-1.23],["c",.06,-.24,.06,-.36,.06,-.72],["c",0,-.45,-.03,-.66,-.15,-.99],["c",-.39,-.81,-1.29,-1.44,-2.49,-1.68],["z"],["m",-1.44,8.07],["l",-1.89,-1.08],["c",-.03,0,-.18,.15,-.39,.33],["c",-1.2,1.08,-1.65,1.95,-1.59,3],["c",.09,1.59,1.35,2.85,3.21,3.24],["c",.33,.06,.45,.06,.93,.06],["c",.63,0,.81,-.03,1.29,-.27],["c",.9,-.42,1.47,-1.41,1.41,-2.4],["c",-.06,-.66,-.39,-1.29,-.9,-1.65],["c",-.12,-.09,-1.05,-.63,-2.07,-1.23],["z"]],w:10.926,h:14.989},9:{d:[["M",4.23,-14.97],["c",.42,-.03,1.29,0,1.62,.06],["c",.51,.12,.93,.3,1.38,.57],["c",1.53,1.02,2.52,3.24,2.73,5.94],["c",.18,2.55,-.48,4.98,-1.83,6.57],["c",-1.05,1.26,-2.4,1.89,-3.93,1.83],["c",-1.23,-.06,-2.31,-.45,-3.03,-1.14],["c",-.57,-.51,-.87,-1.23,-.84,-1.98],["c",.03,-.51,.21,-.9,.6,-1.26],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.39,.36,.57,.78,.57,1.26],["c",0,.27,0,.3,-.09,.42],["c",-.03,.09,-.18,.21,-.3,.3],["c",-.12,.09,-.3,.21,-.39,.27],["c",-.09,.06,-.21,.18,-.27,.24],["c",-.06,.12,-.06,.15,-.06,.33],["c",0,.18,0,.24,.06,.36],["c",.24,.39,.75,.6,1.38,.57],["c",.54,-.03,.9,-.18,1.23,-.48],["c",.81,-.72,1.08,-2.16,.96,-5.37],["l",0,-.63],["l",-.3,.12],["c",-.78,.27,-1.29,.33,-2.1,.27],["c",-1.47,-.12,-2.49,-.54,-3.27,-1.29],["c",-.48,-.51,-.81,-1.11,-.96,-1.89],["c",-.06,-.27,-.06,-.42,-.06,-.96],["c",0,-.51,0,-.66,.06,-.93],["c",.15,-.78,.48,-1.38,.96,-1.89],["c",.15,-.12,.33,-.27,.42,-.36],["c",.69,-.51,1.62,-.81,2.76,-.93],["z"],["m",1.17,.66],["c",-.21,-.06,-.57,-.06,-.81,-.03],["c",-.78,.12,-1.26,.69,-1.41,1.74],["c",-.12,.63,-.15,1.95,-.09,2.79],["c",.12,1.71,.63,2.4,1.77,2.46],["c",1.08,.03,1.62,-.48,1.8,-1.74],["c",.06,-.54,.06,-3,0,-3.54],["c",-.15,-1.05,-.51,-1.53,-1.26,-1.68],["z"]],w:9.959,h:14.986},"rests.multimeasure":{d:[["M",0,-4],["l",0,16],["l",1,0],["l",0,-5],["l",40,0],["l",0,5],["l",1,0],["l",0,-16],["l",-1,0],["l",0,5],["l",-40,0],["l",0,-5],["z"]],w:42,h:18},"rests.whole":{d:[["M",.06,.03],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.half":{d:[["M",.06,-4.62],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.quarter":{d:[["M",1.89,-11.82],["c",.12,-.06,.24,-.06,.36,-.03],["c",.09,.06,4.74,5.58,4.86,5.82],["c",.21,.39,.15,.78,-.15,1.26],["c",-.24,.33,-.72,.81,-1.62,1.56],["c",-.45,.36,-.87,.75,-.96,.84],["c",-.93,.99,-1.14,2.49,-.6,3.63],["c",.18,.39,.27,.48,1.32,1.68],["c",1.92,2.25,1.83,2.16,1.83,2.34],["c",0,.18,-.18,.36,-.36,.39],["c",-.15,0,-.27,-.06,-.48,-.27],["c",-.75,-.75,-2.46,-1.29,-3.39,-1.08],["c",-.45,.09,-.69,.27,-.9,.69],["c",-.12,.3,-.21,.66,-.24,1.14],["c",-.03,.66,.09,1.35,.3,2.01],["c",.15,.42,.24,.66,.45,.96],["c",.18,.24,.18,.33,.03,.42],["c",-.12,.06,-.18,.03,-.45,-.3],["c",-1.08,-1.38,-2.07,-3.36,-2.4,-4.83],["c",-.27,-1.05,-.15,-1.77,.27,-2.07],["c",.21,-.12,.42,-.15,.87,-.15],["c",.87,.06,2.1,.39,3.3,.9],["l",.39,.18],["l",-1.65,-1.95],["c",-2.52,-2.97,-2.61,-3.09,-2.7,-3.27],["c",-.09,-.24,-.12,-.48,-.03,-.75],["c",.15,-.48,.57,-.96,1.83,-2.01],["c",.45,-.36,.84,-.72,.93,-.78],["c",.69,-.75,1.02,-1.8,.9,-2.79],["c",-.06,-.33,-.21,-.84,-.39,-1.11],["c",-.09,-.15,-.45,-.6,-.81,-1.05],["c",-.36,-.42,-.69,-.81,-.72,-.87],["c",-.09,-.18,0,-.42,.21,-.51],["z"]],w:7.888,h:21.435},"rests.8th":{d:[["M",1.68,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.33,-.09],["c",.39,-.18,1.32,-1.29,1.68,-1.98],["c",.09,-.21,.24,-.3,.39,-.3],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.27,1.11,-1.86,6.42],["c",-1.02,3.48,-1.89,6.39,-1.92,6.42],["c",0,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.15,-.57,1.68,-4.92],["c",.96,-2.67,1.74,-4.89,1.71,-4.89],["l",-.51,.15],["c",-1.08,.36,-1.74,.48,-2.55,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:7.534,h:13.883},"rests.16th":{d:[["M",3.33,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.87,.42],["c",.39,-.18,1.2,-1.23,1.62,-2.07],["c",.06,-.15,.24,-.24,.36,-.24],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.45,1.86,-2.67,10.17],["c",-1.5,5.55,-2.73,10.14,-2.76,10.17],["c",-.03,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.12,-.57,1.44,-4.92],["c",.81,-2.67,1.47,-4.86,1.47,-4.89],["c",-.03,0,-.27,.06,-.54,.15],["c",-1.08,.36,-1.77,.48,-2.58,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.12,0,.18,0,.33,-.09],["c",.33,-.15,1.02,-.93,1.41,-1.59],["c",.12,-.21,.18,-.39,.39,-1.08],["c",.66,-2.1,1.17,-3.84,1.17,-3.87],["c",0,0,-.21,.06,-.42,.15],["c",-.51,.15,-1.2,.33,-1.68,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:9.724,h:21.383},"rests.32nd":{d:[["M",4.23,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.27,-.06],["c",.33,-.21,.99,-1.11,1.44,-1.98],["c",.09,-.24,.21,-.33,.39,-.33],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.57,2.67,-3.21,13.89],["c",-1.8,7.62,-3.3,13.89,-3.3,13.92],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.09,-.57,1.23,-4.92],["c",.69,-2.67,1.26,-4.86,1.29,-4.89],["c",0,-.03,-.12,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.12,.09,.3,.18,.48,.21],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.29,-1.29,1.56,-1.89],["c",.03,-.12,1.23,-4.59,1.23,-4.65],["c",0,-.03,-.18,.03,-.39,.12],["c",-.63,.18,-1.2,.36,-1.74,.45],["c",-.39,.06,-.54,.06,-1.02,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.18,.18,.51,.27,.72,.15],["c",.3,-.12,.69,-.57,1.08,-1.17],["c",.42,-.6,.39,-.51,1.05,-3.03],["c",.33,-1.26,.6,-2.31,.6,-2.34],["c",0,0,-.21,.03,-.45,.12],["c",-.57,.18,-1.14,.33,-1.62,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:11.373,h:28.883},"rests.64th":{d:[["M",5.13,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.54,.3,.75,.18],["c",.24,-.12,.63,-.66,1.08,-1.56],["c",.33,-.66,.39,-.72,.6,-.72],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.69,3.66,-3.54,17.64],["c",-1.95,9.66,-3.57,17.61,-3.57,17.64],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.06,-.57,1.05,-4.95],["c",.6,-2.7,1.08,-4.89,1.08,-4.92],["c",0,0,-.24,.06,-.51,.15],["c",-.66,.24,-1.2,.36,-1.77,.48],["c",-.42,.06,-.57,.06,-1.05,.06],["c",-.69,0,-.87,-.03,-1.35,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.21,.03,.39,-.09,.72,-.42],["c",.45,-.45,1.02,-1.26,1.17,-1.65],["c",.03,-.09,.27,-1.14,.54,-2.34],["c",.27,-1.2,.48,-2.19,.51,-2.22],["c",0,-.03,-.09,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.9,.42],["c",.36,-.18,1.2,-1.26,1.47,-1.89],["c",.03,-.09,.3,-1.2,.57,-2.43],["l",.51,-2.28],["l",-.54,.18],["c",-1.11,.36,-1.8,.48,-2.61,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.21,.21,.54,.3,.75,.18],["c",.36,-.18,.93,-.93,1.29,-1.68],["c",.12,-.24,.18,-.48,.63,-2.55],["l",.51,-2.31],["c",0,-.03,-.18,.03,-.39,.12],["c",-1.14,.36,-2.1,.54,-2.82,.51],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.453,h:36.383},"rests.128th":{d:[["M",6.03,-21.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.21,0,.33,-.06,.54,-.36],["c",.15,-.21,.54,-.93,.78,-1.47],["c",.15,-.33,.18,-.39,.3,-.48],["c",.18,-.09,.45,0,.51,.15],["c",.03,.09,-7.11,42.75,-7.17,42.84],["c",-.03,.03,-.15,.09,-.24,.15],["c",-.18,.06,-.24,.06,-.45,.06],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.03,-.57,.84,-4.98],["c",.51,-2.7,.93,-4.92,.9,-4.92],["c",0,0,-.15,.06,-.36,.12],["c",-.78,.27,-1.62,.48,-2.31,.57],["c",-.15,.03,-.54,.03,-.81,.03],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.63,.48],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.14,-1.11,1.5,-1.83],["c",.12,-.27,.12,-.27,.54,-2.52],["c",.24,-1.23,.42,-2.25,.39,-2.25],["c",0,0,-.24,.06,-.51,.18],["c",-1.26,.39,-2.25,.57,-3.06,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.51,.3,.75,.18],["c",.36,-.15,1.05,-.99,1.41,-1.77],["l",.15,-.3],["l",.42,-2.25],["c",.21,-1.26,.42,-2.28,.39,-2.28],["l",-.51,.15],["c",-1.11,.39,-1.89,.51,-2.7,.51],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.18,.48,.27,.72,.21],["c",.33,-.12,1.14,-1.26,1.41,-1.95],["c",0,-.09,.21,-1.11,.45,-2.34],["c",.21,-1.2,.39,-2.22,.39,-2.28],["c",.03,-.03,0,-.03,-.45,.12],["c",-.57,.18,-1.2,.33,-1.71,.42],["c",-.3,.06,-.51,.06,-.93,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.18,0,.36,-.09,.57,-.33],["c",.33,-.36,.78,-1.14,.93,-1.56],["c",.03,-.12,.24,-1.2,.45,-2.4],["c",.24,-1.2,.42,-2.22,.42,-2.28],["c",.03,-.03,0,-.03,-.39,.09],["c",-1.05,.36,-1.8,.48,-2.58,.48],["c",-.63,0,-.84,-.03,-1.29,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.992,h:43.883},"accidentals.sharp":{d:[["M",5.73,-11.19],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.31],["c",0,1.23,0,2.22,.03,2.22],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.43],["c",0,1.32,0,2.43,.03,2.43],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.52],["c",0,2.28,-.03,2.55,-.06,2.64],["c",-.21,.36,-.72,.36,-.93,0],["c",-.03,-.09,-.06,-.33,-.06,-2.43],["l",0,-2.31],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.43],["c",0,2.58,0,2.52,-.15,2.67],["c",-.06,.09,-.27,.18,-.36,.18],["c",-.12,0,-.33,-.09,-.39,-.18],["c",-.15,-.15,-.15,-.09,-.15,-2.43],["c",0,-1.23,0,-2.22,-.03,-2.22],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.43],["c",0,-1.32,0,-2.43,-.03,-2.43],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.52],["c",0,-2.28,.03,-2.55,.06,-2.64],["c",.21,-.36,.72,-.36,.93,0],["c",.03,.09,.06,.33,.06,2.43],["l",.03,2.31],["l",1.26,-.51],["l",1.26,-.51],["l",0,-2.43],["c",0,-2.28,0,-2.43,.06,-2.55],["c",.06,-.12,.12,-.18,.27,-.24],["z"],["m",-.33,10.65],["l",0,-2.43],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.46],["l",0,2.43],["l",.09,-.03],["c",.06,-.03,.63,-.27,1.29,-.51],["l",1.17,-.48],["l",0,-2.46],["z"]],w:8.25,h:22.462},"accidentals.halfsharp":{d:[["M",2.43,-10.05],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.01],["c",0,1.05,0,1.89,.03,1.89],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.37],["c",0,1.32,0,2.37,.03,2.37],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.25],["c",0,1.95,0,2.28,-.06,2.37],["c",-.06,.12,-.12,.21,-.24,.27],["c",-.27,.12,-.54,.03,-.69,-.24],["c",-.06,-.12,-.06,-.21,-.06,-2.01],["c",0,-1.05,0,-1.89,-.03,-1.89],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.37],["c",0,-1.32,0,-2.37,-.03,-2.37],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.25],["c",0,-2.13,0,-2.28,.06,-2.4],["c",.06,-.12,.12,-.18,.27,-.24],["z"]],w:5.25,h:20.174},"accidentals.nat":{d:[["M",.21,-11.4],["c",.24,-.06,.78,0,.99,.15],["c",.03,.03,.03,.48,0,2.61],["c",-.03,1.44,-.03,2.61,-.03,2.61],["c",0,.03,.75,-.09,1.68,-.24],["c",.96,-.18,1.71,-.27,1.74,-.27],["c",.15,.03,.27,.15,.36,.3],["l",.06,.12],["l",.09,8.67],["c",.09,6.96,.12,8.67,.09,8.67],["c",-.03,.03,-.12,.06,-.21,.09],["c",-.24,.09,-.72,.09,-.96,0],["c",-.09,-.03,-.18,-.06,-.21,-.09],["c",-.03,-.03,-.03,-.48,0,-2.61],["c",.03,-1.44,.03,-2.61,.03,-2.61],["c",0,-.03,-.75,.09,-1.68,.24],["c",-.96,.18,-1.71,.27,-1.74,.27],["c",-.15,-.03,-.27,-.15,-.36,-.3],["l",-.06,-.15],["l",-.09,-7.53],["c",-.06,-4.14,-.09,-8.04,-.12,-8.67],["l",0,-1.11],["l",.15,-.06],["c",.09,-.03,.21,-.06,.27,-.09],["z"],["m",3.75,8.4],["c",0,-.33,0,-.42,-.03,-.42],["c",-.12,0,-2.79,.45,-2.79,.48],["c",-.03,0,-.09,6.3,-.09,6.33],["c",.03,0,2.79,-.45,2.82,-.48],["c",0,0,.09,-4.53,.09,-5.91],["z"]],w:5.4,h:22.8},"accidentals.flat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:6.75,h:18.801},"accidentals.halfflat":{d:[["M",4.83,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.6,-.12,9.06],["c",-.09,5.55,-.15,9.06,-.18,9.12],["c",-.03,.09,-.09,.18,-.15,.27],["c",-.24,.21,-.54,.24,-.81,.06],["c",-.06,-.03,-.27,-.24,-.45,-.42],["c",-.36,-.42,-.66,-.66,-1.8,-1.44],["c",-1.23,-.84,-1.83,-1.32,-2.25,-1.77],["c",-.66,-.78,-.96,-1.56,-.93,-2.46],["c",.09,-1.41,1.11,-2.58,2.4,-2.79],["c",.3,-.06,.84,-.03,1.23,.06],["c",.54,.12,1.08,.33,1.53,.63],["c",.12,.09,.24,.15,.24,.12],["c",0,0,-.12,-8.37,-.18,-9.75],["l",0,-.66],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",-1.65,10.95],["c",-.6,-.18,-1.08,.09,-1.38,.69],["c",-.27,.6,-.36,1.38,-.18,2.07],["c",.12,.42,.42,.99,.72,1.41],["c",.3,.42,.93,1.05,1.56,1.59],["l",.48,.39],["l",0,-.12],["c",.03,-.09,.03,-.48,.06,-.9],["c",.03,-.57,.03,-1.08,0,-2.22],["c",-.03,-1.62,-.03,-1.62,-.24,-2.07],["c",-.21,-.42,-.6,-.75,-1.02,-.84],["z"]],w:6.728,h:18.801},"accidentals.dblflat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"],["m",3,-11],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:12.1,h:18.804},"accidentals.dblsharp":{d:[["M",-.18,-3.96],["c",.06,-.03,.12,-.06,.15,-.06],["c",.09,0,2.76,.27,2.79,.3],["c",.12,.03,.15,.12,.15,.51],["c",.06,.96,.24,1.59,.57,2.1],["c",.06,.09,.15,.21,.18,.24],["l",.09,.06],["l",.09,-.06],["c",.03,-.03,.12,-.15,.18,-.24],["c",.33,-.51,.51,-1.14,.57,-2.1],["c",0,-.39,.03,-.45,.12,-.51],["c",.03,0,.66,-.09,1.44,-.15],["c",1.47,-.15,1.5,-.15,1.56,-.03],["c",.03,.06,0,.42,-.09,1.44],["c",-.09,.72,-.15,1.35,-.15,1.38],["c",0,.03,-.03,.09,-.06,.12],["c",-.06,.06,-.12,.09,-.51,.09],["c",-1.08,.06,-1.8,.3,-2.28,.75],["l",-.12,.09],["l",.09,.09],["c",.12,.15,.39,.33,.63,.45],["c",.42,.18,.96,.27,1.68,.33],["c",.39,0,.45,.03,.51,.09],["c",.03,.03,.06,.09,.06,.12],["c",0,.03,.06,.66,.15,1.38],["c",.09,1.02,.12,1.38,.09,1.44],["c",-.06,.12,-.09,.12,-1.56,-.03],["c",-.78,-.06,-1.41,-.15,-1.44,-.15],["c",-.09,-.06,-.12,-.12,-.12,-.54],["c",-.06,-.93,-.24,-1.56,-.57,-2.07],["c",-.06,-.09,-.15,-.21,-.18,-.24],["l",-.09,-.06],["l",-.09,.06],["c",-.03,.03,-.12,.15,-.18,.24],["c",-.33,.51,-.51,1.14,-.57,2.07],["c",0,.42,-.03,.48,-.12,.54],["c",-.03,0,-.66,.09,-1.44,.15],["c",-1.47,.15,-1.5,.15,-1.56,.03],["c",-.03,-.06,0,-.42,.09,-1.44],["c",.09,-.72,.15,-1.35,.15,-1.38],["c",0,-.03,.03,-.09,.06,-.12],["c",.06,-.06,.12,-.09,.51,-.09],["c",.72,-.06,1.26,-.15,1.68,-.33],["c",.24,-.12,.51,-.3,.63,-.45],["l",.09,-.09],["l",-.12,-.09],["c",-.48,-.45,-1.2,-.69,-2.28,-.75],["c",-.39,0,-.45,-.03,-.51,-.09],["c",-.03,-.03,-.06,-.09,-.06,-.12],["c",0,-.03,-.06,-.63,-.12,-1.38],["c",-.09,-.72,-.15,-1.35,-.15,-1.38],["z"]],w:7.95,h:7.977},"dots.dot":{d:[["M",1.32,-1.68],["c",.09,-.03,.27,-.06,.39,-.06],["c",.96,0,1.74,.78,1.74,1.71],["c",0,.96,-.78,1.74,-1.71,1.74],["c",-.96,0,-1.74,-.78,-1.74,-1.71],["c",0,-.78,.54,-1.5,1.32,-1.68],["z"]],w:3.45,h:3.45},"noteheads.dbl":{d:[["M",-.69,-4.02],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["c",.06,.15,.06,.18,.06,1.41],["l",0,1.23],["l",.12,-.18],["c",.72,-1.26,2.64,-2.31,4.86,-2.64],["c",.81,-.15,1.11,-.15,2.13,-.15],["c",.99,0,1.29,0,2.1,.15],["c",.75,.12,1.38,.27,2.04,.54],["c",1.35,.51,2.34,1.26,2.82,2.1],["l",.12,.18],["l",0,-1.23],["c",0,-1.2,0,-1.26,.06,-1.38],["c",.09,-.18,.15,-.24,.33,-.33],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,3.54],["l",0,3.54],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.38],["l",0,-1.23],["l",-.12,.18],["c",-.48,.84,-1.47,1.59,-2.82,2.1],["c",-.84,.33,-1.71,.54,-2.85,.66],["c",-.45,.06,-2.16,.06,-2.61,0],["c",-1.14,-.12,-2.01,-.33,-2.85,-.66],["c",-1.35,-.51,-2.34,-1.26,-2.82,-2.1],["l",-.12,-.18],["l",0,1.23],["c",0,1.23,0,1.26,-.06,1.38],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-3.54],["c",0,-3.48,0,-3.54,.06,-3.66],["c",.09,-.18,.15,-.24,.33,-.33],["z"],["m",7.71,.63],["c",-.36,-.06,-.9,-.06,-1.14,0],["c",-.3,.03,-.66,.24,-.87,.42],["c",-.6,.54,-.9,1.62,-.75,2.82],["c",.12,.93,.51,1.68,1.11,2.31],["c",.75,.72,1.83,1.2,2.85,1.26],["c",1.05,.06,1.83,-.54,2.1,-1.65],["c",.21,-.9,.12,-1.95,-.24,-2.82],["c",-.36,-.81,-1.08,-1.53,-1.95,-1.95],["c",-.3,-.15,-.78,-.3,-1.11,-.39],["z"]],w:16.83,h:8.145},"noteheads.whole":{d:[["M",6.51,-4.05],["c",.51,-.03,2.01,0,2.52,.03],["c",1.41,.18,2.64,.51,3.72,1.08],["c",1.2,.63,1.95,1.41,2.19,2.31],["c",.09,.33,.09,.9,0,1.23],["c",-.24,.9,-.99,1.68,-2.19,2.31],["c",-1.08,.57,-2.28,.9,-3.75,1.08],["c",-.66,.06,-2.31,.06,-2.97,0],["c",-1.47,-.18,-2.67,-.51,-3.75,-1.08],["c",-1.2,-.63,-1.95,-1.41,-2.19,-2.31],["c",-.09,-.33,-.09,-.9,0,-1.23],["c",.24,-.9,.99,-1.68,2.19,-2.31],["c",1.2,-.63,2.61,-.99,4.23,-1.11],["z"],["m",.57,.66],["c",-.87,-.15,-1.53,0,-2.04,.51],["c",-.15,.15,-.24,.27,-.33,.48],["c",-.24,.51,-.36,1.08,-.33,1.77],["c",.03,.69,.18,1.26,.42,1.77],["c",.6,1.17,1.74,1.98,3.18,2.22],["c",1.11,.21,1.95,-.15,2.34,-.99],["c",.24,-.51,.36,-1.08,.33,-1.8],["c",-.06,-1.11,-.45,-2.04,-1.17,-2.76],["c",-.63,-.63,-1.47,-1.05,-2.4,-1.2],["z"]],w:14.985,h:8.097},"noteheads.half":{d:[["M",7.44,-4.05],["c",.06,-.03,.27,-.03,.48,-.03],["c",1.05,0,1.71,.24,2.1,.81],["c",.42,.6,.45,1.35,.18,2.4],["c",-.42,1.59,-1.14,2.73,-2.16,3.39],["c",-1.41,.93,-3.18,1.44,-5.4,1.53],["c",-1.17,.03,-1.89,-.21,-2.28,-.81],["c",-.42,-.6,-.45,-1.35,-.18,-2.4],["c",.42,-1.59,1.14,-2.73,2.16,-3.39],["c",.63,-.42,1.23,-.72,1.98,-.96],["c",.9,-.3,1.65,-.42,3.12,-.54],["z"],["m",1.29,.87],["c",-.27,-.09,-.63,-.12,-.9,-.03],["c",-.72,.24,-1.53,.69,-3.27,1.8],["c",-2.34,1.5,-3.3,2.25,-3.57,2.79],["c",-.36,.72,-.06,1.5,.66,1.77],["c",.24,.12,.69,.09,.99,0],["c",.84,-.3,1.92,-.93,4.14,-2.37],["c",1.62,-1.08,2.37,-1.71,2.61,-2.19],["c",.36,-.72,.06,-1.5,-.66,-1.77],["z"]],w:10.37,h:8.132},"noteheads.quarter":{d:[["M",6.09,-4.05],["c",.36,-.03,1.2,0,1.53,.06],["c",1.17,.24,1.89,.84,2.16,1.83],["c",.06,.18,.06,.3,.06,.66],["c",0,.45,0,.63,-.15,1.08],["c",-.66,2.04,-3.06,3.93,-5.52,4.38],["c",-.54,.09,-1.44,.09,-1.83,.03],["c",-1.23,-.27,-1.98,-.87,-2.25,-1.86],["c",-.06,-.18,-.06,-.3,-.06,-.66],["c",0,-.45,0,-.63,.15,-1.08],["c",.24,-.78,.75,-1.53,1.44,-2.22],["c",1.2,-1.2,2.85,-2.01,4.47,-2.22],["z"]],w:9.81,h:8.094},"noteheads.slash.nostem":{d:[["M",9.3,-7.77],["c",.06,-.06,.18,-.06,1.71,-.06],["l",1.65,0],["l",.09,.09],["c",.06,.06,.06,.09,.06,.15],["c",-.03,.12,-9.21,15.24,-9.3,15.33],["c",-.06,.06,-.18,.06,-1.71,.06],["l",-1.65,0],["l",-.09,-.09],["c",-.06,-.06,-.06,-.09,-.06,-.15],["c",.03,-.12,9.21,-15.24,9.3,-15.33],["z"]],w:12.81,h:15.63},"noteheads.indeterminate":{d:[["M",.78,-4.05],["c",.12,-.03,.24,-.03,.36,.03],["c",.03,.03,.93,.72,1.95,1.56],["l",1.86,1.5],["l",1.86,-1.5],["c",1.02,-.84,1.92,-1.53,1.95,-1.56],["c",.21,-.12,.33,-.09,.75,.24],["c",.3,.27,.36,.36,.36,.54],["c",0,.03,-.03,.12,-.06,.18],["c",-.03,.06,-.9,.75,-1.89,1.56],["l",-1.8,1.47],["c",0,.03,.81,.69,1.8,1.5],["c",.99,.81,1.86,1.5,1.89,1.56],["c",.03,.06,.06,.15,.06,.18],["c",0,.18,-.06,.27,-.36,.54],["c",-.42,.33,-.54,.36,-.75,.24],["c",-.03,-.03,-.93,-.72,-1.95,-1.56],["l",-1.86,-1.5],["l",-1.86,1.5],["c",-1.02,.84,-1.92,1.53,-1.95,1.56],["c",-.21,.12,-.33,.09,-.75,-.24],["c",-.3,-.27,-.36,-.36,-.36,-.54],["c",0,-.03,.03,-.12,.06,-.18],["c",.03,-.06,.9,-.75,1.89,-1.56],["l",1.8,-1.47],["c",0,-.03,-.81,-.69,-1.8,-1.5],["c",-.99,-.81,-1.86,-1.5,-1.89,-1.56],["c",-.06,-.12,-.09,-.21,-.03,-.36],["c",.03,-.09,.57,-.57,.72,-.63],["z"]],w:9.843,h:8.139},"scripts.ufermata":{d:[["M",-.75,-10.77],["c",.12,0,.45,-.03,.69,-.03],["c",2.91,-.03,5.55,1.53,7.41,4.35],["c",1.17,1.71,1.95,3.72,2.43,6.03],["c",.12,.51,.12,.57,.03,.69],["c",-.12,.21,-.48,.27,-.69,.12],["c",-.12,-.09,-.18,-.24,-.27,-.69],["c",-.78,-3.63,-3.42,-6.54,-6.78,-7.38],["c",-.78,-.21,-1.2,-.24,-2.07,-.24],["c",-.63,0,-.84,0,-1.2,.06],["c",-1.83,.27,-3.42,1.08,-4.8,2.37],["c",-1.41,1.35,-2.4,3.21,-2.85,5.19],["c",-.09,.45,-.15,.6,-.27,.69],["c",-.21,.15,-.57,.09,-.69,-.12],["c",-.09,-.12,-.09,-.18,.03,-.69],["c",.33,-1.62,.78,-3,1.47,-4.38],["c",1.77,-3.54,4.44,-5.67,7.56,-5.97],["z"],["m",.33,7.47],["c",1.38,-.3,2.58,.9,2.31,2.25],["c",-.15,.72,-.78,1.35,-1.47,1.5],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.748,h:11.289},"scripts.dfermata":{d:[["M",-9.63,-.42],["c",.15,-.09,.36,-.06,.51,.03],["c",.12,.09,.18,.24,.27,.66],["c",.78,3.66,3.42,6.57,6.78,7.41],["c",.78,.21,1.2,.24,2.07,.24],["c",.63,0,.84,0,1.2,-.06],["c",1.83,-.27,3.42,-1.08,4.8,-2.37],["c",1.41,-1.35,2.4,-3.21,2.85,-5.22],["c",.09,-.42,.15,-.57,.27,-.66],["c",.21,-.15,.57,-.09,.69,.12],["c",.09,.12,.09,.18,-.03,.69],["c",-.33,1.62,-.78,3,-1.47,4.38],["c",-1.92,3.84,-4.89,6,-8.31,6],["c",-3.42,0,-6.39,-2.16,-8.31,-6],["c",-.48,-.96,-.84,-1.92,-1.14,-2.97],["c",-.18,-.69,-.42,-1.74,-.42,-1.92],["c",0,-.12,.09,-.27,.24,-.33],["z"],["m",9.21,0],["c",1.2,-.27,2.34,.63,2.34,1.86],["c",0,.9,-.66,1.68,-1.5,1.89],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.744,h:11.274},"scripts.sforzato":{d:[["M",-6.45,-3.69],["c",.06,-.03,.15,-.06,.18,-.06],["c",.06,0,2.85,.72,6.24,1.59],["l",6.33,1.65],["c",.33,.06,.45,.21,.45,.51],["c",0,.3,-.12,.45,-.45,.51],["l",-6.33,1.65],["c",-3.39,.87,-6.18,1.59,-6.21,1.59],["c",-.21,0,-.48,-.24,-.51,-.45],["c",0,-.15,.06,-.36,.18,-.45],["c",.09,-.06,.87,-.27,3.84,-1.05],["c",2.04,-.54,3.84,-.99,4.02,-1.02],["c",.15,-.06,1.14,-.24,2.22,-.42],["c",1.05,-.18,1.92,-.36,1.92,-.36],["c",0,0,-.87,-.18,-1.92,-.36],["c",-1.08,-.18,-2.07,-.36,-2.22,-.42],["c",-.18,-.03,-1.98,-.48,-4.02,-1.02],["c",-2.97,-.78,-3.75,-.99,-3.84,-1.05],["c",-.12,-.09,-.18,-.3,-.18,-.45],["c",.03,-.15,.15,-.3,.3,-.39],["z"]],w:13.5,h:7.5},"scripts.staccato":{d:[["M",-.36,-1.47],["c",.93,-.21,1.86,.51,1.86,1.47],["c",0,.93,-.87,1.65,-1.8,1.47],["c",-.54,-.12,-1.02,-.57,-1.14,-1.08],["c",-.21,-.81,.27,-1.65,1.08,-1.86],["z"]],w:2.989,h:3.004},"scripts.tenuto":{d:[["M",-4.2,-.48],["l",.12,-.06],["l",4.08,0],["l",4.08,0],["l",.12,.06],["c",.39,.21,.39,.75,0,.96],["l",-.12,.06],["l",-4.08,0],["l",-4.08,0],["l",-.12,-.06],["c",-.39,-.21,-.39,-.75,0,-.96],["z"]],w:8.985,h:1.08},"scripts.umarcato":{d:[["M",-.15,-8.19],["c",.15,-.12,.36,-.03,.45,.15],["c",.21,.42,3.45,7.65,3.45,7.71],["c",0,.12,-.12,.27,-.21,.3],["c",-.03,.03,-.51,.03,-1.14,.03],["c",-1.05,0,-1.08,0,-1.17,-.06],["c",-.09,-.06,-.24,-.36,-1.17,-2.4],["c",-.57,-1.29,-1.05,-2.34,-1.08,-2.34],["c",0,-.03,-.51,1.02,-1.08,2.34],["c",-.93,2.07,-1.08,2.34,-1.14,2.4],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.06,3.24,-7.32,3.45,-7.71],["c",.03,-.06,.09,-.15,.15,-.15],["z"]],w:7.5,h:8.245},"scripts.dmarcato":{d:[["M",-3.57,.03],["c",.03,0,.57,-.03,1.17,-.03],["c",1.05,0,1.08,0,1.17,.06],["c",.09,.06,.24,.36,1.17,2.4],["c",.57,1.29,1.05,2.34,1.08,2.34],["c",0,.03,.51,-1.02,1.08,-2.34],["c",.93,-2.07,1.08,-2.34,1.14,-2.4],["c",.06,-.03,.15,-.06,.18,-.06],["c",.15,0,.33,.18,.33,.33],["c",0,.09,-3.45,7.74,-3.54,7.83],["c",-.12,.12,-.3,.12,-.42,0],["c",-.09,-.09,-3.54,-7.74,-3.54,-7.83],["c",0,-.09,.12,-.27,.18,-.3],["z"]],w:7.5,h:8.25},"scripts.stopped":{d:[["M",-.27,-4.08],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.5],["l",0,1.47],["l",1.47,0],["l",1.5,0],["l",.15,.06],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.09,.36,0,.54],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.12,.06,-.18,.06,-1.62,.06],["l",-1.47,0],["l",0,1.47],["l",0,1.47],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-1.47],["l",0,-1.47],["l",-1.47,0],["c",-1.44,0,-1.5,0,-1.62,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.47,0],["l",1.47,0],["l",0,-1.47],["c",0,-1.44,0,-1.5,.06,-1.62],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:8.295,h:8.295},"scripts.upbow":{d:[["M",-4.65,-15.54],["c",.12,-.09,.36,-.06,.48,.03],["c",.03,.03,.09,.09,.12,.15],["c",.03,.06,.66,2.13,1.41,4.62],["c",1.35,4.41,1.38,4.56,2.01,6.96],["l",.63,2.46],["l",.63,-2.46],["c",.63,-2.4,.66,-2.55,2.01,-6.96],["c",.75,-2.49,1.38,-4.56,1.41,-4.62],["c",.06,-.15,.18,-.21,.36,-.24],["c",.15,0,.3,.06,.39,.18],["c",.15,.21,.24,-.18,-2.1,7.56],["c",-1.2,3.96,-2.22,7.32,-2.25,7.41],["c",0,.12,-.06,.27,-.09,.3],["c",-.12,.21,-.6,.21,-.72,0],["c",-.03,-.03,-.09,-.18,-.09,-.3],["c",-.03,-.09,-1.05,-3.45,-2.25,-7.41],["c",-2.34,-7.74,-2.25,-7.35,-2.1,-7.56],["c",.03,-.03,.09,-.09,.15,-.12],["z"]],w:9.73,h:15.608},"scripts.downbow":{d:[["M",-5.55,-9.93],["l",.09,-.06],["l",5.46,0],["l",5.46,0],["l",.09,.06],["l",.06,.09],["l",0,4.77],["c",0,5.28,0,4.89,-.18,5.01],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.06,-.09,-.06,-.18,-.06,-2.97],["l",0,-2.85],["l",-4.83,0],["l",-4.83,0],["l",0,2.85],["c",0,2.79,0,2.88,-.06,2.97],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.21,-.06,-4.89],["l",0,-4.77],["z"]],w:11.22,h:9.992},"scripts.turn":{d:[["M",-4.77,-3.9],["c",.36,-.06,1.05,-.06,1.44,.03],["c",.78,.15,1.5,.51,2.34,1.14],["c",.6,.45,1.05,.87,2.22,2.01],["c",1.11,1.08,1.62,1.5,2.22,1.86],["c",.6,.36,1.32,.57,1.92,.57],["c",.9,0,1.71,-.57,1.89,-1.35],["c",.24,-.93,-.39,-1.89,-1.35,-2.1],["l",-.15,-.06],["l",-.09,.15],["c",-.03,.09,-.15,.24,-.24,.33],["c",-.72,.72,-2.04,.54,-2.49,-.36],["c",-.48,-.93,.03,-1.86,1.17,-2.19],["c",.3,-.09,1.02,-.09,1.35,0],["c",.99,.27,1.74,.87,2.25,1.83],["c",.69,1.41,.63,3,-.21,4.26],["c",-.21,.3,-.69,.81,-.99,1.02],["c",-.3,.21,-.84,.45,-1.17,.54],["c",-1.23,.36,-2.49,.15,-3.72,-.6],["c",-.75,-.48,-1.41,-1.02,-2.85,-2.46],["c",-1.11,-1.08,-1.62,-1.5,-2.22,-1.86],["c",-.6,-.36,-1.32,-.57,-1.92,-.57],["c",-.9,0,-1.71,.57,-1.89,1.35],["c",-.24,.93,.39,1.89,1.35,2.1],["l",.15,.06],["l",.09,-.15],["c",.03,-.09,.15,-.24,.24,-.33],["c",.72,-.72,2.04,-.54,2.49,.36],["c",.48,.93,-.03,1.86,-1.17,2.19],["c",-.3,.09,-1.02,.09,-1.35,0],["c",-.99,-.27,-1.74,-.87,-2.25,-1.83],["c",-.69,-1.41,-.63,-3,.21,-4.26],["c",.21,-.3,.69,-.81,.99,-1.02],["c",.48,-.33,1.11,-.57,1.74,-.66],["z"]],w:16.366,h:7.893},"scripts.trill":{d:[["M",-.51,-16.02],["c",.12,-.09,.21,-.18,.21,-.18],["l",-.81,4.02],["l",-.81,4.02],["c",.03,0,.51,-.27,1.08,-.6],["c",.6,-.3,1.14,-.63,1.26,-.66],["c",1.14,-.54,2.31,-.6,3.09,-.18],["c",.27,.15,.54,.36,.6,.51],["l",.06,.12],["l",.21,-.21],["c",.9,-.81,2.22,-.99,3.12,-.42],["c",.6,.42,.9,1.14,.78,2.07],["c",-.15,1.29,-1.05,2.31,-1.95,2.25],["c",-.48,-.03,-.78,-.3,-.96,-.81],["c",-.09,-.27,-.09,-.9,-.03,-1.2],["c",.21,-.75,.81,-1.23,1.59,-1.32],["l",.24,-.03],["l",-.09,-.12],["c",-.51,-.66,-1.62,-.63,-2.31,.03],["c",-.39,.42,-.3,.09,-1.23,4.77],["l",-.81,4.14],["c",-.03,0,-.12,-.03,-.21,-.09],["c",-.33,-.15,-.54,-.18,-.99,-.18],["c",-.42,0,-.66,.03,-1.05,.18],["c",-.12,.06,-.21,.09,-.21,.09],["c",0,-.03,.36,-1.86,.81,-4.11],["c",.9,-4.47,.87,-4.26,.69,-4.53],["c",-.21,-.36,-.66,-.51,-1.17,-.36],["c",-.15,.06,-2.22,1.14,-2.58,1.38],["c",-.12,.09,-.12,.09,-.21,.6],["l",-.09,.51],["l",.21,.24],["c",.63,.75,1.02,1.47,1.2,2.19],["c",.06,.27,.06,.36,.06,.81],["c",0,.42,0,.54,-.06,.78],["c",-.15,.54,-.33,.93,-.63,1.35],["c",-.18,.24,-.57,.63,-.81,.78],["c",-.24,.15,-.63,.36,-.84,.42],["c",-.27,.06,-.66,.06,-.87,.03],["c",-.81,-.18,-1.32,-1.05,-1.38,-2.46],["c",-.03,-.6,.03,-.99,.33,-2.46],["c",.21,-1.08,.24,-1.32,.21,-1.29],["c",-1.2,.48,-2.4,.75,-3.21,.72],["c",-.69,-.06,-1.17,-.3,-1.41,-.72],["c",-.39,-.75,-.12,-1.8,.66,-2.46],["c",.24,-.18,.69,-.42,1.02,-.51],["c",.69,-.18,1.53,-.15,2.31,.09],["c",.3,.09,.75,.3,.99,.45],["c",.12,.09,.15,.09,.15,.03],["c",.03,-.03,.33,-1.59,.72,-3.45],["c",.36,-1.86,.66,-3.42,.69,-3.45],["c",0,-.03,.03,-.03,.21,.03],["c",.21,.06,.27,.06,.48,.06],["c",.42,-.03,.78,-.18,1.26,-.48],["c",.15,-.12,.36,-.27,.48,-.39],["z"],["m",-5.73,7.68],["c",-.27,-.03,-.96,-.06,-1.2,-.03],["c",-.81,.12,-1.35,.57,-1.5,1.2],["c",-.18,.66,.12,1.14,.75,1.29],["c",.66,.12,1.92,-.12,3.18,-.66],["l",.33,-.15],["l",.09,-.39],["c",.06,-.21,.09,-.42,.09,-.45],["c",0,-.03,-.45,-.3,-.75,-.45],["c",-.27,-.15,-.66,-.27,-.99,-.36],["z"],["m",4.29,3.63],["c",-.24,-.39,-.51,-.75,-.51,-.69],["c",-.06,.12,-.39,1.92,-.45,2.28],["c",-.09,.54,-.12,1.14,-.06,1.38],["c",.06,.42,.21,.6,.51,.57],["c",.39,-.06,.75,-.48,.93,-1.14],["c",.09,-.33,.09,-1.05,0,-1.38],["c",-.09,-.39,-.24,-.69,-.42,-1.02],["z"]],w:17.963,h:16.49},"scripts.segno":{d:[["M",-3.72,-11.22],["c",.78,-.09,1.59,.03,2.31,.42],["c",1.2,.6,2.01,1.71,2.31,3.09],["c",.09,.42,.09,1.2,.03,1.5],["c",-.15,.45,-.39,.81,-.66,.93],["c",-.33,.18,-.84,.21,-1.23,.15],["c",-.81,-.18,-1.32,-.93,-1.26,-1.89],["c",.03,-.36,.09,-.57,.24,-.9],["c",.15,-.33,.45,-.6,.72,-.75],["c",.12,-.06,.18,-.09,.18,-.12],["c",0,-.03,-.03,-.15,-.09,-.24],["c",-.18,-.45,-.54,-.87,-.96,-1.08],["c",-1.11,-.57,-2.34,-.18,-2.88,.9],["c",-.24,.51,-.33,1.11,-.24,1.83],["c",.27,1.92,1.5,3.54,3.93,5.13],["c",.48,.33,1.26,.78,1.29,.78],["c",.03,0,1.35,-2.19,2.94,-4.89],["l",2.88,-4.89],["l",.84,0],["l",.87,0],["l",-.03,.06],["c",-.15,.21,-6.15,10.41,-6.15,10.44],["c",0,0,.21,.15,.48,.27],["c",2.61,1.47,4.35,3.03,5.13,4.65],["c",1.14,2.34,.51,5.07,-1.44,6.39],["c",-.66,.42,-1.32,.63,-2.13,.69],["c",-2.01,.09,-3.81,-1.41,-4.26,-3.54],["c",-.09,-.42,-.09,-1.2,-.03,-1.5],["c",.15,-.45,.39,-.81,.66,-.93],["c",.33,-.18,.84,-.21,1.23,-.15],["c",.81,.18,1.32,.93,1.26,1.89],["c",-.03,.36,-.09,.57,-.24,.9],["c",-.15,.33,-.45,.6,-.72,.75],["c",-.12,.06,-.18,.09,-.18,.12],["c",0,.03,.03,.15,.09,.24],["c",.18,.45,.54,.87,.96,1.08],["c",1.11,.57,2.34,.18,2.88,-.9],["c",.24,-.51,.33,-1.11,.24,-1.83],["c",-.27,-1.92,-1.5,-3.54,-3.93,-5.13],["c",-.48,-.33,-1.26,-.78,-1.29,-.78],["c",-.03,0,-1.35,2.19,-2.91,4.89],["l",-2.88,4.89],["l",-.87,0],["l",-.87,0],["l",.03,-.06],["c",.15,-.21,6.15,-10.41,6.15,-10.44],["c",0,0,-.21,-.15,-.48,-.3],["c",-2.61,-1.44,-4.35,-3,-5.13,-4.62],["c",-.9,-1.89,-.72,-4.02,.48,-5.52],["c",.69,-.84,1.68,-1.41,2.73,-1.53],["z"],["m",8.76,9.09],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"],["m",-10.53,2.61],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"]],w:15,h:22.504},"scripts.coda":{d:[["M",-.21,-10.47],["c",.18,-.12,.42,-.06,.54,.12],["c",.06,.09,.06,.18,.06,1.5],["l",0,1.38],["l",.18,0],["c",.39,.06,.96,.24,1.38,.48],["c",1.68,.93,2.82,3.24,3.03,6.12],["c",.03,.24,.03,.45,.03,.45],["c",0,.03,.6,.03,1.35,.03],["c",1.5,0,1.47,0,1.59,.18],["c",.09,.12,.09,.3,0,.42],["c",-.12,.18,-.09,.18,-1.59,.18],["c",-.75,0,-1.35,0,-1.35,.03],["c",0,0,0,.21,-.03,.42],["c",-.24,3.15,-1.53,5.58,-3.45,6.36],["c",-.27,.12,-.72,.24,-.96,.27],["l",-.18,0],["l",0,1.38],["c",0,1.32,0,1.41,-.06,1.5],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.18,-.06,-1.5],["l",0,-1.38],["l",-.18,0],["c",-.39,-.06,-.96,-.24,-1.38,-.48],["c",-1.68,-.93,-2.82,-3.24,-3.03,-6.15],["c",-.03,-.21,-.03,-.42,-.03,-.42],["c",0,-.03,-.6,-.03,-1.35,-.03],["c",-1.5,0,-1.47,0,-1.59,-.18],["c",-.09,-.12,-.09,-.3,0,-.42],["c",.12,-.18,.09,-.18,1.59,-.18],["c",.75,0,1.35,0,1.35,-.03],["c",0,0,0,-.21,.03,-.45],["c",.24,-3.12,1.53,-5.55,3.45,-6.33],["c",.27,-.12,.72,-.24,.96,-.27],["l",.18,0],["l",0,-1.38],["c",0,-1.53,0,-1.5,.18,-1.62],["z"],["m",-.18,6.93],["c",0,-2.97,0,-3.15,-.06,-3.15],["c",-.09,0,-.51,.15,-.66,.21],["c",-.87,.51,-1.38,1.62,-1.56,3.51],["c",-.06,.54,-.12,1.59,-.12,2.16],["l",0,.42],["l",1.2,0],["l",1.2,0],["l",0,-3.15],["z"],["m",1.17,-3.06],["c",-.09,-.03,-.21,-.06,-.27,-.09],["l",-.12,0],["l",0,3.15],["l",0,3.15],["l",1.2,0],["l",1.2,0],["l",0,-.81],["c",-.06,-2.4,-.33,-3.69,-.93,-4.59],["c",-.27,-.39,-.66,-.69,-1.08,-.81],["z"],["m",-1.17,10.14],["l",0,-3.15],["l",-1.2,0],["l",-1.2,0],["l",0,.81],["c",.03,.96,.06,1.47,.15,2.13],["c",.24,2.04,.96,3.12,2.13,3.36],["l",.12,0],["l",0,-3.15],["z"],["m",3.18,-2.34],["l",0,-.81],["l",-1.2,0],["l",-1.2,0],["l",0,3.15],["l",0,3.15],["l",.12,0],["c",1.17,-.24,1.89,-1.32,2.13,-3.36],["c",.09,-.66,.12,-1.17,.15,-2.13],["z"]],w:16.035,h:21.062},"scripts.comma":{d:[["M",1.14,-4.62],["c",.3,-.12,.69,-.03,.93,.15],["c",.12,.12,.36,.45,.51,.78],["c",.9,1.77,.54,4.05,-1.08,6.75],["c",-.36,.63,-.87,1.38,-.96,1.44],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.09,-.18,-.09,-.3,.12,-.6],["c",.96,-1.44,1.44,-2.97,1.38,-4.35],["c",-.06,-.93,-.3,-1.68,-.78,-2.46],["c",-.27,-.39,-.33,-.63,-.24,-.96],["c",.09,-.27,.36,-.54,.66,-.63],["z"]],w:3.042,h:9.237},"scripts.roll":{d:[["M",1.95,-6],["c",.21,-.09,.36,-.09,.57,0],["c",.39,.15,.63,.39,1.47,1.35],["c",.66,.75,.78,.87,1.08,1.05],["c",.75,.45,1.65,.42,2.4,-.06],["c",.12,-.09,.27,-.27,.54,-.6],["c",.42,-.54,.51,-.63,.69,-.63],["c",.09,0,.3,.12,.36,.21],["c",.09,.12,.12,.3,.03,.42],["c",-.06,.12,-3.15,3.9,-3.3,4.08],["c",-.06,.06,-.18,.12,-.27,.18],["c",-.27,.12,-.6,.06,-.99,-.27],["c",-.27,-.21,-.42,-.39,-1.08,-1.14],["c",-.63,-.72,-.81,-.9,-1.17,-1.08],["c",-.36,-.18,-.57,-.21,-.99,-.21],["c",-.39,0,-.63,.03,-.93,.18],["c",-.36,.15,-.51,.27,-.9,.81],["c",-.24,.27,-.45,.51,-.48,.54],["c",-.12,.09,-.27,.06,-.39,0],["c",-.24,-.15,-.33,-.39,-.21,-.6],["c",.09,-.12,3.18,-3.87,3.33,-4.02],["c",.06,-.06,.18,-.15,.24,-.21],["z"]],w:10.817,h:6.125},"scripts.prall":{d:[["M",-4.38,-3.69],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.57,-.84,1.23,-1.83],["c",1.14,-1.68,1.23,-1.83,1.35,-1.89],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["c",-.03,0,-.57,.84,-1.23,1.83],["c",-1.14,1.68,-1.23,1.83,-1.35,1.89],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["z"]],w:15.011,h:7.5},"scripts.arpeggio":{d:[["M",1.5,0],["c",1.5,2,1.5,3,1.5,3],["s",0,1,-2,1.5],["s",-.5,3,1,5.5],["l",1.5,0],["s",-1.75,-2,-1.9,-3.25],["s",2.15,-.6,2.95,-1.6],["s",.45,-1,.5,-1.25],["s",0,-1,-2,-3.9],["l",-1.5,0],["z"]],w:5,h:10},"scripts.mordent":{d:[["M",-.21,-4.95],["c",.27,-.15,.63,0,.75,.27],["c",.06,.12,.06,.24,.06,1.44],["l",0,1.29],["l",.57,-.84],["c",.51,-.75,.57,-.84,.69,-.9],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.83,-1.89],["c",-.81,-.99,-1.5,-1.8,-1.53,-1.86],["c",-.06,-.03,-.06,-.03,-.12,.03],["c",-.06,.06,-.06,.15,-.06,2.28],["c",0,1.95,0,2.25,-.06,2.34],["c",-.18,.45,-.81,.48,-1.05,.03],["c",-.03,-.06,-.06,-.24,-.06,-1.41],["l",0,-1.35],["l",-.57,.84],["c",-.54,.78,-.6,.87,-.72,.93],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.06,-.06,.09,-.09],["c",.06,-.12,.06,-.15,.06,-2.28],["c",0,-1.92,0,-2.22,.06,-2.31],["c",.06,-.15,.15,-.24,.3,-.3],["z"]],w:15.011,h:10.012},"flags.u8th":{d:[["M",-.42,3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",0,.18],["c",0,.3,.06,.84,.12,1.23],["c",.24,1.53,.9,3.12,2.13,5.16],["l",.99,1.59],["c",.87,1.44,1.38,2.34,1.77,3.09],["c",.81,1.68,1.2,3.06,1.26,4.53],["c",.03,1.53,-.21,3.27,-.75,5.01],["c",-.21,.69,-.51,1.5,-.6,1.59],["c",-.09,.12,-.27,.21,-.42,.21],["c",-.15,0,-.42,-.12,-.51,-.21],["c",-.15,-.18,-.18,-.42,-.09,-.66],["c",.15,-.33,.45,-1.2,.57,-1.62],["c",.42,-1.38,.6,-2.58,.6,-3.9],["c",0,-.66,0,-.81,-.06,-1.11],["c",-.39,-2.07,-1.8,-4.26,-4.59,-7.14],["l",-.42,-.45],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["z"]],w:6.692,h:22.59},"flags.u16th":{d:[["M",-.42,7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,.39],["c",.06,1.08,.39,2.19,.99,3.39],["c",.45,.9,.87,1.59,1.95,3.12],["c",1.29,1.86,1.77,2.64,2.22,3.57],["c",.45,.93,.72,1.8,.87,2.64],["c",.06,.51,.06,1.5,0,1.92],["c",-.12,.6,-.3,1.2,-.54,1.71],["l",-.09,.24],["l",.18,.45],["c",.51,1.2,.72,2.22,.69,3.42],["c",-.06,1.53,-.39,3.03,-.99,4.53],["c",-.3,.75,-.36,.81,-.57,.9],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.12,-.75],["c",.66,-1.41,1.02,-2.88,1.08,-4.32],["c",0,-.6,-.03,-1.05,-.18,-1.59],["c",-.3,-1.2,-.99,-2.4,-2.25,-3.87],["c",-.42,-.48,-1.53,-1.62,-2.19,-2.22],["l",-.45,-.42],["l",-.03,1.11],["l",0,1.11],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["z"],["m",1.65,.09],["c",-.3,-.3,-.69,-.72,-.9,-.87],["l",-.33,-.33],["l",0,.15],["c",0,.3,.06,.81,.15,1.26],["c",.27,1.29,.87,2.61,2.04,4.29],["c",.15,.24,.6,.87,.96,1.38],["l",1.08,1.53],["l",.42,.63],["c",.03,0,.12,-.36,.21,-.72],["c",.06,-.33,.06,-1.2,0,-1.62],["c",-.33,-1.71,-1.44,-3.48,-3.63,-5.7],["z"]],w:6.693,h:26.337},"flags.u32nd":{d:[["M",-.42,11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,.36],["c",.09,1.68,.69,3.27,2.07,5.46],["l",.87,1.35],["c",1.02,1.62,1.47,2.37,1.86,3.18],["c",.48,1.02,.78,1.92,.93,2.88],["c",.06,.48,.06,1.5,0,1.89],["c",-.09,.42,-.21,.87,-.36,1.26],["l",-.12,.3],["l",.15,.39],["c",.69,1.56,.84,2.88,.54,4.38],["c",-.09,.45,-.27,1.08,-.45,1.47],["l",-.12,.24],["l",.18,.36],["c",.33,.72,.57,1.56,.69,2.34],["c",.12,1.02,-.06,2.52,-.42,3.84],["c",-.27,.93,-.75,2.13,-.93,2.31],["c",-.18,.15,-.45,.18,-.66,.09],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.06,-.6],["c",.21,-.36,.42,-.9,.57,-1.38],["c",.51,-1.41,.69,-3.06,.48,-4.08],["c",-.15,-.81,-.57,-1.68,-1.2,-2.55],["c",-.72,-.99,-1.83,-2.13,-3.3,-3.33],["l",-.48,-.42],["l",-.03,1.53],["l",0,1.56],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["z"],["m",1.26,-3.96],["c",-.27,-.3,-.54,-.6,-.66,-.72],["l",-.18,-.21],["l",0,.42],["c",.06,.87,.24,1.74,.66,2.67],["c",.36,.87,.96,1.86,1.92,3.18],["c",.21,.33,.63,.87,.87,1.23],["c",.27,.39,.6,.84,.75,1.08],["l",.27,.39],["l",.03,-.12],["c",.12,-.45,.15,-1.05,.09,-1.59],["c",-.27,-1.86,-1.38,-3.78,-3.75,-6.33],["z"],["m",-.27,6.09],["c",-.27,-.21,-.48,-.42,-.51,-.45],["c",-.06,-.03,-.06,-.03,-.06,.21],["c",0,.9,.3,2.04,.81,3.09],["c",.48,1.02,.96,1.77,2.37,3.63],["c",.6,.78,1.05,1.44,1.29,1.77],["c",.06,.12,.15,.21,.15,.18],["c",.03,-.03,.18,-.57,.24,-.87],["c",.06,-.45,.06,-1.32,-.03,-1.74],["c",-.09,-.48,-.24,-.9,-.51,-1.44],["c",-.66,-1.35,-1.83,-2.7,-3.75,-4.38],["z"]],w:6.697,h:32.145},"flags.u64th":{d:[["M",-.42,15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,.36],["c",.06,1.2,.39,2.37,1.02,3.66],["c",.39,.81,.84,1.56,1.8,3.09],["c",.81,1.26,1.05,1.68,1.35,2.22],["c",.87,1.5,1.35,2.79,1.56,4.08],["c",.06,.54,.06,1.56,-.03,2.04],["c",-.09,.48,-.21,.99,-.36,1.35],["l",-.12,.27],["l",.12,.27],["c",.09,.15,.21,.45,.27,.66],["c",.69,1.89,.63,3.66,-.18,5.46],["l",-.18,.39],["l",.15,.33],["c",.3,.66,.51,1.44,.63,2.1],["c",.06,.48,.06,1.35,0,1.71],["c",-.15,.57,-.42,1.2,-.78,1.68],["l",-.21,.27],["l",.18,.33],["c",.57,1.05,.93,2.13,1.02,3.18],["c",.06,.72,0,1.83,-.21,2.79],["c",-.18,1.02,-.63,2.34,-1.02,3.09],["c",-.15,.33,-.48,.45,-.78,.3],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.03,-.54],["c",.75,-1.5,1.23,-3.45,1.17,-4.89],["c",-.06,-1.02,-.42,-2.01,-1.17,-3.15],["c",-.48,-.72,-1.02,-1.35,-1.89,-2.22],["c",-.57,-.57,-1.56,-1.5,-1.92,-1.77],["l",-.12,-.09],["l",0,1.68],["l",0,1.68],["l",-.21,0],["l",-.21,0],["l",0,-15],["z"],["m",.93,-8.07],["c",-.27,-.3,-.48,-.54,-.51,-.54],["c",0,0,0,.69,.03,1.02],["c",.15,1.47,.75,2.94,2.04,4.83],["l",1.08,1.53],["c",.39,.57,.84,1.2,.99,1.44],["c",.15,.24,.3,.45,.3,.45],["c",0,0,.03,-.09,.06,-.21],["c",.36,-1.59,-.15,-3.33,-1.47,-5.4],["c",-.63,-.93,-1.35,-1.83,-2.52,-3.12],["z"],["m",.06,6.72],["c",-.24,-.21,-.48,-.42,-.51,-.45],["l",-.06,-.06],["l",0,.33],["c",0,1.2,.3,2.34,.93,3.6],["c",.45,.9,.96,1.68,2.25,3.51],["c",.39,.54,.84,1.17,1.02,1.44],["c",.21,.33,.33,.51,.33,.48],["c",.06,-.09,.21,-.63,.3,-.99],["c",.06,-.33,.06,-.45,.06,-.96],["c",0,-.6,-.03,-.84,-.18,-1.35],["c",-.3,-1.08,-1.02,-2.28,-2.13,-3.57],["c",-.39,-.45,-1.44,-1.47,-2.01,-1.98],["z"],["m",0,6.72],["c",-.24,-.21,-.48,-.39,-.51,-.42],["l",-.06,-.06],["l",0,.33],["c",0,1.41,.45,2.82,1.38,4.35],["c",.42,.72,.72,1.14,1.86,2.73],["c",.36,.45,.75,.99,.87,1.2],["c",.15,.21,.3,.36,.3,.36],["c",.06,0,.3,-.48,.39,-.75],["c",.09,-.36,.12,-.63,.12,-1.05],["c",-.06,-1.05,-.45,-2.04,-1.2,-3.18],["c",-.57,-.87,-1.11,-1.53,-2.07,-2.49],["c",-.36,-.33,-.84,-.78,-1.08,-1.02],["z"]],w:6.682,h:39.694},"flags.d8th":{d:[["M",5.67,-21.63],["c",.24,-.12,.54,-.06,.69,.15],["c",.06,.06,.21,.36,.39,.66],["c",.84,1.77,1.26,3.36,1.32,5.1],["c",.03,1.29,-.21,2.37,-.81,3.63],["c",-.6,1.23,-1.26,2.13,-3.21,4.38],["c",-1.35,1.53,-1.86,2.19,-2.4,2.97],["c",-.63,.93,-1.11,1.92,-1.38,2.79],["c",-.15,.54,-.27,1.35,-.27,1.8],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",.48,-.3],["c",1.83,-1.11,3.12,-2.1,4.17,-3.12],["c",.78,-.81,1.32,-1.53,1.71,-2.31],["c",.45,-.93,.6,-1.74,.51,-2.88],["c",-.12,-1.56,-.63,-3.18,-1.47,-4.68],["c",-.12,-.21,-.15,-.33,-.06,-.51],["c",.06,-.15,.15,-.24,.33,-.33],["z"]],w:8.492,h:21.691},"flags.ugrace":{d:[["M",6.03,6.93],["c",.15,-.09,.33,-.06,.51,0],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.06,.39,-.03,.54],["c",-.06,.15,-10.89,8.88,-11.07,8.97],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.06,-.39,.03,-.54],["c",.06,-.15,10.89,-8.88,11.07,-8.97],["z"]],w:12.019,h:9.954},"flags.dgrace":{d:[["M",-6.06,-15.93],["c",.18,-.09,.33,-.12,.48,-.06],["c",.18,.09,14.01,8.04,14.1,8.1],["c",.12,.12,.18,.33,.18,.51],["c",-.03,.21,-.15,.39,-.36,.48],["c",-.18,.09,-.33,.12,-.48,.06],["c",-.18,-.09,-14.01,-8.04,-14.1,-8.1],["c",-.12,-.12,-.18,-.33,-.18,-.51],["c",.03,-.21,.15,-.39,.36,-.48],["z"]],w:15.12,h:9.212},"flags.d16th":{d:[["M",6.84,-22.53],["c",.27,-.12,.57,-.06,.72,.15],["c",.15,.15,.33,.87,.45,1.56],["c",.06,.33,.06,1.35,0,1.65],["c",-.06,.33,-.15,.78,-.27,1.11],["c",-.12,.33,-.45,.96,-.66,1.32],["l",-.18,.27],["l",.09,.18],["c",.48,1.02,.72,2.25,.69,3.3],["c",-.06,1.23,-.42,2.28,-1.26,3.45],["c",-.57,.87,-.99,1.32,-3,3.39],["c",-1.56,1.56,-2.22,2.4,-2.76,3.45],["c",-.42,.84,-.66,1.8,-.66,2.55],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,1.14],["l",0,1.11],["l",.27,-.15],["c",1.11,-.57,1.77,-.99,2.52,-1.47],["c",2.37,-1.56,3.69,-3.15,4.05,-4.83],["c",.03,-.18,.03,-.39,.03,-.78],["c",0,-.6,-.03,-.93,-.24,-1.5],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.5],["c",-.06,-.18,-.15,-.36,-.15,-.36],["c",-.03,0,-.03,.03,-.06,.06],["c",-.06,.12,-.96,1.02,-1.95,1.98],["c",-.63,.57,-1.26,1.17,-1.44,1.35],["c",-1.53,1.62,-2.28,2.85,-2.55,4.32],["c",-.03,.18,-.03,.54,-.06,.99],["l",0,.69],["l",.18,-.09],["c",.93,-.54,2.1,-1.29,2.82,-1.83],["c",.69,-.51,1.02,-.81,1.53,-1.29],["c",1.86,-1.89,2.37,-3.66,1.68,-5.82],["z"]],w:8.475,h:22.591},"flags.d32nd":{d:[["M",6.84,-29.13],["c",.27,-.12,.57,-.06,.72,.15],["c",.12,.12,.27,.63,.36,1.11],["c",.33,1.59,.06,3.06,-.81,4.47],["l",-.18,.27],["l",.09,.15],["c",.12,.24,.33,.69,.45,1.05],["c",.63,1.83,.45,3.57,-.57,5.22],["l",-.18,.3],["l",.15,.27],["c",.42,.87,.6,1.71,.57,2.61],["c",-.06,1.29,-.48,2.46,-1.35,3.78],["c",-.54,.81,-.93,1.29,-2.46,3],["c",-.51,.54,-1.05,1.17,-1.26,1.41],["c",-1.56,1.86,-2.25,3.36,-2.37,5.01],["l",0,.33],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,1.35],["l",.03,1.35],["l",.78,-.39],["c",1.38,-.69,2.34,-1.26,3.24,-1.92],["c",1.38,-1.02,2.28,-2.13,2.64,-3.21],["c",.15,-.48,.18,-.72,.18,-1.29],["c",0,-.57,-.06,-.9,-.24,-1.47],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.2],["c",-.09,-.18,-.12,-.21,-.12,-.15],["c",-.03,.09,-1.02,1.08,-2.04,2.04],["c",-1.17,1.08,-1.65,1.56,-2.07,2.04],["c",-.84,.96,-1.38,1.86,-1.68,2.76],["c",-.21,.57,-.27,.99,-.3,1.65],["l",0,.54],["l",.66,-.33],["c",3.57,-1.86,5.49,-3.69,5.94,-5.7],["c",.06,-.39,.06,-1.2,-.03,-1.65],["c",-.06,-.39,-.24,-.9,-.36,-1.2],["z"],["m",-.06,7.2],["c",-.06,-.15,-.12,-.33,-.15,-.45],["l",-.06,-.18],["l",-.18,.21],["l",-1.83,1.83],["c",-.87,.9,-1.77,1.8,-1.95,2.01],["c",-1.08,1.29,-1.62,2.31,-1.89,3.51],["c",-.06,.3,-.06,.51,-.09,.93],["l",0,.57],["l",.09,-.06],["c",.75,-.45,1.89,-1.26,2.52,-1.74],["c",.81,-.66,1.74,-1.53,2.22,-2.16],["c",1.26,-1.53,1.68,-3.06,1.32,-4.47],["z"]],w:8.385,h:29.191},"flags.d64th":{d:[["M",7.08,-32.88],["c",.3,-.12,.66,-.03,.78,.24],["c",.18,.33,.27,2.1,.15,2.64],["c",-.09,.39,-.21,.78,-.39,1.08],["l",-.15,.3],["l",.09,.27],["c",.03,.12,.09,.45,.12,.69],["c",.27,1.44,.18,2.55,-.3,3.6],["l",-.12,.33],["l",.06,.42],["c",.27,1.35,.33,2.82,.21,3.63],["c",-.12,.6,-.3,1.23,-.57,1.8],["l",-.15,.27],["l",.03,.42],["c",.06,1.02,.06,2.7,.03,3.06],["c",-.15,1.47,-.66,2.76,-1.74,4.41],["c",-.45,.69,-.75,1.11,-1.74,2.37],["c",-1.05,1.38,-1.5,1.98,-1.95,2.73],["c",-.93,1.5,-1.38,2.82,-1.44,4.2],["l",0,.42],["l",-.21,0],["l",-.21,0],["l",0,-15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,1.86],["l",0,1.89],["c",0,0,.21,-.03,.45,-.09],["c",2.22,-.39,4.08,-1.11,5.19,-2.01],["c",.63,-.54,1.02,-1.14,1.2,-1.8],["c",.06,-.3,.06,-1.14,-.03,-1.65],["c",-.03,-.18,-.06,-.39,-.09,-.48],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.45,6.15],["c",-.03,-.18,-.06,-.42,-.06,-.54],["l",-.03,-.18],["l",-.33,.3],["c",-.42,.36,-.87,.72,-1.68,1.29],["c",-1.98,1.38,-2.25,1.59,-2.85,2.16],["c",-.75,.69,-1.23,1.44,-1.47,2.19],["c",-.15,.45,-.18,.63,-.21,1.35],["l",0,.66],["l",.39,-.18],["c",1.83,-.9,3.45,-1.95,4.47,-2.91],["c",.93,-.9,1.53,-1.83,1.74,-2.82],["c",.06,-.33,.06,-.87,.03,-1.32],["z"],["m",-.27,4.86],["c",-.03,-.21,-.06,-.36,-.06,-.36],["c",0,-.03,-.12,.09,-.24,.24],["c",-.39,.48,-.99,1.08,-2.16,2.19],["c",-1.47,1.38,-1.92,1.83,-2.46,2.49],["c",-.66,.87,-1.08,1.74,-1.29,2.58],["c",-.09,.42,-.15,.87,-.15,1.44],["l",0,.54],["l",.48,-.33],["c",1.5,-1.02,2.58,-1.89,3.51,-2.82],["c",1.47,-1.47,2.25,-2.85,2.4,-4.26],["c",.03,-.39,.03,-1.17,-.03,-1.71],["z"],["m",-.66,7.68],["c",.03,-.15,.03,-.6,.03,-.99],["l",0,-.72],["l",-.27,.33],["l",-1.74,1.98],["c",-1.77,1.92,-2.43,2.76,-2.97,3.9],["c",-.51,1.02,-.72,1.77,-.75,2.91],["c",0,.63,0,.63,.06,.6],["c",.03,-.03,.3,-.27,.63,-.54],["c",.66,-.6,1.86,-1.8,2.31,-2.31],["c",1.65,-1.89,2.52,-3.54,2.7,-5.16],["z"]],w:8.485,h:32.932},"clefs.C":{d:[["M",.06,-14.94],["l",.09,-.06],["l",1.92,0],["l",1.92,0],["l",.09,.06],["l",.06,.09],["l",0,14.85],["l",0,14.82],["l",-.06,.09],["l",-.09,.06],["l",-1.92,0],["l",-1.92,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"],["m",5.37,0],["c",.09,-.06,.09,-.06,.57,-.06],["c",.45,0,.45,0,.54,.06],["l",.06,.09],["l",0,7.14],["l",0,7.11],["l",.09,-.06],["c",.18,-.18,.72,-.84,.96,-1.2],["c",.3,-.45,.66,-1.17,.84,-1.65],["c",.36,-.9,.57,-1.83,.6,-2.79],["c",.03,-.48,.03,-.54,.09,-.63],["c",.12,-.18,.36,-.21,.54,-.12],["c",.18,.09,.21,.15,.24,.66],["c",.06,.87,.21,1.56,.57,2.22],["c",.51,1.02,1.26,1.68,2.22,1.92],["c",.21,.06,.33,.06,.78,.06],["c",.45,0,.57,0,.84,-.06],["c",.45,-.12,.81,-.33,1.08,-.6],["c",.57,-.57,.87,-1.41,.99,-2.88],["c",.06,-.54,.06,-3,0,-3.57],["c",-.21,-2.58,-.84,-3.87,-2.16,-4.5],["c",-.48,-.21,-1.17,-.36,-1.77,-.36],["c",-.69,0,-1.29,.27,-1.5,.72],["c",-.06,.15,-.06,.21,-.06,.42],["c",0,.24,0,.3,.06,.45],["c",.12,.24,.24,.39,.63,.66],["c",.42,.3,.57,.48,.69,.72],["c",.06,.15,.06,.21,.06,.48],["c",0,.39,-.03,.63,-.21,.96],["c",-.3,.6,-.87,1.08,-1.5,1.26],["c",-.27,.06,-.87,.06,-1.14,0],["c",-.78,-.24,-1.44,-.87,-1.65,-1.68],["c",-.12,-.42,-.09,-1.17,.09,-1.71],["c",.51,-1.65,1.98,-2.82,3.81,-3.09],["c",.84,-.09,2.46,.03,3.51,.27],["c",2.22,.57,3.69,1.8,4.44,3.75],["c",.36,.93,.57,2.13,.57,3.36],["c",0,1.44,-.48,2.73,-1.38,3.81],["c",-1.26,1.5,-3.27,2.43,-5.28,2.43],["c",-.48,0,-.51,0,-.75,-.09],["c",-.15,-.03,-.48,-.21,-.78,-.36],["c",-.69,-.36,-.87,-.42,-1.26,-.42],["c",-.27,0,-.3,0,-.51,.09],["c",-.57,.3,-.81,.9,-.81,2.1],["c",0,1.23,.24,1.83,.81,2.13],["c",.21,.09,.24,.09,.51,.09],["c",.39,0,.57,-.06,1.26,-.42],["c",.3,-.15,.63,-.33,.78,-.36],["c",.24,-.09,.27,-.09,.75,-.09],["c",2.01,0,4.02,.93,5.28,2.4],["c",.9,1.11,1.38,2.4,1.38,3.84],["c",0,1.5,-.3,2.88,-.84,3.96],["c",-.78,1.59,-2.19,2.64,-4.17,3.15],["c",-1.05,.24,-2.67,.36,-3.51,.27],["c",-1.83,-.27,-3.3,-1.44,-3.81,-3.09],["c",-.18,-.54,-.21,-1.29,-.09,-1.74],["c",.15,-.6,.63,-1.2,1.23,-1.47],["c",.36,-.18,.57,-.21,.99,-.21],["c",.42,0,.63,.03,1.02,.21],["c",.42,.21,.84,.63,1.05,1.05],["c",.18,.36,.21,.6,.21,.96],["c",0,.3,0,.36,-.06,.51],["c",-.12,.24,-.27,.42,-.69,.72],["c",-.57,.42,-.69,.63,-.69,1.08],["c",0,.24,0,.3,.06,.45],["c",.12,.21,.3,.39,.57,.54],["c",.42,.18,.87,.21,1.53,.15],["c",1.08,-.15,1.8,-.57,2.34,-1.32],["c",.54,-.75,.84,-1.83,.99,-3.51],["c",.06,-.57,.06,-3.03,0,-3.57],["c",-.12,-1.47,-.42,-2.31,-.99,-2.88],["c",-.27,-.27,-.63,-.48,-1.08,-.6],["c",-.27,-.06,-.39,-.06,-.84,-.06],["c",-.45,0,-.57,0,-.78,.06],["c",-1.14,.27,-2.01,1.17,-2.46,2.49],["c",-.21,.57,-.3,.99,-.33,1.65],["c",-.03,.51,-.06,.57,-.24,.66],["c",-.12,.06,-.27,.06,-.39,0],["c",-.21,-.09,-.21,-.15,-.24,-.75],["c",-.09,-1.92,-.78,-3.72,-2.01,-5.19],["c",-.18,-.21,-.36,-.42,-.39,-.45],["l",-.09,-.06],["l",0,7.11],["l",0,7.14],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.54,.06],["c",-.48,0,-.48,0,-.57,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"]],w:20.31,h:29.97},"clefs.F":{d:[["M",6.3,-7.8],["c",.36,-.03,1.65,0,2.13,.03],["c",3.6,.42,6.03,2.1,6.93,4.86],["c",.27,.84,.36,1.5,.36,2.58],["c",0,.9,-.03,1.35,-.18,2.16],["c",-.78,3.78,-3.54,7.08,-8.37,9.96],["c",-1.74,1.05,-3.87,2.13,-6.18,3.12],["c",-.39,.18,-.75,.33,-.81,.36],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.15,.06,-.21,.51,-.48],["c",3,-1.77,5.13,-3.21,6.84,-4.74],["c",.51,-.45,1.59,-1.5,1.95,-1.95],["c",1.89,-2.19,2.88,-4.32,3.15,-6.78],["c",.06,-.42,.06,-1.77,0,-2.19],["c",-.24,-2.01,-.93,-3.63,-2.04,-4.71],["c",-.63,-.63,-1.29,-1.02,-2.07,-1.2],["c",-1.62,-.39,-3.36,.15,-4.56,1.44],["c",-.54,.6,-1.05,1.47,-1.32,2.22],["l",-.09,.21],["l",.24,-.12],["c",.39,-.21,.63,-.24,1.11,-.24],["c",.3,0,.45,0,.66,.06],["c",1.92,.48,2.85,2.55,1.95,4.38],["c",-.45,.99,-1.41,1.62,-2.46,1.71],["c",-1.47,.09,-2.91,-.87,-3.39,-2.25],["c",-.18,-.57,-.21,-1.32,-.03,-2.28],["c",.39,-2.25,1.83,-4.2,3.81,-5.19],["c",.69,-.36,1.59,-.6,2.37,-.69],["z"],["m",11.58,2.52],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.3,1.17,-.72,2.19,-1.89,1.89],["c",-.99,-.21,-1.5,-1.32,-1.02,-2.25],["c",.18,-.39,.6,-.69,1.02,-.78],["z"],["m",0,7.5],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.21,.87,-.3,1.71,-1.14,1.89],["c",-.87,.21,-1.71,-.3,-1.89,-1.14],["c",-.21,-.84,.3,-1.71,1.14,-1.89],["z"]],w:20.153,h:23.142},"clefs.G":{d:[["M",9.69,-37.41],["c",.09,-.09,.24,-.06,.36,0],["c",.12,.09,.57,.6,.96,1.11],["c",1.77,2.34,3.21,5.85,3.57,8.73],["c",.21,1.56,.03,3.27,-.45,4.86],["c",-.69,2.31,-1.92,4.47,-4.23,7.44],["c",-.3,.39,-.57,.72,-.6,.75],["c",-.03,.06,0,.15,.18,.78],["c",.54,1.68,1.38,4.44,1.68,5.49],["l",.09,.42],["l",.39,0],["c",1.47,.09,2.76,.51,3.96,1.29],["c",1.83,1.23,3.06,3.21,3.39,5.52],["c",.09,.45,.12,1.29,.06,1.74],["c",-.09,1.02,-.33,1.83,-.75,2.73],["c",-.84,1.71,-2.28,3.06,-4.02,3.72],["l",-.33,.12],["l",.03,1.26],["c",0,1.74,-.06,3.63,-.21,4.62],["c",-.45,3.06,-2.19,5.49,-4.47,6.21],["c",-.57,.18,-.9,.21,-1.59,.21],["c",-.69,0,-1.02,-.03,-1.65,-.21],["c",-1.14,-.27,-2.13,-.84,-2.94,-1.65],["c",-.99,-.99,-1.56,-2.16,-1.71,-3.54],["c",-.09,-.81,.06,-1.53,.45,-2.13],["c",.63,-.99,1.83,-1.56,3,-1.53],["c",1.5,.09,2.64,1.32,2.73,2.94],["c",.06,1.47,-.93,2.7,-2.37,2.97],["c",-.45,.06,-.84,.03,-1.29,-.09],["l",-.21,-.09],["l",.09,.12],["c",.39,.54,.78,.93,1.32,1.26],["c",1.35,.87,3.06,1.02,4.35,.36],["c",1.44,-.72,2.52,-2.28,2.97,-4.35],["c",.15,-.66,.24,-1.5,.3,-3.03],["c",.03,-.84,.03,-2.94,0,-3],["c",-.03,0,-.18,0,-.36,.03],["c",-.66,.12,-.99,.12,-1.83,.12],["c",-1.05,0,-1.71,-.06,-2.61,-.3],["c",-4.02,-.99,-7.11,-4.35,-7.8,-8.46],["c",-.12,-.66,-.12,-.99,-.12,-1.83],["c",0,-.84,0,-1.14,.15,-1.92],["c",.36,-2.28,1.41,-4.62,3.3,-7.29],["l",2.79,-3.6],["c",.54,-.66,.96,-1.2,.96,-1.23],["c",0,-.03,-.09,-.33,-.18,-.69],["c",-.96,-3.21,-1.41,-5.28,-1.59,-7.68],["c",-.12,-1.38,-.15,-3.09,-.06,-3.96],["c",.33,-2.67,1.38,-5.07,3.12,-7.08],["c",.36,-.42,.99,-1.05,1.17,-1.14],["z"],["m",2.01,4.71],["c",-.15,-.3,-.3,-.54,-.3,-.54],["c",-.03,0,-.18,.09,-.3,.21],["c",-2.4,1.74,-3.87,4.2,-4.26,7.11],["c",-.06,.54,-.06,1.41,-.03,1.89],["c",.09,1.29,.48,3.12,1.08,5.22],["c",.15,.42,.24,.78,.24,.81],["c",0,.03,.84,-1.11,1.23,-1.68],["c",1.89,-2.73,2.88,-5.07,3.15,-7.53],["c",.09,-.57,.12,-1.74,.06,-2.37],["c",-.09,-1.23,-.27,-1.92,-.87,-3.12],["z"],["m",-2.94,20.7],["c",-.21,-.72,-.39,-1.32,-.42,-1.32],["c",0,0,-1.2,1.47,-1.86,2.37],["c",-2.79,3.63,-4.02,6.3,-4.35,9.3],["c",-.03,.21,-.03,.69,-.03,1.08],["c",0,.69,0,.75,.06,1.11],["c",.12,.54,.27,.99,.51,1.47],["c",.69,1.38,1.83,2.55,3.42,3.42],["c",.96,.54,2.07,.9,3.21,1.08],["c",.78,.12,2.04,.12,2.94,-.03],["c",.51,-.06,.45,-.03,.42,-.3],["c",-.24,-3.33,-.72,-6.33,-1.62,-10.08],["c",-.09,-.39,-.18,-.75,-.18,-.78],["c",-.03,-.03,-.42,0,-.81,.09],["c",-.9,.18,-1.65,.57,-2.22,1.14],["c",-.72,.72,-1.08,1.65,-1.05,2.64],["c",.06,.96,.48,1.83,1.23,2.58],["c",.36,.36,.72,.63,1.17,.9],["c",.33,.18,.36,.21,.42,.33],["c",.18,.42,-.18,.9,-.6,.87],["c",-.18,-.03,-.84,-.36,-1.26,-.63],["c",-.78,-.51,-1.38,-1.11,-1.86,-1.83],["c",-1.77,-2.7,-.99,-6.42,1.71,-8.19],["c",.3,-.21,.81,-.48,1.17,-.63],["c",.3,-.09,1.02,-.3,1.14,-.3],["c",.06,0,.09,0,.09,-.03],["c",.03,-.03,-.51,-1.92,-1.23,-4.26],["z"],["m",3.78,7.41],["c",-.18,-.03,-.36,-.06,-.39,-.06],["c",-.03,0,0,.21,.18,1.02],["c",.75,3.18,1.26,6.3,1.5,9.09],["c",.06,.72,0,.69,.51,.42],["c",.78,-.36,1.44,-.96,1.98,-1.77],["c",1.08,-1.62,1.2,-3.69,.3,-5.55],["c",-.81,-1.62,-2.31,-2.79,-4.08,-3.15],["z"]],w:19.051,h:57.057},"clefs.perc":{d:[["M",5.07,-7.44],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"],["m",6.63,0],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"]],w:21,h:14.97},"tab.big":{d:[["M",20.16,-21.66],["c",.24,-.09,.66,.09,.78,.36],["c",.09,.21,.09,.24,-.18,.54],["c",-.78,.81,-1.86,1.44,-2.94,1.71],["c",-.87,.24,-1.71,.24,-2.55,.03],["l",-.06,-.03],["l",-.18,.99],["c",-.33,1.98,-.75,4.26,-.96,5.04],["c",-.42,1.65,-1.26,3.18,-2.28,4.14],["c",-.57,.57,-1.17,.9,-1.86,1.08],["c",-.18,.06,-.33,.06,-.66,.06],["c",-.54,0,-.78,-.03,-1.23,-.27],["c",-.39,-.18,-.66,-.39,-1.38,-.99],["c",-.3,-.24,-.66,-.51,-.75,-.57],["c",-.21,-.15,-.27,-.24,-.24,-.45],["c",.06,-.27,.36,-.6,.6,-.66],["c",.18,-.03,.33,.06,.9,.57],["c",.48,.42,.72,.57,.93,.69],["c",.66,.33,1.38,.21,1.95,-.36],["c",.63,-.6,1.05,-1.62,1.23,-3],["c",.03,-.18,.09,-.66,.09,-1.11],["c",.09,-1.56,.33,-3.81,.57,-5.49],["c",.06,-.33,.09,-.63,.09,-.63],["c",-.03,-.03,-.81,-.12,-1.02,-.12],["c",-.57,0,-1.32,.12,-1.8,.33],["c",-.87,.3,-1.35,.78,-1.5,1.41],["c",-.18,.63,.09,1.26,.66,1.65],["c",.12,.06,.15,.12,.18,.24],["c",.09,.27,.06,.57,-.09,.75],["c",-.03,.06,-.12,.09,-.27,.15],["c",-.72,.21,-1.44,.15,-2.1,-.18],["c",-.54,-.27,-.96,-.66,-1.2,-1.14],["c",-.39,-.75,-.33,-1.74,.15,-2.52],["c",.27,-.42,.84,-.93,1.41,-1.23],["c",1.17,-.57,2.88,-.9,4.8,-.9],["c",.69,0,.78,0,1.08,.06],["c",.45,.09,1.11,.3,2.07,.6],["c",1.47,.48,1.83,.57,2.55,.54],["c",1.02,-.06,2.04,-.45,2.94,-1.11],["c",.12,-.09,.24,-.18,.27,-.18],["z"],["m",-5.88,13.05],["c",.21,-.03,.81,0,1.08,.06],["c",.48,.12,.9,.42,.99,.69],["c",.03,.09,.03,.15,0,.27],["c",0,.09,-.03,.57,-.06,1.08],["c",-.09,2.19,-.24,5.76,-.39,8.28],["c",-.06,1.53,-.06,1.77,.03,2.01],["c",.09,.18,.15,.24,.3,.3],["c",.24,.12,.54,.06,1.23,-.27],["c",.57,-.27,.66,-.3,.75,-.24],["c",.09,.06,.18,.3,.18,.45],["c",0,.33,-.15,.51,-.45,.63],["c",-.12,.03,-.39,.15,-.6,.27],["c",-1.17,.6,-1.38,.69,-1.8,.72],["c",-.45,.03,-.78,-.09,-1.08,-.39],["c",-.39,-.42,-.66,-1.2,-1.02,-3.12],["c",-.24,-1.23,-.36,-2.07,-.54,-3.75],["l",0,-.18],["l",-.36,.45],["c",-.6,.75,-1.32,1.59,-1.95,2.25],["c",-.15,.18,-.27,.3,-.27,.33],["c",0,0,.06,.09,.15,.18],["c",.24,.33,.6,.57,1.05,.69],["c",.18,.06,.3,.06,.69,.06],["l",.48,.03],["l",.06,.12],["c",.15,.27,.03,.72,-.21,.9],["c",-.18,.12,-.93,.27,-1.41,.27],["c",-.84,0,-1.59,-.3,-1.98,-.84],["l",-.12,-.15],["l",-.45,.42],["c",-.99,.87,-1.53,1.32,-2.16,1.74],["c",-.78,.51,-1.5,.84,-2.1,.93],["c",-.69,.12,-1.2,.03,-1.95,-.42],["c",-.21,-.12,-.51,-.27,-.66,-.36],["c",-.24,-.12,-.3,-.18,-.33,-.24],["c",-.12,-.27,.15,-.78,.45,-.93],["c",.24,-.12,.33,-.09,.9,.18],["c",.6,.3,.84,.39,1.2,.36],["c",.87,-.09,1.77,-.69,3.24,-2.31],["c",2.67,-2.85,4.59,-5.94,5.7,-9.15],["c",.15,-.45,.24,-.63,.42,-.81],["c",.21,-.24,.6,-.45,.99,-.51],["z"],["m",-3.99,16.05],["c",.18,0,.69,-.03,1.17,0],["c",3.27,.03,5.37,.75,6,2.07],["c",.45,.99,.12,2.4,-.81,3.42],["c",-.24,.27,-.57,.57,-.84,.75],["c",-.09,.06,-.18,.09,-.18,.12],["c",0,0,.18,.03,.42,.09],["c",1.23,.3,2.01,.81,2.37,1.59],["c",.27,.54,.3,1.32,.09,2.1],["c",-.12,.36,-.45,1.05,-.69,1.35],["c",-.87,1.17,-2.1,1.92,-3.54,2.25],["c",-.36,.06,-.48,.06,-.96,.06],["c",-.45,0,-.66,0,-.84,-.03],["c",-.84,-.18,-1.47,-.51,-2.07,-1.11],["c",-.33,-.33,-.45,-.51,-.45,-.63],["c",0,-.06,.03,-.15,.06,-.24],["c",.18,-.33,.69,-.6,.93,-.48],["c",.03,.03,.15,.12,.27,.24],["c",.39,.42,.99,.57,1.62,.45],["c",1.05,-.21,1.98,-1.02,2.31,-2.01],["c",.48,-1.53,-.48,-2.55,-2.58,-2.67],["c",-.21,0,-.36,-.03,-.42,-.06],["c",-.15,-.09,-.21,-.51,-.06,-.78],["c",.12,-.27,.24,-.33,.6,-.36],["c",.57,-.06,1.11,-.42,1.5,-.99],["c",.48,-.72,.54,-1.59,.18,-2.31],["c",-.12,-.21,-.45,-.54,-.69,-.69],["c",-.33,-.21,-.93,-.45,-1.35,-.51],["l",-.12,-.03],["l",-.06,.48],["c",-.54,2.94,-1.14,6.24,-1.29,6.75],["c",-.33,1.35,-.93,2.61,-1.65,3.6],["c",-.3,.36,-.81,.9,-1.14,1.14],["c",-.3,.24,-.84,.48,-1.14,.57],["c",-.33,.09,-.96,.09,-1.26,.03],["c",-.45,-.12,-.87,-.39,-1.53,-.96],["c",-.24,-.15,-.51,-.39,-.63,-.48],["c",-.3,-.21,-.33,-.33,-.21,-.63],["c",.12,-.18,.27,-.36,.42,-.45],["c",.27,-.12,.36,-.09,.87,.33],["c",.78,.6,1.08,.75,1.65,.72],["c",.45,-.03,.81,-.21,1.17,-.54],["c",.87,-.9,1.38,-2.85,1.38,-5.37],["c",0,-.6,.03,-1.11,.12,-2.04],["c",.06,-.69,.24,-2.01,.33,-2.58],["c",.06,-.24,.06,-.42,.06,-.42],["c",0,0,-.12,.03,-.21,.09],["c",-1.44,.57,-2.16,1.65,-1.74,2.55],["c",.09,.15,.18,.24,.27,.33],["c",.24,.21,.3,.27,.33,.39],["c",.06,.24,0,.63,-.15,.78],["c",-.09,.12,-.54,.21,-.96,.24],["c",-1.02,.03,-2.01,-.48,-2.43,-1.32],["c",-.21,-.45,-.27,-.9,-.15,-1.44],["c",.06,-.27,.21,-.66,.39,-.93],["c",.87,-1.29,3,-2.22,5.64,-2.43],["z"]],w:19.643,h:43.325},"tab.tiny":{d:[["M",16.02,-17.25],["c",.12,-.09,.15,-.09,.27,-.09],["c",.21,.03,.51,.3,.51,.45],["c",0,.06,-.12,.18,-.3,.36],["c",-1.11,1.08,-2.55,1.59,-3.84,1.41],["c",-.15,-.03,-.33,-.06,-.39,-.09],["c",-.06,-.03,-.09,-.03,-.12,-.03],["c",0,0,-.06,.42,-.15,.93],["c",-.33,2.01,-.66,3.69,-.84,4.26],["c",-.42,1.41,-1.23,2.67,-2.16,3.33],["c",-.27,.18,-.75,.42,-.99,.48],["c",-.3,.09,-.72,.09,-1.02,.06],["c",-.45,-.09,-.84,-.33,-1.53,-.9],["c",-.21,-.18,-.51,-.39,-.63,-.48],["c",-.27,-.21,-.3,-.24,-.3,-.36],["c",0,-.12,.09,-.36,.18,-.45],["c",.09,-.09,.27,-.18,.36,-.18],["c",.12,0,.3,.12,.66,.45],["c",.57,.51,.87,.69,1.23,.72],["c",.93,.06,1.68,-.78,1.98,-2.37],["c",.09,-.39,.15,-.75,.18,-1.53],["c",.06,-.99,.24,-2.79,.42,-4.05],["c",.03,-.3,.06,-.57,.06,-.6],["c",0,-.06,-.03,-.09,-.15,-.12],["c",-.9,-.18,-2.13,.06,-2.76,.57],["c",-.36,.3,-.51,.6,-.51,1.02],["c",0,.45,.15,.75,.48,.99],["c",.06,.06,.15,.18,.18,.24],["c",.12,.24,.03,.63,-.15,.69],["c",-.24,.12,-.6,.15,-.9,.15],["c",-.36,-.03,-.57,-.09,-.87,-.24],["c",-.78,-.36,-1.23,-1.11,-1.2,-1.92],["c",.12,-1.53,1.74,-2.49,4.62,-2.7],["c",1.2,-.09,1.47,-.03,3.33,.57],["c",.9,.3,1.14,.36,1.56,.39],["c",.45,0,.93,-.06,1.38,-.21],["c",.51,-.18,.81,-.33,1.41,-.75],["z"],["m",-4.68,10.38],["c",.39,-.06,.84,0,1.2,.15],["c",.24,.12,.36,.21,.45,.36],["l",.09,.09],["l",-.06,1.41],["c",-.09,2.19,-.18,3.96,-.27,5.49],["c",-.03,.78,-.06,1.59,-.06,1.86],["c",0,.42,0,.48,.06,.57],["c",.06,.18,.18,.24,.36,.27],["c",.18,0,.39,-.06,.84,-.27],["c",.45,-.21,.54,-.24,.63,-.18],["c",.12,.12,.15,.54,.03,.69],["c",-.03,.03,-.15,.12,-.27,.18],["c",-.15,.03,-.3,.12,-.36,.15],["c",-.87,.45,-1.02,.51,-1.26,.57],["c",-.33,.09,-.6,.06,-.84,-.06],["c",-.42,-.18,-.63,-.6,-.87,-1.44],["c",-.3,-1.23,-.57,-2.97,-.66,-4.08],["c",0,-.18,-.03,-.3,-.03,-.33],["l",-.06,.06],["c",-.18,.27,-1.11,1.38,-1.68,2.01],["l",-.33,.33],["l",.06,.09],["c",.06,.15,.27,.33,.48,.42],["c",.27,.18,.51,.24,.96,.27],["l",.39,0],["l",.03,.12],["c",.12,.21,.03,.57,-.15,.69],["c",-.03,.03,-.21,.09,-.36,.15],["c",-.27,.06,-.39,.06,-.75,.06],["c",-.48,0,-.75,-.03,-1.08,-.21],["c",-.21,-.12,-.51,-.36,-.57,-.48],["l",-.03,-.09],["l",-.39,.36],["c",-1.47,1.35,-2.49,1.98,-3.42,2.13],["c",-.54,.09,-.96,-.03,-1.62,-.39],["c",-.21,-.15,-.45,-.27,-.54,-.3],["c",-.18,-.09,-.21,-.21,-.12,-.45],["c",.06,-.27,.33,-.48,.54,-.48],["c",.03,0,.27,.09,.48,.21],["c",.48,.24,.69,.27,.99,.27],["c",.6,-.06,1.17,-.42,2.1,-1.35],["c",2.22,-2.22,4.02,-4.98,4.95,-7.59],["c",.21,-.57,.3,-.78,.48,-.93],["c",.15,-.15,.42,-.27,.66,-.33],["z"],["m",-3.06,12.84],["c",.27,-.03,1.68,0,2.01,.03],["c",1.92,.18,3.15,.69,3.63,1.5],["c",.18,.33,.24,.51,.21,.93],["c",0,.45,-.06,.72,-.24,1.11],["c",-.24,.51,-.69,1.02,-1.17,1.35],["c",-.21,.15,-.21,.15,-.12,.18],["c",.72,.15,1.11,.3,1.5,.57],["c",.39,.24,.63,.57,.75,.96],["c",.09,.3,.09,.96,0,1.29],["c",-.15,.57,-.39,1.05,-.78,1.5],["c",-.66,.75,-1.62,1.32,-2.61,1.53],["c",-.27,.06,-.42,.06,-.84,.06],["c",-.48,0,-.57,0,-.81,-.06],["c",-.6,-.18,-1.05,-.42,-1.47,-.81],["c",-.36,-.39,-.42,-.51,-.3,-.75],["c",.12,-.21,.39,-.39,.6,-.39],["c",.09,0,.15,.03,.33,.18],["c",.12,.12,.27,.24,.36,.27],["c",.96,.48,2.46,-.33,2.82,-1.5],["c",.24,-.81,-.03,-1.44,-.69,-1.77],["c",-.39,-.21,-1.02,-.33,-1.53,-.33],["c",-.18,0,-.21,0,-.27,-.09],["c",-.06,-.09,-.06,-.3,-.03,-.48],["c",.06,-.18,.18,-.36,.33,-.36],["c",.39,-.06,.51,-.09,.72,-.18],["c",.69,-.36,1.11,-1.23,.99,-2.01],["c",-.09,-.51,-.42,-.9,-.93,-1.17],["c",-.24,-.12,-.6,-.27,-.87,-.3],["c",-.09,-.03,-.09,-.03,-.12,.12],["c",0,.09,-.21,1.11,-.42,2.25],["c",-.66,3.75,-.72,3.99,-1.26,5.07],["c",-.9,1.89,-2.25,2.85,-3.48,2.61],["c",-.39,-.09,-.69,-.27,-1.38,-.84],["c",-.63,-.51,-.63,-.48,-.63,-.6],["c",0,-.18,.18,-.48,.39,-.57],["c",.21,-.12,.3,-.09,.81,.33],["c",.15,.15,.39,.3,.54,.36],["c",.18,.12,.27,.12,.48,.15],["c",.99,.06,1.71,-.78,2.04,-2.46],["c",.12,-.66,.18,-1.14,.21,-2.22],["c",.03,-1.23,.12,-2.25,.36,-3.63],["c",.03,-.24,.06,-.45,.06,-.48],["c",-.06,-.03,-.66,.27,-.9,.42],["c",-.06,.06,-.21,.18,-.33,.3],["c",-.57,.57,-.6,1.35,-.06,1.74],["c",.18,.12,.24,.24,.21,.51],["c",-.03,.3,-.15,.42,-.57,.48],["c",-1.11,.24,-2.22,-.42,-2.43,-1.38],["c",-.09,-.45,.03,-1.02,.3,-1.47],["c",.18,-.24,.6,-.63,.9,-.84],["c",.9,-.6,2.28,-1.02,3.69,-1.11],["z"]],w:15.709,h:34.656},"timesig.common":{d:[["M",6.66,-7.83],["c",.72,-.06,1.41,-.03,1.98,.09],["c",1.2,.27,2.34,.96,3.09,1.92],["c",.63,.81,1.08,1.86,1.14,2.73],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,0,-.09,-.12,-.24,-.27],["c",-1.02,-1.11,-2.55,-1.68,-4.08,-1.5],["c",-1.29,.15,-2.04,.69,-2.4,1.74],["c",-.36,.93,-.42,1.89,-.42,5.37],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.63,1.68,1.41,2.07],["c",.81,.39,2.16,.45,3.18,.09],["c",1.29,-.45,2.37,-1.53,3.03,-2.97],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.06,.39,-.42,1.38,-.69,1.89],["c",-.96,1.8,-2.49,2.94,-4.23,3.18],["c",-.99,.12,-2.58,-.06,-3.63,-.45],["c",-.96,-.36,-1.71,-.84,-2.4,-1.5],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.9,-3.45,2.01,-4.56],["c",.69,-.66,1.44,-1.11,2.37,-1.47],["c",.63,-.24,1.47,-.42,2.22,-.48],["z"]],w:13.038,h:15.689},"timesig.cut":{d:[["M",6.24,-10.44],["c",.09,-.06,.09,-.06,.48,-.06],["c",.36,0,.36,0,.45,.06],["l",.06,.09],["l",0,1.23],["l",0,1.26],["l",.27,0],["c",1.26,0,2.49,.45,3.48,1.29],["c",1.05,.87,1.8,2.28,1.89,3.48],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,-.03,-.45,-.51,-.66,-.69],["c",-.87,-.69,-1.83,-1.05,-2.94,-1.11],["l",-.42,0],["l",0,7.17],["l",0,7.14],["l",.42,0],["c",.69,-.03,1.23,-.18,1.86,-.51],["c",1.05,-.51,1.89,-1.47,2.46,-2.7],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.03,.24,-.21,.78,-.39,1.2],["c",-.96,2.37,-2.94,3.9,-5.13,3.9],["l",-.3,0],["l",0,1.26],["l",0,1.23],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.45,.06],["c",-.39,0,-.39,0,-.48,-.06],["l",-.06,-.09],["l",0,-1.29],["l",0,-1.29],["l",-.21,-.03],["c",-1.23,-.21,-2.31,-.63,-3.21,-1.29],["c",-.15,-.09,-.45,-.36,-.66,-.57],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.93,-3.45,2.04,-4.59],["c",.42,-.39,.78,-.66,1.26,-.93],["c",.75,-.45,1.65,-.75,2.61,-.9],["l",.21,-.03],["l",0,-1.29],["l",0,-1.29],["z"],["m",-.06,10.44],["c",0,-5.58,0,-6.99,-.03,-6.99],["c",-.15,0,-.63,.27,-.87,.45],["c",-.45,.36,-.75,.93,-.93,1.77],["c",-.18,.81,-.24,1.8,-.24,4.74],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.66,1.68,1.41,2.07],["c",.12,.06,.3,.12,.33,.15],["l",.09,0],["l",0,-6.96],["z"]],w:13.038,h:20.97},"timesig.imperfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.imperfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},f:{d:[["M",9.93,-14.28],["c",1.53,-.18,2.88,.45,3.12,1.5],["c",.12,.51,0,1.32,-.27,1.86],["c",-.15,.3,-.42,.57,-.63,.69],["c",-.69,.36,-1.56,.03,-1.83,-.69],["c",-.09,-.24,-.09,-.69,0,-.87],["c",.06,-.12,.21,-.24,.45,-.42],["c",.42,-.24,.57,-.45,.6,-.72],["c",.03,-.33,-.09,-.39,-.63,-.42],["c",-.3,0,-.45,0,-.6,.03],["c",-.81,.21,-1.35,.93,-1.74,2.46],["c",-.06,.27,-.48,2.25,-.48,2.31],["c",0,.03,.39,.03,.9,.03],["c",.72,0,.9,0,.99,.06],["c",.42,.15,.45,.72,.03,.9],["c",-.12,.06,-.24,.06,-1.17,.06],["l",-1.05,0],["l",-.78,2.55],["c",-.45,1.41,-.87,2.79,-.96,3.06],["c",-.87,2.37,-2.37,4.74,-3.78,5.91],["c",-1.05,.9,-2.04,1.23,-3.09,1.08],["c",-1.11,-.18,-1.89,-.78,-2.04,-1.59],["c",-.12,-.66,.15,-1.71,.54,-2.19],["c",.69,-.75,1.86,-.54,2.22,.39],["c",.06,.15,.09,.27,.09,.48],["c",0,.24,-.03,.27,-.12,.42],["c",-.03,.09,-.15,.18,-.27,.27],["c",-.09,.06,-.27,.21,-.36,.27],["c",-.24,.18,-.36,.36,-.39,.6],["c",-.03,.33,.09,.39,.63,.42],["c",.42,0,.63,-.03,.9,-.15],["c",.6,-.3,.96,-.96,1.38,-2.64],["c",.09,-.42,.63,-2.55,1.17,-4.77],["l",1.02,-4.08],["c",0,-.03,-.36,-.03,-.81,-.03],["c",-.72,0,-.81,0,-.93,-.06],["c",-.42,-.18,-.39,-.75,.03,-.9],["c",.09,-.06,.27,-.06,1.05,-.06],["l",.96,0],["l",0,-.09],["c",.06,-.18,.3,-.72,.51,-1.17],["c",1.2,-2.46,3.3,-4.23,5.34,-4.5],["z"]],w:16.155,h:19.445},m:{d:[["M",2.79,-8.91],["c",.09,0,.3,-.03,.45,-.03],["c",.24,.03,.3,.03,.45,.12],["c",.36,.15,.63,.54,.75,1.02],["l",.03,.21],["l",.33,-.3],["c",.69,-.69,1.38,-1.02,2.07,-1.02],["c",.27,0,.33,0,.48,.06],["c",.21,.09,.48,.36,.63,.6],["c",.03,.09,.12,.27,.18,.42],["c",.03,.15,.09,.27,.12,.27],["c",0,0,.09,-.09,.18,-.21],["c",.33,-.39,.87,-.81,1.29,-.99],["c",.78,-.33,1.47,-.21,2.01,.33],["c",.3,.33,.48,.69,.6,1.14],["c",.09,.42,.06,.54,-.54,3.06],["c",-.33,1.29,-.57,2.4,-.57,2.43],["c",0,.12,.09,.21,.21,.21],["c",.24,0,.75,-.3,1.2,-.72],["c",.45,-.39,.6,-.45,.78,-.27],["c",.18,.18,.09,.36,-.45,.87],["c",-1.05,.96,-1.83,1.47,-2.58,1.71],["c",-.93,.33,-1.53,.21,-1.8,-.33],["c",-.06,-.15,-.06,-.21,-.06,-.45],["c",0,-.24,.03,-.48,.6,-2.82],["c",.42,-1.71,.6,-2.64,.63,-2.79],["c",.03,-.57,-.3,-.75,-.84,-.48],["c",-.24,.12,-.54,.39,-.66,.63],["c",-.03,.09,-.42,1.38,-.9,3],["c",-.9,3.15,-.84,3,-1.14,3.15],["l",-.15,.09],["l",-.78,0],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.36,-1.38,.84,-2.97],["c",.57,-2.04,.81,-2.97,.84,-3.12],["c",.03,-.54,-.3,-.72,-.84,-.45],["c",-.24,.12,-.57,.42,-.66,.63],["c",-.06,.09,-.51,1.44,-1.05,2.97],["c",-.51,1.56,-.99,2.85,-.99,2.91],["c",-.06,.12,-.21,.24,-.36,.3],["c",-.12,.06,-.21,.06,-.9,.06],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.45,-1.38,.99,-2.97],["c",1.05,-3.18,1.05,-3.18,.93,-3.45],["c",-.12,-.27,-.39,-.3,-.72,-.15],["c",-.54,.27,-1.14,1.17,-1.56,2.4],["c",-.06,.15,-.15,.3,-.18,.36],["c",-.21,.21,-.57,.27,-.72,.09],["c",-.09,-.09,-.06,-.21,.06,-.63],["c",.48,-1.26,1.26,-2.46,2.01,-3.21],["c",.57,-.54,1.2,-.87,1.83,-1.02],["z"]],w:14.687,h:9.126},p:{d:[["M",1.92,-8.7],["c",.27,-.09,.81,-.06,1.11,.03],["c",.54,.18,.93,.51,1.17,.99],["c",.09,.15,.15,.33,.18,.36],["l",0,.12],["l",.3,-.27],["c",.66,-.6,1.35,-1.02,2.13,-1.2],["c",.21,-.06,.33,-.06,.78,-.06],["c",.45,0,.51,0,.84,.09],["c",1.29,.33,2.07,1.32,2.25,2.79],["c",.09,.81,-.09,2.01,-.45,2.79],["c",-.54,1.26,-1.86,2.55,-3.18,3.03],["c",-.45,.18,-.81,.24,-1.29,.24],["c",-.69,-.03,-1.35,-.18,-1.86,-.45],["c",-.3,-.15,-.51,-.18,-.69,-.09],["c",-.09,.03,-.18,.09,-.18,.12],["c",-.09,.12,-1.05,2.94,-1.05,3.06],["c",0,.24,.18,.48,.51,.63],["c",.18,.06,.54,.15,.75,.15],["c",.21,0,.36,.06,.42,.18],["c",.12,.18,.06,.42,-.12,.54],["c",-.09,.03,-.15,.03,-.78,0],["c",-1.98,-.15,-3.81,-.15,-5.79,0],["c",-.63,.03,-.69,.03,-.78,0],["c",-.24,-.15,-.24,-.57,.03,-.66],["c",.06,-.03,.48,-.09,.99,-.12],["c",.87,-.06,1.11,-.09,1.35,-.21],["c",.18,-.06,.33,-.18,.39,-.3],["c",.06,-.12,3.24,-9.42,3.27,-9.6],["c",.06,-.33,.03,-.57,-.15,-.69],["c",-.09,-.06,-.12,-.06,-.3,-.06],["c",-.69,.06,-1.53,1.02,-2.28,2.61],["c",-.09,.21,-.21,.45,-.27,.51],["c",-.09,.12,-.33,.24,-.48,.24],["c",-.18,0,-.36,-.15,-.36,-.3],["c",0,-.24,.78,-1.83,1.26,-2.55],["c",.72,-1.11,1.47,-1.74,2.28,-1.92],["z"],["m",5.37,1.47],["c",-.27,-.12,-.75,-.03,-1.14,.21],["c",-.75,.48,-1.47,1.68,-1.89,3.15],["c",-.45,1.47,-.42,2.34,0,2.7],["c",.45,.39,1.26,.21,1.83,-.36],["c",.51,-.51,.99,-1.68,1.38,-3.27],["c",.3,-1.17,.33,-1.74,.15,-2.13],["c",-.09,-.15,-.15,-.21,-.33,-.3],["z"]],w:14.689,h:13.127},r:{d:[["M",6.33,-9.12],["c",.27,-.03,.93,0,1.2,.06],["c",.84,.21,1.23,.81,1.02,1.53],["c",-.24,.75,-.9,1.17,-1.56,.96],["c",-.33,-.09,-.51,-.3,-.66,-.75],["c",-.03,-.12,-.09,-.24,-.12,-.3],["c",-.09,-.15,-.3,-.24,-.48,-.24],["c",-.57,0,-1.38,.54,-1.65,1.08],["c",-.06,.15,-.33,1.17,-.9,3.27],["c",-.57,2.31,-.81,3.12,-.87,3.21],["c",-.03,.06,-.12,.15,-.18,.21],["l",-.12,.06],["l",-.81,.03],["c",-.69,0,-.81,0,-.9,-.03],["c",-.09,-.06,-.18,-.21,-.18,-.3],["c",0,-.06,.39,-1.62,.9,-3.51],["c",.84,-3.24,.87,-3.45,.87,-3.72],["c",0,-.21,0,-.27,-.03,-.36],["c",-.12,-.15,-.21,-.24,-.42,-.24],["c",-.24,0,-.45,.15,-.78,.42],["c",-.33,.36,-.45,.54,-.72,1.14],["c",-.03,.12,-.21,.24,-.36,.27],["c",-.12,0,-.15,0,-.24,-.06],["c",-.18,-.12,-.18,-.21,-.06,-.54],["c",.21,-.57,.42,-.93,.78,-1.32],["c",.54,-.51,1.2,-.81,1.95,-.87],["c",.81,-.03,1.53,.3,1.92,.87],["l",.12,.18],["l",.09,-.09],["c",.57,-.45,1.41,-.84,2.19,-.96],["z"]],w:9.41,h:9.132},s:{d:[["M",4.47,-8.73],["c",.09,0,.36,-.03,.57,-.03],["c",.75,.03,1.29,.24,1.71,.63],["c",.51,.54,.66,1.26,.36,1.83],["c",-.24,.42,-.63,.57,-1.11,.42],["c",-.33,-.09,-.6,-.36,-.6,-.57],["c",0,-.03,.06,-.21,.15,-.39],["c",.12,-.21,.15,-.33,.18,-.48],["c",0,-.24,-.06,-.48,-.15,-.6],["c",-.15,-.21,-.42,-.24,-.75,-.15],["c",-.27,.06,-.48,.18,-.69,.36],["c",-.39,.39,-.51,.96,-.33,1.38],["c",.09,.21,.42,.51,.78,.72],["c",1.11,.69,1.59,1.11,1.89,1.68],["c",.21,.39,.24,.78,.15,1.29],["c",-.18,1.2,-1.17,2.16,-2.52,2.52],["c",-1.02,.24,-1.95,.12,-2.7,-.42],["c",-.72,-.51,-.99,-1.47,-.6,-2.19],["c",.24,-.48,.72,-.63,1.17,-.42],["c",.33,.18,.54,.45,.57,.81],["c",0,.21,-.03,.3,-.33,.51],["c",-.33,.24,-.39,.42,-.27,.69],["c",.06,.15,.21,.27,.45,.33],["c",.3,.09,.87,.09,1.2,0],["c",.75,-.21,1.23,-.72,1.29,-1.35],["c",.03,-.42,-.15,-.81,-.54,-1.2],["c",-.24,-.24,-.48,-.42,-1.41,-1.02],["c",-.69,-.42,-1.05,-.93,-1.05,-1.47],["c",0,-.39,.12,-.87,.3,-1.23],["c",.27,-.57,.78,-1.05,1.38,-1.35],["c",.24,-.12,.63,-.27,.9,-.3],["z"]],w:6.632,h:8.758},z:{d:[["M",2.64,-7.95],["c",.36,-.09,.81,-.03,1.71,.27],["c",.78,.21,.96,.27,1.74,.3],["c",.87,.06,1.02,.03,1.38,-.21],["c",.21,-.15,.33,-.15,.48,-.06],["c",.15,.09,.21,.3,.15,.45],["c",-.03,.06,-1.26,1.26,-2.76,2.67],["l",-2.73,2.55],["l",.54,.03],["c",.54,.03,.72,.03,2.01,.15],["c",.36,.03,.9,.06,1.2,.09],["c",.66,0,.81,-.03,1.02,-.24],["c",.3,-.3,.39,-.72,.27,-1.23],["c",-.06,-.27,-.06,-.27,-.03,-.39],["c",.15,-.3,.54,-.27,.69,.03],["c",.15,.33,.27,1.02,.27,1.5],["c",0,1.47,-1.11,2.7,-2.52,2.79],["c",-.57,.03,-1.02,-.09,-2.01,-.51],["c",-1.02,-.42,-1.23,-.48,-2.13,-.54],["c",-.81,-.06,-.96,-.03,-1.26,.18],["c",-.12,.06,-.24,.12,-.27,.12],["c",-.27,0,-.45,-.3,-.36,-.51],["c",.03,-.06,1.32,-1.32,2.91,-2.79],["l",2.88,-2.73],["c",-.03,0,-.21,.03,-.42,.06],["c",-.21,.03,-.78,.09,-1.23,.12],["c",-1.11,.12,-1.23,.15,-1.95,.27],["c",-.72,.15,-1.17,.18,-1.29,.09],["c",-.27,-.18,-.21,-.75,.12,-1.26],["c",.39,-.6,.93,-1.02,1.59,-1.2],["z"]],w:8.573,h:8.743},"+":{d:[["M",3.48,-9.3],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.29],["l",0,1.29],["l",1.29,0],["c",1.23,0,1.29,0,1.41,.06],["c",.06,.03,.15,.09,.18,.12],["c",.12,.09,.21,.33,.21,.48],["c",0,.15,-.09,.39,-.21,.48],["c",-.03,.03,-.12,.09,-.18,.12],["c",-.12,.06,-.18,.06,-1.41,.06],["l",-1.29,0],["l",0,1.29],["c",0,1.23,0,1.29,-.06,1.41],["c",-.09,.18,-.15,.24,-.3,.33],["c",-.21,.09,-.39,.09,-.57,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.41],["l",0,-1.29],["l",-1.29,0],["c",-1.23,0,-1.29,0,-1.41,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.26,0],["l",1.29,0],["l",0,-1.29],["c",0,-1.23,0,-1.29,.06,-1.41],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:7.507,h:7.515},",":{d:[["M",1.85,-3.36],["c",.57,-.15,1.17,.03,1.59,.45],["c",.45,.45,.6,.96,.51,1.89],["c",-.09,1.23,-.42,2.46,-.99,3.93],["c",-.3,.72,-.72,1.62,-.78,1.68],["c",-.18,.21,-.51,.18,-.66,-.06],["c",-.03,-.06,-.06,-.15,-.06,-.18],["c",0,-.06,.12,-.33,.24,-.63],["c",.84,-1.8,1.02,-2.61,.69,-3.24],["c",-.12,-.24,-.27,-.36,-.75,-.6],["c",-.36,-.15,-.42,-.21,-.6,-.39],["c",-.69,-.69,-.69,-1.71,0,-2.4],["c",.21,-.21,.51,-.39,.81,-.45],["z"]],w:3.452,h:8.143},"-":{d:[["M",.18,-5.34],["c",.09,-.06,.15,-.06,2.31,-.06],["c",2.46,0,2.37,0,2.46,.21],["c",.12,.21,.03,.42,-.15,.54],["c",-.09,.06,-.15,.06,-2.28,.06],["c",-2.16,0,-2.22,0,-2.31,-.06],["c",-.27,-.15,-.27,-.54,-.03,-.69],["z"]],w:5.001,h:.81},".":{d:[["M",1.32,-3.36],["c",1.05,-.27,2.1,.57,2.1,1.65],["c",0,1.08,-1.05,1.92,-2.1,1.65],["c",-.9,-.21,-1.5,-1.14,-1.26,-2.04],["c",.12,-.63,.63,-1.11,1.26,-1.26],["z"]],w:3.413,h:3.402},"scripts.wedge":{d:[["M",-3.66,-7.44],["c",.06,-.09,0,-.09,.81,.03],["c",1.86,.3,3.84,.3,5.73,0],["c",.78,-.12,.72,-.12,.78,-.03],["c",.15,.15,.12,.24,-.24,.6],["c",-.93,.93,-1.98,2.76,-2.67,4.62],["c",-.3,.78,-.51,1.71,-.51,2.13],["c",0,.15,0,.18,-.06,.27],["c",-.12,.09,-.24,.09,-.36,0],["c",-.06,-.09,-.06,-.12,-.06,-.27],["c",0,-.42,-.21,-1.35,-.51,-2.13],["c",-.69,-1.86,-1.74,-3.69,-2.67,-4.62],["c",-.36,-.36,-.39,-.45,-.24,-.6],["z"]],w:7.49,h:7.752},"scripts.thumb":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.27,1.41,-1.08,2.43,-2.16,2.73],["l",-.18,.06],["l",0,.12],["c",.03,.06,.06,.45,.09,.87],["c",.03,.57,.03,.78,0,.84],["c",-.09,.27,-.39,.48,-.66,.48],["c",-.27,0,-.57,-.21,-.66,-.48],["c",-.03,-.06,-.03,-.27,0,-.84],["c",.03,-.42,.06,-.81,.09,-.87],["l",0,-.12],["l",-.18,-.06],["c",-1.08,-.3,-1.89,-1.32,-2.16,-2.73],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.05,.9],["c",-.15,-.09,-.21,-.09,-.45,-.12],["c",-.15,0,-.3,.03,-.39,.03],["c",-.57,.18,-.9,.72,-1.08,1.74],["c",-.06,.48,-.06,1.8,0,2.28],["c",.15,.9,.42,1.44,.9,1.65],["c",.18,.09,.21,.09,.51,.09],["c",.3,0,.33,0,.51,-.09],["c",.48,-.21,.75,-.75,.9,-1.65],["c",.03,-.27,.03,-.54,.03,-1.14],["c",0,-.6,0,-.87,-.03,-1.14],["c",-.15,-.9,-.45,-1.44,-.9,-1.65],["z"]],w:5.955,h:9.75},"scripts.open":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.33,1.74,-1.47,2.85,-2.91,2.85],["c",-1.44,0,-2.58,-1.11,-2.91,-2.85],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.11,.9],["c",-.21,-.09,-.27,-.09,-.51,-.12],["c",-.3,0,-.42,.03,-.66,.15],["c",-.24,.12,-.51,.39,-.66,.63],["c",-.54,.93,-.63,2.64,-.21,3.81],["c",.21,.54,.51,.9,.93,1.11],["c",.21,.09,.24,.09,.54,.09],["c",.3,0,.33,0,.54,-.09],["c",.42,-.21,.72,-.57,.93,-1.11],["c",.36,-.99,.36,-2.37,0,-3.36],["c",-.21,-.54,-.51,-.9,-.9,-1.11],["z"]],w:5.955,h:7.5},"scripts.longphrase":{d:[["M",1.47,-15.09],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.54,.06,11.25],["l",0,11.25],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-3.39,-.03,-11.25],["l",0,-11.25],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:23.04},"scripts.mediumphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.39,.06,7.5],["l",0,7.5],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-2.28,-.03,-7.5],["l",0,-7.5],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:15.54},"scripts.shortphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.21,.06,3.75],["l",0,3.75],["l",-.42,.09],["c",-.57,.18,-1.65,.45,-1.71,.45],["c",-.03,0,-.03,-.72,-.03,-3.75],["l",0,-3.75],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:8.04},"scripts.snap":{d:[["M",4.5,-3.39],["c",.36,-.03,.96,-.03,1.35,0],["c",1.56,.15,3.15,.9,4.2,2.01],["c",.24,.27,.33,.42,.33,.6],["c",0,.27,.03,.24,-2.46,2.22],["c",-1.29,1.02,-2.4,1.86,-2.49,1.92],["c",-.18,.09,-.3,.09,-.48,0],["c",-.09,-.06,-1.2,-.9,-2.49,-1.92],["c",-2.49,-1.98,-2.46,-1.95,-2.46,-2.22],["c",0,-.18,.09,-.33,.33,-.6],["c",1.05,-1.08,2.64,-1.86,4.17,-2.01],["z"],["m",1.29,1.17],["c",-1.47,-.15,-2.97,.3,-4.14,1.2],["l",-.18,.15],["l",.06,.09],["c",.15,.12,3.63,2.85,3.66,2.85],["c",.03,0,3.51,-2.73,3.66,-2.85],["l",.06,-.09],["l",-.18,-.15],["c",-.84,-.66,-1.89,-1.08,-2.94,-1.2],["z"]],w:10.38,h:6.84}};h["noteheads.slash.whole"]={d:[["M",5,-5],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"],["m",0,-2],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",-4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"]],w:10.81,h:15.63},h["noteheads.slash.quarter"]={d:[["M",9,-6],["l",0,4],["l",-9,9],["l",0,-4],["z"]],w:9,h:9},h["noteheads.harmonic.quarter"]={d:[["M",3.63,-4.02],["c",.09,-.06,.18,-.09,.24,-.03],["c",.03,.03,.87,.93,1.83,2.01],["c",1.5,1.65,1.8,1.98,1.8,2.04],["c",0,.06,-.3,.39,-1.8,2.04],["c",-.96,1.08,-1.8,1.98,-1.83,2.01],["c",-.06,.06,-.15,.03,-.24,-.03],["c",-.12,-.09,-3.54,-3.84,-3.6,-3.93],["c",-.03,-.03,-.03,-.09,-.03,-.15],["c",.03,-.06,3.45,-3.84,3.63,-3.96],["z"]],w:7.5,h:8.165},h["noteheads.triangle.quarter"]={d:[["M",0,4],["l",9,0],["l",-4.5,-9],["z"]],w:9,h:9};var d=function(a){for(var n=[],l=0,u=a.length;l<u;l++){n[l]=[];for(var m=0,y=a[l].length;m<y;m++)n[l][m]=a[l][m]}return n},o=function(a,n,l){for(var u=0,m=a.length;u<m;u++){var y=a[u],g,c;for(g=1,c=y.length;g<c;g++)y[g]*=g%2?n:l}},t={printSymbol:function(a,n,l,u,m){if(!h[l])return null;var y=d(h[l].d);y[0][1]+=a,y[0][2]+=n;for(var g="",c=0;c<y.length;c++)g+=y[c].join(" ");return m.path=g,u.path(m)},getPathForSymbol:function(a,n,l,u,m){if(u=u||1,m=m||1,!h[l])return null;var y=d(h[l].d);return(u!==1||m!==1)&&o(y,u,m),y[0][1]+=a,y[0][2]+=n,y},getSymbolWidth:function(a){return h[a]?h[a].w:0},symbolHeightInPitches:function(a){var n=h[a]?h[a].h:0;return n/b.STEP},getSymbolAlign:function(a){return a.substring(0,7)==="scripts"&&a!=="scripts.roll"?"center":"left"},getYCorr:function(a){switch(a){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":return-2;case"timesig.common":case"timesig.cut":return 0;case"flags.d32nd":return-1;case"flags.d64th":return-2;case"flags.u32nd":return 1;case"flags.u64th":return 3;case"rests.whole":return 1;case"rests.half":return-1;case"rests.8th":return-1;case"rests.quarter":return-1;case"rests.16th":return-1;case"rests.32nd":return-1;case"rests.64th":return-1;case"f":case"m":case"p":case"s":case"z":return-4;case"scripts.trill":case"scripts.upbow":case"scripts.downbow":return-2;case"scripts.ufermata":case"scripts.wedge":case"scripts.roll":case"scripts.shortphrase":case"scripts.longphrase":return-1;case"scripts.dfermata":return 1;default:return 0}},setSymbol:function(a,n){h[a]=n}};return h0=t,h0}var u0,kn;function vc(){if(kn)return u0;kn=1;var b=je(),h=Ge(),d=Pe(),o=function(a,n){var l,u=0;a.el_type="clef";var m=new b(a,0,10,"staff-extra clef",n);switch(m.isClef=!0,a.type){case"treble":l="clefs.G";break;case"tenor":l="clefs.C";break;case"alto":l="clefs.C";break;case"bass":l="clefs.F";break;case"treble+8":l="clefs.G",u=1;break;case"tenor+8":l="clefs.C",u=1;break;case"bass+8":l="clefs.F",u=1;break;case"alto+8":l="clefs.C",u=1;break;case"treble-8":l="clefs.G",u=-1;break;case"tenor-8":l="clefs.C",u=-1;break;case"bass-8":l="clefs.F",u=-1;break;case"alto-8":l="clefs.C",u=-1;break;case"none":return null;case"perc":l="clefs.perc";break;default:m.addFixed(new d("clef="+a.type,0,0,void 0,{type:"debug"}))}var y=5;if(l){var g=h.symbolHeightInPitches(l),c=t(l);if(m.addRight(new d(l,y,h.getSymbolWidth(l),a.clefPos,{top:g+a.clefPos+c,bottom:a.clefPos+c})),u!==0){var r=.6666666666666666,f=(h.getSymbolWidth(l)-h.getSymbolWidth("8")*r)/2,e=u>0?m.top+3:m.bottom-1,p=u>0?m.top+3:m.bottom-3,x=p-2;a.type==="bass-8"&&(e=3,f=0),m.addRight(new d("8",y+f,h.getSymbolWidth("8")*r,e,{scalex:r,scaley:r,top:p,bottom:x}))}}return m};function t(a){switch(a){case"clefs.G":return-5;case"clefs.C":return-4;case"clefs.F":return-4;case"clefs.perc":return-2;default:return 0}}return u0=o,u0}var d0,_n;function gc(){if(_n)return d0;_n=1;var b=je(),h=Ge(),d=Pe(),o=function(t,a){if(t.el_type="keySignature",!t.accidentals||t.accidentals.length===0)return null;var n=new b(t,0,10,"staff-extra key-signature",a);n.isKeySig=!0;var l=0;return t.accidentals.forEach(function(u){var m,y=0;switch(u.acc){case"sharp":m="accidentals.sharp",y=-3;break;case"natural":m="accidentals.nat";break;case"flat":m="accidentals.flat",y=-1.2;break;case"quartersharp":m="accidentals.halfsharp",y=-2.5;break;case"quarterflat":m="accidentals.halfflat",y=-1.2;break;default:m="accidentals.flat"}n.addRight(new d(m,l,h.getSymbolWidth(m),u.verticalPos,{thickness:h.symbolHeightInPitches(m),top:u.verticalPos+h.symbolHeightInPitches(m)+y,bottom:u.verticalPos+y})),l+=h.getSymbolWidth(m)+2},this),n};return d0=o,d0}var p0,Tn;function bc(){if(Tn)return p0;Tn=1;var b=Ge(),h=Pe(),d=function(o,t,a,n){n||(n={});var l=n.dir!==void 0?n.dir:null,u=n.headx!==void 0?n.headx:0,m=n.extrax!==void 0?n.extrax:0,y=n.flag!==void 0?n.flag:null,g=n.dot!==void 0?n.dot:0,c=n.dotshiftx!==void 0?n.dotshiftx:0,r=n.scale!==void 0?n.scale:1,f=n.accidentalSlot!==void 0?n.accidentalSlot:[],e=n.shouldExtendStem!==void 0?n.shouldExtendStem:!1,p=n.printAccidentals!==void 0?n.printAccidentals:!0,x=a.verticalPos,w,_=0,E=0,N=0;if(t===void 0)o.addFixed(new h("pitch is undefined",0,0,0,{type:"debug"}));else if(t==="")w=new h(null,0,0,x);else{var I=u;if(a.printer_shift){var R=a.printer_shift==="same"?1:0;I=l==="down"?-b.getSymbolWidth(t)*r+R:b.getSymbolWidth(t)*r-R}var C={scalex:r,scaley:r,thickness:b.symbolHeightInPitches(t)*r,name:a.name};if(w=new h(t,I,b.getSymbolWidth(t)*r,x,C),w.stemDir=l,y){var B=x+(l==="down"?-7:7)*r;e&&(l==="down"&&B>6&&(B=6),l==="up"&&B<6&&(B=6));var q=l==="down"?u:u+w.w-.6;o.addRight(new h(y,q,b.getSymbolWidth(y)*r,B,{scalex:r,scaley:r}))}for(E=w.w+c-2+5*g;g>0;g--){var L=1-Math.abs(x)%2;o.addRight(new h("dots.dot",w.w+c-2+5*g,b.getSymbolWidth("dots.dot"),x+L))}}if(w&&(w.highestVert=a.highestVert),p&&a.accidental){var D;switch(a.accidental){case"quartersharp":D="accidentals.halfsharp";break;case"dblsharp":D="accidentals.dblsharp";break;case"sharp":D="accidentals.sharp";break;case"quarterflat":D="accidentals.halfflat";break;case"flat":D="accidentals.flat";break;case"dblflat":D="accidentals.dblflat";break;case"natural":D="accidentals.nat"}for(var P=!1,M=m,A=0;A<f.length;A++)if(x-f[A][0]>=6){f[A][0]=x,M=f[A][1],P=!0;break}P===!1&&(M-=b.getSymbolWidth(D)*r+2,f.push([x,M]),_=b.getSymbolWidth(D)*r+2);var F=b.symbolHeightInPitches(D);o.addExtra(new h(D,M,b.getSymbolWidth(D),x,{scalex:r,scaley:r,top:x+F/2,bottom:x-F/2})),N=b.getSymbolWidth(D)/2}return{notehead:w,accidentalshiftx:_,dotshiftx:E,extraLeft:N}};return p0=d,p0}var v0,Sn;function mc(){if(Sn)return v0;Sn=1;var b=je(),h=Ge(),d=Pe(),o=function(t,a){t.el_type="timeSignature";var n=new b(t,0,10,"staff-extra time-signature",a);if(t.type==="specified")for(var l=0,u=0;u<t.value.length;u++)if(u!==0&&(n.addRight(new d("+",l+1,h.getSymbolWidth("+"),6,{thickness:h.symbolHeightInPitches("+")})),l+=h.getSymbolWidth("+")+2),t.value[u].den){for(var m=0,y=0;y<t.value[u].num.length;y++)m+=h.getSymbolWidth(t.value[u].num[y]);var g=0;for(y=0;y<t.value[u].num.length;y++)g+=h.getSymbolWidth(t.value[u].den[y]);var c=Math.max(m,g);n.addRight(new d(t.value[u].num,l+(c-m)/2,m,8,{thickness:h.symbolHeightInPitches(t.value[u].num[0])})),n.addRight(new d(t.value[u].den,l+(c-g)/2,g,4,{thickness:h.symbolHeightInPitches(t.value[u].den[0])})),l+=c}else{for(var r=0,f=0;f<t.value[u].num.length;f++)r+=h.getSymbolWidth(t.value[u].num[f]);n.addRight(new d(t.value[u].num,l,r,6,{thickness:h.symbolHeightInPitches(t.value[u].num[0])})),l+=r}else t.type==="common_time"?n.addRight(new d("timesig.common",0,h.getSymbolWidth("timesig.common"),6,{thickness:h.symbolHeightInPitches("timesig.common")})):t.type==="cut_time"?n.addRight(new d("timesig.cut",0,h.getSymbolWidth("timesig.cut"),6,{thickness:h.symbolHeightInPitches("timesig.cut")})):t.type==="tempus_imperfectum"?n.addRight(new d("timesig.imperfectum",0,h.getSymbolWidth("timesig.imperfectum"),6,{thickness:h.symbolHeightInPitches("timesig.imperfectum")})):t.type==="tempus_imperfectum_prolatio"?n.addRight(new d("timesig.imperfectum2",0,h.getSymbolWidth("timesig.imperfectum2"),6,{thickness:h.symbolHeightInPitches("timesig.imperfectum2")})):t.type==="tempus_perfectum"?n.addRight(new d("timesig.perfectum",0,h.getSymbolWidth("timesig.perfectum"),6,{thickness:h.symbolHeightInPitches("timesig.perfectum")})):t.type==="tempus_perfectum_prolatio"?n.addRight(new d("timesig.perfectum2",0,h.getSymbolWidth("timesig.perfectum2"),6,{thickness:h.symbolHeightInPitches("timesig.perfectum2")})):console.log("time signature:",t);return n};return v0=o,v0}var g0,En;function yc(){if(En)return g0;En=1;var b=function(d,o,t){this.type="DynamicDecoration",this.anchor=d,this.dec=o,t==="below"?this.volumeHeightBelow=6:this.volumeHeightAbove=6,this.pitch=void 0};return g0=b,g0}var b0,An;function wc(){if(An)return b0;An=1;var b=function(d,o,t,a){this.type="CrescendoElem",this.anchor1=d,this.anchor2=o,this.dir=t,a==="above"?this.dynamicHeightAbove=6:this.dynamicHeightBelow=6,this.pitch=void 0};return b0=b,b0}var m0,Mn;function xc(){if(Mn)return m0;Mn=1;var b=function(d,o){this.type="GlissandoElem",this.anchor1=d,this.anchor2=o};return m0=b,m0}var y0,Nn;function $s(){if(Nn)return y0;Nn=1;var b=function(d){this.type="TieElem",this.anchor1=d.anchor1,this.anchor2=d.anchor2,d.isGrace&&(this.isGrace=!0),d.fixedY&&(this.fixedY=!0),d.stemDir&&(this.stemDir=d.stemDir),d.voiceNumber!==void 0&&(this.voiceNumber=d.voiceNumber),d.style!==void 0&&(this.dotted=!0),this.internalNotes=[]};return b.prototype.addInternalNote=function(h){this.internalNotes.push(h)},b.prototype.setEndAnchor=function(h){this.anchor2=h,this.anchor1?(this.top=Math.max(this.anchor1.pitch,this.anchor2.pitch)+4,this.bottom=Math.min(this.anchor1.pitch,this.anchor2.pitch)-4):(this.top=this.anchor2.pitch+4,this.bottom=this.anchor2.pitch-4)},b.prototype.setStartX=function(h){this.startLimitX=h},b.prototype.setEndX=function(h){this.endLimitX=h},b.prototype.setHint=function(){this.hint=!0},b.prototype.calcTieDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var h;this.anchor1?h=this.anchor1.pitch:this.anchor2?h=this.anchor2.pitch:h=14,this.anchor1&&this.anchor1.stemDir==="down"&&this.anchor2&&this.anchor2.stemDir==="down"?this.above=!0:this.anchor1&&this.anchor1.stemDir==="up"&&this.anchor2&&this.anchor2.stemDir==="up"?this.above=!1:this.anchor1&&this.anchor2?this.above=h>=6:this.anchor1?this.above=this.anchor1.stemDir==="down":this.anchor2?this.above=this.anchor2.stemDir==="down":this.above=h>=6}},b.prototype.calcSlurDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var h=!1;this.anchor1&&this.anchor1.stemDir==="down"&&(h=!0),this.anchor2&&this.anchor2.stemDir==="down"&&(h=!0);for(var d=0;d<this.internalNotes.length;d++){var o=this.internalNotes[d];o.stemDir==="down"&&(h=!0)}this.above=h}},b.prototype.calcX=function(h,d){this.anchor1?(this.startX=this.anchor1.x,this.anchor1.scalex<1&&(this.startX-=3)):this.startLimitX?this.startX=this.startLimitX.x+this.startLimitX.w:this.anchor2?this.startX=this.anchor2.x-20:this.startX=h,!this.anchor1&&this.dotted&&(this.startX-=3),this.anchor2?this.endX=this.anchor2.x:this.endLimitX?this.endX=this.endLimitX.x:this.endX=d},b.prototype.calcTieY=function(){this.anchor1?this.startY=this.anchor1.pitch:this.anchor2?this.startY=this.anchor2.pitch:this.startY=this.above?14:0,this.anchor2?this.endY=this.anchor2.pitch:this.anchor1?this.endY=this.anchor1.pitch:this.endY=this.above?14:0},b.prototype.calcSlurY=function(){if(this.anchor1&&this.anchor2){this.above&&this.anchor1.stemDir==="up"&&!this.fixedY?(this.startY=(this.anchor1.highestVert+this.anchor1.pitch)/2,this.startX+=this.anchor1.w/2):this.startY=this.anchor1.pitch;var h=this.anchor2.parent.beam&&this.anchor2.parent.beam.stemsUp&&this.anchor2.parent.beam.elems[0]!==this.anchor2.parent,d=(this.anchor2.highestVert+this.anchor2.pitch)/2;if(this.above&&this.anchor2.stemDir==="up"&&!this.fixedY&&!h&&d<this.startY?(this.endY=d,this.endX+=Math.round(this.anchor2.w/2)):this.endY=this.above&&h?this.anchor2.highestVert:this.anchor2.pitch,this.anchor1.scalex===1){var o=!!this.anchor1.parent.beam,t=!!this.anchor2.parent.beam;if(o){var a=this.anchor1.parent===this.anchor1.parent.beam.elems[this.anchor1.parent.beam.elems.length-1];a||(this.above?this.startY=this.anchor1.parent.fixed.t:this.startY=this.anchor1.parent.fixed.b)}if(t){var n=this.anchor2.parent===this.anchor2.parent.beam.elems[0];n||(this.above?this.endY=this.anchor2.parent.fixed.t:this.endY=this.anchor2.parent.fixed.b)}}}else this.anchor1?this.startY=this.endY=this.anchor1.pitch:this.anchor2?this.startY=this.endY=this.anchor2.pitch:(this.startY=this.above?14:0,this.endY=this.above?14:0)},b.prototype.avoidCollisionAbove=function(){if(this.above){for(var h=-50,d=0;d<this.internalNotes.length;d++)this.internalNotes[d].highestVert>h&&(h=this.internalNotes[d].highestVert);h>this.startY&&h>this.endY&&(this.startY=this.endY=h-1)}},b.prototype.getYBounds=function(){var h=10,d=1e3;this.isTie?(this.calcTieDirection(),this.calcX(h,d),this.calcTieY()):(this.calcSlurDirection(),this.calcX(h,d),this.calcSlurY());var o,t;return this.above?(t=Math.min(this.startY,this.endY),o=t+3):(o=Math.min(this.startY,this.endY),t=o-3),[o,t]},y0=b,y0}var w0,Bn;function Cc(){if(Bn)return w0;Bn=1;var b=yc(),h=wc(),d=xc(),o=Ge(),t=Pe(),a=$s(),n=function(){this.startDiminuendoX=void 0,this.startCrescendoX=void 0,this.minTop=12,this.minBottom=0},l=function(c,r,f,e,p,x,w,_,E){for(var N,I=0;I<r.length;I++){if(r[I]==="staccato"||r[I]==="tenuto"||r[I]==="accent"&&!E){var R="scripts."+r[I];if(r[I]==="accent"&&(R="scripts.sforzato"),N===void 0?N=w==="down"?f+2:_-2:N=w==="down"?N+2:N-2,r[I]==="accent")w==="up"?N--:N++;else switch(N){case 2:case 4:case 6:case 8:case 10:w==="up"?N--:N++;break}f>9&&N++;var C=e/2;o.getSymbolAlign(R)!=="center"&&(C-=o.getSymbolWidth(R)/2),p.addFixedX(new t(R,C,o.getSymbolWidth(R),N))}if(r[I]==="slide"&&p.heads[0]){var B=p.heads[0].pitch;B-=2;var q=new t("",-x-15,0,B-1),L=new t("",-x-5,0,B+1);p.addFixedX(q),p.addFixedX(L),c.addOther(new a({anchor1:q,anchor2:L,fixedY:!0}))}}return N===void 0&&(N=f),{above:N,below:p.bottom}},u=function(c,r,f,e){for(var p=0;p<r.length;p++)switch(r[p]){case"p":case"mp":case"pp":case"ppp":case"pppp":case"f":case"ff":case"fff":case"ffff":case"sfz":case"mf":var x=new b(f,r[p],e);c.addOther(x)}},m=function(c,r,f,e,p){function x(){if(e.heads.length===0)return 10;for(var N=e.heads[0].pitch,I=1;I<e.heads.length;I++)N=Math.max(N,e.heads[I].pitch);return N}function w(){if(e.heads.length===0)return 2;for(var N=e.heads[0].pitch,I=1;I<e.heads.length;I++)N=Math.min(N,e.heads[I].pitch);return N}function _(N,I){var R=p==="down"?w()+1:x()+9;p!=="down"&&I===1&&R--;var C=f/2;C+=p==="down"?-5:3;for(var B=0;B<I;B++)R-=1,e.addFixedX(new t(N,C,o.getSymbolWidth(N),R))}for(var E=0;E<c.length;E++)switch(c[E]){case"/":_("flags.ugrace",1);break;case"//":_("flags.ugrace",2);break;case"///":_("flags.ugrace",3);break;case"////":_("flags.ugrace",4);break}},y=function(c,r,f,e,p,x,w,_){function E(L,D){L==="above"?e.above+=D:e.below-=D}function N(L){var D;return L==="above"?(D=e.above,D<x&&(D=x)):(D=e.below,D>w&&(D=w)),D}function I(L,D,P){var M=N(D),A=2,F=5;f.addFixedX(new t(L,r/2,0,M+A,{type:"decoration",klass:"ornament",thickness:3,anchor:P})),E(D,F)}function R(L,D){var P=r/2;o.getSymbolAlign(L)!=="center"&&(P-=o.getSymbolWidth(L)/2);var M=o.symbolHeightInPitches(L)+1,A=N(D);A=D==="above"?A+M/2:A-M/2,f.addFixedX(new t(L,P,o.getSymbolWidth(L),A,{klass:"ornament",thickness:o.symbolHeightInPitches(L),position:D})),E(D,M)}for(var C={"+":"scripts.stopped",open:"scripts.open",snap:"scripts.snap",wedge:"scripts.wedge",thumb:"scripts.thumb",shortphrase:"scripts.shortphrase",mediumphrase:"scripts.mediumphrase",longphrase:"scripts.longphrase",trill:"scripts.trill",roll:"scripts.roll",irishroll:"scripts.roll",marcato:"scripts.umarcato",dmarcato:"scripts.dmarcato",umarcato:"scripts.umarcato",turn:"scripts.turn",uppermordent:"scripts.prall",pralltriller:"scripts.prall",mordent:"scripts.mordent",lowermordent:"scripts.mordent",downbow:"scripts.downbow",upbow:"scripts.upbow",fermata:"scripts.ufermata",invertedfermata:"scripts.dfermata",breath:",",coda:"scripts.coda",segno:"scripts.segno"},B=!1,q=0;q<c.length;q++)switch(c[q]){case"0":case"1":case"2":case"3":case"4":case"5":case"D.C.":case"D.S.":I(c[q],p,"middle"),B=!0;break;case"D.C.alcoda":I("D.C. al coda",p,"end"),B=!0;break;case"D.C.alfine":I("D.C. al fine",p,"end"),B=!0;break;case"D.S.alcoda":I("D.S. al coda",p,"end"),B=!0;break;case"D.S.alfine":I("D.S. al fine",p,"end"),B=!0;break;case"fine":I("FINE",p,"middle"),B=!0;break;case"+":case"open":case"snap":case"wedge":case"thumb":case"shortphrase":case"mediumphrase":case"longphrase":case"trill":case"roll":case"irishroll":case"marcato":case"dmarcato":case"turn":case"uppermordent":case"pralltriller":case"mordent":case"lowermordent":case"downbow":case"upbow":case"fermata":case"breath":case"umarcato":case"coda":case"segno":R(C[c[q]],p),B=!0;break;case"invertedfermata":R(C[c[q]],"below"),B=!0;break;case"mark":f.klass="mark";break;case"accent":_&&(R("scripts.sforzato",p),B=!0);break}return B};function g(c,r,f){for(var e=0;e<c.length;e++)switch(c[e]){case"arpeggio":for(var p=r.abcelem.minpitch-1;p<=r.abcelem.maxpitch;p+=2)r.addExtra(new t("scripts.arpeggio",-o.getSymbolWidth("scripts.arpeggio")*2-f,0,p+2,{klass:"ornament",thickness:o.symbolHeightInPitches("scripts.arpeggio")}));break}}return n.prototype.dynamicDecoration=function(c,r,f,e){for(var p,x,w,_=0;_<r.length;_++)switch(r[_]){case"diminuendo(":this.startDiminuendoX=f,p=void 0;break;case"diminuendo)":p={start:this.startDiminuendoX,stop:f},this.startDiminuendoX=void 0;break;case"crescendo(":this.startCrescendoX=f,x=void 0;break;case"crescendo)":x={start:this.startCrescendoX,stop:f},this.startCrescendoX=void 0;break;case"~(":case"glissando(":this.startGlissandoX=f,w=void 0;break;case"~)":case"glissando)":w={start:this.startGlissandoX,stop:f},this.startGlissandoX=void 0;break}p&&c.addOther(new h(p.start,p.stop,">",e)),x&&c.addOther(new h(x.start,x.stop,"<",e)),w&&c.addOther(new d(w.start,w.stop))},n.prototype.createDecoration=function(c,r,f,e,p,x,w,_,E,N,I){E||(E={ornamentPosition:"above",volumePosition:N?"above":"below",dynamicPosition:N?"above":"below"}),u(c,r,p,E.volumePosition),this.dynamicDecoration(c,r,p,E.dynamicPosition),m(r,f,e,p,w);var R=l(c,r,f,e,p,x,w,_,I);R.above=Math.max(R.above,this.minTop),R.below=Math.min(R.below,_),y(r,e,p,R,E.ornamentPosition,this.minTop,_,I),g(r,p,x)},w0=n,w0}var x0,Ln;function kc(){if(Ln)return x0;Ln=1;var b=function(d,o,t){this.type="EndingElem",this.text=d,this.anchor1=o,this.anchor2=t,this.endingHeightAbove=5,this.pitch=void 0};return x0=b,x0}var C0,Pn;function _c(){if(Pn)return C0;Pn=1;var b=function(h){for(var d=0,o=0;o<h.voices.length;o++){var t=h.voices[o].staff;h.voices[o].duplicate||(d+=t.top,d+=-t.bottom)}return d};return C0=b,C0}var k0,qn;function Tc(){if(qn)return k0;qn=1;var b=_c(),h=function(d){this.getTextSize=d,this.voices=[],this.staffs=[],this.brace=void 0,this.bracket=void 0};return h.prototype.setLimit=function(d,o){o.specialY[d]&&(o.staff.specialY[d]?o.staff.specialY[d]=Math.max(o.staff.specialY[d],o.specialY[d]):o.staff.specialY[d]=o.specialY[d])},h.prototype.addVoice=function(d,o,t){var a=this.voices.length;this.voices[a]=d,this.staffs[o]?this.staffs[o].voices.push(a):this.staffs[this.staffs.length]={top:10,bottom:2,lines:t,voices:[a],specialY:{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}},d.staff=this.staffs[o]},h.prototype.setHeight=function(){this.height=b(this)},h.prototype.setWidth=function(d){this.w=d;for(var o=0;o<this.voices.length;o++)this.voices[o].setWidth(d)},h.prototype.setStaffLimits=function(d){d.staff.top=Math.max(d.staff.top,d.top),d.staff.bottom=Math.min(d.staff.bottom,d.bottom),this.setLimit("tempoHeightAbove",d),this.setLimit("partHeightAbove",d),this.setLimit("volumeHeightAbove",d),this.setLimit("dynamicHeightAbove",d),this.setLimit("endingHeightAbove",d),this.setLimit("chordHeightAbove",d),this.setLimit("lyricHeightAbove",d),this.setLimit("lyricHeightBelow",d),this.setLimit("chordHeightBelow",d),this.setLimit("volumeHeightBelow",d),this.setLimit("dynamicHeightBelow",d)},k0=h,k0}var _0,Dn;function Sc(){if(Dn)return _0;Dn=1;var b=je(),h=Pe(),d=function(t,a,n){this.type="TempoElement",this.tempo=t,this.tempo.type="tempo",this.tuneNumber=a,this.totalHeightInPitches=6,this.tempoHeightAbove=this.totalHeightInPitches,this.pitch=void 0,this.tempo.duration&&!this.tempo.suppressBpm&&(this.note=this.createNote(n,t,a))};return d.prototype.setX=function(o){this.x=o},d.prototype.createNote=function(o,t,a){var n=.75,l=t.duration[0],u=new b(t,l,1,"tempo",a),m,y,g;l<=1/32?(g="noteheads.quarter",y="flags.u32nd",m=0):l<=1/16?(g="noteheads.quarter",y="flags.u16th",m=0):l<=3/32?(g="noteheads.quarter",y="flags.u16nd",m=1):l<=1/8?(g="noteheads.quarter",y="flags.u8th",m=0):l<=3/16?(g="noteheads.quarter",y="flags.u8th",m=1):l<=1/4?(g="noteheads.quarter",m=0):l<=3/8?(g="noteheads.quarter",m=1):l<=1/2?(g="noteheads.half",m=0):l<=3/4?(g="noteheads.half",m=1):l<=1?(g="noteheads.whole",m=0):l<=1.5?(g="noteheads.whole",m=1):l<=2?(g="noteheads.dbl",m=0):(g="noteheads.dbl",m=1);var c=o(u,g,{verticalPos:0},{dir:"up",flag:y,dot:m,scale:n}),r=c.notehead;u.addHead(r);var f;if(g!=="noteheads.whole"&&g!=="noteheads.dbl"){var e=.3333333333333333*n,p=5*n,x=r.dx+r.w,w=-.6;f=new h(null,x,0,e,{type:"stem",pitch2:p,linewidth:w}),u.addRight(f)}return u},_0=d,_0}var T0,Fn;function Ec(){if(Fn)return T0;Fn=1;var b=function(d,o,t){this.type="TripletElem",this.anchor1=o,this.number=d,this.durationClass=("d"+Math.round(o.parent.durationClass*1e3)/1e3).replace(/\./,"-"),this.middleElems=[],this.flatBeams=t.flatBeams};return b.prototype.isClosed=function(){return!!this.anchor2},b.prototype.middleNote=function(h){this.middleElems.push(h)},b.prototype.setCloseAnchor=function(h){this.anchor2=h,(!this.anchor1.parent.beam||this.anchor1.stemDir==="up")&&(this.endingHeightAbove=4)},T0=b,T0}var S0,On;function Ac(){if(On)return S0;On=1;function b(d){switch(d){case"B#":return"H#";case"B♯":return"H♯";case"B":return"H";case"Bb":return"B";case"B♭":return"B"}return d}function h(d,o,t){var a=d.split(`
`);for(let n=0;n<a.length;n++){let u=a[n].match(/^([ABCDEFG][♯♭]?)?([^\/]+)?(\/([ABCDEFG][#b♯♭]?))?/);if(!u)continue;let m=u[1]||"",y=u[2]||"",g=u[4]||"";t&&(m=b(m),g=b(g));const c=o?"":"",r=g?"/"+g:"";a[n]=[m,y,r].join(c)}return a.join(`
`)}return S0=h,S0}var E0,In;function Mc(){if(In)return E0;In=1;var b=Pe(),h=Ee();const d=Ac();var o=function(a,n,l,u,m,y,g,c){for(var r=0;r<l.chord.length;r++){var f=l.chord[r].position,e=l.chord[r].rel_position,p=f==="left"||f==="right"||f==="below"||f==="above"||!!e,x,w;p?(x="annotationfont",w="abcjs-annotation"):(x="gchordfont",w="abcjs-chord");var _=a.attr(x,w),E=l.chord[r].name,N;if(typeof E=="string")N=t(E,f,e,p,x,w,_,a,n,l,u,m,y,g,c),u=N.roomTaken,m=N.roomTakenRight;else for(var I=0;I<E.length;I++)N=t(E[I].text,f,e,p,x,w,_,a,n,l,u,m,y,g,c),u=N.roomTaken,m=N.roomTakenRight}return{roomTaken:u,roomTakenRight:m}};function t(a,n,l,u,m,y,g,c,r,f,e,p,x,w,_){for(var E=a.split(`
`),N=E.length-1;N>=0;N--){var I=E[N],R=0,C;u||(I=d(I,w,_));var B=c.calc(I,m,y),q=B.width,L=B.height/h.STEP;switch(n){case"left":e+=q+7,R=-e,C=f.averagepitch,r.addExtra(new b(I,R,q+4,C,{type:"text",height:L,dim:g,position:"left"}));break;case"right":p+=4,R=p,C=f.averagepitch,r.addRight(new b(I,R,q+4,C,{type:"text",height:L,dim:g,position:"right"}));break;case"below":r.addRight(new b(I,0,0,void 0,{type:"text",position:"below",height:L,dim:g,realWidth:q}));break;case"above":r.addRight(new b(I,0,0,void 0,{type:"text",position:"above",height:L,dim:g,realWidth:q}));break;default:if(l){var D=l.y+3*h.STEP;r.addRight(new b(I,R+l.x,0,f.minpitch+D/h.STEP,{position:"relative",type:"text",height:L,dim:g}))}else{var P="above";f.positioning&&f.positioning.chordPosition&&(P=f.positioning.chordPosition),P!=="hidden"&&r.addCentered(new b(I,x/2,q,void 0,{type:"chord",position:P,height:L,dim:g,realWidth:q}))}}}return{roomTaken:e,roomTakenRight:p}}return E0=o,E0}var A0,Rn;function Nc(){if(Rn)return A0;Rn=1;var b=je(),h=dc(),d=pc(),o=vc(),t=gc(),a=bc(),n=mc(),l=Cc(),u=kc(),m=Ge(),y=Pe(),g=Ee(),c=Tc(),r=Sc(),f=$s(),e=Ec(),p=Ys(),x=Mc(),w=Hs(),_=Oe(),E=function(M){var A=0;return M.duration&&(A=M.duration),A},N=!1,I={rest:{0:"rests.whole",1:"rests.half",2:"rests.quarter",3:"rests.8th",4:"rests.16th",5:"rests.32nd",6:"rests.64th",7:"rests.128th",multi:"rests.multimeasure"},note:{"-1":"noteheads.dbl",0:"noteheads.whole",1:"noteheads.half",2:"noteheads.quarter",3:"noteheads.quarter",4:"noteheads.quarter",5:"noteheads.quarter",6:"noteheads.quarter",7:"noteheads.quarter",nostem:"noteheads.quarter"},rhythm:{"-1":"noteheads.slash.whole",0:"noteheads.slash.whole",1:"noteheads.slash.whole",2:"noteheads.slash.quarter",3:"noteheads.slash.quarter",4:"noteheads.slash.quarter",5:"noteheads.slash.quarter",6:"noteheads.slash.quarter",7:"noteheads.slash.quarter",nostem:"noteheads.slash.nostem"},x:{"-1":"noteheads.indeterminate",0:"noteheads.indeterminate",1:"noteheads.indeterminate",2:"noteheads.indeterminate",3:"noteheads.indeterminate",4:"noteheads.indeterminate",5:"noteheads.indeterminate",6:"noteheads.indeterminate",7:"noteheads.indeterminate",nostem:"noteheads.indeterminate"},harmonic:{"-1":"noteheads.harmonic.quarter",0:"noteheads.harmonic.quarter",1:"noteheads.harmonic.quarter",2:"noteheads.harmonic.quarter",3:"noteheads.harmonic.quarter",4:"noteheads.harmonic.quarter",5:"noteheads.harmonic.quarter",6:"noteheads.harmonic.quarter",7:"noteheads.harmonic.quarter",nostem:"noteheads.harmonic.quarter"},triangle:{"-1":"noteheads.triangle.quarter",0:"noteheads.triangle.quarter",1:"noteheads.triangle.quarter",2:"noteheads.triangle.quarter",3:"noteheads.triangle.quarter",4:"noteheads.triangle.quarter",5:"noteheads.triangle.quarter",6:"noteheads.triangle.quarter",7:"noteheads.triangle.quarter",nostem:"noteheads.triangle.quarter"},uflags:{3:"flags.u8th",4:"flags.u16th",5:"flags.u32nd",6:"flags.u64th"},dflags:{3:"flags.d8th",4:"flags.d16th",5:"flags.d32nd",6:"flags.d64th"}},R=function(M,A,F){this.decoration=new l,this.getTextSize=M,this.tuneNumber=A,this.isBagpipes=F.bagpipes,this.flatBeams=F.flatbeams,this.graceSlurs=F.graceSlurs,this.percmap=F.percmap,this.initialClef=F.initialClef,this.jazzchords=!!F.jazzchords,this.accentAbove=!!F.accentAbove,this.germanAlphabet=!!F.germanAlphabet,this.reset()};R.prototype.reset=function(){this.slurs={},this.ties=[],this.voiceScale=1,this.voiceColor=void 0,this.slursbyvoice={},this.tiesbyvoice={},this.endingsbyvoice={},this.scaleByVoice={},this.colorByVoice={},this.tripletmultiplier=1,this.abcline=void 0,this.accidentalSlot=void 0,this.accidentalshiftx=void 0,this.dotshiftx=void 0,this.hasVocals=!1,this.minY=void 0,this.partstartelem=void 0,this.startlimitelem=void 0,this.stemdir=void 0},R.prototype.setStemHeight=function(M){this.stemHeight=Math.round(M*10/g.STEP)/10},R.prototype.getCurrentVoiceId=function(M,A){return"s"+M+"v"+A},R.prototype.pushCrossLineElems=function(M,A){this.slursbyvoice[this.getCurrentVoiceId(M,A)]=this.slurs,this.tiesbyvoice[this.getCurrentVoiceId(M,A)]=this.ties,this.endingsbyvoice[this.getCurrentVoiceId(M,A)]=this.partstartelem,this.scaleByVoice[this.getCurrentVoiceId(M,A)]=this.voiceScale,this.voiceColor&&(this.colorByVoice[this.getCurrentVoiceId(M,A)]=this.voiceColor)},R.prototype.popCrossLineElems=function(M,A){this.slurs=this.slursbyvoice[this.getCurrentVoiceId(M,A)]||{},this.ties=this.tiesbyvoice[this.getCurrentVoiceId(M,A)]||[],this.partstartelem=this.endingsbyvoice[this.getCurrentVoiceId(M,A)],this.voiceScale=this.scaleByVoice[this.getCurrentVoiceId(M,A)],this.voiceScale===void 0&&(this.voiceScale=1),this.voiceColor=this.colorByVoice[this.getCurrentVoiceId(M,A)]},R.prototype.containsLyrics=function(M){for(var A=0;A<M.length;A++)for(var F=0;F<M[A].voices.length;F++)for(var z=0;z<M[A].voices[F].length;z++){var H=M[A].voices[F][z];if(H.lyric){(!H.positioning||H.positioning.vocalPosition==="below")&&(this.hasVocals=!0);return}}},R.prototype.createABCLine=function(M,A,F){this.minY=2,this.containsLyrics(M);var z=new c(this.getTextSize);this.tempoSet=!1;for(var H=0;H<M.length;H++)N&&this.restoreState(),N=!1,this.createABCStaff(z,M[H],A,H,F);return z},R.prototype.createABCStaff=function(M,A,F,z,H){M.getTextSize.updateFonts(A);for(var k=0;k<A.voices.length;k++){var T=new p(k,A.voices.length);k===0?(T.barfrom=A.connectBarLines==="start"||A.connectBarLines==="continue",T.barto=A.connectBarLines==="continue"||A.connectBarLines==="end"):T.duplicate=!0,A.title&&A.title[k]&&(T.header=A.title[k].replace(/\\n/g,`
`),T.headerPosition=6+M.getTextSize.baselineToCenter(T.header,"voicefont","staff-extra voice-name",k,A.voices.length)/g.STEP),A.clef&&A.clef.type==="perc"&&(T.isPercussion=!0);var S=(!this.initialClef||H===0)&&o(A.clef,this.tuneNumber);S&&(k===0&&A.barNumber&&this.addMeasureNumber(A.barNumber,S),T.addChild(S),this.startlimitelem=S);var O=t(A.key,this.tuneNumber);if(O&&(T.addChild(O),this.startlimitelem=O),A.meter){A.meter.type==="specified"?this.measureLength=A.meter.value[0].num/A.meter.value[0].den:this.measureLength=1;var G=n(A.meter,this.tuneNumber);T.addChild(G),this.startlimitelem=G}T.duplicate&&(T.children=[]);var W=A.clef.stafflines||A.clef.stafflines===0?A.clef.stafflines:5;M.addVoice(T,z,W);var Y=W===1;this.createABCVoice(A.voices[k],F,z,k,Y,T),M.setStaffLimits(T),k===0&&(A.brace==="start"||!M.brace&&A.brace?(M.brace||(M.brace=[]),M.brace.push(new d(T,"brace"))):A.brace==="end"&&M.brace?M.brace[M.brace.length-1].setBottomStaff(T):A.brace==="continue"&&M.brace&&M.brace[M.brace.length-1].continuing(T),A.bracket==="start"||!M.bracket&&A.bracket?(M.bracket||(M.bracket=[]),M.bracket.push(new d(T,"bracket"))):A.bracket==="end"&&M.bracket?M.bracket[M.bracket.length-1].setBottomStaff(T):A.bracket==="continue"&&M.bracket&&M.bracket[M.bracket.length-1].continuing(T))}};function C(M,A){var F=M[A];if(F.el_type!=="note"||!F.startBeam||F.endBeam)return{count:1,elem:F};for(var z=[];A<M.length&&M[A].el_type==="note"&&(z.push(M[A]),!M[A].endBeam);)A++;return{count:z.length,elem:z}}R.prototype.createABCVoice=function(M,A,F,z,H,k){this.popCrossLineElems(F,z),this.stemdir=this.isBagpipes?"down":null,this.abcline=M,this.partstartelem&&(this.partstartelem=new u("",null,null),k.addOther(this.partstartelem));var T=k.voicetotal<2?-1:k.voicenumber;for(var S in this.slurs)this.slurs.hasOwnProperty(S)&&(this.slurs[S]=new f({force:this.slurs[S].force,voiceNumber:T,stemDir:this.slurs[S].stemDir,style:this.slurs[S].dotted}),N&&this.slurs[S].setHint(),k.addOther(this.slurs[S]));for(var O=0;O<this.ties.length;O++)this.ties[O]=new f({force:this.ties[O].force,stemDir:this.ties[O].stemDir,voiceNumber:T,style:this.ties[O].dotted}),N&&this.ties[O].setHint(),k.addOther(this.ties[O]);for(var G=0;G<this.abcline.length;G++)B(this.abcline[G]),this.minY=Math.min(this.abcline[G].minpitch,this.minY);for(var W=F===0,Y=0;Y<this.abcline.length;){var K=C(this.abcline,Y),ee=this.createABCElement(W,H,k,K.elem);if(ee)for(O=0;O<ee.length;O++){if(!this.tempoSet&&A&&!A.suppress){this.tempoSet=!0;var $=new b(A,0,0,"tempo",this.tuneNumber,{});$.addFixedX(new r(A,this.tuneNumber,a)),k.addChild($)}k.addChild(ee[O])}Y+=K.count}this.pushCrossLineElems(F,z)},R.prototype.saveState=function(){this.tiesSave=_.cloneArray(this.ties),this.slursSave=_.cloneHashOfHash(this.slurs),this.slursbyvoiceSave=_.cloneHashOfHash(this.slursbyvoice),this.tiesbyvoiceSave=_.cloneHashOfArrayOfHash(this.tiesbyvoice)},R.prototype.restoreState=function(){this.ties=_.cloneArray(this.tiesSave),this.slurs=_.cloneHashOfHash(this.slursSave),this.slursbyvoice=_.cloneHashOfHash(this.slursbyvoiceSave),this.tiesbyvoice=_.cloneHashOfArrayOfHash(this.tiesbyvoiceSave)},R.prototype.createABCElement=function(M,A,F,z){var H=[];switch(z.el_type){case void 0:H=this.createBeam(A,F,z);break;case"note":H[0]=this.createNote(z,!1,A,F),this.triplet&&this.triplet.isClosed()&&(F.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1);break;case"bar":H[0]=this.createBarLine(F,z,M),F.duplicate&&H.length>0&&(H[0].invisible=!0);break;case"meter":H[0]=n(z,this.tuneNumber),this.startlimitelem=H[0],F.duplicate&&H.length>0&&(H[0].invisible=!0);break;case"clef":if(H[0]=o(z,this.tuneNumber),!H[0])return null;F.duplicate&&H.length>0&&(H[0].invisible=!0);break;case"key":var k=t(z,this.tuneNumber);k&&(H[0]=k,this.startlimitelem=H[0]),F.duplicate&&H.length>0&&(H[0].invisible=!0);break;case"stem":this.stemdir=z.direction==="auto"?void 0:z.direction;break;case"part":var T=new b(z,0,0,"part",this.tuneNumber),S=this.getTextSize.calc(z.title,"partsfont","part");T.addFixedX(new y(z.title,0,0,void 0,{type:"part",height:S.height/g.STEP})),H[0]=T;break;case"tempo":var O=new b(z,0,0,"tempo",this.tuneNumber);O.addFixedX(new r(z,this.tuneNumber,a)),H[0]=O;break;case"style":z.head==="normal"?delete this.style:this.style=z.head;break;case"hint":N=!0,this.saveState();break;case"midi":break;case"scale":this.voiceScale=z.size;break;case"color":this.voiceColor=z.color,F.color=this.voiceColor;break;default:var G=new b(z,0,0,"unsupported",this.tuneNumber);G.addFixed(new y("element type "+z.el_type,0,0,void 0,{type:"debug"})),H[0]=G}return H};function B(M){if(M.pitches){q(M);for(var A=0,F=0;F<M.pitches.length;F++)A+=M.pitches[F].verticalPos;M.averagepitch=A/M.pitches.length,M.minpitch=M.pitches[0].verticalPos,M.maxpitch=M.pitches[M.pitches.length-1].verticalPos}}R.prototype.createBeam=function(M,A,F){var z=[],H=new h(this.stemHeight*this.voiceScale,this.stemdir,this.flatBeams,F[0]);N&&H.setHint();for(var k=0;k<F.length;k++)H.runningDirection(F[k]);H.setStemDirection();var T=this.stemdir;for(this.stemdir=H.stemsUp?"up":"down",k=0;k<F.length;k++){var S=F[k],O=this.createNote(S,!0,M,A);z.push(O),H.add(O),this.triplet&&this.triplet.isClosed()&&(A.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1)}return H.calcDir(),A.addBeam(H),this.stemdir=T,z};var q=function(M){var A;do{A=!0;for(var F=0;F<M.pitches.length-1;F++)if(M.pitches[F].pitch>M.pitches[F+1].pitch){A=!1;var z=M.pitches[F];M.pitches[F]=M.pitches[F+1],M.pitches[F+1]=z}}while(!A)},L=function(M,A,F,z,H,k,T,S,O){for(var G=F;G>11;G--)G%2===0&&!z&&M.addFixed(new y(null,S,(H+4)*O,G,{type:"ledger"}));for(G=A;G<1;G++)G%2===0&&!z&&M.addFixed(new y(null,S,(H+4)*O,G,{type:"ledger"}));for(G=0;G<k.length;G++){var W=H;T==="down"&&(W=-W),M.addFixed(new y(null,W+S,(H+4)*O,k[G],{type:"ledger"}))}};R.prototype.addGraceNotes=function(M,A,F,z,H,k,T){var S=.6,O=3.5/5;H=Math.round(H*O);var G=null,W;M.gracenotes.length>1&&(G=new h(H,"grace",k),N&&G.setHint(),G.mainNote=F);var Y,K=[];for(Y=M.gracenotes.length-1;Y>=0;Y--)T+=10,K[Y]=T,M.gracenotes[Y].accidental&&(T+=7);for(Y=0;Y<M.gracenotes.length;Y++){var ee=M.gracenotes[Y].verticalPos;W=G?null:I.uflags[k?5:3];var $=[],ne=a(F,"noteheads.quarter",M.gracenotes[Y],{dir:"up",headx:-K[Y],extrax:-K[Y],flag:W,scale:S*this.voiceScale,accidentalSlot:$});ne.notehead.highestVert=ne.notehead.pitch+H;var ie=ne.notehead;if(this.addSlursAndTies(F,M.gracenotes[Y],ie,A,"up",!0),F.addExtra(ie),M.gracenotes[Y].acciaccatura){var Q=M.gracenotes[Y].verticalPos+7*S,se=G?5:6;F.addRight(new y("flags.ugrace",-K[Y]+se,0,Q,{scalex:S,scaley:S}))}if(G){var te=M.gracenotes[Y].duration/2;k&&(te/=2);var J={heads:[ie],abcelem:{averagepitch:ee,minpitch:ee,maxpitch:ee,duration:te}};G.add(J)}else{var ve=ee+.3333333333333333*S,fe=ee+7*S,ue=ie.dx+ie.w,de=-.6;F.addExtra(new y(null,ue,0,ve,{type:"stem",pitch2:fe,linewidth:de}))}L(F,ee,ee,!1,m.getSymbolWidth("noteheads.quarter"),[],!0,ie.dx-1,.6);var we=M.rest&&(M.rest.type==="spacer"||M.rest.type==="invisible");Y===0&&!k&&this.graceSlurs&&!we&&A.addOther(new f({anchor1:ie,anchor2:z,isGrace:!0}))}return G&&(G.calcDir(),A.addBeam(G)),T};function D(M,A,F,z,H,k,T,S,O){var G,W=7,Y,K,ee;switch(H&&(k==="down"&&(W=3),k==="up"&&(W=11)),T&&(F<.5||F<1?W=7:W=5),A.rest.type){case"whole":G=I.rest[0],A.averagepitch=W,A.minpitch=W,A.maxpitch=W,z=0;break;case"rest":A.style==="rhythm"?G=I.rhythm[-S]:G=I.rest[-S],A.averagepitch=W,A.minpitch=W,A.maxpitch=W;break;case"invisible":case"invisible-multimeasure":case"spacer":G="",A.averagepitch=W,A.minpitch=W,A.maxpitch=W;break;case"multimeasure":G=I.rest.multi,A.averagepitch=W,A.minpitch=W,A.maxpitch=W,z=0;var $=m.getSymbolWidth(G);M.addHead(new y(G,$,$*2,7));var ne=new y(""+A.rest.text,$,$,16,{type:"multimeasure-text"});M.addExtra(ne)}if(A.rest.type.indexOf("multimeasure")<0&&A.rest.type!=="invisible"){var ie=a(M,G,{verticalPos:W},{dot:z,scale:O});Y=ie.notehead,Y&&(M.addHead(Y),K=ie.accidentalshiftx,ee=ie.dotshiftx)}return{noteHead:Y,roomTaken:K,roomTakenRight:ee}}function P(M,A){for(var F=0;F<M.length;F++)if(JSON.stringify(M[F])===JSON.stringify(A))return;M.push(A)}return R.prototype.addNoteToAbcElement=function(M,A,F,z,H,k,T,S,O){var G=0,W,Y=0,K=0,ee,$,ne=[],ie=[],Q=0,se=A.averagepitch>=6?"down":"up";z&&(se=z),H=A.style?A.style:H,(!H||H==="normal")&&(H="note");var te;k?te=I[H].nostem:te=I[H][-T],te||console.log("noteSymbol:",H,T,k);var J;for(J=se==="down"?A.pitches.length-2:1;se==="down"?J>=0:J<A.pitches.length;J=se==="down"?J-1:J+1){var ve=A.pitches[se==="down"?J+1:J-1],fe=A.pitches[J],ue=se==="down"?ve.pitch-fe.pitch:fe.pitch-ve.pitch;ue<=1&&!ve.printer_shift&&(fe.printer_shift=ue?"different":"same",(fe.verticalPos>11||fe.verticalPos<1)&&ne.push(fe.verticalPos-fe.verticalPos%2),se==="down"?Y=m.getSymbolWidth(te)+2:G=m.getSymbolWidth(te)+2)}var de=A.pitches.length;for(J=0;J<A.pitches.length;J++){if(!S){var we;se==="down"&&J!==0||se==="up"&&J!==de-1?we=null:we=I[se==="down"?"dflags":"uflags"][-T]}var me;if(A.pitches[J].style)me=I[A.pitches[J].style][-T];else if(O.isPercussion&&this.percmap){me=te;var V=this.percmap[w(A.pitches[J])];V&&V.noteHead&&I[V.noteHead]&&(me=I[V.noteHead][-T])}else me=te;A.pitches[J].highestVert=A.pitches[J].verticalPos;var j=(z==="up"||se==="up")&&J===0,X=(z==="down"||se==="down")&&J===de-1;if(j||X){if((A.startSlur||de===1)&&(A.pitches[J].highestVert=A.pitches[de-1].verticalPos,E(A)<1&&(z==="up"||se==="up")&&(A.pitches[J].highestVert+=6)),A.startSlur)for(A.pitches[J].startSlur||(A.pitches[J].startSlur=[]),$=0;$<A.startSlur.length;$++)P(A.pitches[J].startSlur,A.startSlur[$]);if(A.endSlur)for(A.pitches[J].highestVert=A.pitches[de-1].verticalPos,E(A)<1&&(z==="up"||se==="up")&&(A.pitches[J].highestVert+=6),A.pitches[J].endSlur||(A.pitches[J].endSlur=[]),$=0;$<A.endSlur.length;$++)P(A.pitches[J].endSlur,A.endSlur[$])}var U=!S&&T<=-1,Z=a(M,me,A.pitches[J],{dir:se,extrax:-Y,flag:we,dot:F,dotshiftx:G,scale:this.voiceScale,accidentalSlot:ie,shouldExtendStem:!z,printAccidentals:!O.isPercussion});Q=Math.max(m.getSymbolWidth(me),Q),M.extraw-=Z.extraLeft,W=Z.notehead,W&&(this.addSlursAndTies(M,A.pitches[J],W,O,U?se:null,!1),A.gracenotes&&A.gracenotes.length>0&&(W.bottom=W.bottom-1),M.addHead(W)),Y+=Z.accidentalshiftx,K=Math.max(K,Z.dotshiftx)}if(U){var ae=Math.round(70*this.voiceScale)/10,ce=se==="down"?A.minpitch-ae:A.minpitch+1/3;ce>6&&!z&&(ce=6);var he=se==="down"?A.maxpitch-1/3:A.maxpitch+ae;he<6&&!z&&(he=6);var re=se==="down"||M.heads.length===0?0:M.heads[0].w,oe=se==="down"?1:-1;W&&W.c==="noteheads.slash.quarter"&&(se==="down"?he-=1:ce+=1),W&&W.c==="noteheads.triangle.quarter"&&(se==="down"?he-=.7:ce-=1.2),M.addRight(new y(null,re,0,ce,{type:"stem",pitch2:he,linewidth:oe,bottom:ce-1})),ee=Math.min(ce,he)}return{noteHead:W,roomTaken:Y,roomTakenRight:K,min:ee,additionalLedgers:ne,dir:se,symbolWidth:Q}},R.prototype.addLyric=function(M,A){var F="";A.lyric.forEach(function(k){var T=k.divider===" "?"":k.divider;F+=k.syllable+T+`
`});var z=this.getTextSize.calc(F,"vocalfont","lyric"),H=A.positioning?A.positioning.vocalPosition:"below";M.addCentered(new y(F,0,z.width,void 0,{type:"lyric",position:H,height:z.height/g.STEP,dim:this.getTextSize.attr("vocalfont","lyric")}))},R.prototype.createNote=function(M,A,F,z){var H=null,k=0,T=0,S=0,O=[],G,W=E(M),Y=!1;W===0&&(Y=!0,W=.25,A=!0);for(var K=Math.floor(Math.log(W)/Math.log(2)),ee=0,$=Math.pow(2,K),ne=$/2;$<W;ee++,$+=ne,ne/=2);M.startTriplet&&(this.tripletmultiplier=M.tripletMultiplier);var ie=W*this.tripletmultiplier;M.rest&&M.rest.type==="multimeasure"&&(ie=1),M.rest&&M.rest.type==="invisible-multimeasure"&&(ie=this.measureLength*M.rest.text);var Q=M.rest?"rest":"note",se=new b(M,ie,1,Q,this.tuneNumber,{durationClassOveride:M.duration*this.tripletmultiplier});if(N&&se.setHint(),M.rest){this.measureLength===W&&M.rest.type!=="invisible"&&M.rest.type!=="spacer"&&M.rest.type.indexOf("multimeasure")<0&&(M.rest.type="whole");var te=D(se,M,W,ee,z.voicetotal>1,this.stemdir,F,K,this.voiceScale);H=te.noteHead,k=te.roomTaken,T=te.roomTakenRight}else{var J=this.addNoteToAbcElement(se,M,ee,this.stemdir,this.style,Y,K,A,z);J.min!==void 0&&(this.minY=Math.min(J.min,this.minY)),H=J.noteHead,k=J.roomTaken,T=J.roomTakenRight,O=J.additionalLedgers,G=J.dir,S=J.symbolWidth}if(M.lyric!==void 0&&this.addLyric(se,M),M.gracenotes!==void 0&&(k+=this.addGraceNotes(M,z,se,H,this.stemHeight*this.voiceScale,this.isBagpipes,k)),M.decoration){var ve=A&&G!=="up"?Math.min(-3,se.bottom-6):se.bottom;this.decoration.createDecoration(z,M.decoration,se.top,H?H.w:0,se,k,G,ve,M.positioning,this.hasVocals,this.accentAbove)}if(M.barNumber&&se.addFixed(new y(M.barNumber,-10,0,0,{type:"barNumber"})),L(se,M.minpitch,M.maxpitch,M.rest,S,O,G,-2,1),M.chord!==void 0){var fe=x(this.getTextSize,se,M,k,T,S,this.jazzchords,this.germanAlphabet);k=fe.roomTaken,T=fe.roomTakenRight}return M.startTriplet&&(this.triplet=new e(M.startTriplet,H,{flatBeams:this.flatBeams})),M.endTriplet&&this.triplet&&this.triplet.setCloseAnchor(H),this.triplet&&!M.startTriplet&&!M.endTriplet&&!(M.rest&&M.rest.type==="spacer")&&this.triplet.middleNote(H),se},R.prototype.addSlursAndTies=function(M,A,F,z,H,k){if(A.endTie&&this.ties.length>0){for(var T=!1,S=0;S<this.ties.length;S++)if(this.ties[S].anchor1&&this.ties[S].anchor1.pitch===F.pitch){this.ties[S].setEndAnchor(F),z.setRange(this.ties[S]),this.ties.splice(S,1),T=!0;break}T||(this.ties[0].setEndAnchor(F),z.setRange(this.ties[0]),this.ties.splice(0,1))}var O=z.voicetotal<2?-1:z.voicenumber;if(A.startTie){var G=new f({anchor1:F,force:this.stemdir==="down"||this.stemdir==="up",stemDir:this.stemdir,isGrace:k,voiceNumber:O,style:A.startTie.style});N&&G.setHint(),this.ties[this.ties.length]=G,z.addOther(G),M.startTie=!0}var W,Y;if(A.endSlur)for(var K=0;K<A.endSlur.length;K++)Y=A.endSlur[K],this.slurs[Y]?(W=this.slurs[Y],W.setEndAnchor(F),z.setRange(W),delete this.slurs[Y]):(W=new f({anchor2:F,stemDir:this.stemdir,voiceNumber:O}),N&&W.setHint(),z.addOther(W)),this.startlimitelem&&W.setStartX(this.startlimitelem);else if(!k)for(var ee in this.slurs)this.slurs.hasOwnProperty(ee)&&this.slurs[ee].addInternalNote(F);if(A.startSlur)for(K=0;K<A.startSlur.length;K++)Y=A.startSlur[K].label,W=new f({anchor1:F,stemDir:this.stemdir,voiceNumber:O,style:A.startSlur[K].style}),N&&W.setHint(),this.slurs[Y]=W,z.addOther(W)},R.prototype.addMeasureNumber=function(M,A){var F=this.getTextSize.calc(M,"measurefont","bar-number"),z=0;A.isClef&&(z+=F.width/2);var H=F.width>10&&A.abcelem.type==="treble"?13.5:11;A.addFixed(new y(M,z,F.width,H+F.height/g.STEP,{type:"barNumber",dim:this.getTextSize.attr("measurefont","bar-number")}))},R.prototype.createBarLine=function(M,A,F){var z=new b(A,0,10,"bar",this.tuneNumber),H=null,k=0;A.barNumber&&this.addMeasureNumber(A.barNumber,z);var T=A.type==="bar_right_repeat"||A.type==="bar_dbl_repeat",S=A.type!=="bar_left_repeat"&&A.type!=="bar_thick_thin"&&A.type!=="bar_invisible",O=A.type==="bar_right_repeat"||A.type==="bar_dbl_repeat"||A.type==="bar_left_repeat"||A.type==="bar_thin_thick"||A.type==="bar_thick_thin",G=A.type==="bar_left_repeat"||A.type==="bar_thick_thin"||A.type==="bar_thin_thin"||A.type==="bar_dbl_repeat",W=A.type==="bar_left_repeat"||A.type==="bar_dbl_repeat";if(T||W){for(var Y in this.slurs)this.slurs.hasOwnProperty(Y)&&this.slurs[Y].setEndX(z);this.startlimitelem=z}if(T&&(z.addRight(new y("dots.dot",k,1,7)),z.addRight(new y("dots.dot",k,1,5)),k+=6),S&&(H=new y(null,k,1,2,{type:"bar",pitch2:10,linewidth:.6}),z.addRight(H)),A.type==="bar_invisible"&&(H=new y(null,k,1,2,{type:"none",pitch2:10,linewidth:.6}),z.addRight(H)),A.decoration&&this.decoration.createDecoration(M,A.decoration,12,O?3:1,z,0,"down",2,A.positioning,this.hasVocals,this.accentAbove),O&&(k+=4,H=new y(null,k,4,2,{type:"bar",pitch2:10,linewidth:4}),z.addRight(H),k+=5),this.partstartelem&&A.endEnding&&(this.partstartelem.anchor2=H,this.partstartelem=null),G&&(k+=3,H=new y(null,k,1,2,{type:"bar",pitch2:10,linewidth:.6}),z.addRight(H)),W&&(k+=3,z.addRight(new y("dots.dot",k,1,7)),z.addRight(new y("dots.dot",k,1,5))),A.startEnding&&F){var K=this.getTextSize.calc(A.startEnding,"repeatfont","").width;z.minspacing+=K+10,this.partstartelem=new u(A.startEnding,H,null),M.addOther(this.partstartelem)}return z.extraw-=5,A.chord!==void 0&&x(this.getTextSize,z,A,0,0,0,!1,this.germanAlphabet),z},A0=R,A0}var M0,Hn;function Bc(){if(Hn)return M0;Hn=1;var b="http://www.w3.org/2000/svg";function h(n){this.svg=a(),this.currentGroup=[],n.appendChild(this.svg)}h.prototype.clear=function(){if(this.svg){var n=this.svg.parentNode;this.svg=a(),this.currentGroup=[],n&&(n.innerHTML="",n.appendChild(this.svg))}},h.prototype.setTitle=function(n){var l=document.createElement("title"),u=document.createTextNode(n);l.appendChild(u),this.svg.insertBefore(l,this.svg.firstChild)},h.prototype.setResponsiveWidth=function(n,l){if(this.svg.setAttribute("viewBox","0 0 "+n+" "+l),this.svg.setAttribute("preserveAspectRatio","xMinYMin meet"),this.svg.removeAttribute("height"),this.svg.removeAttribute("width"),this.svg.style.display="inline-block",this.svg.style.position="absolute",this.svg.style.top="0",this.svg.style.left="0",this.svg.parentNode){var u=this.svg.parentNode.getAttribute("class");u?u.indexOf("abcjs-container")<0&&this.svg.parentNode.setAttribute("class",u+" abcjs-container"):this.svg.parentNode.setAttribute("class","abcjs-container"),this.svg.parentNode.style.display="inline-block",this.svg.parentNode.style.position="relative",this.svg.parentNode.style.width="100%";var m=l/n*100;this.svg.parentNode.style["padding-bottom"]=m+"%",this.svg.parentNode.style["vertical-align"]="middle",this.svg.parentNode.style.overflow="hidden"}},h.prototype.setSize=function(n,l){this.svg.setAttribute("width",n),this.svg.setAttribute("height",l)},h.prototype.setAttribute=function(n,l){this.svg.setAttribute(n,l)},h.prototype.setScale=function(n){n!==1?(this.svg.style.transform="scale("+n+","+n+")",this.svg.style["-ms-transform"]="scale("+n+","+n+")",this.svg.style["-webkit-transform"]="scale("+n+","+n+")",this.svg.style["transform-origin"]="0 0",this.svg.style["-ms-transform-origin-x"]="0",this.svg.style["-ms-transform-origin-y"]="0",this.svg.style["-webkit-transform-origin-x"]="0",this.svg.style["-webkit-transform-origin-y"]="0"):(this.svg.style.transform="",this.svg.style["-ms-transform"]="",this.svg.style["-webkit-transform"]="")},h.prototype.insertStyles=function(n){var l=document.createElementNS(b,"style");l.textContent=n,this.svg.insertBefore(l,this.svg.firstChild)},h.prototype.setParentStyles=function(n){for(var l in n)n.hasOwnProperty(l)&&this.svg.parentNode&&(this.svg.parentNode.style[l]=n[l]);if(this.dummySvg){var u=document.querySelector("body");u.removeChild(this.dummySvg),this.dummySvg=null}};function d(n,l,u){var m=u-n;return"M "+n+" "+l+" l "+m+" 0 l 0 1  l "+-m+" 0  z "}function o(n,l,u){var m=u-l;return"M "+n+" "+l+" l 0 "+m+" l 1 0  l 0 "+-m+"  z "}h.prototype.rect=function(n){var l=[],u=n.x,m=n.y,y=n.x+n.width,g=n.y+n.height;return l.push(d(u,m,y)),l.push(d(u,g,y)),l.push(o(y,m,g)),l.push(o(u,g,m)),this.path({path:l.join(" "),stroke:"none","data-name":n["data-name"]})},h.prototype.dottedLine=function(n){var l=document.createElementNS(b,"line");l.setAttribute("x1",n.x1),l.setAttribute("x2",n.x2),l.setAttribute("y1",n.y1),l.setAttribute("y2",n.y2),l.setAttribute("stroke",n.stroke),l.setAttribute("stroke-dasharray","5,5"),this.svg.insertBefore(l,this.svg.firstChild)},h.prototype.rectBeneath=function(n){var l=document.createElementNS(b,"rect");l.setAttribute("x",n.x),l.setAttribute("width",n.width),l.setAttribute("y",n.y),l.setAttribute("height",n.height),n.stroke&&l.setAttribute("stroke",n.stroke),n["stroke-opacity"]&&l.setAttribute("stroke-opacity",n["stroke-opacity"]),n.fill&&l.setAttribute("fill",n.fill),n["fill-opacity"]&&l.setAttribute("fill-opacity",n["fill-opacity"]),this.svg.insertBefore(l,this.svg.firstChild)},h.prototype.text=function(n,l,u){var m=document.createElementNS(b,"text");m.setAttribute("stroke","none");for(var y in l)l.hasOwnProperty(y)&&m.setAttribute(y,l[y]);for(var g=(""+n).split(`
`),c=0;c<g.length;c++){var r=document.createElementNS(b,"tspan");if(r.setAttribute("x",l.x?l.x:0),c!==0&&r.setAttribute("dy","1.2em"),g[c].indexOf("")!==-1){var f=g[c].split("");if(r.textContent=f[0],f[1]){var e=document.createElementNS(b,"tspan");e.setAttribute("dy","-0.3em"),e.setAttribute("style","font-size:0.7em"),e.textContent=f[1],r.appendChild(e)}if(f[2]){var p=f[1]?"0.4em":"0.1em",x=document.createElementNS(b,"tspan");x.setAttribute("dy",p),x.setAttribute("style","font-size:0.7em"),x.textContent=f[2],r.appendChild(x)}}else r.textContent=g[c];m.appendChild(r)}return u?u.appendChild(m):this.append(m),m},h.prototype.richTextLine=function(n,l,u,m,y,g){var c=document.createElementNS(b,"text");c.setAttribute("stroke","none"),c.setAttribute("class",m),c.setAttribute("x",l),c.setAttribute("y",u),c.setAttribute("text-anchor",y),c.setAttribute("dominant-baseline","middle");for(var r=0;r<n.length;r++){for(var f=n[r],e=document.createElementNS(b,"tspan"),p=Object.keys(f.attrs),x=0;x<p.length;x++){var w=f.attrs[p[x]];w!==""&&e.setAttribute(p[x],w)}e.textContent=f.content,c.appendChild(e)}return g?g.appendChild(c):this.append(c),c},h.prototype.guessWidth=function(n,l){var u=this.createDummySvg(),m=this.text(n,l,u),y;try{y=m.getBBox(),isNaN(y.height)||!y.height?y={width:l["font-size"]/2,height:l["font-size"]+2}:y={width:y.width,height:y.height}}catch{y={width:l["font-size"]/2,height:l["font-size"]+2}}return u.removeChild(m),y},h.prototype.createDummySvg=function(){if(!this.dummySvg){this.dummySvg=a();var n=["display: block !important;","height: 1px;","width: 1px;","position: absolute;"];this.dummySvg.setAttribute("style",n.join(""));var l=document.querySelector("body");l.appendChild(this.dummySvg)}return this.dummySvg};var t={};h.prototype.getTextSize=function(n,l,u){if(typeof n=="number"&&(n=""+n),!n||n.match(/^\s+$/))return{width:0,height:0};var m;if(n.length<20&&(m=n+JSON.stringify(l),t[m]))return t[m];var y=!u;u||(u=this.text(n,l));var g;try{g=u.getBBox(),isNaN(g.height)||!g.height?g=this.guessWidth(n,l):g={width:g.width,height:g.height}}catch{g=this.guessWidth(n,l)}return y&&(this.currentGroup.length>0?this.currentGroup[0].removeChild(u):this.svg.removeChild(u)),m&&(t[m]=g),g},h.prototype.openGroup=function(n){n=n||{};var l=document.createElementNS(b,"g");return n.klass&&l.setAttribute("class",n.klass),n.fill&&l.setAttribute("fill",n.fill),n.stroke&&l.setAttribute("stroke",n.stroke),n["data-name"]&&l.setAttribute("data-name",n["data-name"]),n.prepend?this.prepend(l):this.append(l),this.currentGroup.unshift(l),l},h.prototype.closeGroup=function(){var n=this.currentGroup.shift();return n&&n.children.length===0?(n.parentElement.removeChild(n),null):n},h.prototype.path=function(n){var l=document.createElementNS(b,"path");for(var u in n)n.hasOwnProperty(u)&&(u==="path"?l.setAttributeNS(null,"d",n.path):u==="klass"?l.setAttributeNS(null,"class",n[u]):n[u]!==void 0&&l.setAttributeNS(null,u,n[u]));return this.append(l),l},h.prototype.pathToBack=function(n){var l=document.createElementNS(b,"path");for(var u in n)n.hasOwnProperty(u)&&(u==="path"?l.setAttributeNS(null,"d",n.path):u==="klass"?l.setAttributeNS(null,"class",n[u]):l.setAttributeNS(null,u,n[u]));return this.prepend(l),l},h.prototype.lineToBack=function(n){for(var l=document.createElementNS(b,"line"),u=Object.keys(n),m=0;m<u.length;m++)l.setAttribute(u[m],n[u[m]]);return this.prepend(l),l},h.prototype.append=function(n){this.currentGroup.length>0?this.currentGroup[0].appendChild(n):this.svg.appendChild(n)},h.prototype.prepend=function(n){this.currentGroup.length>0?this.currentGroup[0].appendChild(n):this.svg.insertBefore(n,this.svg.firstChild)},h.prototype.setAttributeOnElement=function(n,l){for(var u in l)l.hasOwnProperty(u)&&n.setAttributeNS(null,u,l[u])},h.prototype.moveElementToChild=function(n,l){n.appendChild(l)};function a(){var n=document.createElementNS(b,"svg");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("role","img"),n.setAttribute("fill","currentColor"),n.setAttribute("stroke","currentColor"),n}return M0=h,M0}var N0,zn;function Lc(){if(zn)return N0;zn=1;var b=Ee(),h=Bc(),d=function(o){this.paper=new h(o),this.controller=null,this.space=3*b.SPACE,this.padding={},this.reset(),this.firefox112=navigator.userAgent.indexOf("Firefox/112.0")>=0};return d.prototype.reset=function(){this.paper.clear(),this.y=0,this.abctune=null,this.path=null,this.isPrint=!1,this.lineThickness=0,this.initVerticalSpace()},d.prototype.newTune=function(o){this.abctune=o,this.setVerticalSpace(o.formatting),this.isPrint=o.media==="print",this.setPadding(o)},d.prototype.setLineThickness=function(o){this.lineThickness=o},d.prototype.setPaddingOverride=function(o){this.paddingOverride={top:o.paddingtop,bottom:o.paddingbottom,right:o.paddingright,left:o.paddingleft}},d.prototype.setPadding=function(o){function t(a,n,l,u,m){o.formatting[l]!==void 0?a.padding[n]=o.formatting[l]:a.paddingOverride[n]!==void 0?a.padding[n]=a.paddingOverride[n]:a.isPrint?a.padding[n]=u:a.padding[n]=m}t(this,"top","topmargin",38,15),t(this,"bottom","botmargin",38,15),t(this,"left","leftmargin",68,15),t(this,"right","rightmargin",68,15)},d.prototype.adjustNonScaledItems=function(o){this.padding.top/=o,this.padding.bottom/=o,this.padding.left/=o,this.padding.right/=o,this.abctune.formatting.headerfont.size/=o,this.abctune.formatting.footerfont.size/=o},d.prototype.initVerticalSpace=function(){this.spacing={composer:7.56,graceBefore:8.67,graceInside:10.67,graceAfter:16,info:0,lineSkipFactor:1.1,music:7.56,paragraphSkipFactor:.4,parts:11.33,slurHeight:1,staffSeparation:61.33,staffTopMargin:0,stemHeight:26.67+10,subtitle:3.78,systemStaffSeparation:48,text:18.9,title:7.56,top:30.24,vocal:0,words:0}},d.prototype.setVerticalSpace=function(o){o.staffsep!==void 0&&(this.spacing.staffSeparation=o.staffsep*4/3),o.composerspace!==void 0&&(this.spacing.composer=o.composerspace*4/3),o.partsspace!==void 0&&(this.spacing.parts=o.partsspace*4/3),o.textspace!==void 0&&(this.spacing.text=o.textspace*4/3),o.musicspace!==void 0&&(this.spacing.music=o.musicspace*4/3),o.titlespace!==void 0&&(this.spacing.title=o.titlespace*4/3),o.sysstaffsep!==void 0&&(this.spacing.systemStaffSeparation=o.sysstaffsep*4/3),o.stafftopmargin!==void 0&&(this.spacing.staffTopMargin=o.stafftopmargin*4/3),o.subtitlespace!==void 0&&(this.spacing.subtitle=o.subtitlespace*4/3),o.topspace!==void 0&&(this.spacing.top=o.topspace*4/3),o.vocalspace!==void 0&&(this.spacing.vocal=o.vocalspace*4/3),o.wordsspace!==void 0&&(this.spacing.words=o.wordsspace*4/3)},d.prototype.calcY=function(o){return this.y-o*b.STEP},d.prototype.moveY=function(o,t){t===void 0&&(t=1),this.y+=o*t},d.prototype.absolutemoveY=function(o){this.y=o},N0=d,N0}var B0,Gn;function Pc(){if(Gn)return B0;Gn=1;function b(h,d,o,t,a,n){var l=h.text;this.rows=[];var u;d&&this.rows.push({move:d});var m=o.calc("textfont","defined-text");if(l==="")this.rows.push({move:m.attr["font-size"]*2});else if(typeof l=="string")this.rows.push({move:m.attr["font-size"]/2}),this.rows.push({left:t,text:l,font:"textfont",klass:"defined-text",anchor:"start",startChar:h.startChar,endChar:h.endChar,absElemType:"freeText",name:"free-text"}),u=n.calc(l,"textfont","defined-text"),this.rows.push({move:u.height});else if(l){for(var y=0,g=t,c="textfont",r=0;r<l.length;r++)l[r].font?c=l[r].font:c="textfont",this.rows.push({left:g,text:l[r].text,font:c,klass:"defined-text",anchor:"start",startChar:h.startChar,endChar:h.endChar,absElemType:"freeText",name:"free-text"}),u=n.calc(l[r].text,o.calc(c,"defined-text").font,"defined-text"),g+=u.width+u.height/2,y=Math.max(y,u.height);this.rows.push({move:y})}else if(h.length===1){var f=a/2;this.rows.push({left:f,text:h[0].text,font:"textfont",klass:"defined-text",anchor:"middle",startChar:h.startChar,endChar:h.endChar,absElemType:"freeText",name:"free-text"}),u=n.calc(h[0].text,"textfont","defined-text"),this.rows.push({move:u.height})}}return B0=b,B0}var L0,Yn;function qc(){if(Yn)return L0;Yn=1;function b(h,d,o){this.rows=[],h&&this.rows.push({move:h}),this.rows.push({separator:d,absElemType:"separator"}),o&&this.rows.push({move:o})}return L0=b,L0}var P0,Wn;function Dc(){if(Wn)return P0;Wn=1;function b(h,d,o,t,a,n){this.rows=[],h&&this.rows.push({move:h});var l=d.titleleft?"start":"middle",u=d.titleleft?a:t;this.rows.push({left:u,text:o.text,font:"subtitlefont",klass:"text subtitle",anchor:l,startChar:o.startChar,endChar:o.endChar,absElemType:"subtitle",name:"subtitle"});var m=n.calc(o.text,"subtitlefont","text subtitle");this.rows.push({move:m.height})}return P0=b,P0}var q0,Un;function ba(){if(Un)return q0;Un=1;function b(h,d,o){if(d.text){d.marginLeft||(d.marginLeft=0),d.klass||(d.klass=""),d.anchor||(d.anchor="start"),d.info||(d.info={startChar:-2,endChar:-2}),d.marginTop&&h.push({move:d.marginTop});var t={left:d.marginLeft,text:d.text,font:d.font,anchor:d.anchor,startChar:d.info.startChar,endChar:d.info.endChar,"dominant-baseline":d["dominant-baseline"]};d.absElemType&&(t.absElemType=d.absElemType),!d.inGroup&&d.klass&&(t.klass=d.klass),d.name&&(t.name=d.name),h.push(t);var a=o.calc("A",d.font,d.klass),n=d.text.split(`
`).length;if(d.text[d.text.length-1]===`
`&&n--,!d.noMove){var l=a.height*1.1*n;h.push({move:Math.round(l)}),d.marginBottom&&h.push({move:d.marginBottom})}}}return q0=b,q0}var D0,Vn;function Ks(){if(Vn)return D0;Vn=1;const b=ba();function h(d,o,t,a,n,l,u,m){var y=m.calc("i",t,a);if(o==="")d.push({move:y.height});else{if(typeof o=="string"){b(d,{marginLeft:l,text:o,font:t,klass:a,marginTop:u.marginTop,anchor:u.anchor,absElemType:u.absElemType,info:u.info,name:n},m);return}u.marginTop&&d.push({move:u.marginTop});var g=0,c={left:l,anchor:u.anchor,phrases:[]};a&&(c.klass=a),d.push(c);for(var r=0;r<o.length;r++){var f=o[r],e=f.font?f.font:m.attr(t,a).font,p={content:f.text};e&&(p.attrs={"font-family":m.getFamily(e.face),"font-size":e.size,"font-weight":e.weight,"font-style":e.style,"font-decoration":e.decoration}),c.phrases.push(p);var x=m.calc(f.text,e,a);g=Math.max(g,x.height),f.text[f.text.length-1]===" "&&y.width}d.push({move:g})}}return D0=h,D0}var F0,Xn;function Fc(){if(Xn)return F0;Xn=1;const b=ba(),h=Ks();function d(o,t,a,n,l,u,m,y,g,c){if(this.rows=[],o.header&&u){var r=c.calc("X","headerfont","abcjs-header abcjs-meta-top").height;b(this.rows,{marginLeft:m,text:o.header.left,font:"headerfont",klass:"header meta-top",marginTop:-r,info:t.header,name:"header"},c),b(this.rows,{marginLeft:m+l/2,text:o.header.center,font:"headerfont",klass:"header meta-top",marginTop:-r,anchor:"middle",info:t.header,name:"header"},c),b(this.rows,{marginLeft:m+l,text:o.header.right,font:"headerfont",klass:"header meta-top",marginTop:-r,anchor:"end",info:t.header,name:"header"},c)}u&&this.rows.push({move:y.top});var f=a.titleleft?"start":"middle",e=a.titleleft?m:m+l/2;if(o.title){var p=g?"abcjs-title":"";h(this.rows,o.title,"titlefont",p,"title",e,{marginTop:y.title,anchor:f,absElemType:"title",info:t.title},c)}if(n.length)for(var x=0;x<n.length&&n[x].subtitle;){var p=g?"abcjs-text abcjs-subtitle":"";h(this.rows,n[x].subtitle.text,"subtitlefont",p,"subtitle",e,{marginTop:y.subtitle,anchor:f,absElemType:"subtitle",info:n[x].subtitle},c),x++}if(o.rhythm||o.origin||o.composer){if(this.rows.push({move:y.composer}),o.rhythm&&o.rhythm.length>0){var w=!!(o.composer||o.origin),p=g?"abcjs-rhythm":"";b(this.rows,{marginLeft:m,text:o.rhythm,font:"infofont",klass:p,absElemType:"rhythm",noMove:w,info:t.rhythm,name:"rhythm"},c)}o.composer&&o.composer,o.origin&&o.origin;var _=o.composer?o.composer:"";if(o.origin&&(typeof _=="string"&&typeof o.origin=="string"?_+=" ("+o.origin+")":typeof _=="string"&&typeof o.origin!="string"?(_=[{text:_}],_.push({text:" ("}),_=_.concat(o.origin),_.push({text:")"})):(_.push({text:" ("}),_=_.concat(o.origin),_.push({text:")"}))),_){var p=g?"abcjs-composer":"";h(this.rows,_,"composerfont",p,"composer",m+l,{anchor:"end",absElemType:"composer",info:t.composer,ingroup:!0},c)}}if(o.author&&o.author.length>0){var p=g?"abcjs-author":"";h(this.rows,o.author,"composerfont",p,"author",m+l,{anchor:"end",absElemType:"author",info:t.author},c)}if(o.partOrder&&o.partOrder.length>0){var p=g?"abcjs-part-order":"";h(this.rows,o.partOrder,"partsfont",p,"part-order",m,{absElemType:"partOrder",info:t.partOrder,anchor:"start"},c)}}return F0=d,F0}var O0,jn;function Oc(){if(jn)return O0;jn=1;const b=ba(),h=Ks();function d(a,n,l,u,m,y,g){this.rows=[],a.unalignedWords&&a.unalignedWords.length>0&&this.unalignedWords(a.unalignedWords,u,m,y,g),this.extraText(a,u,m,y,g),a.footer&&l&&this.footer(a.footer,n,u,g)}d.prototype.unalignedWords=function(a,n,l,u,m){var y=u?"abcjs-unaligned-words":"",g="wordsfont",c=m.calc("i",g,y);this.rows.push({move:l.words}),t(this.rows,"",a,n,g,"unalignedWords","unalignedWords",y,"unalignedWords",l,u,m),this.rows.push({move:c.height})};function o(a,n,l,u,m,y,g){l&&(n&&(typeof l=="string"?l=n+l:l=[{text:n}].concat(l)),m=y?"abcjs-extra-text "+m:"",h(a,l,"historyfont",m,"description",u,{absElemType:"extraText",anchor:"start"},g))}function t(a,n,l,u,m,y,g,c,r,f,e,p){if(l){c=e?"abcjs-extra-text "+c:"";var x=p.calc("A",m,c);if(typeof l=="string")n&&(l=n+`
`+l),b(a,{marginLeft:u,text:l,font:m,absElemType:"extraText",name:r,"dominant-baseline":"middle",klass:c},p);else{a.push({startGroup:g,klass:c,name:r}),a.push({move:f.info}),n&&(b(a,{marginLeft:u,text:n,font:m,absElemType:"extraText",name:r,"dominant-baseline":"middle"},p),a.push({move:x.height*3/4}));for(var w=0;w<l.length;w++)h(a,l[w],m,"",r,u,{anchor:"start"},p),w<l.length-1&&typeof l[w]=="string"&&typeof l[w+1]!="string"&&a.push({move:x.height*3/4});a.push({endGroup:g,absElemType:y,startChar:-1,endChar:-1,name:r}),a.push({move:x.height})}}}return d.prototype.extraText=function(a,n,l,u,m){o(this.rows,"Book: ",a.book,n,"abcjs-book",u,m),o(this.rows,"Source: ",a.source,n,"abcjs-source",u,m),o(this.rows,"Discography: ",a.discography,n,"abcjs-discography",u,m),t(this.rows,"Notes:",a.notes,n,"historyfont","extraText","notes","abcjs-notes","description",l,u,m),o(this.rows,"Transcription: ",a.transcription,n,"abcjs-transcription",u,m),t(this.rows,"History:",a.history,n,"historyfont","extraText","history","abcjs-history","description",l,u,m),o(this.rows,"Copyright: ",a["abc-copyright"],n,"abcjs-copyright",u,m),o(this.rows,"Creator: ",a["abc-creator"],n,"abcjs-creator",u,m),o(this.rows,"Edited By: ",a["abc-edited-by"],n,"abcjs-edited-by",u,m)},d.prototype.footer=function(a,n,l,u){var m="header meta-bottom",y="footerfont";this.rows.push({startGroup:"footer",klass:m}),b(this.rows,{marginLeft:l,text:a.left,font:y,klass:m,name:"footer"},u),b(this.rows,{marginLeft:l+n/2,text:a.center,font:y,klass:m,anchor:"middle",name:"footer"},u),b(this.rows,{marginLeft:l+n,text:a.right,font:y,klass:m,anchor:"end",name:"footer"},u)},O0=d,O0}var I0,$n;function Qs(){if($n)return I0;$n=1;function b(d,o,t,a){if(d.indexOf(o)===0){var n=d.replace(o,""),l=parseInt(n,10);""+l===n&&(t[a]=l)}}function h(d,o){var t=[];if(d.absEl.elemset){for(var a={},n=0;n<d.absEl.elemset.length;n++){var l=d.absEl.elemset[n];if(l)for(var u=l.getAttribute("class").split(" "),m=0;m<u.length;m++)a[u[m]]=!0}for(var y=0;y<Object.keys(a).length;y++)t.push(Object.keys(a)[y])}for(var g={},c=0;c<t.length;c++)b(t[c],"abcjs-v",g,"voice"),b(t[c],"abcjs-l",g,"line"),b(t[c],"abcjs-m",g,"measure");d.staffPos&&(g.staffPos=d.staffPos);for(var r=o.target;r&&r.dataset&&!r.dataset.name&&r.tagName.toLowerCase()!=="svg";)r=r.parentNode;for(var f=o.target;f&&f.dataset&&!f.dataset.index&&f.tagName.toLowerCase()!=="svg";)f=f.parentNode;return f&&f.dataset&&(g.name=f.dataset.name,g.clickedName=r.dataset.name,g.parentClasses=f.classList),r&&r.classList&&(g.clickedClasses=r.classList),g.selectableElement=d.svgEl,{classes:t,analysis:g}}return I0=h,I0}var R0,Kn;function Ic(){if(Kn)return R0;Kn=1;var b=Ee(),h=Qs();function d(C,B){if(C.rangeHighlight=_,C.dragging)for(var q=0;q<C.selectables.length;q++){var L=C.selectables[q];L.svgEl.getAttribute("selectable")==="true"&&(L.svgEl.setAttribute("tabindex",0),L.svgEl.setAttribute("data-index",q),L.svgEl.addEventListener("keydown",a.bind(C)),L.svgEl.addEventListener("keyup",n.bind(C)),L.svgEl.addEventListener("focus",t.bind(C)))}for(var D=0;D<B.length;D++)B[D].addEventListener("touchstart",r.bind(C),{passive:!0}),B[D].addEventListener("touchmove",f.bind(C),{passive:!0}),B[D].addEventListener("touchend",e.bind(C),{passive:!0}),B[D].addEventListener("mousedown",r.bind(C)),B[D].addEventListener("mousemove",f.bind(C)),B[D].addEventListener("mouseup",e.bind(C))}function o(C){var B=1,q=1,L=C.target.closest("svg"),D=0;L&&L.viewBox&&L.viewBox.baseVal&&(L.viewBox.baseVal.width!==0&&(B=L.viewBox.baseVal.width/L.clientWidth),L.viewBox.baseVal.height!==0&&(q=L.viewBox.baseVal.height/L.clientHeight),D=L.viewBox.baseVal.y);var P=C.target&&C.target.tagName==="svg",M,A;return P?(M=C.offsetX,A=C.offsetY):(M=C.layerX,A=C.layerY),M=M*B,A=A*q,[M,A+D]}function t(C){this.dragMechanism==="keyboard"&&this.dragYStep!==0&&this.dragTarget&&x.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,C),this.dragYStep=0}function a(C){switch(C.keyCode){case 38:case 40:C.preventDefault()}}function n(C){var B=!1,q=C.target.dataset.index;switch(C.keyCode){case 13:case 32:B=!0,this.dragTarget=this.selectables[q],this.dragIndex=q,this.dragMechanism="keyboard",e.bind(this)(C);break;case 38:B=!0,this.dragTarget=this.selectables[q],this.dragIndex=q,this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep--,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*b.STEP+")"));break;case 40:B=!0,this.dragTarget=this.selectables[q],this.dragIndex=q,this.dragMechanism="keyboard",this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep++,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*b.STEP+")"));break;case 9:this.dragYStep!==0&&e.bind(this)(C);break}B&&C.preventDefault()}function l(C,B){if(!B)return-1;for(var q=0;q<C.length;q++)if(B.dataset.index===C[q].svgEl.dataset.index)return q;return-1}function u(C,B,q){for(var L=9999999,D=-1,P=0;P<C.selectables.length&&L>0;P++){var M=C.selectables[P];if(C.getDim(M),M.dim.left<B&&M.dim.right>B&&M.dim.top<q&&M.dim.bottom>q)D=P,L=0;else if(M.dim.top<q&&M.dim.bottom>q){var A=Math.min(Math.abs(M.dim.left-B),Math.abs(M.dim.right-B));A<L&&(L=A,D=P)}else if(M.dim.left<B&&M.dim.right>B){var F=Math.min(Math.abs(M.dim.top-q),Math.abs(M.dim.bottom-q));F<L&&(L=F,D=P)}else{var z=Math.abs(B-M.dim.left)>Math.abs(B-M.dim.right)?Math.abs(B-M.dim.right):Math.abs(B-M.dim.left),H=Math.abs(q-M.dim.top)>Math.abs(q-M.dim.bottom)?Math.abs(q-M.dim.bottom):Math.abs(q-M.dim.top),k=Math.sqrt(z*z+H*H);k<L&&(L=k,D=P)}}return D>=0&&L<=12?D:-1}function m(C,B,q){if(C.x<=B.offsetX&&C.x+C.width>=B.offsetX&&C.y<=B.offsetY&&C.y+C.height>=B.offsetY)return[B.offsetX,B.offsetY];var L=Math.abs(B.layerY/q-B.offsetY);return L<3?[B.offsetX,B.offsetY]:[B.layerX,B.layerY]}function y(C){if(!C)return null;if(C.tagName==="svg")return C;if(!C.getAttribute)return null;for(var B=C.getAttribute("selectable");!B;)C.parentElement?(C=C.parentElement,C.tagName==="svg"?B=!0:B=C.getAttribute("selectable")):B=!0;return C}function g(C,B){var q,L,D,P=l(C.selectables,y(B.target));return P>=0?(D=m(C.selectables[P].svgEl.getBBox(),B,C.scale),q=D[0],L=D[1]):(D=o(B),q=D[0],L=D[1],P=u(C,q,L)),{x:q,y:L,clickedOn:P}}function c(C){if(!(!C||!C.target||!C.touches||C.touches.length<1)){var B=C.target.getBoundingClientRect(),q=C.touches[0].pageX-B.left,L=C.touches[0].pageY-B.top;C.touches[0].offsetX=q,C.touches[0].offsetY=L,C.touches[0].layerX=C.touches[0].pageX,C.touches[0].layerY=C.touches[0].pageY}}function r(C){var B=C;C.type==="touchstart"&&(c(C),C.touches.length>0&&(B=C.touches[0]));var q=g(this,B);q.clickedOn>=0&&(C.type==="touchstart"||C.button===0)&&this.selectables[q.clickedOn]&&(this.dragTarget=this.selectables[q.clickedOn],this.dragIndex=q.clickedOn,this.dragMechanism="mouse",this.dragMouseStart={x:q.x,y:q.y},this.dragging&&this.dragTarget.isDraggable&&(I(this.renderer.paper,"abcjs-dragging-in-progress"),this.dragTarget.absEl.highlight(void 0,this.dragColor)))}function f(C){var B=C;if(C.type==="touchmove"&&(c(C),C.touches.length>0&&(B=C.touches[0])),this.lastTouchMove=C,!(!this.dragTarget||!this.dragging||!this.dragTarget.isDraggable||this.dragMechanism!=="mouse"||!this.dragMouseStart)){var q=g(this,B),L=Math.round((q.y-this.dragMouseStart.y)/b.STEP);L!==this.dragYStep&&(this.dragYStep=L,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+L*b.STEP+")"))}}function e(C){var B=C;C.type==="touchend"&&this.lastTouchMove&&(c(this.lastTouchMove),this.lastTouchMove&&this.lastTouchMove.touches&&this.lastTouchMove.touches.length>0&&(B=this.lastTouchMove.touches[0])),this.dragTarget&&(w.bind(this)(),this.dragTarget.absEl&&this.dragTarget.absEl.highlight&&(this.selected=[this.dragTarget.absEl],this.dragTarget.absEl.highlight(void 0,this.selectionColor)),x.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,B),this.dragTarget.svgEl&&this.dragTarget.svgEl.focus&&(this.dragTarget.svgEl.focus(),this.dragTarget=null,this.dragIndex=-1),R(this.renderer.svg,"abcjs-dragging-in-progress"))}function p(C){C>=0&&C<this.selectables.length&&(this.dragTarget=this.selectables[C],this.dragIndex=C,this.dragMechanism="keyboard",e.bind(this)({target:this.dragTarget.svgEl}))}function x(C,B,q,L,D){for(var P=h(C,D),M=P.classes,A=P.analysis,F=0;F<this.listeners.length;F++)this.listeners[F](C.absEl.abcelem,C.absEl.tuneNumber,M.join(" "),A,{step:B,max:q,index:L,setSelection:p.bind(this)},D)}function w(){for(var C=0;C<this.selected.length;C++)this.selected[C].unhighlight(void 0,this.renderer.foregroundColor);this.selected=[]}function _(C,B){w.bind(this)();for(var q=0;q<this.staffgroups.length;q++)for(var L=this.staffgroups[q].voices,D=0;D<L.length;D++)for(var P=L[D].children,M=0;M<P.length;M++){var A=P[M].abcelem.startChar,F=P[M].abcelem.endChar;(B>A&&C<F||B===C&&B===F)&&(this.selected[this.selected.length]=P[M],P[M].highlight(void 0,this.selectionColor))}}function E(C){var B=C.getAttribute("class");B||(B="");for(var q=B.split(" "),L={},D=0;D<q.length;D++)L[q[D]]=!0;return L}function N(C,B){var q=[];for(var L in B)B.hasOwnProperty(L)&&q.push(L);C.setAttribute("class",q.join(" "))}function I(C,B){if(C){var q=E(C.svg);q[B]=!0,N(C.svg,q)}}function R(C,B){if(C){var q=E(C.svg);delete q[B],N(C.svg,q)}}return R0=d,R0}var H0,Qn;function ma(){if(Qn)return H0;Qn=1;function b(h,d,o,t,a){return d+(t-d)/(o-h)*(a-h)}return H0=b,H0}var z0,Jn;function Rc(){if(Jn)return z0;Jn=1;var b=Pe(),h=Ee(),d=ma(),o=function(c){if(!(c.elems.length===0||c.allrests)){var r=l(c.stemsUp,c.isgrace),f=c.elems[0],e=c.elems[c.elems.length-1],p=0,x=c.stemsUp?f.abcelem.maxpitch:f.abcelem.minpitch;p=a(f,c.stemsUp,x,p),p=a(e,c.stemsUp,x,p),p=Math.max(c.stemHeight,p+3);var w=m(c.average,c.elems.length,p,c.stemsUp,f.abcelem.averagepitch,e.abcelem.averagepitch,c.isflat,c.min,c.max,c.isgrace),_=u(c.stemsUp,f,e);c.addBeam({startX:_[0],endX:_[1],startY:w[0],endY:w[1],dy:r});for(var E=g(c.elems,c.stemsUp,c.beams[0],c.isgrace,r),N=0;N<E.length;N++)c.addBeam(E[N]);y(c.elems,c.stemsUp,c.beams[0],r,c.mainNote)}},t=function(c){return c===void 0?0:Math.floor(Math.log(c)/Math.log(2))};function a(c,r,f,e){if(!c.children)return e;for(var p=0;p<c.children.length;p++){var x=c.children[p];r&&x.top!==void 0&&x.c==="flags.ugrace"?e=Math.max(e,x.top-f):!r&&x.bottom!==void 0&&x.c==="flags.ugrace"&&(e=Math.max(e,f-x.bottom+7))}return e}function n(c,r,f,e){if(e)return 0;var p=c-r,x=f/2;return p>x&&(p=x),p<-x&&(p=-x),p}function l(c,r){var f=c?h.STEP:-h.STEP;return r&&(f=f*.4),f}function u(c,r,f){var e=r.heads[c?0:r.heads.length-1],p=f.heads[c?0:f.heads.length-1],x=e.x;c&&(x+=e.w-.6);var w=p.x;return w+=c?p.w:.6,[x,w]}function m(c,r,f,e,p,x,w,_,E,N){var I=f-2,R=f-2,C=Math.round(e?Math.max(c+I,E+R):Math.min(c-I,_-R)),B=n(p,x,r,w),q=C+Math.floor(B/2),L=C+Math.floor(-B/2);return N||(e&&C<6||!e&&C>6)&&(q=6,L=6),[q,L]}function y(c,r,f,e,p){for(var x=0;x<c.length;x++){var w=c[x];if(!w.abcelem.rest){var _=!w.addExtra,E=_?p:w,N=w.heads[r?0:w.heads.length-1],I=1/5,R=N.pitch+(r?I:-I),C=r?N.w:0;_||(C+=N.dx);var B=N.x+C,q=d(f.startX,f.startY,f.endX,f.endY,B),L=r?-.6:.6;r||(q-=e/2/h.STEP),_&&(C+=w.heads[0].dx),N.c==="noteheads.slash.quarter"&&(r?R+=1:R-=1);var D=new b(null,C,0,R,{type:"stem",pitch2:q,linewidth:L});D.setX(E.x),E.addRight(D)}}}function g(c,r,f,e,p){for(var x=[],w=[],_=0;_<c.length;_++){var E=c[_];if(!E.abcelem.rest){var N=E.heads[r?0:E.heads.length-1],I=N.x+(r?N.w:0),R=d(f.startX,f.startY,f.endX,f.endY,I),C=r?-1.5:1.5;e&&(C=C*2/3);var B=E.abcelem.duration;B===0&&(B=.25);for(var q=t(B);q<-3;q++){var L=-4-q;if(w[L]?w[L].single=!1:w[L]={x:I+(r?-.6:0),y:R+C*(L+1),durlog:q,single:!0},_>0&&E.abcelem.beambr&&E.abcelem.beambr<=L+1){w[L].split||(w[L].split=[w[L].x]);var D=u(r,c[_-1],E);w[L].split[w[L].split.length-1]>=D[0]&&(D[0]+=E.w),w[L].split.push(D[0]),w[L].split.push(D[1])}}for(var P=w.length-1;P>=0;P--)if(_===c.length-1||t(c[_+1].abcelem.duration)>-P-4){var M=I,A=R+C*(P+1);w[P].single&&(M=_===0?I+5:I-5,A=d(f.startX,f.startY,f.endX,f.endY,M)+C*(P+1));var F={startX:w[P].x,endX:M,startY:w[P].y,endY:A,dy:p};if(w[P].split!==void 0){var z=w[P].split;F.endX<=z[z.length-1]&&(z[z.length-1]-=E.w),z.push(F.endX),F.split=w[P].split}x.push(F),w=w.slice(0,P)}}}return x}return z0=o,z0}var G0,Zn;function Hc(){if(Zn)return G0;Zn=1;var b=ma();function h(a){if(a.anchor1&&a.anchor2){a.hasBeam=!!a.anchor1.parent.beam&&a.anchor1.parent.beam===a.anchor2.parent.beam;var n=a.anchor1.parent.beam;if(a.hasBeam&&(n.elems[0]!==a.anchor1.parent||n.elems[n.elems.length-1]!==a.anchor2.parent)&&(a.hasBeam=!1),a.hasBeam){var l=d(n)?a.anchor1.x+a.anchor1.w:a.anchor1.x;a.yTextPos=o(l,a.anchor2.x,n),a.yTextPos+=d(n)?3:-2,a.xTextPos=t(l,a.anchor2.x),a.top=a.yTextPos+1,a.bottom=a.yTextPos-2,d(n)&&(a.endingHeightAbove=4)}else{a.startNote=Math.max(a.anchor1.parent.top,9)+4,a.endNote=Math.max(a.anchor2.parent.top,9)+4,a.anchor1.parent.type==="rest"&&a.anchor2.parent.type!=="rest"?a.startNote=a.endNote:a.anchor2.parent.type==="rest"&&a.anchor1.parent.type!=="rest"&&(a.endNote=a.startNote);for(var u=0,m=0;m<a.middleElems.length;m++)u=Math.max(u,a.middleElems[m].top);u+=4,(u>a.startNote||u>a.endNote)&&(a.startNote=u,a.endNote=u),a.flatBeams&&(a.startNote=Math.max(a.startNote,a.endNote),a.endNote=Math.max(a.startNote,a.endNote)),a.yTextPos=a.startNote+(a.endNote-a.startNote)/2,a.xTextPos=a.anchor1.x+(a.anchor2.x+a.anchor2.w-a.anchor1.x)/2,a.top=a.yTextPos+1}}delete a.middleElems,delete a.flatBeams}function d(a){return a.stemsUp}function o(a,n,l){if(l.beams.length===0)return 0;l=l.beams[0];var u=a+(n-a)/2;return b(l.startX,l.startY,l.endX,l.endY,u)}function t(a,n){return a+(n-a)/2}return G0=h,G0}var Y0,ei;function zc(){if(ei)return Y0;ei=1;var b=Rc(),h=ma(),d=Hc(),o=function(y){for(var g=0;g<y.beams.length;g++)if(y.beams[g].type==="BeamElem"){b(y.beams[g]),t(y.beams[g]);for(var c=0;c<y.beams[g].elems.length;c++)y.adjustRange(y.beams[g].elems[c])}for(y.staff.specialY.chordLines=n(y.children),g=0;g<y.otherchildren.length;g++){var r=y.otherchildren[g];r.type==="TripletElem"&&(d(r),y.adjustRange(r))}y.staff.top=Math.max(y.staff.top,y.top),y.staff.bottom=Math.min(y.staff.bottom,y.bottom)};function t(y){for(var g=1.5,c=0;c<y.elems.length;c++){var r=y.elems[c];if(r.top)for(var f=m(r,y),e=0;e<r.children.length;e++){var p=r.children[e];if(p.klass==="ornament"&&p.position!=="below"&&p.bottom-g<f){var x=f-p.bottom+g;p.bottom+=x,p.top+=x,p.pitch+=x,f=r.top=p.top}}}}function a(y,g){var c=g.getChordDim();if(c){for(var r=0;r<y.length;r++){var f=y[r]<c.left;if(f){r>0&&g.putChordInLane(r),y[r]=c.right;return}}y.push(c.right),g.putChordInLane(y.length-1)}}function n(y){var g=[0],c=[0],r,f,e;for(r=0;r<y.length;r++){for(f=0;f<y[r].children.length;f++)e=y[r].children[f],e.chordHeightAbove&&a(g,e);for(f=y[r].children.length-1;f>=0;f--)e=y[r].children[f],e.chordHeightBelow&&a(c,e)}return(g.length>1||c.length>1)&&u(y,g.length,c.length),{above:g.length,below:c.length}}function l(y){for(var g=0,c=0;c<y.children.length;c++){var r=y.children[c];r.chordHeightBelow&&g++}return g}function u(y,g,c){for(var r=0;r<y.length;r++){l(y[r]);for(var f=0;f<y[r].children.length;f++){var e=y[r].children[f];e.chordHeightAbove&&e.invertLane(g)}}}function m(y,g){return g=g.beams[0],h(g.startX,g.startY,g.endX,g.endY,y.x)}return Y0=o,Y0}var W0,ti;function Gc(){if(ti)return W0;ti=1;var b=Ee(),h=function(g,c){for(var r,f=0;f<c.staffs.length;f++){var e=c.staffs[f],p={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0};if(g.showDebug&&g.showDebug.indexOf("box")>=0&&(e.originalTop=e.top,e.originalBottom=e.bottom),o(e,p,"lyricHeightAbove"),o(e,p,"chordHeightAbove",e.specialY.chordLines.above),e.specialY.endingHeightAbove&&(e.specialY.chordHeightAbove?e.top+=2:e.top+=e.specialY.endingHeightAbove+d,p.endingHeightAbove=e.top),e.specialY.dynamicHeightAbove&&e.specialY.volumeHeightAbove?(e.top+=Math.max(e.specialY.dynamicHeightAbove,e.specialY.volumeHeightAbove)+d,p.dynamicHeightAbove=e.top,p.volumeHeightAbove=e.top):(o(e,p,"dynamicHeightAbove"),o(e,p,"volumeHeightAbove")),o(e,p,"partHeightAbove"),o(e,p,"tempoHeightAbove"),e.specialY.lyricHeightBelow&&(e.specialY.lyricHeightBelow+=g.spacing.vocal/b.STEP,p.lyricHeightBelow=e.bottom,e.bottom-=e.specialY.lyricHeightBelow+d),e.specialY.chordHeightBelow){p.chordHeightBelow=e.bottom;var x=e.specialY.chordHeightBelow;e.specialY.chordLines.below&&(x*=e.specialY.chordLines.below),e.bottom-=x+d}e.specialY.volumeHeightBelow&&e.specialY.dynamicHeightBelow?(p.volumeHeightBelow=e.bottom,p.dynamicHeightBelow=e.bottom,e.bottom-=Math.max(e.specialY.volumeHeightBelow,e.specialY.dynamicHeightBelow)+d):e.specialY.volumeHeightBelow?(p.volumeHeightBelow=e.bottom,e.bottom-=e.specialY.volumeHeightBelow+d):e.specialY.dynamicHeightBelow&&(p.dynamicHeightBelow=e.bottom,e.bottom-=e.specialY.dynamicHeightBelow+d),g.showDebug&&g.showDebug.indexOf("box")>=0&&(e.positionY=p);for(var w=0;w<e.voices.length;w++){var _=c.voices[e.voices[w]];t(p,_,g.spacing)}if(r!==void 0){var E=e.top-10,N=r+E,I=g.spacing.systemStaffSeparation/b.STEP,R=I-N;R>0&&(e.top+=R)}e.top+=g.spacing.staffTopMargin/b.STEP,r=2-e.bottom}},d=1;function o(g,c,r,f){if(g.specialY[r]){var e=g.specialY[r];f&&(e*=f),g.top+=e+d,c[r]=g.top}}function t(g,c,r){var f,e;for(f=0;f<c.children.length;f++)e=c.children[f],a(g,e,r);for(f=0;f<c.otherchildren.length;f++)switch(e=c.otherchildren[f],e.type){case"CrescendoElem":n(g,e);break;case"DynamicDecoration":l(g,e);break;case"EndingElem":u(g,e);break;case"TieElem":var p=e.getYBounds();c.staff.top=Math.max(c.staff.top,p[0]),c.staff.top=Math.max(c.staff.top,p[1]),c.staff.bottom=Math.min(c.staff.bottom,p[0]),c.staff.bottom=Math.min(c.staff.bottom,p[1]);break}}function a(g,c,r){for(var f=0;f<c.children.length;f++){var e=c.children[f];for(var p in c.specialY)c.specialY.hasOwnProperty(p)&&e[p]&&(e.pitch=g[p],e.top===void 0&&(e.type==="TempoElement"?m(g,e):y(g,e,r),c.pushTop(e.top),c.pushBottom(e.bottom)))}}function n(g,c){c.dynamicHeightAbove?c.pitch=g.dynamicHeightAbove:c.pitch=g.dynamicHeightBelow}function l(g,c){c.volumeHeightAbove?c.pitch=g.volumeHeightAbove:c.pitch=g.volumeHeightBelow}function u(g,c){c.pitch=g.endingHeightAbove-2}function m(g,c){if(c.pitch=g.tempoHeightAbove,c.top=g.tempoHeightAbove,c.bottom=g.tempoHeightAbove,c.note){var r=c.pitch-c.totalHeightInPitches+1;c.note.top=r,c.note.bottom=r;for(var f=0;f<c.note.children.length;f++){var e=c.note.children[f];e.top+=r,e.bottom+=r,e.pitch+=r,e.pitch2!==void 0&&(e.pitch2+=r)}}}function y(g,c,r){switch(c.type){case"part":c.top=g.partHeightAbove+c.height,c.bottom=g.partHeightAbove;break;case"text":case"chord":c.chordHeightAbove?(c.top=g.chordHeightAbove,c.bottom=g.chordHeightAbove):(c.top=g.chordHeightBelow,c.bottom=g.chordHeightBelow);break;case"lyric":c.lyricHeightAbove?(c.top=g.lyricHeightAbove,c.bottom=g.lyricHeightAbove):(c.top=g.lyricHeightBelow+r.vocal/b.STEP,c.bottom=g.lyricHeightBelow+r.vocal/b.STEP,c.pitch-=r.vocal/b.STEP);break;case"debug":c.top=g.chordHeightAbove,c.bottom=g.chordHeightAbove;break}(c.pitch===void 0||c.top===void 0)&&console.error("RelativeElement position not set.",c.type,c.pitch,c.top,g)}return W0=h,W0}var U0,ri;function Yc(){if(ri)return U0;ri=1;var b=function(){};b.beginLayout=function(o,t){t.i=0,t.durationindex=0,t.startx=o,t.minx=o,t.nextx=o,t.spacingduration=0},b.layoutEnded=function(o){return o.i>=o.children.length},b.getNextX=function(o){return Math.max(o.minx,o.nextx)},b.getSpacingUnits=function(o){return Math.sqrt(o.spacingduration*8)},b.layoutOneItem=function(o,t,a,n,l){var u=a.children[a.i];if(!u)return 0;var m=o-a.minx,y=a.durationindex+u.duration>0?n:0;if(u.abcelem.el_type==="note"&&!u.abcelem.rest&&a.voicenumber!==0&&l){var g=l.children[l.i],c=g&&(u.abcelem.maxpitch<=g.abcelem.maxpitch+1&&u.abcelem.maxpitch>=g.abcelem.minpitch-1||u.abcelem.minpitch<=g.abcelem.maxpitch+1&&u.abcelem.minpitch>=g.abcelem.minpitch-1);if(c&&u.abcelem.minpitch===g.abcelem.minpitch&&u.abcelem.maxpitch===g.abcelem.maxpitch&&g.heads&&g.heads.length>0&&u.heads&&u.heads.length>0&&g.heads[0].c===u.heads[0].c&&(c=!1),c){var r=g.heads&&g.heads.length>0?g.heads[0].realWidth:g.fixed.w;u.adjustedWidth||(u.adjustedWidth=r+u.w),u.w=u.adjustedWidth;for(var f=0;f<u.children.length;f++){var e=u.children[f];e.name.indexOf("accidental")<0&&(e.adjustedWidth||(e.adjustedWidth=e.dx+r),e.dx=e.adjustedWidth)}}}var p=h(u,y);return m<p&&(a.i===0||u.type!=="bar"||a.children[a.i-1].type!=="part"&&a.children[a.i-1].type!=="tempo")&&(o+=p-m),u.setX(o),a.spacingduration=u.duration,a.minx=o+d(u),a.i!==a.children.length-1&&(a.minx+=u.minspacing),this.updateNextX(o,t,a),o},b.shiftRight=function(o,t){var a=t.children[t.i];a&&(a.setX(a.x+o),t.minx+=o,t.nextx+=o)},b.updateNextX=function(o,t,a){a.nextx=o+t*this.getSpacingUnits(a)},b.updateIndices=function(o){this.layoutEnded(o)||(o.durationindex+=o.children[o.i].duration,o.children[o.i].type==="bar"&&(o.durationindex=Math.round(o.durationindex*64)/64),o.i++)};function h(o,t){var a=0;return(o.type==="note"||o.type==="bar")&&(a=t),-o.extraw+a}function d(o){return o.w}return U0=b,U0}var V0,ai;function Wc(){if(ai)return V0;ai=1;var b=Yc();function h(n){for(var l=0,u=0;u<n.length;u++){var m=n[u];if(m.children.length>0){var y=m.children.length-1,g=m.children[y];if(g.abcelem.el_type==="bar"){var c=g.children[0].x;c>l?l=c:g.children[0].x=l}}}}var d=function(n,l,u,m,y){var g=1e-7,c=0,r=1e3,f=y;m.startx=f;var e,p=0;for(u&&console.log("init layout",n),e=0;e<m.voices.length;e++)b.beginLayout(f,m.voices[e]);for(var x=0;!o(m.voices);){for(p=null,e=0;e<m.voices.length;e++)!b.layoutEnded(m.voices[e])&&(!p||t(m.voices[e])<p)&&(p=t(m.voices[e]));var w=[],_=[];for(e=0;e<m.voices.length;e++){var E=t(m.voices[e]);E-p>g?_.push(m.voices[e]):w.push(m.voices[e])}x=0;var N=0;for(e=0;e<w.length;e++)b.getNextX(w[e])>f&&(f=b.getNextX(w[e]),x=b.getSpacingUnits(w[e]),N=w[e].spacingduration);c+=x,r=Math.min(r,x),u&&console.log("currentduration: ",p,c,r);var I=void 0;for(e=0;e<w.length;e++){var R=w[e];R.voicenumber===0&&(I=e);var C=I!==void 0&&w[I].voicenumber!==R.voicenumber?w[I]:void 0;a(R,C)||(C=void 0);var B=b.layoutOneItem(f,n,R,l,C),q=B-f;if(q>0){f=B;for(var L=0;L<e;L++)b.shiftRight(q,w[L])}}for(e=0;e<_.length;e++)_[e].spacingduration-=N,b.updateNextX(f,n,_[e]);for(e=0;e<w.length;e++){var D=w[e];b.updateIndices(D)}}for(e=0;e<m.voices.length;e++)b.getNextX(m.voices[e])>f&&(f=b.getNextX(m.voices[e]),x=b.getSpacingUnits(m.voices[e]));return h(m.voices),c+=x,m.setWidth(f),{spacingUnits:c,minSpace:r}};function o(n){for(var l=0;l<n.length;l++)if(!b.layoutEnded(n[l]))return!1;return!0}function t(n){return n.durationindex-(n.children[n.i]&&n.children[n.i].duration>0?0:5e-7)}function a(n,l){return!n||!n.staff||!n.staff.voices||n.staff.voices.length===0||!l||!l.staff||!l.staff.voices||l.staff.voices.length===0?!1:n.staff.voices[0]===l.staff.voices[0]}return V0=d,V0}var X0,ni;function Js(){if(ni)return X0;ni=1;function b(t,a,n,l,u){var m=t.padding.left,y=0,g,c;for(g=0;g<n.length;g++)n[g].header&&(c=a.calc(n[g].header,"voicefont",""),y=Math.max(y,c.width));if(y=h(y,l,a),y=h(y,u,a),y){var r=a.calc("A","voicefont","");y+=r.width}m+=y;var f=0;return f=d(l,m,f),f=d(u,m,f),m+f}function h(t,a,n){if(a){for(var l=0;l<a.length;l++)if(a[l].header){var u=n.calc(a[l].header,"voicefont","");t=Math.max(t,u.width)}}return t}function d(t,a,n){if(t)for(var l=0;l<t.length;l++)o(a,t[l]),n=Math.max(n,t[l].getWidth());return n}function o(t,a){a.x=t}return X0=b,X0}var j0,ii;function Uc(){if(ii)return j0;ii=1;var b=Js();function h(o,t,a){var n=b(o,t.getTextSize,t.voices,t.brace,t.bracket),l=d(t,a.minPadding),u=l.totalDuration,m=l.minSpacing,y=m*u;a.minWidth&&(y=Math.max(y,a.minWidth));var g=a.minPadding?a.minPadding/2:2;t.startx=n,t.w=y+n;for(var c=0;c<t.voices.length;c++){var r=t.voices[c];r.startx=n,r.w=y+n;for(var f=n,e=!1,p=0,x=0;x<r.children.length;x++){var w=r.children[x];e||(w.duration!==0?(e=!0,p=(y+n-f)/u,t.gridStart=f):(w.x=f,f+=w.w+w.minspacing)),e&&(a.align==="center"?w.x=f+w.duration*p/2-w.w/2:w.duration===0?w.x=f+1-w.w:w.x=f+g-w.extraw,f+=w.duration*p);for(var _=0;_<w.children.length;_++){var E=w.children[_],N=E.dx?E.dx:0;E.x=w.x+N}}t.gridEnd=f}return y}function d(o,t){for(var a=0,n=0,l=0;l<o.voices.length;l++){for(var u=0,m=o.voices[l],y=0;y<m.children.length;y++){var g=m.children[y];if(u+=g.duration,g.duration){var c=(g.w+t)/g.duration;a=Math.max(a,c)}}n=Math.max(n,u)}return{totalDuration:n,minSpacing:a}}return j0=h,j0}var $0,si;function Vc(){if(si)return $0;si=1;var b=zc(),h=Gc(),d=Wc(),o=Js(),t=Uc(),a=function(m,y,g,c,r,f){var e,p,x=g;for(e=0;e<y.lines.length;e++)if(p=y.lines[e],p.staff){var w;f!==void 0?w=t(m,p.staffGroup,f):w=n(m,x,c,p.staffGroup,y.formatting,e===y.lines.length-1,!1),Math.round(w)>Math.round(x)&&(x=w,r&&(e=-1))}for(e=0;e<y.lines.length;e++)if(p=y.lines[e],p.staffGroup&&p.staffGroup.voices){for(var _=0;_<p.staffGroup.voices.length;_++)b(p.staffGroup.voices[_]);h(m,p.staffGroup)}for(e=0;e<y.lines.length;e++)p=y.lines[e],p.staffGroup&&p.staffGroup.setHeight();return x},n=function(m,y,g,c,r,f,e){for(var p=o(m,c.getTextSize,c.voices,c.brace,c.bracket),x=g,w=0;w<8;w++){var _=d(x,m.minPadding,e,c,p);if(x=l(f,r.stretchlast,y+m.padding.left,c.w,x,_.spacingUnits,_.minSpace,m.padding.left+m.padding.right),x===null)break}return u(c.voices),c.w-p};function l(m,y,g,c,r,f,e,p){if(m)if(y===void 0){if(c/g<.66)return null}else{var x=1-(c+p)/g,w=x<y;if(!w)return null}if(Math.abs(g-c)<2)return null;var _=f*r,E=c-_;return f>0?(r=(g-E)/f,r*e>50&&(r=50/e),r):null}function u(m){for(var y=0;y<m.length;y++)for(var g=m[y],c=1;c<g.children.length-1;c++){var r=g.children[c];if(r.abcelem.rest&&(r.abcelem.rest.type==="whole"||r.abcelem.rest.type==="multimeasure")){var f=g.children[c-1],e=g.children[c+1];r.center(f,e)}}}return $0=a,$0}var K0,oi;function Xc(){if(oi)return K0;oi=1;var b=function(d){this.shouldAddClasses=d.shouldAddClasses,this.reset()};return b.prototype.reset=function(){this.lineNumber=null,this.voiceNumber=null,this.measureNumber=null,this.measureTotalPerLine=[],this.noteNumber=null},b.prototype.incrLine=function(){this.lineNumber===null?this.lineNumber=0:this.lineNumber++,this.voiceNumber=null,this.measureNumber=null,this.noteNumber=null},b.prototype.incrVoice=function(){this.voiceNumber===null?this.voiceNumber=0:this.voiceNumber++,this.measureNumber=null,this.noteNumber=null},b.prototype.isInMeasure=function(){return this.measureNumber!==null},b.prototype.newMeasure=function(){this.measureNumber&&(this.measureTotalPerLine[this.lineNumber]=this.measureNumber),this.measureNumber=null,this.noteNumber=null},b.prototype.startMeasure=function(){this.measureNumber=0,this.noteNumber=0},b.prototype.incrMeasure=function(){this.measureNumber++,this.noteNumber=0},b.prototype.incrNote=function(){this.noteNumber++},b.prototype.measureTotal=function(){for(var h=0,d=0;d<this.lineNumber;d++)h+=this.measureTotalPerLine[d]?this.measureTotalPerLine[d]:0;return this.measureNumber&&(h+=this.measureNumber),h},b.prototype.getCurrent=function(h){return{line:this.lineNumber,measure:this.measureNumber,measureTotal:this.measureTotal(),voice:this.voiceNumber,note:this.noteNumber}},b.prototype.generate=function(h){if(!this.shouldAddClasses)return"";var d=[];if(h&&h.length>0&&d.push(h),h==="abcjs-tab-number")return d.join(" ");if(h==="text instrument-name")return"abcjs-text abcjs-instrument-name";if(this.lineNumber!==null&&d.push("l"+this.lineNumber),this.measureNumber!==null&&d.push("m"+this.measureNumber),this.measureNumber!==null&&d.push("mm"+this.measureTotal()),this.voiceNumber!==null&&d.push("v"+this.voiceNumber),h&&(h.indexOf("note")>=0||h.indexOf("rest")>=0||h.indexOf("lyric")>=0)&&this.noteNumber!==null&&d.push("n"+this.noteNumber),d.length>0){d=d.join(" "),d=d.split(" ");for(var o=0;o<d.length;o++)d[o].indexOf("abcjs-")!==0&&d[o].length>0&&(d[o]="abcjs-"+d[o])}return d.join(" ")},K0=b,K0}var Q0,ci;function jc(){if(ci)return Q0;ci=1;var b=function(d,o){this.formatting=d,this.classes=o};return b.prototype.updateFonts=function(h){h.gchordfont&&(this.formatting.gchordfont=h.gchordfont),h.tripletfont&&(this.formatting.tripletfont=h.tripletfont),h.annotationfont&&(this.formatting.annotationfont=h.annotationfont),h.vocalfont&&(this.formatting.vocalfont=h.vocalfont)},b.prototype.getFamily=function(h){return h[0]==='"'&&h[h.length-1]==='"'?h.substring(1,h.length-1):h},b.prototype.calc=function(h,d){var o;typeof h=="string"?(o=this.formatting[h],o?o={face:o.face,size:Math.round(o.size*4/3),decoration:o.decoration,style:o.style,weight:o.weight,box:o.box}:o={face:"Arial",size:Math.round(12*4/3),decoration:"underline",style:"normal",weight:"normal"}):o={face:h.face,size:Math.round(h.size*4/3),decoration:h.decoration,style:h.style,weight:h.weight,box:h.box};var t=this.formatting.fontboxpadding?this.formatting.fontboxpadding:.1;o.padding=o.size*t;var a={"font-size":o.size,"font-style":o.style,"font-family":this.getFamily(o.face),"font-weight":o.weight,"text-decoration":o.decoration,class:this.classes.generate(d)};return{font:o,attr:a}},Q0=b,Q0}var J0,li;function $c(){if(li)return J0;li=1;var b=function(d,o){this.getFontAndAttr=d,this.svg=o};return b.prototype.updateFonts=function(h){this.getFontAndAttr.updateFonts(h)},b.prototype.attr=function(h,d){return this.getFontAndAttr.calc(h,d)},b.prototype.getFamily=function(h){return h[0]==='"'&&h[h.length-1]==='"'?h.substring(1,h.length-1):h},b.prototype.calc=function(h,d,o,t){var a;typeof d=="string"?a=this.attr(d,o):a={font:{face:d.face,size:d.size,decoration:d.decoration,style:d.style,weight:d.weight},attr:{"font-size":d.size,"font-style":d.style,"font-family":this.getFamily(d.face),"font-weight":d.weight,"text-decoration":d.decoration,class:this.getFontAndAttr.classes.generate(o)}};var n=this.svg.getTextSize(h,a.attr,t);return a.font.box?{height:n.height+a.font.padding*4,width:n.width+a.font.padding*4}:n},b.prototype.baselineToCenter=function(h,d,o,t,a){var n=this.calc(h,d,o).height,l=this.attr(d,o).font.size;return n*.5+(a-t-2)*l},J0=b,J0}var Z0,fi;function Ue(){if(fi)return Z0;fi=1;var b=function(){for(var h=0,d,o=arguments[h++],t=[],a,n,l,u;o;){if(a=/^[^\x25]+/.exec(o))t.push(a[0]);else if(a=/^\x25{2}/.exec(o))t.push("%");else if(a=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(o)){if((d=arguments[a[1]||h++])==null||d==null)throw"Too few arguments.";if(/[^s]/.test(a[7])&&typeof d!="number")throw"Expecting number but found "+typeof d;switch(a[7]){case"b":d=d.toString(2);break;case"c":d=String.fromCharCode(d);break;case"d":d=parseInt(d);break;case"e":d=a[6]?d.toExponential(a[6]):d.toExponential();break;case"f":d=a[6]?parseFloat(d).toFixed(a[6]):parseFloat(d);break;case"o":d=d.toString(8);break;case"s":d=(d=String(d))&&a[6]?d.substring(0,a[6]):d;break;case"u":d=Math.abs(d);break;case"x":d=d.toString(16);break;case"X":d=d.toString(16).toUpperCase();break}d=/[def]/.test(a[7])&&a[2]&&d>0?"+"+d:d,l=a[3]?a[3]=="0"?"0":a[3][1]:" ",u=a[5]-String(d).length,n=a[5]?str_repeat(l,u):"",t.push(a[4]?d+n:n+d)}else throw"Huh ?!";o=o.substring(a[0].length)}return t.join("")};return Z0=b,Z0}var er,hi;function qe(){if(hi)return er;hi=1;function b(h){return parseFloat(h.toFixed(2))}return er=b,er}var tr,ui;function Ye(){if(ui)return tr;ui=1;var b=qe();function h(d,o,t){var a=o.y;if(o.phrases){var m=d.paper.richTextLine(o.phrases,o.x,o.y,o.klass,o.anchor);return m}if(o.lane){var n=o.dim.font.size*.25;a+=(o.dim.font.size+n)*o.lane}var l;o.dim?(l=o.dim,l.attr.class=o.klass):l=d.controller.getFontAndAttr.calc(o.type,o.klass),o.anchor&&(l.attr["text-anchor"]=o.anchor),o["dominant-baseline"]&&(l.attr["dominant-baseline"]=o["dominant-baseline"]),l.attr.x=o.x,l.attr.y=a,o.centerVertically||(l.attr.y+=l.font.size),o.type==="debugfont"&&(console.log("Debug msg: "+o.text),l.attr.stroke="#ff0000"),o.cursor&&(l.attr.cursor=o.cursor);var u=o.text.replace(/\n\n/g,`
 
`);u=u.replace(/^\n/,` 
`),l.font.box&&(t||d.paper.openGroup({klass:l.attr.class,fill:d.foregroundColor,"data-name":o.name}),l.attr["text-anchor"]==="end"?l.attr.x-=l.font.padding:l.attr["text-anchor"]==="start"&&(l.attr.x+=l.font.padding),l.attr.y+=l.font.padding,delete l.attr.class),o.noClass&&delete l.attr.class,l.attr.x=b(l.attr.x),l.attr.y=b(l.attr.y),o.name&&(l.attr["data-name"]=o.name);var m=d.paper.text(u,l.attr);if(l.font.box){var y=m.getBBox(),g=0;l.attr["text-anchor"]==="middle"?g=y.width/2+l.font.padding:l.attr["text-anchor"]==="end"&&(g=y.width+l.font.padding*2);var c=0;o.centerVertically&&(c=y.height-l.font.padding),d.paper.rect({"data-name":"box",x:Math.round(o.x-g),y:Math.round(a-c),width:Math.round(y.width+l.font.padding*2),height:Math.round(y.height+l.font.padding*2)}),t||(m=d.paper.closeGroup())}return m}return tr=h,tr}var rr,di;function Kc(){if(di)return rr;di=1;var b=Ue(),h=Ee(),d=Ye();function o(u,m,y){var g=m.startVoice.staff.absoluteY-h.STEP*10;return m.endVoice&&m.endVoice.staff?m.endY=m.endVoice.staff.absoluteY-h.STEP*2:m.lastContinuedVoice&&m.lastContinuedVoice.staff?m.endY=m.lastContinuedVoice.staff.absoluteY-h.STEP*2:m.endY=m.startVoice.staff.absoluteY-h.STEP*2,l(u,m.x,g,m.endY,m.type,m.header,y)}function t(u,m,y,g,c){m+=h.STEP;var r=h.STEP*.75,f=h.STEP*.75,e=g-y,p=b("M %f %f l %f %f l %f %f l %f %f z",m,y-f,0,e+f*2,r,0,0,-(e+f*2)),x=h.STEP*2,w=h.STEP;return p+=b("M %f %f q %f %f %f %f q %f %f %f %f z",m+r,y-f,x*.6,w*.2,x,-w,-x*.1,w*.3,-x,w+h.STEP),p+=b("M %f %f q %f %f %f %f q %f %f %f %f z",m+r,y+f+e,x*.6,-w*.2,x,w,-x*.1,-w*.3,-x,-w-h.STEP),u.paper.path({path:p,stroke:u.foregroundColor,fill:u.foregroundColor,class:u.controller.classes.generate(c),"data-name":c})}function a(u,m,y,g,c){var r=g-y,f=n(m,y,[7.5,-8,21,0,18.5,-10.5,7.5],[0,r/5.5,r/3.14,r/2,r/2.93,r/4.88,0]);return f+=n(m,y,[0,17.5,-7.5,6.6,-5,20,0],[r/2,r/1.46,r/1.22,r,r/1.19,r/1.42,r/2]),u.paper.path({path:f,stroke:u.foregroundColor,fill:u.foregroundColor,class:u.controller.classes.generate(c),"data-name":c})}function n(u,m,y,g){return b("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",u+y[0],m+g[0],u+y[1],m+g[1],u+y[2],m+g[2],u+y[3],m+g[3],u+y[4],m+g[4],u+y[5],m+g[5],u+y[6],m+g[6])}var l=function(u,m,y,g,c,r,f){var e;if(r){u.paper.openGroup({klass:u.controller.classes.generate("staff-extra voice-name"),"data-name":c});var p=y+(g-y)/2;p=p-u.controller.getTextSize.baselineToCenter(r,"voicefont","staff-extra voice-name",0,1),d(u,{x:u.padding.left,y:p,text:r,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0})}return c==="brace"?e=a(u,m,y,g,c):c==="bracket"&&(e=t(u,m,y,g,c)),r&&(e=u.paper.closeGroup()),f.wrapSvgEl({el_type:c,startChar:-1,endChar:-1},e),e};return rr=o,rr}var ar,pi;function it(){if(pi)return ar;pi=1;function b(h,d,o){var t=h.paper.path(d);return t}return ar=b,ar}var nr,vi;function Qc(){if(vi)return nr;vi=1;var b=Ue(),h=it(),d=qe();function o(e,p,x){(!p.anchor1||!p.anchor2||!p.anchor1.heads||!p.anchor2.heads||p.anchor1.heads.length===0||p.anchor2.heads.length===0)&&window.console.error("Glissando Element not set.");var w=4,_=e.calcY(p.anchor1.heads[0].pitch),E=e.calcY(p.anchor2.heads[0].pitch),N=p.anchor1.x+p.anchor1.w/2,I=p.anchor2.x+p.anchor2.w/2,R=t(N,_,I,E),C=p.anchor1.w/2+w,B=p.anchor2.w/2+w,q=a(N,_,I,E),L=n(_,q,C);n(E,q,-B);var D=l(R-C-B),P=f(e,N+C,L,D,q);return x.wrapSvgEl({el_type:"glissando",startChar:-1,endChar:-1},P),[P]}function t(e,p,x,w){var _=x-e,E=w-p;return Math.sqrt(_*_+E*E)}function a(e,p,x,w){return(w-p)/(x-e)}function n(e,p,x){return d(e+x*p)}function l(e){var p=5;return Math.max(2,Math.floor((e-p*2)/6))}var u=[[3.5,-4.8]],m=[[1.5,-1],[.3,-.3],[-3.5,3.8]],y=[[-1.5,2]],g=[[3,4],[3,-4]],c=[[-3,4],[-3,-4]];function r(e,p){for(var x="",w=0;w<e.length;w++)x+="l"+e[w][0]+" "+n(e[w][1],p,e[w][0]);return x}var f=function(e,p,x,w,_){var E=b("M %f %f",p,x);E+=r(u,_);var N;for(N=0;N<w;N++)E+=r(g,_);for(E+=r(m,_),N=0;N<w;N++)E+=r(c,_);return E+=r(y,_)+"z",h(e,{path:E,highlight:"stroke",stroke:e.foregroundColor,class:e.controller.classes.generate("decoration"),"data-name":"glissando"})};return nr=o,nr}var ir,gi;function Jc(){if(gi)return ir;gi=1;var b=Ue(),h=it(),d=qe();function o(a,n,l){n.pitch===void 0&&window.console.error("Crescendo Element y-coordinate not set.");var u=a.calcY(n.pitch)+4,m=8,y=n.anchor1?n.anchor1.x:0,g=n.anchor2?n.anchor2.x:800,c;return n.dir==="<"?c=t(a,u+m/2,u,u+m/2,u+m,y,g):c=t(a,u,u+m/2,u+m,u+m/2,y,g),l.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1},c),[c]}var t=function(a,n,l,u,m,y,g){n=d(n),l=d(l),u=d(u),m=d(m),y=d(y),g=d(g);var c=b("M %f %f L %f %f M %f %f L %f %f",y,n,g,l,y,u,g,m);return h(a,{path:c,highlight:"stroke",stroke:a.foregroundColor,class:a.controller.classes.generate("dynamics decoration"),"data-name":"dynamics"})};return ir=o,ir}var sr,bi;function ya(){if(bi)return sr;bi=1;var b=qe();function h(){this.ingroup=!1}h.prototype.beginGroup=function(o,t){this.paper=o,this.controller=t,this.path=[],this.lastM=[0,0],this.ingroup=!0,this.paper.openGroup()},h.prototype.isInGroup=function(){return this.ingroup},h.prototype.addPath=function(o){if(o=o||[],o.length!==0){o[0][0]="m",o[0][1]=b(o[0][1]-this.lastM[0]),o[0][2]=b(o[0][2]-this.lastM[1]),this.lastM[0]+=o[0][1],this.lastM[1]+=o[0][2],this.path.push(o[0]);for(var t=1,a=o.length;t<a;t++)o[t][0]==="m"&&(this.lastM[0]+=o[t][1],this.lastM[1]+=o[t][2]),this.path.push(o[t])}},h.prototype.endGroup=function(o,t){this.ingroup=!1;for(var a="",n=0;n<this.path.length;n++)a+=this.path[n].join(" ");this.path=[];var l=this.paper.closeGroup();return l&&(l.setAttribute("class",this.controller.classes.generate(o)),l.setAttribute("fill",this.controller.renderer.foregroundColor),l.setAttribute("stroke","none"),l.setAttribute("data-name",t)),l};var d=new h;return sr=d,sr}var or,mi;function Zs(){if(mi)return or;mi=1;var b=Ye(),h=Ge(),d=ya();function o(a,n,l,u,m){var y,g;if(!u)return null;if(u.length>1&&u.indexOf(".")<0){var c=d.isInGroup()?"":m.klass;a.paper.openGroup({"data-name":m.name,klass:c});for(var r=0,f=0;f<u.length;f++){var e=u[f];g=h.getYCorr(e),y=h.printSymbol(n+r,a.calcY(l+g),e,a.paper,{stroke:m.stroke,fill:m.fill}),y?f<u.length-1&&(r+=t(e,u[f+1],h.getSymbolWidth(e))):b(a,{x:n,y:a.y,text:"no symbol:"+u,type:"debugfont",klass:"debug-msg",anchor:"start"},!1)}var p=a.paper.closeGroup();return p}else return g=h.getYCorr(u),d.isInGroup()?y=h.printSymbol(n,a.calcY(l+g),u,a.paper,{"data-name":m.name}):y=h.printSymbol(n,a.calcY(l+g),u,a.paper,{klass:m.klass,stroke:m.stroke,fill:m.fill,"data-name":m.name}),y||(b(a,{x:n,y:a.y,text:"no symbol:"+u,type:"debugfont",klass:"debug-msg",anchor:"start"},!1),null)}function t(a,n,l){var u=l;return a==="f"&&n==="f"&&(u=u*2/3),a==="p"&&n==="p"&&(u=u*5/6),a==="f"&&n==="z"&&(u=u*5/8),u}return or=o,or}var cr,yi;function Zc(){if(yi)return cr;yi=1;var b=Zs();function h(d,o,t){o.pitch===void 0&&window.console.error("Dynamic Element y-coordinate not set.");var a=1,n=1,l=b(d,o.anchor.x,o.pitch,o.dec,{scalex:a,scaley:n,klass:d.controller.classes.generate("decoration dynamics"),fill:d.foregroundColor,stroke:"none",name:"dynamics"});return t.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1,decoration:o.dec},l),[l]}return cr=h,cr}var lr,wi;function el(){if(wi)return lr;wi=1;var b=Ue(),h=Ye(),d=it(),o=qe();function t(l,u,m){l.paper.openGroup({klass:l.controller.classes.generate("triplet "+u.durationClass),"data-name":"triplet"}),u.hasBeam||n(l,u.anchor1.x,u.startNote,u.anchor2.x+u.anchor2.w,u.endNote),h(l,{x:u.xTextPos,y:l.calcY(u.yTextPos-1),text:""+u.number,type:"tripletfont",anchor:"middle",centerVertically:!0,noClass:!0,name:""+u.number},!0);var y=l.paper.closeGroup();return m.wrapSvgEl({el_type:"triplet",startChar:-1,endChar:-1},y),y}function a(l,u,m,y){return b("M %f %f L %f %f",o(l),o(u),o(m),o(y))}function n(l,u,m,y,g){m=l.calcY(m),g=l.calcY(g);var c=5,r="";r+=a(u,m,u,m+c),r+=a(y,g,y,g+c);var f=u+(y-u)/2,e=8,p=(g-m)/(y-u),x=f-e,w=m+(x-u)*p;r+=a(u,m,x,w);var _=f+e,E=m+(_-u)*p;r+=a(_,E,y,g),d(l,{path:r,stroke:l.foregroundColor,"data-name":"triplet-bracket"})}return lr=t,lr}var fr,xi;function tl(){if(xi)return fr;xi=1;var b=Ue(),h=Ye(),d=it(),o=qe();function t(a,n,l,u,m){n.pitch===void 0&&window.console.error("Ending Element y-coordinate not set.");var y=o(a.calcY(n.pitch)),g=20,c="";n.anchor1&&(l=o(n.anchor1.x+n.anchor1.w),c+=b("M %f %f L %f %f ",l,y,l,o(y+g))),n.anchor2&&(u=o(n.anchor2.x),c+=b("M %f %f L %f %f ",u,y,u,o(y+g))),c+=b("M %f %f L %f %f ",l,y,u,y),a.paper.openGroup({klass:a.controller.classes.generate("ending"),"data-name":"ending"}),d(a,{path:c,stroke:a.foregroundColor,fill:a.foregroundColor,"data-name":"line"}),n.anchor1&&h(a,{x:o(l+5),y:o(a.calcY(n.pitch-.5)),text:n.text,type:"repeatfont",klass:"ending",anchor:"start",noClass:!0,name:n.text});var r=a.paper.closeGroup();return m.wrapSvgEl({el_type:"ending",startChar:-1,endChar:-1},r),[r]}return fr=t,fr}var hr,Ci;function rl(){if(Ci)return hr;Ci=1;var b=Ue(),h=qe();function d(a,n,l,u,m){o(n,l,u);var y="";n.anchor1?y+="abcjs-start-m"+n.anchor1.parent.counters.measure+"-n"+n.anchor1.parent.counters.note:y+="abcjs-start-edge",n.anchor2?y+=" abcjs-end-m"+n.anchor2.parent.counters.measure+"-n"+n.anchor2.parent.counters.note:y+=" abcjs-end-edge",n.hint&&(y="abcjs-hint");var g=n.fixedY?1.5:0,c=t(a,n.startX,n.endX,n.startY+g,n.endY+g,n.above,y,n.isTie,n.dotted),r=-1;n.anchor1&&!n.isTie&&(r=n.anchor1.parent.abcelem.startChar-1);var f=-1;return n.anchor2&&!n.isTie&&(f=n.anchor2.parent.abcelem.endChar+1),m.wrapSvgEl({el_type:"slur",startChar:r,endChar:f},c),[c]}var o=function(a,n,l){!a.anchor1||!a.anchor2||a.anchor1.pitch===a.anchor2.pitch&&a.internalNotes.length===0?a.isTie=!0:a.isTie=!1,a.isTie?(a.calcTieDirection(),a.calcX(n,l),a.calcTieY()):(a.calcSlurDirection(),a.calcX(n,l),a.calcSlurY()),a.avoidCollisionAbove()},t=function(a,n,l,u,m,y,g,c,r){var f=c?1.2:1.5;n=h(n+6),l=h(l+4),u=u+(y?f:-f),m=m+(y?f:-f);var e=h(a.calcY(u)),p=h(a.calcY(m)),x=l-n,w=p-e,_=Math.sqrt(x*x+w*w),E=x/_,N=w/_,I=_/3.5,R=c?10:25,C=(y?-1:1)*Math.min(R,Math.max(4,I)),B=h(n+I*E-C*N),q=h(e+I*N+C*E),L=h(l-I*E-C*N),D=h(p-I*N+C*E),P=2;g?g+=" slur":g="slur",g+=c?" tie":" legato";var M;if(r){g+=" dotted";var A=b("M %f %f C %f %f %f %f %f %f",n,e,B,q,L,D,l,p);M=a.paper.path({path:A,stroke:a.foregroundColor,fill:"none","stroke-dasharray":"5 5",class:a.controller.classes.generate(g),"data-name":c?"tie":"slur"})}else{var F=b("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",n,e,B,q,L,D,l,p,h(L-P*N),h(D+P*E),h(B-P*N),h(q+P*E),n,e);M=a.paper.path({path:F,stroke:"none",fill:a.foregroundColor,class:a.controller.classes.generate(g),"data-name":c?"tie":"slur"})}return M};return hr=d,hr}var ur,ki;function al(){if(ki)return ur;ki=1;var b=it(),h=qe();function d(n,l){if(l.beams.length!==0){for(var u="",m=0;m<l.beams.length;m++){var y=l.beams[m];if(y.split){for(var g=t(n,y.startX,y.startY,y.endX,y.endY),c=[],r=0;r<y.split.length;r+=2)c.push([y.split[r],y.split[r+1]]);for(r=0;r<c.length;r++){var f=a(y.startX,y.startY,g,c[r][0]),e=a(y.startX,y.startY,g,c[r][1]);u+=o(n,c[r][0],f,c[r][1],e,y.dy)}}else u+=o(n,y.startX,y.startY,y.endX,y.endY,y.dy)}var p=("abcjs-d"+l.duration).replace(/\./g,"-"),x=n.controller.classes.generate("beam-elem "+p),w=b(n,{path:u,stroke:"none",fill:n.foregroundColor,class:x});return[w]}}function o(n,l,u,m,y,g){u=h(n.calcY(u)),y=h(n.calcY(y)),l=h(l),m=h(m);var c=h(u+g),r=h(y+g);return"M"+l+" "+u+" L"+m+" "+y+"L"+m+" "+r+" L"+l+" "+c+"z"}function t(n,l,u,m,y){return(y-u)/(m-l)}function a(n,l,u,m){var y=m-n;return l+y*u}return ur=d,ur}var dr,_i;function eo(){if(_i)return dr;_i=1;var b=ya(),h=qe();function d(o,t,a,n,l,u,m){if(a<0||n<l){var y=h(l);l=h(n),n=y}else n=h(n),l=h(l);t=h(t);var g=h(t+a);if(o.firefox112){t+=a/2;var r={x1:t,x2:t,y1:n,y2:l,stroke:o.foregroundColor,"stroke-width":Math.abs(a)};return u&&(r.class=u),m&&(r["data-name"]=m),o.paper.lineToBack(r)}for(var c=[["M",t,n],["L",t,l],["L",g,l],["L",g,n],["z"]],r={path:""},f=0;f<c.length;f++)r.path+=c[f].join(" ");return u&&(r.class=u),m&&(r["data-name"]=m),b.isInGroup()||(r.stroke="none",r.fill=o.foregroundColor),o.paper.pathToBack(r)}return dr=d,dr}var pr,Ti;function nl(){if(Ti)return pr;Ti=1;var b=Ue(),h=qe();function d(o,t,a,n,l,u,m){var y=o.foregroundColor;t=h(t),a=h(a);var g=h(n-m),c=h(n+m);if(o.firefox112){n+=m/2;var r={x1:t,x2:a,y1:n,y2:n,stroke:o.foregroundColor,"stroke-width":Math.abs(m*2)};return l&&(r.class=l),u&&(r["data-name"]=u),o.paper.lineToBack(r)}var f=b("M %f %f L %f %f L %f %f L %f %f z",t,g,a,g,a,c,t,c),e={path:f,stroke:"none",fill:y};u&&(e["data-name"]=u),l&&(e.class=l);var p=o.paper.pathToBack(e);return p}return pr=d,pr}var vr,Si;function to(){if(Si)return vr;Si=1;var b=nl();function h(d,o,t,a,n,l,u){var m=d.calcY(a);return b(d,o,t,m,n,l,u)}return vr=h,vr}var gr,Ei;function ro(){if(Ei)return gr;Ei=1;var b=Ye(),h=eo(),d=to(),o=Zs();function t(n,l,u){l.pitch===void 0&&window.console.error(l.type+" Relative Element y-coordinate not set.");var m=n.calcY(l.pitch);switch(l.type){case"symbol":if(l.c===null)return null;var y="symbol";l.klass&&(y+=" "+l.klass),l.graphelem=o(n,l.x,l.pitch,l.c,{scalex:l.scalex,scaley:l.scaley,klass:n.controller.classes.generate(y),name:l.name});break;case"debug":l.graphelem=b(n,{x:l.x,y:n.calcY(15),text:""+l.c,type:"debugfont",klass:n.controller.classes.generate("debug-msg"),anchor:"start",centerVertically:!1,dim:l.dim},!1);break;case"tabNumber":var g="middle",c="tabnumberfont",r="abcjs-tab-number";l.isGrace&&(c="tabgracefont",m+=2.5,r="tab-grace"),l.graphelem=b(n,{x:l.x,y:m,text:""+l.c,type:c,klass:n.controller.classes.generate(r),anchor:g,centerVertically:!1,dim:l.dim,cursor:"default"},!1);break;case"barNumber":l.graphelem=b(n,{x:l.x,y:m,text:""+l.c,type:"measurefont",klass:n.controller.classes.generate("bar-number"),anchor:"middle",dim:l.dim,name:"bar-number"},!0);break;case"lyric":l.graphelem=b(n,{x:l.x,y:m,text:l.c,type:"vocalfont",klass:n.controller.classes.generate("lyric"),anchor:"middle",dim:l.dim,name:"lyric"},!1);break;case"chord":l.graphelem=b(n,{x:l.x,y:m,text:l.c,type:"gchordfont",klass:n.controller.classes.generate("chord"),anchor:"middle",dim:l.dim,lane:l.getLane(),name:"chord"},!1);break;case"decoration":l.graphelem=b(n,{x:l.x,y:m+6,text:l.c,type:"annotationfont",klass:n.controller.classes.generate("annotation"),anchor:l.anchor,centerVertically:!0,dim:l.dim},!1);break;case"text":l.graphelem=b(n,{x:l.x,y:m,text:l.c,type:"annotationfont",klass:n.controller.classes.generate("annotation"),anchor:"start",centerVertically:l.centerVertically,dim:l.dim,lane:l.getLane(),name:"annotation"},!1);break;case"multimeasure-text":l.graphelem=b(n,{x:l.x+l.w/2,y:m,text:l.c,type:"tempofont",klass:n.controller.classes.generate("rest"),anchor:"middle",centerVertically:!1,dim:l.dim},!1);break;case"part":l.graphelem=b(n,{x:l.x,y:m,text:l.c,type:"partsfont",klass:n.controller.classes.generate("part"),anchor:"start",dim:l.dim,name:l.c},!0);break;case"bar":l.graphelem=h(n,l.x,l.linewidth+n.lineThickness,m,u||n.calcY(l.pitch2),null,"bar");break;case"stem":var f=l.linewidth>0?l.linewidth+n.lineThickness:l.linewidth-n.lineThickness;l.graphelem=h(n,l.x,f,m,n.calcY(l.pitch2),"abcjs-stem","stem");break;case"ledger":l.graphelem=d(n,l.x,l.x+l.w,l.pitch,"abcjs-ledger","ledger",.35+n.lineThickness);break}return l.scalex!==1&&l.graphelem&&a(n.paper,l.graphelem,l.scalex,l.scaley,l.x,m),l.graphelem}function a(n,l,u,m,y,g){n.setAttributeOnElement(l,{style:"transform:scale("+u+","+m+");transform-origin:"+y+"px "+g+"px;"})}return gr=t,gr}var br,Ai;function il(){if(Ai)return br;Ai=1;var b=ro(),h=Ye();function d(o,t){var a=t.x;t.pitch===void 0&&window.console.error("Tempo Element y-coordinate not set."),t.tempo.el_type="tempo";var n=o.calcY(t.pitch)+2,l,u;if(t.tempo.preString){l=h(o,{x:a,y:n,text:t.tempo.preString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"pre"},!0),u=o.controller.getTextSize.calc(t.tempo.preString,"tempofont","tempo",l);var m=u.width,y=m/t.tempo.preString.length;a+=m+y}if(t.note){t.note.setX(a);for(var g=0;g<t.note.children.length;g++)b(o,t.note.children[g],a);a+=t.note.w+5;var c="= "+t.tempo.bpm;l=h(o,{x:a,y:n,text:c,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"beats"}),u=o.controller.getTextSize.calc(c,"tempofont","tempo",l);var r=u.width,f=r/c.length;a+=r+f}t.tempo.postString&&h(o,{x:a,y:n,text:t.tempo.postString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"post"},!0)}return br=d,br}var mr,Mi;function sl(){if(Mi)return mr;Mi=1;var b=il(),h=ro(),d=Ee(),o=ga(),t=ya();function a(n,l,u,m,y){if(!l.invisible){var g=l.children.length>0&&l.children[0].type==="TempoElement";l.elemset=[],t.beginGroup(n.paper,n.controller);for(var c=0;c<l.children.length;c++){var r=l.children[c];switch(r.type){case"TempoElement":b(n,r);break;default:var f=h(n,r,u);r.type==="symbol"&&r.c&&r.c.indexOf("notehead")>=0&&f.setAttribute("class","abcjs-notehead")}}var e=l.type;if((l.type==="note"||l.type==="rest")&&(l.counters=n.controller.classes.getCurrent(),e+=" d"+Math.round(l.durationClass*1e3)/1e3,e=e.replace(/\./g,"-"),l.abcelem.pitches))for(var p=0;p<l.abcelem.pitches.length;p++)e+=" p"+l.abcelem.pitches[p].pitch;var x=t.endGroup(e,l.type);if(x){if(l.cloned&&(l.cloned.overrideClasses=x.className.baseVal),l.overrideClasses){var w=x.classList&&x.classList.length>0?x.classList[0]+" ":"";x.setAttribute("class",w+l.overrideClasses)}if(g)l.startChar=l.abcelem.startChar,l.endChar=l.abcelem.endChar,m.add(l,x,!1,y);else{l.elemset.push(x);var _=!1;(l.type==="note"||l.type==="tabNumber")&&(_=!0),m.add(l,x,_,y)}}else l.elemset.length>0&&m.add(l,l.elemset[0],l.type==="note",y);if(l.klass&&o(l.elemset,"mark","","#00ff00"),l.hint&&o(l.elemset,"abcjs-hint","",null),l.abcelem.abselem=l,l.heads&&l.heads.length>0){l.notePositions=[];for(var E=0;E<l.heads.length;E++)l.notePositions.push({x:l.heads[E].x+l.heads[E].w/2,y:y.zero-l.heads[E].pitch*d.STEP})}}}return mr=a,mr}var yr,Ni;function ol(){if(Ni)return yr;Ni=1;var b=Qc(),h=Jc(),d=Zc(),o=el(),t=tl(),a=rl(),n=al(),l=Ye(),u=sl();function m(g,c,r,f,e){var p=c.w-1;g.staffbottom=c.staff.bottom;var x=g.foregroundColor;if(c.color&&(g.foregroundColor=c.color),c.header){var w=l(g,{x:g.padding.left,y:g.calcY(c.headerPosition),text:c.header,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0,name:"voice-name"},!0);f.wrapSvgEl({el_type:"voiceName",startChar:-1,endChar:-1,text:c.header},w)}var _,E,N=!1;for(_=0;_<c.children.length;_++){E=c.children[_],(E.type==="note"||E.type==="rest")&&(N=!0);var I=!1;E.type!=="staff-extra"&&!g.controller.classes.isInMeasure()&&(g.controller.classes.startMeasure(),I=!0),c.staff.isTabStaff&&(E.invisible=!1,E.type=="bar"&&E.abcelem.lastBar&&(r=c.topLine)),u(g,E,c.barto||_===c.children.length-1?r:0,f,e),(E.type==="note"||y(E))&&g.controller.classes.incrNote(),E.type==="bar"&&!I&&N&&g.controller.classes.incrMeasure()}for(g.controller.classes.startMeasure(),_=0;_<c.beams.length;_++){var R=c.beams[_];R==="bar"?g.controller.classes.incrMeasure():n(g,R,f)}for(g.controller.classes.startMeasure(),_=0;_<c.otherchildren.length;_++)if(E=c.otherchildren[_],E==="bar")g.controller.classes.incrMeasure();else switch(E.type){case"GlissandoElem":E.elemset=b(g,E,f);break;case"CrescendoElem":E.elemset=h(g,E,f);break;case"DynamicDecoration":E.elemset=d(g,E,f);break;case"TripletElem":o(g,E,f);break;case"EndingElem":E.elemset=t(g,E,c.startx+10,p,f);break;case"TieElem":E.elemset=a(g,E,c.startx+10,p,f);break;default:console.log(E),u(g,E,c.startx+10,p,f,e)}g.foregroundColor=x}function y(g){return g.type!=="rest"?!1:!!(g.abcelem&&g.abcelem.rest&&g.abcelem.rest.type!=="spacer")}return yr=m,yr}var wr,Bi;function cl(){if(Bi)return wr;Bi=1;var b=to();function h(d,o,t,a,n,l){var u="abcjs-top-line",m=2;n&&(m=n),d.paper.openGroup({prepend:!0,klass:d.controller.classes.generate("abcjs-staff")});var y=0,g=0;if(a===1)b(d,o,t,6,u,null,l+d.lineThickness),y=d.calcY(10),g=d.calcY(2);else for(var c=a-1;c>=0;c--){var r=(c+1)*m;g=d.calcY(r),y===0&&(y=g),b(d,o,t,r,u,null,l+d.lineThickness),u=void 0}return d.paper.closeGroup(),[y,g]}return wr=h,wr}var xr,Li;function ll(){if(Li)return xr;Li=1;function b(h,d,o){var t=h.paper.rectBeneath(d);return o&&h.paper.text(o,{x:0,y:d.y+7,"text-anchor":"start","font-size":"14px",fill:"rgba(0,0,255,.4)",stroke:"rgba(0,0,255,.4)"}),t}return xr=b,xr}var Cr,Pi;function fl(){if(Pi)return Cr;Pi=1;function b(h,d){var o="rgba(0,0,0,255)",t="rgba(0,0,0,0)",a=Math.round(h.y),n=h.controller.width,l=(n-d)/2,u=l+d,m="M "+l+" "+a+" L "+u+" "+a+" L "+u+" "+(a+1)+" L "+l+" "+(a+1)+" L "+l+" "+a+" z";h.paper.pathToBack({path:m,stroke:t,fill:o,class:h.controller.classes.generate("defined-text")})}return Cr=b,Cr}var kr,qi;function ao(){if(qi)return kr;qi=1;var b=fl(),h=Ye();function d(o,t,a){for(var n=0;n<t.rows.length;n++){var l=t.rows[n];if(l.absmove)o.absolutemoveY(l.absmove);else if(l.move)o.moveY(l.move);else if(l.text||l.phrases){var u=l.left?l.left:0,m=h(o,{x:u,y:o.y,text:l.text,phrases:l.phrases,"dominant-baseline":l["dominant-baseline"],type:l.font,klass:l.klass,name:l.name,anchor:l.anchor});l.absElemType&&a.wrapSvgEl({el_type:l.absElemType,name:l.name,startChar:l.startChar,endChar:l.endChar,text:l.text},m)}else if(l.separator)b(o,l.separator);else if(l.startGroup)o.paper.openGroup({klass:l.klass,"data-name":l.name});else if(l.endGroup){var y=o.paper.closeGroup();l.absElemType&&a.wrapSvgEl({el_type:l.absElemType,name:l.name,startChar:l.startChar,endChar:l.endChar,text:""},y)}}}return kr=d,kr}var _r,Di;function hl(){if(Di)return _r;Di=1;var b=Ee(),h=Kc(),d=ol(),o=cl(),t=ll(),a=eo(),n=ao();function l(y,g,c,r){for(var f,e=y.y,p=0;p<g.staffs.length;p++){var x=g.staffs[p];y.moveY(b.STEP,x.top),x.absoluteY=y.y,y.showDebug&&(y.showDebug.indexOf("box")>=0&&x.voices&&m(y,g.voices,x.voices),y.showDebug.indexOf("grid")>=0&&(y.paper.dottedLine({x1:y.padding.left,x2:y.padding.left+y.controller.width,y1:e,y2:e,stroke:"#0000ff"}),t(y,{x:y.padding.left,y:y.calcY(x.originalTop),width:y.controller.width,height:y.calcY(x.originalBottom)-y.calcY(x.originalTop),fill:y.foregroundColor,stroke:y.foregroundColor,"fill-opacity":.1,"stroke-opacity":.1}),f=0,M(x,"chordHeightAbove"),M(x,"chordHeightBelow"),M(x,"dynamicHeightAbove"),M(x,"dynamicHeightBelow"),M(x,"endingHeightAbove"),M(x,"lyricHeightAbove"),M(x,"lyricHeightBelow"),M(x,"partHeightAbove"),M(x,"tempoHeightAbove"),M(x,"volumeHeightAbove"),M(x,"volumeHeightBelow"))),y.moveY(b.STEP,-x.bottom),y.showDebug&&y.showDebug.indexOf("grid")>=0&&y.paper.dottedLine({x1:y.padding.left,x2:y.padding.left+y.controller.width,y1:y.y,y2:y.y,stroke:"#0000aa"})}for(var w,_,E=2,N=0,I=0;I<g.voices.length;I++){var R=g.voices[I].staff,C=g.voices[I].tabNameInfos;if(y.y=R.absoluteY,y.controller.classes.incrVoice(),!g.voices[I].duplicate){if(w||(w=y.calcY(10)),_=y.calcY(E),R.lines!==0){R.linePitch&&(E=R.linePitch),y.controller.classes.newMeasure();var B=o(y,g.startx,g.w,R.lines,R.linePitch,.35);_=B[1],R.bottomLine=_,R.topLine=B[0],R.hasTab&&(N=R.topLine),R.hasStaff&&(N=R.hasStaff.topLine,g.voices[I].barto=!0,g.voices[I].topLine=w)}u(y,R.absoluteY,g.brace,I,c),u(y,R.absoluteY,g.bracket,I,c)}d(y,g.voices[I],N,c,{top:e,zero:y.y,height:g.height*b.STEP});var q=0;if(C){var L={rows:[]};L.rows.push({absmove:_+2});var D=8;L.rows.push({left:g.startx+D,text:C.name,font:"tablabelfont",klass:"text instrument-name",anchor:"start"}),L.rows.push({move:C.textSize.height}),n(y,L),q=C.textSize.height}y.controller.classes.newMeasure(),g.voices[I].duplicate||(N=y.calcY(2+q))}y.controller.classes.newMeasure();var P=g.staffs.length;P>1&&(w=g.staffs[0].topLine,_=g.staffs[P-1].bottomLine,a(y,g.startx,.6,w,_,null)),y.y=e;function M(A,F){var z=["rgb(207,27,36)","rgb(168,214,80)","rgb(110,161,224)","rgb(191,119,218)","rgb(195,30,151)","rgb(31,170,177)","rgb(220,166,142)"];if(A.positionY&&A.positionY[F]){var H=A.specialY[F]*b.STEP;F==="chordHeightAbove"&&A.specialY.chordLines&&A.specialY.chordLines.above&&(H*=A.specialY.chordLines.above),F==="chordHeightBelow"&&A.specialY.chordLines&&A.specialY.chordLines.below&&(H*=A.specialY.chordLines.below),t(y,{x:y.padding.left,y:y.calcY(A.positionY[F]),width:y.controller.width,height:H,fill:z[f],stroke:z[f],"fill-opacity":.4,"stroke-opacity":.4},F.substr(0,4)),f+=1,f>6&&(f=0)}}}function u(y,g,c,r,f){if(c)for(var e=0;e<c.length;e++)c[e].isStartVoice(r)&&(c[e].startY=g-b.STEP*10,c[e].elemset=h(y,c[e],f))}function m(y,g,c){for(var r=0;r<c.length;r++)for(var f=g[c[r]].children,e=0;e<f.length;e++){var p=f[e],x=p.getFixedCoords();if(!(p.invisible||x.t===void 0||x.b===void 0)){var w=(x.t-x.b)*b.STEP;t(y,{x:x.x,y:y.calcY(x.t),width:x.w,height:w,fill:"#88e888","fill-opacity":.4,stroke:"#4aa93d","stroke-opacity":.8});for(var _=0;_<p.children.length;_++){var E=p.children[_],N=E.getChordDim();if(N){var I=y.calcY(E.pitch);I+=E.dim.font.size*E.getLane(),t(y,{x:N.left,y:I,width:N.right-N.left,height:E.dim.font.size,fill:"none",stroke:"#4aa93d","stroke-opacity":.8})}}}}}return _r=l,_r}var Tr,Fi;function ul(){if(Fi)return Tr;Fi=1;function b(h,d,o,t){var a=(d+h.padding.left+h.padding.right)*o,n=(h.y+h.padding.bottom)*o;if(h.isPrint&&(n=Math.max(n,1056)),h.ariaLabel!==""){var l="Sheet Music";h.abctune&&h.abctune.metaText&&h.abctune.metaText.title&&(l+=' for "'+h.abctune.metaText.title+'"'),h.paper.setTitle(l);var u=h.ariaLabel?h.ariaLabel:l;h.paper.setAttribute("aria-label",u)}var m=["-webkit-touch-callout: none;","-webkit-user-select: none;","-khtml-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;"];h.paper.insertStyles(".abcjs-dragging-in-progress text, .abcjs-dragging-in-progress tspan {"+m.join(" ")+"}");var y={overflow:"hidden"};t==="resize"?h.paper.setResponsiveWidth(a,n):(y.width="",y.height=n+"px",o<1?(y.width=a+"px",h.paper.setSize(a/o,n/o)):h.paper.setSize(a,n)),h.paper.setScale(o),h.paper.setParentStyles(y)}return Tr=b,Tr}var Sr,Oi;function dl(){if(Oi)return Sr;Oi=1;var b=Ws(),h=Us();function d(o,t,a){this.elements=[],this.paper=o,this.tuneNumber=a,this.selectTypes=t}return d.prototype.getElements=function(){return this.elements},d.prototype.add=function(o,t,a,n){if(this.canSelect(o)){var l;this.selectTypes===void 0?l={selectable:!1,"data-index":this.elements.length}:l={selectable:!0,tabindex:0,"data-index":this.elements.length},this.paper.setAttributeOnElement(t,l);var u={absEl:o,svgEl:t,isDraggable:a};n!==void 0&&(u.staffPos=n),this.elements.push(u)}},d.prototype.canSelect=function(o){return this.selectTypes===!1||!o||!o.abcelem?!1:this.selectTypes===!0?!0:this.selectTypes===void 0?o.abcelem.el_type==="note"||o.abcelem.el_type==="tabNumber":this.selectTypes.indexOf(o.abcelem.el_type)>=0},d.prototype.wrapSvgEl=function(o,t){var a={tuneNumber:this.tuneNumber,abcelem:o,elemset:[t],highlight:b,unhighlight:h};this.add(a,t,!1)},Sr=d,Sr}var Er,Ii;function pl(){if(Ii)return Er;Ii=1;var b=hl(),h=ul(),d=ao(),o=Ee(),t=dl();function a(u,m,y,g,c,r,f,e,p,x){var w=new t(u.paper,e,p),_={};m.shouldAddClasses&&(_.klass="abcjs-meta-top"),u.paper.openGroup(_),u.moveY(u.padding.top),d(u,y.topText,w),u.paper.closeGroup(),u.moveY(u.spacing.music);for(var E=[],N=0;N<y.lines.length;N++){m.incrLine();var I=y.lines[N];if(I.staff){m.shouldAddClasses&&(_.klass="abcjs-staff-wrapper abcjs-l"+m.lineNumber),u.paper.openGroup(_),I.vskip&&u.moveY(I.vskip),E.length>=1&&l(u,u.spacing.staffSeparation,E[E.length-1],I.staffGroup);var R=n(u,I.staffGroup,w,N);R.line=x+N,E.push(R),u.paper.closeGroup()}else I.nonMusic&&(m.shouldAddClasses&&(_.klass="abcjs-non-music"),u.paper.openGroup(_),d(u,I.nonMusic,w),u.paper.closeGroup())}return m.reset(),y.bottomText&&y.bottomText.rows&&y.bottomText.rows.length>0&&(m.shouldAddClasses&&(_.klass="abcjs-meta-bottom"),u.paper.openGroup(_),u.moveY(24),d(u,y.bottomText,w),u.paper.closeGroup()),h(u,c,f,r),{staffgroups:E,selectables:w.getElements()}}function n(u,m,y,g){b(u,m,y,g);var c=m.height*o.STEP;return u.y+=c,m}function l(u,m,y,g){var c=y.staffs[y.staffs.length-1],r=-(c.bottom-2),f=g.staffs[0].top-10,e=f+r,p=e*o.STEP;p<m&&u.moveY(m-p)}return Er=a,Er}var Ar,Ri;function vl(){if(Ri)return Ar;Ri=1;var b=Qs();function h(d){for(var o=d;o&&o.attributes&&o.tagName.toLowerCase()!=="svg"&&!o.attributes.selectable;)o=o.parentNode;if(o&&o.attributes&&o.attributes.selectable){var t=o.attributes["data-index"].nodeValue;if(t&&(t=parseInt(t,10),t>=0&&t<this.selectables.length)){var a=this.selectables[t],n=b(a,d);return n.index=t,n.element=a,n}}return null}return Ar=h,Ar}var Mr,Hi;function no(){if(Hi)return Mr;Hi=1;var b=Ee(),h=Nc(),d=Lc(),o=Pc(),t=qc(),a=Dc(),n=Fc(),l=Oc(),u=Ic(),m=Vc(),y=Xc(),g=jc(),c=$c(),r=pl(),f=js(),e=vl(),p=function(_,E){E=E||{},this.findSelectableElement=e,this.oneSvgPerLine=E.oneSvgPerLine,this.selectionColor=E.selectionColor,this.dragColor=E.dragColor?E.dragColor:E.selectionColor,this.dragging=!!E.dragging,this.selectTypes=E.selectTypes,this.responsive=E.responsive,this.space=3*b.SPACE,this.initialClef=E.initialClef,this.timeBasedLayout=E.timeBasedLayout,this.expandToWidest=!!E.expandToWidest,this.scale=E.scale?parseFloat(E.scale):0,this.classes=new y({shouldAddClasses:E.add_classes}),this.scale>.1||(this.scale=void 0),E.staffwidth?(this.staffwidthScreen=E.staffwidth,this.staffwidthPrint=E.staffwidth):(this.staffwidthScreen=740,this.staffwidthPrint=680),this.listeners=[],E.clickListener&&this.addSelectListener(E.clickListener),this.renderer=new d(_),this.renderer.setPaddingOverride(E),E.showDebug&&(this.renderer.showDebug=E.showDebug),E.jazzchords&&(this.jazzchords=E.jazzchords),E.accentAbove&&(this.accentAbove=E.accentAbove),E.germanAlphabet&&(this.germanAlphabet=E.germanAlphabet),E.lineThickness&&(this.lineThickness=E.lineThickness),this.renderer.controller=this,this.renderer.foregroundColor=E.foregroundColor?E.foregroundColor:"currentColor",E.ariaLabel!==void 0&&(this.renderer.ariaLabel=E.ariaLabel),this.renderer.minPadding=E.minPadding?E.minPadding:0,this.reset()};p.prototype.reset=function(){this.selected=[],this.staffgroups=[],this.engraver&&this.engraver.reset(),this.engraver=null,this.renderer.reset(),this.dragTarget=null,this.dragIndex=-1,this.dragMouseStart={x:-1,y:-1},this.dragYStep=0,this.lineThickness&&this.renderer.setLineThickness(this.lineThickness)},p.prototype.engraveABC=function(_,E,N){_[0]===void 0&&(_=[_]),this.reset();for(var I=0;I<_.length;I++)E===void 0&&(E=I),this.getFontAndAttr=new g(_[I].formatting,this.classes),this.getTextSize=new c(this.getFontAndAttr,this.renderer.paper),this.engraveTune(_[I],E,N)},p.prototype.adjustNonScaledItems=function(_){this.width/=_,this.renderer.adjustNonScaledItems(_)},p.prototype.getMeasureWidths=function(_){this.reset(),this.getFontAndAttr=new g(_.formatting,this.classes),this.getTextSize=new c(this.getFontAndAttr,this.renderer.paper);var E=this.jazzchords;this.setupTune(_,0),this.constructTuneElements(_),m(this.renderer,_,0,this.space,this.timeBasedLayout);for(var N=[],I,R=!0,C=0;C<_.lines.length;C++){var B=_.lines[C];if(B.staff){if(R&&(I={left:0,measureWidths:[],total:0},N.push(I),R=!1),B.staffGroup.voices.length>0)for(var q=B.staffGroup.voices[0],L=!1,D=0,P=0;P<q.children.length;P++){var M=q.children[P];!L&&!M.isClef&&!M.isKeySig&&(L=!0,I.left=M.x,D=M.x),M.type==="bar"&&(I.measureWidths.push(M.x-D),I.total+=M.x-D,D=M.x)}}else R=!0}return this.jazzchords=E,N},p.prototype.setupTune=function(_,E){this.classes.reset(),_.formatting.jazzchords!==void 0&&(this.jazzchords=_.formatting.jazzchords),_.formatting.accentAbove!==void 0&&(this.accentAbove=_.formatting.accentAbove),this.renderer.newTune(_),this.engraver=new h(this.getTextSize,E,{bagpipes:_.formatting.bagpipes,flatbeams:_.formatting.flatbeams,graceSlurs:_.formatting.graceSlurs!==!1,percmap:_.formatting.percmap,initialClef:this.initialClef,jazzchords:this.jazzchords,timeBasedLayout:this.timeBasedLayout,accentAbove:this.accentAbove,germanAlphabet:this.germanAlphabet}),this.engraver.setStemHeight(this.renderer.spacing.stemHeight),this.engraver.measureLength=_.getMeterFraction().num/_.getMeterFraction().den,_.formatting.staffwidth?this.width=_.formatting.staffwidth*1.33:this.width=this.renderer.isPrint?this.staffwidthPrint:this.staffwidthScreen;var N=_.formatting.scale?_.formatting.scale:this.scale;return this.responsive==="resize"&&(N=void 0),N===void 0&&(N=this.renderer.isPrint?.75:1),this.adjustNonScaledItems(N),N},p.prototype.constructTuneElements=function(_){_.topText=new n(_.metaText,_.metaTextInfo,_.formatting,_.lines,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize);var E,N,I=!1,R=!1;for(E=0;E<_.lines.length;E++)if(N=_.lines[E],N.staff)R=!0,N.staffGroup=this.engraver.createABCLine(N.staff,I?null:_.metaText.tempo,E),I=!0;else if(N.subtitle){if(R){var C=this.width/2+this.renderer.padding.left;N.nonMusic=new a(this.renderer.spacing.subtitle,_.formatting,N.subtitle,C,this.renderer.padding.left,this.getTextSize)}}else N.text!==void 0?(R=!0,N.nonMusic=new o(N.text,N.vskip,this.getFontAndAttr,this.renderer.padding.left,this.width,this.getTextSize)):N.separator!==void 0&&N.separator.lineLength&&(R=!0,N.nonMusic=new t(N.separator.spaceAbove,N.separator.lineLength,N.separator.spaceBelow));_.bottomText=new l(_.metaText,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize)},p.prototype.engraveTune=function(_,E,N){var I=this.jazzchords,R=this.setupTune(_,E);this.constructTuneElements(_);var C=m(this.renderer,_,this.width,this.space,this.expandToWidest,this.timeBasedLayout);if(this.expandToWidest&&C>this.width+1&&(_.topText=new n(_.metaText,_.metaTextInfo,_.formatting,_.lines,C,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize),_.lines&&_.lines.length>0))for(var B=_.lines.length,q=0;q<B;++q){var L=_.lines[q];if(L.nonMusic&&L.nonMusic.rows&&L.nonMusic.rows.length>0)for(var D=L.nonMusic.rows.length,P=0;P<D;++P){var M=L.nonMusic.rows[P];M.left&&(L.subtitle?M.left=C/2+this.renderer.padding.left:L.text&&L.text.length>0&&L.text[0].center&&(M.left=C/2+this.renderer.padding.left))}}_.tablatures&&f.layoutTablatures(this.renderer,_);var A=r(this.renderer,this.classes,_,this.width,C,this.responsive,R,this.selectTypes,E,N);if(this.staffgroups=A.staffgroups,this.selectables=A.selectables,this.oneSvgPerLine){var F=this.renderer.paper.svg.parentNode;this.svgs=x(this.renderer,F,_.metaText.title,this.responsive,R)}else this.svgs=[this.renderer.paper.svg];u(this,this.svgs),this.jazzchords=I};function x(_,E,N,I,R){N||(N="Untitled");var C=E.querySelector("svg");I==="resize"&&(E.style.paddingBottom="");for(var B=C.querySelector("style"),q=I==="resize"?C.viewBox.baseVal.width:C.getAttribute("width"),L=E.querySelectorAll("svg > g"),D=0,P=[],M=0;M<L.length;M++){var A=L[M],F=A.getBBox(),z=F.y-D,H=F.height+z,k=document.createElement("div"),T="overflow: hidden;";I!=="resize"&&(T+="height:"+H*R+"px;"),k.setAttribute("style",T);var S=w(C),O='Sheet Music for "'+N+'" section '+(M+1);S.setAttribute("aria-label",O),I!=="resize"&&S.setAttribute("height",H),I==="resize"&&(S.style.position="");var G=_.firefox112?H+1:H;S.setAttribute("viewBox","0 "+D+" "+q+" "+G),S.appendChild(B.cloneNode(!0));var W=document.createElement("title");W.innerText=O,S.appendChild(W),S.appendChild(A),k.appendChild(S),P.push(S),E.appendChild(k),D=F.y+F.height}return E.removeChild(C),P}function w(_){for(var E="http://www.w3.org/2000/svg",N=document.createElementNS(E,"svg"),I=0;I<_.attributes.length;I++){var R=_.attributes[I];R.name!=="height"&&R.name!="aria-label"&&N.setAttribute(R.name,R.value)}return N}return p.prototype.getDim=function(_){if(!_.dim){var E=_.svgEl.getBBox();_.dim={left:Math.round(E.x),top:Math.round(E.y),right:Math.round(E.x+E.width),bottom:Math.round(E.y+E.height)}}return _.dim},p.prototype.addSelectListener=function(_){this.listeners[this.listeners.length]=_},Mr=p,Mr}var Nr,zi;function io(){if(zi)return Nr;zi=1;var b=gt();zs();var h=no(),d=Gs(),o=Is(),t={};function a(){var m=window.innerWidth;for(var y in t)if(t.hasOwnProperty(y)){var g=t[y],c=g.offsetLeft;m-=c*2,g.style.width=m+"px"}}try{window.addEventListener("resize",a),window.addEventListener("orientationChange",a)}catch{}function n(m,y,g,c,r){g.viewportHorizontal?(m.innerHTML='<div class="abcjs-inner"></div>',g.scrollHorizontal?(m.style.overflowX="auto",m.style.overflowY="hidden"):m.style.overflow="hidden",t[m.id]=m,m=m.children[0]):g.viewportVertical?(m.innerHTML='<div class="abcjs-inner scroll-amount"></div>',m.style.overflowX="hidden",m.style.overflowY="auto",m=m.children[0]):m.innerHTML="";var f=new h(m,g);if(f.engraveABC(y,c,r),y.engraver=f,g.viewportVertical||g.viewportHorizontal){var e=m.parentNode;e.style.width=m.style.width}}var l=function(m,y,g,c,r){var f={},e;if(g){for(e in g)g.hasOwnProperty(e)&&(f[e]=g[e]);f.warnings_id&&f.tablature&&(f.tablature.warning_id=f.warnings_id)}if(c)for(e in c)c.hasOwnProperty(e)&&(e==="listener"?c[e].highlight&&(f.clickListener=c[e].highlight):f[e]=c[e]);if(r)for(e in r)r.hasOwnProperty(e)&&(f[e]=r[e]);function p(x,w,_,E){var N=!1;return x==="*"&&(N=!0,x=document.createElement("div"),x.setAttribute("style","visibility: hidden;"),document.body.appendChild(x)),!N&&f.wrap&&f.staffwidth?(w=u(x,w,_,E,f),w):(f.afterParsing&&f.afterParsing(w,_,E),n(x,w,f,_,0),N&&x.parentNode.removeChild(x),null)}return b.renderEngine(p,m,y,f)};function u(m,y,g,c,r){var f=new h(m,r),e=f.getMeasureWidths(y),p=o.calcLineWraps(y,e,r);if(p.reParse){var x=new d;x.parse(c,p.revisedParams),y=x.getTune();var w=x.getWarnings();w&&(y.warnings=w)}return r.afterParsing&&r.afterParsing(y,g,c),n(m,y,p.revisedParams,g,0),y.explanation=p.explanation,y}return Nr=l,Nr}var Br,Gi;function gl(){if(Gi)return Br;Gi=1;var b=gt(),h=no(),d=function(o,t){function a(n,l,u,m){n=document.createElement("div"),n.setAttribute("style","visibility: hidden;"),document.body.appendChild(n);var y=new h(n,t),g=y.getMeasureWidths(l);return n.parentNode.removeChild(n),{sections:g}}return b.renderEngine(a,"*",o,t)};return Br=d,Br}var Lr,Yi;function wa(){if(Yi)return Lr;Yi=1;var b={};return Lr=b,Lr}var Pr,Wi;function bl(){if(Wi)return Pr;Wi=1;var b=wa(),h=function(d,o,t,a){b[o]||(b[o]={});var n=b[o];return n[t]||(n[t]=new Promise(function(l,u){var m=new XMLHttpRequest;let y=d+o+"-mp3/"+t+".mp3";m.open("GET",y,!0),m.responseType="arraybuffer",m.onload=function(){if(m.status!==200){u(Error("Can't load sound at "+y+" status="+m.status));return}var g=function(r){l({instrument:o,name:t,status:"loaded",audioBuffer:r})},c=a.decodeAudioData(m.response,g,function(){u(Error("Can't decode sound at "+y))});c&&typeof c.catch=="function"&&c.catch(u)},m.onerror=function(){u(Error("Can't load sound at "+y))},m.send()}).catch(l=>{throw console.error("Didn't load note",o,t,":",l.message),l})),n[t]};return Pr=h,Pr}var qr,Ui;function xa(){if(Ui)return qr;Ui=1;var b=["acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_1","electric_piano_2","harpsichord","clavinet","celesta","glockenspiel","music_box","vibraphone","marimba","xylophone","tubular_bells","dulcimer","drawbar_organ","percussive_organ","rock_organ","church_organ","reed_organ","accordion","harmonica","tango_accordion","acoustic_guitar_nylon","acoustic_guitar_steel","electric_guitar_jazz","electric_guitar_clean","electric_guitar_muted","overdriven_guitar","distortion_guitar","guitar_harmonics","acoustic_bass","electric_bass_finger","electric_bass_pick","fretless_bass","slap_bass_1","slap_bass_2","synth_bass_1","synth_bass_2","violin","viola","cello","contrabass","tremolo_strings","pizzicato_strings","orchestral_harp","timpani","string_ensemble_1","string_ensemble_2","synth_strings_1","synth_strings_2","choir_aahs","voice_oohs","synth_choir","orchestra_hit","trumpet","trombone","tuba","muted_trumpet","french_horn","brass_section","synth_brass_1","synth_brass_2","soprano_sax","alto_sax","tenor_sax","baritone_sax","oboe","english_horn","bassoon","clarinet","piccolo","flute","recorder","pan_flute","blown_bottle","shakuhachi","whistle","ocarina","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass_lead","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","sitar","banjo","shamisen","koto","kalimba","bagpipe","fiddle","shanai","tinkle_bell","agogo","steel_drums","woodblock","taiko_drum","melodic_tom","synth_drum","reverse_cymbal","guitar_fret_noise","breath_noise","seashore","bird_tweet","telephone_ring","helicopter","applause","gunshot","percussion"];return qr=b,qr}var Dr,Vi;function ml(){if(Vi)return Dr;Vi=1;var b=xa(),h=function(d){for(var o=[],t=0;t<d.tracks.length;t++)o.push([]);var a=b[0];return d.tracks.forEach(function(n,l){n.forEach(function(u){switch(u.cmd){case"note":var m=u.instrument!==void 0?b[u.instrument]:a;if(u.duration>0){var y=u.gap?u.gap:0,g=u.duration;y=Math.min(y,g*2/3);var c={pitch:u.pitch,instrument:m,start:Math.round(u.start*1e6)/1e6,end:Math.round((u.start+g-y)*1e6)/1e6,volume:u.volume};u.startChar&&(c.startChar=u.startChar),u.endChar&&(c.endChar=u.endChar),u.style&&(c.style=u.style),u.cents&&(c.cents=u.cents),o[l].push(c)}break;case"program":a=b[u.instrument];break;case"text":break;default:console.log("Unhandled midi event",u)}})}),o};return Dr=h,Dr}var Fr,Xi;function bt(){if(Xi)return Fr;Xi=1;function b(h){if(h)window.abcjsAudioContext=h;else if(!window.abcjsAudioContext){var d=window.AudioContext||window.webkitAudioContext;if(d)window.abcjsAudioContext=new d;else return!1}return window.abcjsAudioContext.state!=="suspended"}return Fr=b,Fr}var Or,ji;function $e(){if(ji)return Or;ji=1;var b=bt();function h(){return window.abcjsAudioContext||b(),window.abcjsAudioContext}return Or=h,Or}var Ir,$i;function mt(){if($i)return Ir;$i=1;var b=$e();function h(){if(!window.Promise||!window.AudioContext&&!window.webkitAudioContext&&!navigator.mozAudioContext&&!navigator.msAudioContext)return!1;var d=b();if(d)return d.resume!==void 0}return Ir=h,Ir}var Rr,Ki;function Ca(){if(Ki)return Rr;Ki=1;var b={21:"A0",22:"Bb0",23:"B0",24:"C1",25:"Db1",26:"D1",27:"Eb1",28:"E1",29:"F1",30:"Gb1",31:"G1",32:"Ab1",33:"A1",34:"Bb1",35:"B1",36:"C2",37:"Db2",38:"D2",39:"Eb2",40:"E2",41:"F2",42:"Gb2",43:"G2",44:"Ab2",45:"A2",46:"Bb2",47:"B2",48:"C3",49:"Db3",50:"D3",51:"Eb3",52:"E3",53:"F3",54:"Gb3",55:"G3",56:"Ab3",57:"A3",58:"Bb3",59:"B3",60:"C4",61:"Db4",62:"D4",63:"Eb4",64:"E4",65:"F4",66:"Gb4",67:"G4",68:"Ab4",69:"A4",70:"Bb4",71:"B4",72:"C5",73:"Db5",74:"D5",75:"Eb5",76:"E5",77:"F5",78:"Gb5",79:"G5",80:"Ab5",81:"A5",82:"Bb5",83:"B5",84:"C6",85:"Db6",86:"D6",87:"Eb6",88:"E6",89:"F6",90:"Gb6",91:"G6",92:"Ab6",93:"A6",94:"Bb6",95:"B6",96:"C7",97:"Db7",98:"D7",99:"Eb7",100:"E7",101:"F7",102:"Gb7",103:"G7",104:"Ab7",105:"A7",106:"Bb7",107:"B7",108:"C8",109:"Db8",110:"D8",111:"Eb8",112:"E8",113:"F8",114:"Gb8",115:"G8",116:"Ab8",117:"A8",118:"Bb8",119:"B8",120:"C9",121:"Db9"};return Rr=b,Rr}var Hr,Qi;function yl(){if(Qi)return Hr;Qi=1;var b=function(d){return window.URL.createObjectURL(h(d.audioBuffers))};function h(d){var o=d[0],t=o.numberOfChannels,a=o.length*t*2+44,n=new ArrayBuffer(a),l=new DataView(n),u=[],m,y,g=0,c=0;for(f(1179011410),f(a-8),f(1163280727),f(544501094),f(16),r(1),r(t),f(o.sampleRate),f(o.sampleRate*2*t),r(t*2),r(16),f(1635017060),f(a-c-4),m=0;m<t;m++)u.push(o.getChannelData(m));for(;c<a;){for(m=0;m<u.length;m++)y=Math.max(-1,Math.min(1,u[m][g])),y=(.5+y<0?y*32768:y*32767)|0,l.setInt16(c,y,!0),c+=2;g++}return new Blob([n],{type:"audio/wav"});function r(e){l.setUint16(c,e,!0),c+=2}function f(e){l.setUint32(c,e,!0),c+=4}}return Hr=b,Hr}var zr,Ji;function so(){if(Ji)return zr;Ji=1;function b(h){return Math.pow(2,h/1200)}return zr=b,zr}var Gr,Zi;function wl(){if(Zi)return Gr;Zi=1;var b=wa(),h=Ca(),d=so();function o(a,n,l,u,m,y,g,c,r){var f=window.OfflineAudioContext||window.webkitOfflineAudioContext,e=l.len*l.tempoMultiplier;y&&(e+=y/1e3),e-=c,e<0&&(e=.005);var p=new f(2,Math.floor((e+g)*n),n),x=h[l.pitch];if(!b[l.instrument])return r&&r("placeNote skipped (instrument empty): "+l.instrument+":"+x),Promise.resolve();var w=b[l.instrument][x];return w?w.then(function(_){var E=p.createBufferSource();E.buffer=_.audioBuffer;var N=l.volume/96*m;E.gainNode=p.createGain(),l.pan&&p.createStereoPanner&&(E.panNode=p.createStereoPanner(),E.panNode.pan.setValueAtTime(l.pan,0)),E.gainNode.gain.value=N,E.gainNode.gain.linearRampToValueAtTime(E.gainNode.gain.value,e),E.gainNode.gain.linearRampToValueAtTime(0,e+g),l.cents&&(E.playbackRate.value=d(l.cents)),E.panNode?(E.panNode.connect(p.destination),E.gainNode.connect(E.panNode)):E.gainNode.connect(p.destination),E.connect(E.gainNode),E.start(0),E.noteOff?E.noteOff(e+g):E.stop(e+g);var I;return p.oncomplete=function(R){if(R.renderedBuffer&&R.renderedBuffer.getChannelData)for(var C=0;C<u.length;C++){var B=u[C]*l.tempoMultiplier;y&&(B-=y/1e3),B<0&&(B=0),B=Math.floor(B*n),t(a,R.renderedBuffer,B)}r&&r("placeNote: "+l.instrument+":"+x),I()},p.startRendering(),new Promise(function(R){I=R})}).catch(function(_){return r&&r("placeNote catch: "+_.message),Promise.resolve()}):(r&&r("placeNote skipped: "+l.instrument+":"+x),Promise.resolve())}var t=function(a,n,l){for(var u=0;u<2;u++)for(var m=n.getChannelData(u),y=a.getChannelData(u),g=0;g<m.length;g++)y[g+l]+=m[g]};return Gr=o,Gr}var Yr,es;function ka(){if(es)return Yr;es=1;var b=bl(),h=ml(),d=bt(),o=$e(),t=mt(),a=Ca(),n=xa(),l=yl(),u=wl(),m=wa(),y="MIDI is not supported in this browser.",g="https://paulrosen.github.io/midi-js-soundfonts/abcjs/",c="https://paulrosen.github.io/midi-js-soundfonts/FluidR3_GM/",r="https://paulrosen.github.io/midi-js-soundfonts/MusyngKite/";function f(){var e=this;e.audioBufferPossible=void 0,e.directSource=[],e.startTimeSec=void 0,e.pausedTimeSec=void 0,e.audioBuffers=[],e.duration=void 0,e.isRunning=!1,e.options=void 0,e.pickupLength=0,e.init=function(w){w||(w={}),w.options&&(e.options=w.options),d(w.audioContext);var _=o().currentTime;if(e.debugCallback=w.debugCallback,e.debugCallback&&e.debugCallback("init called"),e.audioBufferPossible=e._deviceCapable(),!e.audioBufferPossible)return Promise.reject({status:"NotSupported",message:y});var E=w.options?w.options:{};e.soundFontUrl=E.soundFontUrl?E.soundFontUrl:c,e.soundFontUrl[e.soundFontUrl.length-1]!=="/"&&(e.soundFontUrl+="/"),E.soundFontVolumeMultiplier||E.soundFontVolumeMultiplier===0?e.soundFontVolumeMultiplier=E.soundFontVolumeMultiplier:e.soundFontUrl===c||e.soundFontUrl===r?e.soundFontVolumeMultiplier=3:e.soundFontUrl===g?e.soundFontVolumeMultiplier=.4:e.soundFontVolumeMultiplier=1,E.programOffsets?e.programOffsets=E.programOffsets:e.soundFontUrl===g?e.programOffsets={bright_acoustic_piano:20,honkytonk_piano:20,electric_piano_1:30,electric_piano_2:30,harpsichord:40,clavinet:20,celesta:20,glockenspiel:40,vibraphone:30,marimba:35,xylophone:30,tubular_bells:35,dulcimer:30,drawbar_organ:20,percussive_organ:25,rock_organ:20,church_organ:40,reed_organ:40,accordion:40,harmonica:40,acoustic_guitar_nylon:20,acoustic_guitar_steel:30,electric_guitar_jazz:25,electric_guitar_clean:15,electric_guitar_muted:35,overdriven_guitar:25,distortion_guitar:20,guitar_harmonics:30,electric_bass_finger:15,electric_bass_pick:30,fretless_bass:40,violin:105,viola:50,cello:40,contrabass:60,trumpet:10,trombone:90,alto_sax:20,tenor_sax:20,clarinet:20,flute:50,banjo:50,woodblock:20}:e.programOffsets={};var N=E.fadeLength!==void 0?parseInt(E.fadeLength,10):NaN;if(e.fadeLength=isNaN(N)?200:N,N=E.noteEnd!==void 0?parseInt(E.noteEnd,10):NaN,e.noteEnd=isNaN(N)?0:N,e.pan=E.pan,e.meterSize=1,w.visualObj){e.flattened=w.visualObj.setUpAudio(E);var I=w.visualObj.getMeterFraction();I.den&&(e.meterSize=w.visualObj.getMeterFraction().num/w.visualObj.getMeterFraction().den),e.pickupLength=w.visualObj.getPickupLength()}else if(w.sequence)e.flattened=w.sequence;else return Promise.reject(new Error("Must pass in either a visualObj or a sequence"));e.millisecondsPerMeasure=w.millisecondsPerMeasure?w.millisecondsPerMeasure:w.visualObj?w.visualObj.millisecondsPerMeasure(e.flattened.tempo):1e3,e.beatsPerMeasure=w.visualObj?w.visualObj.getBeatsPerMeasure():4,e.sequenceCallback=E.sequenceCallback,e.callbackContext=E.callbackContext,e.onEnded=E.onEnded,e.meterFraction=w.visualObj?w.visualObj.getMeterFraction():{den:1};var R={},C=[],B=[],q=n[0];e.flattened.tracks.forEach(function(A){A.forEach(function(F){if(F.cmd==="program"&&n[F.instrument]&&(q=n[F.instrument]),F.pitch!==void 0){var z=F.pitch,H=a[z],k=F.instrument!==void 0?n[F.instrument]:q;if(H)if(R[k]||(R[k]={}),!m[k]||!m[k][H])R[k][H]=!0;else{var T=k+":"+H;C.indexOf(T)<0&&C.push(T)}else{var S=k+":"+H;console.log("Can't find note: ",z,S),B.indexOf(S)<0&&B.push(S)}}})}),e.debugCallback&&e.debugCallback("note gathering time = "+Math.floor((o().currentTime-_)*1e3)+"ms"),_=o().currentTime;var L=[];Object.keys(R).forEach(function(A){Object.keys(R[A]).forEach(function(F){L.push({instrument:A,note:F})})}),e.debugCallback&&e.debugCallback("notes "+JSON.stringify(L));for(var D=[],P=256,M=0;M<L.length;M+=P)D.push(L.slice(M,M+P));return new Promise(function(A,F){var z={cached:C,error:B,loaded:[]},H=0,k=function(){e.debugCallback&&e.debugCallback("loadBatch idx="+H+" len="+D.length),H<D.length?e._loadBatch(D[H],e.soundFontUrl,_).then(function(T){e.debugCallback&&e.debugCallback("loadBatch then"),_=o().currentTime,T&&(T.error&&(z.error=z.error.concat(T.error)),T.loaded&&(z.loaded=z.loaded.concat(T.loaded))),H++,k()},F):(e.debugCallback&&e.debugCallback("resolve init"),A(z))};k()})},e._loadBatch=function(w,_,E,N){var I=[];return w.forEach(function(R){e.debugCallback&&e.debugCallback("getNote "+R.instrument+":"+R.note),I.push(b(_,R.instrument,R.note,o()))}),Promise.all(I).then(function(R){e.debugCallback&&e.debugCallback("mp3 load time = "+Math.floor((o().currentTime-E)*1e3)+"ms");for(var C=[],B=[],q=[],L=[],D=0;D<R.length;D++){var P=R[D],M=P.instrument+":"+P.name;P.status==="loaded"?C.push(M):P.status==="pending"?q.push(M):P.status==="cached"?B.push(M):L.push(M+" "+P.message)}if(q.length>0){if(e.debugCallback&&e.debugCallback("pending "+JSON.stringify(q)),N?N=N*2:N=50,N<9e4)return new Promise(function(z,H){setTimeout(function(){var k=[];for(D=0;D<q.length;D++)M=q[D].split(":"),k.push({instrument:M[0],note:M[1]});e.debugCallback&&e.debugCallback("retry "+JSON.stringify(k)),e._loadBatch(k,_,E,N).then(function(T){z(T)}).catch(function(T){H(T)})},N)});for(var A=[],F=0;F<w.length;F++)A.push(w[F].instrument+"/"+w[F].note);return e.debugCallback&&e.debugCallback("loadBatch timeout"),Promise.reject(new Error("timeout attempting to load: "+A.join(", ")))}else return e.debugCallback&&e.debugCallback("loadBatch resolve"),Promise.resolve({loaded:C,cached:B,error:L})}).catch(function(R){e.debugCallback&&e.debugCallback("loadBatch catch "+R.message)})},e.prime=function(){var w=e.fadeLength/1e3;return e.isRunning=!1,e.audioBufferPossible?(e.debugCallback&&e.debugCallback("prime called"),new Promise(function(_){var E=o().currentTime,N=e.millisecondsPerMeasure/1e3/e.meterSize;if(e.duration=e.flattened.totalDuration*N,e.duration<=0)return e.audioBuffers=[],_({status:"empty",seconds:0});e.duration+=w;var I=Math.floor(o().sampleRate*e.duration);e.stop();var R=h(e.flattened);e.options.swing&&x(R,e.options.swing,e.meterFraction,e.pickupLength),e.sequenceCallback&&e.sequenceCallback(R,e.callbackContext);var C=p(R.length,e.pan),B={};R.forEach(function(z,H){var k=C&&C.length>H?C[H]:0;z.forEach(function(T){var S=T.instrument+":"+T.pitch+":"+T.volume+":"+Math.round((T.end-T.start)*1e3)/1e3+":"+k+":"+N+":"+(T.cents?T.cents:0);e.debugCallback&&e.debugCallback("noteMapTrack "+S),B[S]||(B[S]=[]),B[S].push(T.start)})});for(var q=[],L=o().createBuffer(2,I,o().sampleRate),D=0;D<Object.keys(B).length;D++){var P=Object.keys(B)[D],M=P.split(":"),A=M[6]!==void 0?parseFloat(M[6]):0;M={instrument:M[0],pitch:parseInt(M[1],10),volume:parseInt(M[2],10),len:parseFloat(M[3]),pan:parseFloat(M[4]),tempoMultiplier:parseFloat(M[5]),cents:A},q.push(u(L,o().sampleRate,M,B[P],e.soundFontVolumeMultiplier,e.programOffsets[M.instrument],w,e.noteEnd/1e3,e.debugCallback))}e.audioBuffers=[L],e.debugCallback&&(e.debugCallback("sampleRate = "+o().sampleRate),e.debugCallback("totalSamples = "+I),e.debugCallback("creationTime = "+Math.floor((o().currentTime-E)*1e3)+"ms"));function F(z){var H=z&&z.audioBuffers&&z.audioBuffers.length>0?z.audioBuffers[0].duration:0;return{status:o().state,duration:H}}Promise.all(q).then(function(){o().state==="suspended"?o().resume().then(function(){_(F(e))}):o().state==="interrupted"?o().suspend().then(function(){o().resume().then(function(){_(F(e))})}):_(F(e))})})):Promise.reject(new Error(y))};function p(w,_){if(_==null)return null;var E=[];if(_.length){for(var N=0;N<w;N++)if(N<_.length){var I=parseFloat(_[N]);I<-1?I=-1:I>1&&(I=1),E.push(I)}else E.push(0);return E}else{var R=parseFloat(_);if(R*(w-1)>2)return null;for(var C=w%2===0,B=C?0-R/2:0,q=B+R,L=0;L<w;L++)C=L%2===0,C?(E.push(B),B-=R):(E.push(q),q+=R);return E}}e.start=function(){if(!e.audioBufferPossible)throw new Error(y);e.debugCallback&&e.debugCallback("start called");var w=e.pausedTimeSec?e.pausedTimeSec:0;e._kickOffSound(w),e.startTimeSec=o().currentTime-w,e.pausedTimeSec=void 0,e.debugCallback&&e.debugCallback("MIDI STARTED",e.startTimeSec)},e.pause=function(){if(!e.audioBufferPossible)throw new Error(y);return e.debugCallback&&e.debugCallback("pause called"),e.pausedTimeSec=e.stop(),e.pausedTimeSec},e.resume=function(){e.start()},e.seek=function(w,_){var E;switch(_){case"seconds":E=w;break;case"beats":E=w*e.millisecondsPerMeasure/e.beatsPerMeasure/1e3;break;default:E=(e.duration-e.fadeLength/1e3)*w;break}if(!e.audioBufferPossible)throw new Error(y);e.debugCallback&&e.debugCallback("seek called sec="+E),e.isRunning?(e.stop(),e._kickOffSound(E)):e.pausedTimeSec=E,e.pausedTimeSec=E},e.stop=function(){e.isRunning=!1,e.pausedTimeSec=void 0,e.directSource.forEach(function(_){try{_.stop()}catch(E){console.log("direct source didn't stop:",E)}}),e.directSource=[];var w=o().currentTime-e.startTimeSec;return w},e.finished=function(){e.startTimeSec=void 0,e.pausedTimeSec=void 0,e.isRunning=!1},e.download=function(){return l(e)},e.getAudioBuffer=function(){return e.audioBuffers[0]},e.getIsRunning=function(){return e.isRunning},e._deviceCapable=function(){return t()?!0:(console.warn(y),e.debugCallback&&e.debugCallback(y),!1)},e._kickOffSound=function(w){e.isRunning=!0,e.directSource=[],e.audioBuffers.forEach(function(_,E){e.directSource[E]=o().createBufferSource(),e.directSource[E].buffer=_,e.directSource[E].connect(o().destination)}),e.directSource.forEach(function(_){_.start(0,w)}),e.onEnded&&(e.directSource[0].onended=function(){e.onEnded(e.callbackContext)})};function x(w,_,E,N){if(!(E.den!=4&&E.den!=8)&&(_=parseFloat(_),!(isNaN(_)||_<=50))){_>75&&(_=75),_=_/50-1;var I=0,R=.25;E.den===8&&(R=R/2);for(var C=R/2,B=C*_,q=0;q<w.length;q++)for(var L=w[q],D=0;D<L.length;D++){var P=L[D];if((P.start-N)%C==0&&(P.start-N)%R!=0&&(D==0||L[D-1].start<=L[D].start-C)&&(D==L.length-1||L[D+1].start>=L[D].start+C)){var M=P.start;P.start+=B,P.volume*=1+I,D>0&&L[D-1].end==M&&(L[D-1].end=P.start,L[D-1].volume*=1-I)}}}}}return Yr=f,Yr}var Wr,ts;function oo(){if(ts)return Wr;ts=1;var b=function(){var h=this;h.tracks=[],h.totalDuration=0,h.currentInstrument=[],h.starts=[],h.addTrack=function(){return h.tracks.push([]),h.currentInstrument.push(0),h.starts.push(0),h.tracks.length-1},h.setInstrument=function(d,o){h.tracks[d].push({channel:0,cmd:"program",instrument:o}),h.currentInstrument[d]=o},h.appendNote=function(d,o,t,a,n){var l={cmd:"note",duration:t,gap:0,instrument:h.currentInstrument[d],pitch:o,start:h.starts[d],volume:a};n&&(l.cents=n),h.tracks[d].push(l),h.starts[d]+=t,h.totalDuration=Math.max(h.totalDuration,h.starts[d])}};return Wr=b,Wr}var Ur,rs;function xl(){if(rs)return Ur;rs=1;var b=`
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 700" preserveAspectRatio="xMidYMid meet">
	<g transform="translate(0,700) scale(0.1,-0.1)" >
	<path d="M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55
	-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128
	-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79
	-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60
	-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507
	-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21
	-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12
	-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33
	-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0
	-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51
	153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48
	107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57
	74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52
	100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45
	143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29
	165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34
	115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33
	-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90
	-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138
	115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191
	50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21
	7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17
	-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10
	-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66
	50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73
	39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53
	-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43
	-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339
	-19z"></path>
	<path d="M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0
	-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72
	l69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279
	268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74
	-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19
	-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31
	93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59
	62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89
	89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146
	67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56
	31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64
	48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22
	25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14
	18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50
	47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138
	-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10
	-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20
	-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19
	-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25
	-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18
	-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11
	-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168
	16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71
	37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108
	63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65
	61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86
	12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030
	0 -1086 -11z"></path>
	</g>
</svg>
`;return Ur=b,Ur}var Vr,as;function Cl(){if(as)return Vr;as=1;var b=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-play-svg">
    <g>
    <polygon points="4 0 23 12.5 4 25"/>
    </g>
</svg>
`;return Vr=b,Vr}var Xr,ns;function kl(){if(ns)return Xr;ns=1;var b=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-pause-svg">
  <g>
    <rect width="8.23" height="25"/>
    <rect width="8.23" height="25" x="17"/>
  </g>
</svg>
`;return Xr=b,Xr}var jr,is;function _l(){if(is)return jr;is=1;var b=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="abcjs-loading-svg">
    <circle cx="50" cy="50" fill="none" stroke-width="20" r="35" stroke-dasharray="160 55"></circle>
</svg>
`;return jr=b,jr}var $r,ss;function Tl(){if(ss)return $r;ss=1;var b=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25">
  <g>
    <polygon points="5 12.5 24 0 24 25"/>
    <rect width="3" height="25" x="0" y="0"/>
  </g>
</svg>
`;return $r=b,$r}var Kr,os;function co(){if(os)return Kr;os=1;var b=mt(),h=bt(),d=$e(),o=xl(),t=Cl(),a=kl(),n=_l(),l=Tl();function u(r,f){var e=this;if(typeof r=="string"){var p=r;if(r=document.querySelector(p),!r)throw new Error('Cannot find element "'+p+'" in the DOM.')}else if(!(r instanceof HTMLElement))throw new Error("The first parameter must be a valid element or selector in the DOM.");if(e.parent=r,e.options={},f&&(e.options=Object.assign({},f)),e.options.ac&&h(e.options.ac),m(e.parent,e.options),c(e),e.disable=function(w){var _=e.parent.querySelector(".abcjs-inline-audio");w?_.classList.add("abcjs-disabled"):_.classList.remove("abcjs-disabled")},e.setWarp=function(w,_){var E=e.parent.querySelector(".abcjs-midi-tempo");E.value=Math.round(_),e.setTempo(w)},e.setTempo=function(w){var _=e.parent.querySelector(".abcjs-midi-current-tempo");_&&(_.innerHTML=Math.round(w))},e.resetAll=function(){for(var w=e.parent.querySelectorAll(".abcjs-pushed"),_=0;_<w.length;_++){var E=w[_];E.classList.remove("abcjs-pushed")}},e.pushPlay=function(w){var _=e.parent.querySelector(".abcjs-midi-start");_&&(w?_.classList.add("abcjs-pushed"):_.classList.remove("abcjs-pushed"))},e.pushLoop=function(w){var _=e.parent.querySelector(".abcjs-midi-loop");_&&(w?_.classList.add("abcjs-pushed"):_.classList.remove("abcjs-pushed"))},e.setProgress=function(w,_){var E=e.parent.querySelector(".abcjs-midi-progress-background"),N=e.parent.querySelector(".abcjs-midi-progress-indicator");if(!(!E||!N)){var I=E.clientWidth,R=I*w;N.style.left=R+"px";var C=e.parent.querySelector(".abcjs-midi-clock");if(C){var B=_*w/1e3,q=Math.floor(B/60),L=Math.floor(B%60),D=L<10?"0"+L:L;C.innerHTML=q+":"+D}}},e.options.afterResume){var x=!1;e.options.ac?x=e.options.ac.state!=="suspended":d()&&(x=d().state!=="suspended"),x&&e.options.afterResume()}}function m(r,f){var e=!!f.loopHandler,p=!!f.restartHandler,x=!!f.playHandler||!!f.playPromiseHandler,w=!!f.progressHandler,_=!!f.warpHandler,E=f.hasClock!==!1,N=`<div class="abcjs-inline-audio">
`;if(e){var I=f.repeatTitle?f.repeatTitle:"Click to toggle play once/repeat.",R=f.repeatAria?f.repeatAria:I;N+='<button type="button" class="abcjs-midi-loop abcjs-btn" title="'+I+'" aria-label="'+R+'">'+o+`</button>
`}if(p){var C=f.restartTitle?f.restartTitle:"Click to go to beginning.",B=f.restartAria?f.restartAria:C;N+='<button type="button" class="abcjs-midi-reset abcjs-btn" title="'+C+'" aria-label="'+B+'">'+l+`</button>
`}if(x){var q=f.playTitle?f.playTitle:"Click to play/pause.",L=f.playAria?f.playAria:q;N+='<button type="button" class="abcjs-midi-start abcjs-btn" title="'+q+'" aria-label="'+L+'">'+t+a+n+`</button>
`}if(w){var D=f.randomTitle?f.randomTitle:"Click to change the playback position.",P=f.randomAria?f.randomAria:D;N+='<button type="button" class="abcjs-midi-progress-background" title="'+D+'" aria-label="'+P+`"><span class="abcjs-midi-progress-indicator"></span></button>
`}if(E&&(N+=`<span class="abcjs-midi-clock"></span>
`),_){var M=f.warpTitle?f.warpTitle:"Change the playback speed.",A=f.warpAria?f.warpAria:M,F=f.bpm?f.bpm:"BPM";N+='<span class="abcjs-tempo-wrapper"><label><input class="abcjs-midi-tempo" type="number" min="1" max="300" value="100" title="'+M+'" aria-label="'+A+'">%</label><span>&nbsp;(<span class="abcjs-midi-current-tempo"></span> '+F+`)</span></span>
`}N+='<div class="abcjs-css-warning" style="font-size: 12px;color:red;border: 1px solid red;text-align: center;width: 300px;margin-top: 4px;font-weight: bold;border-radius: 4px;">CSS required: load abcjs-audio.css</div>',N+=`</div>
`,r.innerHTML=N}function y(r,f,e,p,x){var w=!0;if(d()?w=d().state==="suspended":h(),!b())throw{status:"NotSupported",message:"This browser does not support audio."};(w||x)&&e&&e.classList.add("abcjs-loading"),w?d().resume().then(function(){p?p().then(function(_){g(r,f,e,x)}):g(r,f,e,x)}):g(r,f,e,x)}function g(r,f,e,p){p?r(f).then(function(){e&&e.classList.remove("abcjs-loading")}):(r(f),e&&e.classList.remove("abcjs-loading"))}function c(r){var f=!!r.options.loopHandler,e=!!r.options.restartHandler,p=!!r.options.playHandler||!!r.options.playPromiseHandler,x=!!r.options.progressHandler,w=!!r.options.warpHandler,_=r.parent.querySelector(".abcjs-midi-start");f&&r.parent.querySelector(".abcjs-midi-loop").addEventListener("click",function(E){y(r.options.loopHandler,E,_,r.options.afterResume)}),e&&r.parent.querySelector(".abcjs-midi-reset").addEventListener("click",function(E){y(r.options.restartHandler,E,_,r.options.afterResume)}),p&&_.addEventListener("click",function(E){y(r.options.playPromiseHandler||r.options.playHandler,E,_,r.options.afterResume,!!r.options.playPromiseHandler)}),x&&r.parent.querySelector(".abcjs-midi-progress-background").addEventListener("click",function(E){y(r.options.progressHandler,E,_,r.options.afterResume)}),w&&r.parent.querySelector(".abcjs-midi-tempo").addEventListener("change",function(E){y(r.options.warpHandler,E,_,r.options.afterResume)})}return Kr=u,Kr}var Qr,cs;function Sl(){if(cs)return Qr;cs=1;var b=oo(),h=ka(),d=$e();function o(a,n,l,u,m){for(var y=new b,g=0;g<a.length;g++){var c=a[g],r=y.addTrack();if(y.setInstrument(r,c.instrument),g===0&&n)for(var f=0;f<n.length;f++){var e=n[f];y.appendNote(r,e.pitch,1/64,e.volume,e.cents)}y.appendNote(r,c.pitch,c.duration,c.volume,c.cents)}var p=d();return p.state==="suspended"?p.resume().then(function(){return t(y,l,u,m)}):t(y,l,u,m)}function t(a,n,l,u){var m=new h;return m.init({sequence:a,millisecondsPerMeasure:n,options:{soundFontUrl:l},debugCallback:u}).then(function(){return m.prime()}).then(function(){return m.start(),Promise.resolve()})}return Qr=o,Qr}var Jr,ls;function lo(){if(ls)return Jr;ls=1;var b=co(),h=ka(),d=da(),o=$e();function t(){var a=this;a.warp=100,a.cursorControl=null,a.visualObj=null,a.timer=null,a.midiBuffer=null,a.options=null,a.currentTempo=null,a.control=null,a.isLooping=!1,a.isStarted=!1,a.isLoaded=!1,a.isLoading=!1,a.load=function(l,u,m){m||(m={}),m.displayPlay===void 0&&(m.displayPlay=!0),m.displayProgress===void 0&&(m.displayProgress=!0),a.control=new b(l,{loopHandler:m.displayLoop?a.toggleLoop:void 0,restartHandler:m.displayRestart?a.restart:void 0,playPromiseHandler:m.displayPlay?a.play:void 0,progressHandler:m.displayProgress?a.randomAccess:void 0,warpHandler:m.displayWarp?a.onWarp:void 0,afterResume:a.init}),a.cursorControl=u,a.disable(!0)},a.disable=function(l){a.control&&a.control.disable(l)},a.setTune=function(l,u,m){return a.visualObj=l,a.disable(!1),a.options=m||{},a.control&&(a.pause(),a.setProgress(0,1),a.control.resetAll(),a.restart(),a.isStarted=!1),a.isLooping=!1,u?a.go():Promise.resolve({status:"no-audio-context"})},a.go=function(){a.isLoading=!0;var l=a.visualObj.millisecondsPerMeasure()*100/a.warp;a.currentTempo=Math.round(a.visualObj.getBeatsPerMeasure()/l*6e4),a.control&&a.control.setTempo(a.currentTempo),a.percent=0;var u;return a.midiBuffer||(a.midiBuffer=new h),o().resume().then(function(m){return a.midiBuffer.init({visualObj:a.visualObj,options:a.options,millisecondsPerMeasure:l})}).then(function(m){return u=m,a.midiBuffer.prime()}).then(function(){var m=16;return a.cursorControl&&a.cursorControl.beatSubdivisions!==void 0&&parseInt(a.cursorControl.beatSubdivisions,10)>=1&&parseInt(a.cursorControl.beatSubdivisions,10)<=64&&(m=parseInt(a.cursorControl.beatSubdivisions,10)),a.timer=new d(a.visualObj,{beatCallback:a.beatCallback,eventCallback:a.eventCallback,lineEndCallback:a.lineEndCallback,qpm:a.currentTempo,extraMeasuresAtBeginning:a.cursorControl?a.cursorControl.extraMeasuresAtBeginning:void 0,lineEndAnticipation:a.cursorControl?a.cursorControl.lineEndAnticipation:0,beatSubdivisions:m}),a.cursorControl&&a.cursorControl.onReady&&typeof a.cursorControl.onReady=="function"&&a.cursorControl.onReady(a),a.isLoaded=!0,a.isLoading=!1,Promise.resolve({status:"created",notesStatus:u})})},a.destroy=function(){a.timer&&(a.timer.reset(),a.timer.stop(),a.timer=null),a.midiBuffer&&(a.midiBuffer.stop(),a.midiBuffer=null),a.setProgress(0,1),a.control&&a.control.resetAll()},a.play=function(){return a.runWhenReady(a._play,void 0)};function n(l){return new Promise(function(u){setTimeout(u,l)})}a.runWhenReady=function(l,u){return a.visualObj?a.isLoading?n(500).then(function(){return a.isLoading?a.runWhenReady(l,u):l(u)}):a.isLoaded?l(u):a.go().then(function(){return l(u)}):Promise.resolve({status:"loading"})},a._play=function(){return o().resume().then(function(){return a.isStarted=!a.isStarted,a.isStarted?(a.cursorControl&&a.cursorControl.onStart&&typeof a.cursorControl.onStart=="function"&&a.cursorControl.onStart(),a.midiBuffer.start(),a.timer.start(a.percent),a.control&&a.control.pushPlay(!0)):a.pause(),Promise.resolve({status:"ok"})})},a.pause=function(){a.timer&&(a.timer.pause(),a.midiBuffer.pause(),a.control&&a.control.pushPlay(!1))},a.toggleLoop=function(){a.isLooping=!a.isLooping,a.control&&a.control.pushLoop(a.isLooping)},a.restart=function(){a.timer&&(a.timer.setProgress(0),a.midiBuffer.seek(0))},a.randomAccess=function(l){return a.runWhenReady(a._randomAccess,l)},a._randomAccess=function(l){var u=l.target.classList.contains("abcjs-midi-progress-indicator")?l.target.parentNode:l.target,m=(l.x-u.getBoundingClientRect().left)/u.offsetWidth;return m<0&&(m=0),m>1&&(m=1),a.seek(m),Promise.resolve({status:"ok"})},a.seek=function(l,u){a.timer&&a.midiBuffer&&(a.timer.setProgress(l,u),a.midiBuffer.seek(l,u))},a.setWarp=function(l){if(parseInt(l,10)>0){a.warp=parseInt(l,10);var u=a.isStarted,m=a.percent;return a.destroy(),a.isStarted=!1,a.go().then(function(){return a.setProgress(m,a.midiBuffer.duration*1e3),a.control&&a.control.setWarp(a.currentTempo,a.warp),u?a.play().then(function(){return a.seek(m),Promise.resolve()}):(a.seek(m),Promise.resolve())})}return Promise.resolve()},a.onWarp=function(l){var u=l.target.value;return a.setWarp(u)},a.setProgress=function(l,u){a.percent=l,a.control&&a.control.setProgress(l,u)},a.finished=function(){if(a.timer.reset(),a.isLooping)return a.timer.start(0),a.midiBuffer.finished(),a.midiBuffer.start(),"continue";a.timer.stop(),a.isStarted&&(a.control&&a.control.pushPlay(!1),a.isStarted=!1,a.midiBuffer.finished(),a.cursorControl&&a.cursorControl.onFinished&&typeof a.cursorControl.onFinished=="function"&&a.cursorControl.onFinished(),a.setProgress(0,1))},a.beatCallback=function(l,u,m,y){var g=l/u;a.setProgress(g,m),a.cursorControl&&a.cursorControl.onBeat&&typeof a.cursorControl.onBeat=="function"&&a.cursorControl.onBeat(l,u,m,y)},a.eventCallback=function(l){if(l)a.cursorControl&&a.cursorControl.onEvent&&typeof a.cursorControl.onEvent=="function"&&a.cursorControl.onEvent(l);else return a.finished()},a.lineEndCallback=function(l,u){a.cursorControl&&a.cursorControl.onLineEnd&&typeof a.cursorControl.onLineEnd=="function"&&a.cursorControl.onLineEnd(l,u)},a.getUrl=function(){return a.midiBuffer.download()},a.download=function(l){var u=a.getUrl(),m=document.createElement("a");document.body.appendChild(m),m.setAttribute("style","display: none;"),m.href=u,m.download=l||"output.wav",m.click(),window.URL.revokeObjectURL(u),document.body.removeChild(m)}}return Jr=t,Jr}var Zr,fs;function fo(){if(fs)return Zr;fs=1;var b=so(),h;return function(){function d(c,r){for(var f in r)r.hasOwnProperty(f)&&c.setAttribute(f,r[f]);return c}function o(){this.trackstrings="",this.trackcount=0,this.noteOnAndChannel="%90",this.noteOffAndChannel="%80"}o.prototype.setTempo=function(c){this.trackcount===0&&(this.startTrack(),this.track+="%00%FF%51%03"+m(Math.round(6e7/c),6),this.endTrack())},o.prototype.setGlobalInfo=function(c,r,f,e){if(this.trackcount===0){this.startTrack();var p=Math.round(6e7/c);this.track+="%00%FF%51%03"+m(p,6),f&&(this.track+=n(f)),e&&(this.track+=l(e)),r&&(this.track+=a(r,"%01")),this.endTrack()}},o.prototype.startTrack=function(){this.noteWarped={},this.track="",this.trackName="",this.trackInstrument="",this.silencelength=0,this.trackcount++,this.instrument&&this.setInstrument(this.instrument)},o.prototype.endTrack=function(){this.track=this.trackName+this.trackInstrument+this.track;var c=m(this.track.length/3+4,8);this.track="MTrk"+c+this.track+"%00%FF%2F%00",this.trackstrings+=this.track},o.prototype.setText=function(c,r){switch(c){case"name":this.trackName=a(r,"%03");break}},o.prototype.setInstrument=function(c){this.trackInstrument="%00%C0"+m(c,2),this.instrument=c},o.prototype.setChannel=function(c,r){this.channel=c;var f="%00%B"+this.channel.toString(16);this.track+=f+"%79%00",this.track+=f+"%40%00",this.track+=f+"%5B%30",r||(r=0),r=Math.round((r+1)*64),this.track+=f+"%0A"+m(r,2),this.track+=f+"%07%64",this.noteOnAndChannel="%9"+this.channel.toString(16),this.noteOffAndChannel="%8"+this.channel.toString(16)};var t=4096;o.prototype.startNote=function(c,r,f){if(this.track+=g(this.silencelength),this.silencelength=0,f){this.track+="%e"+this.channel.toString(16);var e=Math.round(b(f)*t);this.track+=y(8192+e),this.track+=g(0),this.noteWarped[c]=!0}this.track+=this.noteOnAndChannel,this.track+="%"+c.toString(16)+m(r,2)},o.prototype.endNote=function(c){this.track+=g(this.silencelength),this.silencelength=0,this.noteWarped[c]&&(this.track+="%e"+this.channel.toString(16),this.track+=y(8192),this.track+=g(0),this.noteWarped[c]=!1),this.track+=this.noteOffAndChannel,this.track+="%"+c.toString(16)+"%00"},o.prototype.addRest=function(c){this.silencelength+=c,this.silencelength<0&&(this.silencelength=0)},o.prototype.getData=function(){return"data:audio/midi,MThd%00%00%00%06%00%01"+m(this.trackcount,4)+"%01%e0"+this.trackstrings},o.prototype.embed=function(c,r){var f=this.getData(),e=d(document.createElement("a"),{href:f});if(e.innerHTML="download midi",c.insertBefore(e,c.firstChild),!r){var p=d(document.createElement("embed"),{src:f,type:"video/quicktime",controller:"true",autoplay:"false",loop:"false",enablejavascript:"true",style:"display:block; height: 20px;"});c.insertBefore(p,c.firstChild)}};function a(c,r){for(var f="",e=0;e<c.length;e++)f+=m(c.charCodeAt(e),2);return"%00%FF"+r+m(f.length/3,2)+f}function n(c){if(!c||!c.accidentals)return"";for(var r="%00%FF%59%02",f=0,e=256,p=0;p<c.accidentals.length;p++)c.accidentals[p].acc==="sharp"?f++:c.accidentals[p].acc==="flat"&&e--;var x=m(e!==256?e:f,2),w=c.mode==="m"?"%01":"%00";return r+x+w}function l(c){var r="%00%FF%58%04"+m(c.num,2),f={1:0,2:1,4:2,8:3,16:4,32:5},e=f[c.den];if(!e)return"";r+=m(e,2);var p;switch(c.num+"/"+c.den){case"2/4":case"3/4":case"4/4":case"5/4":p=24;break;case"6/4":p=72;break;case"2/2":case"3/2":case"4/2":p=48;break;case"3/8":case"6/8":case"9/8":case"12/8":p=36;break}return p?(r+=m(p,2),r+"%08"):""}function u(c){for(var r="",f=0;f<c.length;f+=2)r+="%",r+=c.substr(f,2);return r}function m(c,r){var f=c.toString(16);for(f=f.split(".")[0];f.length<r;)f="0"+f;return f.length>r&&(f=f.substring(0,r)),u(f)}function y(c){c=Math.round(c);var r=c%128,f=c-r;return m(f*2+r,4)}function g(c){var r=0,f=[];for(c=Math.round(c);c!==0;)f.push(c&127),c=c>>7;for(var e=f.length-1;e>=0;e--){r=r<<8;var p=f[e];e!==0&&(p=p|128),r=r|p}var x=r.toString(16).length;return x+=x%2,m(r,x)}h=function(){return new o}}(),Zr=h,Zr}var ea,hs;function El(){if(hs)return ea;hs=1;var b=fo(),h;return function(){var d=1920;h=function(a,n){n===void 0&&(n={});var l=a.setUpAudio(n),u=b(),m=a.metaText?a.metaText.title:void 0;m&&m.length>128&&(m=m.substring(0,124)+"...");var y=a.getKeySignature(),g=a.getMeterFraction(),c=l.tempo,r=c/60;if(g.den==8){var f=a.millisecondsPerMeasure();c=6e4/(f/g.num)/2,r=c/60}u.setGlobalInfo(c,m,y,g);for(var e=0;e<l.tracks.length;e++){u.startTrack();for(var p={},x=0;x<l.tracks[e].length;x++){var w=l.tracks[e][x];switch(w.cmd){case"text":u.setText(w.type,w.text);break;case"program":var _=0;n.pan&&n.pan.length>e&&(_=n.pan[e]),w.instrument===128?(u.setChannel(9,_),u.setInstrument(0)):(u.setChannel(w.channel,_),u.setInstrument(w.instrument));break;case"note":var E=w.gap*r,N=w.start,I=N+w.duration-E;p[N]||(p[N]=[]),p[N].push({pitch:w.pitch,volume:w.volume,cents:w.cents}),p[I]||(p[I]=[]),p[I].push({pitch:w.pitch,volume:0});break;default:console.log("MIDI create Unknown: "+w.cmd)}}o(u,p,d),u.endTrack()}return u.getData()};function o(t,a,n){for(var l=Object.keys(a),u=0;u<l.length;u++)l[u]=parseFloat(l[u]);l.sort(function(e,p){return e-p});for(var m=0,y=0;y<l.length;y++){var g=a[l[y]];if(l[y]>m){var c=(l[y]-m)*n;t.addRest(c),m=l[y]}for(var r=0;r<g.length;r++){var f=g[r];f.volume?t.startNote(f.pitch,f.volume,f.cents):t.endNote(f.pitch)}}}}(),ea=h,ea}var ta,us;function Al(){if(us)return ta;us=1;var b=gt(),h=El(),d=function(a,n){var l={};if(n)for(var u in n)n.hasOwnProperty(u)&&(l[u]=n[u]);l.generateInline=!1;function m(y,g,c){var r=h(g,l);switch(l.midiOutputType){case"encoded":return r;case"binary":var f=r.replace("data:audio/midi,","");f=f.replace(/MThd/g,"%4d%54%68%64"),f=f.replace(/MTrk/g,"%4d%54%72%6b");for(var e=new ArrayBuffer(f.length/3),p=new Uint8Array(e),x=0;x<f.length/3;x++){var w=x*3+1,_=parseInt(f.substring(w,w+2),16);p[x]=_}return p;case"link":default:return t(g,l,r,c)}}return typeof a=="string"?b.renderEngine(m,"*",a,l):m(null,a,0)};function o(a){var n={};return a&&n.toString.call(a)==="[object Function]"}var t=function(a,n,l,u){var m=["abcjs-download-midi","abcjs-midi-"+u];n.downloadClass&&m.push(n.downloadClass);var y='<div class="'+m.join(" ")+'">';n.preTextDownload&&(y+=n.preTextDownload);var g=a.metaText&&a.metaText.title?a.metaText.title:"Untitled",c;n.downloadLabel&&o(n.downloadLabel)?c=n.downloadLabel(a,u):n.downloadLabel?c=n.downloadLabel.replace(/%T/,g):c='Download MIDI for "'+g+'"',g=g.toLowerCase().replace(/'/g,"").replace(/\W/g,"_").replace(/__/g,"_");var r=n.fileName?n.fileName:g+".midi";return y+='<a download="'+r+'" href="'+l+'">'+c+"</a>",n.postTextDownload&&(y+=n.postTextDownload),y+"</div>"};return ta=d,ta}var ra,ds;function ho(){if(ds)return ra;ds=1;try{if(typeof window.CustomEvent!="function"){var b=function(d,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(d,o.bubbles,o.cancelable,o.detail),t};b.prototype=window.Event.prototype,window.CustomEvent=b}}catch{}var h=function(d){typeof d=="string"?this.textarea=document.getElementById(d):this.textarea=d,this.initialText=this.textarea.value,this.isDragging=!1};return h.prototype.addSelectionListener=function(d){this.textarea.onmousemove=function(o){this.isDragging&&d.fireSelectionChanged()}},h.prototype.addChangeListener=function(d){this.changelistener=d,this.textarea.onkeyup=function(){d.fireChanged()},this.textarea.onmousedown=function(){this.isDragging=!0,d.fireSelectionChanged()},this.textarea.onmouseup=function(){this.isDragging=!1,d.fireChanged()},this.textarea.onchange=function(){d.fireChanged()}},h.prototype.getSelection=function(){return{start:this.textarea.selectionStart,end:this.textarea.selectionEnd}},h.prototype.setSelection=function(d,o){if(this.textarea.setSelectionRange)this.textarea.setSelectionRange(d,o);else if(this.textarea.createTextRange){var t=this.textarea.createTextRange();t.collapse(!0),t.moveEnd("character",o),t.moveStart("character",d),t.select()}this.textarea.focus()},h.prototype.getString=function(){return this.textarea.value},h.prototype.setString=function(d){this.textarea.value=d,this.initialText=this.getString(),this.changelistener&&this.changelistener.fireChanged()},h.prototype.getElem=function(){return this.textarea},ra=h,ra}var aa,ps;function Ml(){if(ps)return aa;ps=1;var b=Oe(),h=lo(),d=mt(),o=io(),t=ho();function a(l){var u={},m;if(l.abcjsParams)for(m in l.abcjsParams)l.abcjsParams.hasOwnProperty(m)&&(u[m]=l.abcjsParams[m]);if(l.midi_options)for(m in l.midi_options)l.midi_options.hasOwnProperty(m)&&(u[m]=l.midi_options[m]);if(l.parser_options)for(m in l.parser_options)l.parser_options.hasOwnProperty(m)&&(u[m]=l.parser_options[m]);if(l.render_options)for(m in l.render_options)l.render_options.hasOwnProperty(m)&&(u[m]=l.render_options[m]);return u.tablature&&l.warnings_id&&(u.tablature.warnings_id=l.warnings_id),u}var n=function(l,u){this.abcjsParams=a(u),u.indicate_changed&&(this.indicate_changed=!0),typeof l=="string"?this.editarea=new t(l):this.editarea=l,this.editarea.addSelectionListener(this),this.editarea.addChangeListener(this),u.canvas_id?this.div=u.canvas_id:u.paper_id?this.div=u.paper_id:(this.div=document.createElement("DIV"),this.editarea.getElem().parentNode.insertBefore(this.div,this.editarea.getElem())),typeof this.div=="string"&&(this.div=document.getElementById(this.div)),u.selectionChangeCallback&&(this.selectionChangeCallback=u.selectionChangeCallback),this.clientClickListener=this.abcjsParams.clickListener,this.abcjsParams.clickListener=this.highlight.bind(this),u.synth&&d()&&(this.synth={el:u.synth.el,cursorControl:u.synth.cursorControl,options:u.synth.options}),u.generate_midi&&(this.generate_midi=u.generate_midi,this.abcjsParams.generateDownload&&(typeof u.midi_download_id=="string"?this.downloadMidi=document.getElementById(u.midi_download_id):u.midi_download_id&&(this.downloadMidi=u.midi_download_id)),this.abcjsParams.generateInline!==!1&&(typeof u.midi_id=="string"?this.inlineMidi=document.getElementById(u.midi_id):u.midi_id&&(this.inlineMidi=u.midi_id))),u.warnings_id?typeof u.warnings_id=="string"?this.warningsdiv=document.getElementById(u.warnings_id):this.warningsdiv=u.warnings_id:u.generate_warnings&&(this.warningsdiv=document.createElement("div"),this.div.parentNode.insertBefore(this.warningsdiv,this.div)),this.onchangeCallback=u.onchange,this.currentAbc="",this.tunes=[],this.bReentry=!1,this.parseABC(),this.modelChanged(),this.addClassName=function(m,y){var g=function(c,r){var f=c.className;return f.length>0&&(f===r||new RegExp("(^|\\s)"+r+"(\\s|$)").test(f))};return g(m,y)||(m.className+=(m.className?" ":"")+y),m},this.removeClassName=function(m,y){return m.className=b.strip(m.className.replace(new RegExp("(^|\\s+)"+y+"(\\s+|$)")," ")),m},this.setReadOnly=function(m){var y="abc_textarea_readonly",g=this.editarea.getElem();m?(g.setAttribute("readonly","yes"),this.addClassName(g,y)):(g.removeAttribute("readonly"),this.removeClassName(g,y))}};return n.prototype.redrawMidi=function(){if(this.generate_midi&&!this.midiPause){var l=new window.CustomEvent("generateMidi",{detail:{tunes:this.tunes,abcjsParams:this.abcjsParams,downloadMidiEl:this.downloadMidi,inlineMidiEl:this.inlineMidi,engravingEl:this.div}});window.dispatchEvent(l)}if(this.synth){var u=this.synth.synthControl;this.synth.synthControl||(this.synth.synthControl=new h,this.synth.synthControl.load(this.synth.el,this.synth.cursorControl,this.synth.options)),this.synth.synthControl.setTune(this.tunes[0],u,this.synth.options)}},n.prototype.modelChanged=function(){if(!this.bReentry){this.bReentry=!0;try{this.timerId=null,this.synth&&this.synth.synthControl&&this.synth.synthControl.disable(!0),this.tunes=o(this.div,this.currentAbc,this.abcjsParams),this.tunes.length>0&&(this.warnings=this.tunes[0].warnings),this.redrawMidi()}catch(l){console.error("ABCJS error: ",l),this.warnings||(this.warnings=[]),this.warnings.push(l.message)}this.warningsdiv&&(this.warningsdiv.innerHTML=this.warnings?this.warnings.join("<br />"):"No errors"),this.updateSelection(),this.bReentry=!1}},n.prototype.paramChanged=function(l){if(l)for(var u in l)l.hasOwnProperty(u)&&(this.abcjsParams[u]=l[u]);this.currentAbc="",this.fireChanged()},n.prototype.synthParamChanged=function(l){if(this.synth){if(this.synth.options={},l)for(var u in l)l.hasOwnProperty(u)&&(this.synth.options[u]=l[u]);this.currentAbc="",this.fireChanged()}},n.prototype.parseABC=function(){var l=this.editarea.getString();return l===this.currentAbc?(this.updateSelection(),!1):(this.currentAbc=l,!0)},n.prototype.updateSelection=function(){var l=this.editarea.getSelection();try{this.tunes.length>0&&this.tunes[0].engraver&&this.tunes[0].engraver.rangeHighlight(l.start,l.end)}catch{}this.selectionChangeCallback&&this.selectionChangeCallback(l.start,l.end)},n.prototype.fireSelectionChanged=function(){this.updateSelection()},n.prototype.setDirtyStyle=function(l){if(this.indicate_changed!==void 0){var u=function(c,r){var f=function(e,p){var x=e.className;return x.length>0&&(x===p||new RegExp("(^|\\s)"+p+"(\\s|$)").test(x))};return f(c,r)||(c.className+=(c.className?" ":"")+r),c},m=function(c,r){return c.className=b.strip(c.className.replace(new RegExp("(^|\\s+)"+r+"(\\s+|$)")," ")),c},y="abc_textarea_dirty",g=this.editarea.getElem();l?u(g,y):m(g,y)}},n.prototype.fireChanged=function(){if(!this.bIsPaused&&this.parseABC()){var l=this;this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){l.modelChanged()},300);var u=this.isDirty();this.wasDirty!==u&&(this.wasDirty=u,this.setDirtyStyle(u)),this.onchangeCallback&&this.onchangeCallback(this)}},n.prototype.setNotDirty=function(){this.editarea.initialText=this.editarea.getString(),this.wasDirty=!1,this.setDirtyStyle(!1)},n.prototype.isDirty=function(){return this.indicate_changed===void 0?!1:this.editarea.initialText!==this.editarea.getString()},n.prototype.highlight=function(l,u,m,y,g,c){this.editarea.setSelection(l.startChar,l.endChar),this.selectionChangeCallback&&this.selectionChangeCallback(l.startChar,l.endChar),this.clientClickListener&&this.clientClickListener(l,u,m,y,g,c)},n.prototype.pause=function(l){this.bIsPaused=l,l||this.fireChanged()},n.prototype.millisecondsPerMeasure=function(){return!this.synth||!this.synth.synthControl||!this.synth.synthControl.visualObj?0:this.synth.synthControl.visualObj.millisecondsPerMeasure()},n.prototype.pauseMidi=function(l){this.midiPause=l,l||this.redrawMidi()},aa=n,aa}var na,vs;function Nl(){if(vs)return na;vs=1;var b=jo(),h=$o(),d=gt(),o=Rs(),t=uc(),a={};a.signature="abcjs-basic v"+b,Object.keys(h).forEach(function(_){a[_]=h[_]}),Object.keys(d).forEach(function(_){a[_]=d[_]}),a.renderAbc=io(),a.tuneMetrics=gl(),a.TimingCallbacks=da();var n=Ge();a.setGlyph=n.setSymbol,a.strTranspose=t;var l=ka(),u=xa(),m=Ca(),y=oo(),g=co(),c=bt(),r=$e(),f=mt(),e=Sl(),p=lo(),x=Al(),w=fo();return a.synth={CreateSynth:l,instrumentIndexToName:u,pitchToNoteName:m,SynthController:p,SynthSequence:y,CreateSynthControl:g,registerAudioContext:c,activeAudioContext:r,supportsAudio:f,playEvent:e,getMidiFile:x,sequence:o,midiRenderer:w},a.Editor=Ml(),a.EditArea=ho(),na=a,na}var Bl=Nl();const ct=Xo(Bl);function ia(b,h,d,o,t){var a,n,l,u;(a=b==null?void 0:b.setAttribute)==null||a.call(b,"x1",h.toString()),(n=b==null?void 0:b.setAttribute)==null||n.call(b,"x2",d.toString()),(l=b==null?void 0:b.setAttribute)==null||l.call(b,"y1",o.toString()),(u=b==null?void 0:b.setAttribute)==null||u.call(b,"y2",t.toString())}class Ll{constructor(h){et(this,"staff");et(this,"lastSvg");et(this,"beatSubdivisions");this.staff=h,this.lastSvg=null}onStart(){this.staff.querySelectorAll("svg").forEach(d=>{if(!d.querySelector(".abcjs-cursor")){const o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("class","abcjs-cursor"),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","0"),o.setAttributeNS(null,"y2","0"),d.appendChild(o)}}),this.lastSvg=null}onEvent(h){var a;if(h.measureStart&&h.left===null)return;const d=this.staff.querySelectorAll("svg .highlight");for(let n=0;n<d.length;n++)d[n].classList.remove("highlight");for(let n=0;n<h.elements.length;n++){const l=h.elements[n];for(let u=0;u<l.length;u++)l[u].classList.add("highlight")}if(!((a=h.elements)!=null&&a[0].length))return;const o=h.elements[0][0].closest("svg");this.lastSvg===null?this.lastSvg=o:this.lastSvg.parentElement.offsetTop!==o.parentElement.offsetTop&&(ia(this.lastSvg.querySelector(".abcjs-cursor"),0,0,0,0),this.lastSvg=o);const t=o.querySelector(".abcjs-cursor");ia(t,h.left-2,h.left-2,h.top,h.top+h.height)}onFinished(){const h=this.staff.querySelectorAll("svg .highlight");for(let o=0;o<h.length;o++)h[o].classList.remove("highlight");const d=this.staff.querySelector("svg .abcjs-cursor");ia(d,0,0,0,0)}}const Pl=b=>`<div class="na-message"><p class="na-paragraph">${b}</p></div>`;class ql{constructor(h=document.body){et(this,"queue");this.queue=document.createElement("div"),this.queue.className="na-message-queue",h.append(this.queue)}async emit(h){const d=document.createElement("div");let o=2e3,t="",a={},n=h??"☘";if(typeof n!="string"&&(o=n.duration??2e3,t=`${n.primary??""}`,a=n.style??{},n=`${n.content??"☘"}`),d.innerHTML=Pl(n),t){const l=d.firstElementChild;l.dataset.primary=t,Object.entries(a).map(u=>l.style.setProperty(...u))}this.queue.appendChild(d),d.style.height=`${d.offsetHeight}px`,d.style.transition="opacity 1s, height 2s",await bs(o),d.style.opacity="0",d.style.height="0",await bs(2e3),this.queue.removeChild(d)}}const Dl=new ql,Fl=(...b)=>Dl.emit(...b);function gs(...b){const h=[...b];let d=h.pop();for(const o of h.reverse())d=o+(o.at(-1)==="/"?d:"/"+d);return d}function bs(b){return new Promise(h=>setTimeout(h,b))}function Ol(b){const h=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"][b.pitch%12],d=~~(b.pitch/12)-2;return`${h}${d}`}function Il(b){return`${b.root}${b.mode}`}async function ms(b){var h,d;return ct.synth.playEvent(b.midiPitches,void 0,1e3),Fl(((d=(h=b.midiPitches)==null?void 0:h.map)==null?void 0:d.call(h,o=>Ol(o)).join(" ").trim())||"⌒")}var Rl=Xe('<section class="na-layout overflow-x-hidden overflow-y-auto relative"><main class="na-layout-content overflow-unset! select-none"></main><footer class="na-layout-footer bottom-0 sticky">');const Hl=b=>{let h,d;const o=new ct.synth.CreateSynth;let t,a,n;ks(wo(b.ABCAccessor,async u=>{var m,y,g;(m=a==null?void 0:a.pause)==null||m.call(a),a=new ct.synth.SynthController,a.load(d,t??(t=new Ll(h)),{displayPlay:!0,displayProgress:!0}),n=ct.renderAbc(h,u,{scale:1,clickListener:(c,r,f,e,p,x)=>{x.type==="mouseup"&&(c.rest||ms(c))},viewportVertical:!0,responsive:"resize"});try{const c=(g=(y=n==null?void 0:n[0])==null?void 0:y.getKeySignature)==null?void 0:g.call(y);console.info(Il(c),c),await o.init({visualObj:n[0]}),await a.setTune(n[0],!1,{chordsOff:!0,onEnded:()=>{}})}catch(c){console.warn("Audio problem:",c)}}));function l(u){var m,y,g;if(document.activeElement==document.body&&u.key==="Enter"&&n[0].engraver.selected.length){const c=n[0].engraver.selected[0];c.type==="note"&&ms(c.abcelem),(g=(y=(m=c.elemset)==null?void 0:m[0])==null?void 0:y.scrollIntoView)==null||g.call(y,{behavior:"smooth",block:"center"})}}return window.addEventListener("keyup",l),_s(()=>window.removeEventListener("keyup",l)),(()=>{var u=Rl(),m=u.firstChild,y=m.nextSibling,g=h;typeof g=="function"?ca(g,m):h=m;var c=d;return typeof c=="function"?ca(c,y):d=y,u})()};var zl=Xe("<ul class=na-menu>"),Gl=Xe("<li>");const Yl=b=>{var h;return(h=b.match(/\/(.*?).abc$/))==null?void 0:h.at(-1)},[Wl,Ul]=Re("Air auf der G-Saite"),Vl=b=>He(Bs,{get when(){return b.files.length>0},get children(){var h=zl();return dt(h,He(Bo,{get each(){return b.files},children:d=>{const o=Yl(d.path),t=tt(()=>o===Wl());return(()=>{var a=Gl();return Ps(a,Ns({get classList(){return{"na-menu-item":!0,truncate:!0,"cursor-pointer":!t()}},get style(){return{order:o==="Air auf der G-Saite"?-1:1}}},()=>t()?{"data-selected":""}:{},{onClick:()=>{Ul(o),b.onclick(d)}}),!1),dt(a,o),a})()}})),h}}),Xl=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<path d="M6 11H42" stroke-linecap="butt"></path>
<path d="M22 24L42 24" stroke-linecap="butt"></path>
<path d="M6 37L42 37" stroke-linecap="butt"></path>
<path d="M8 20.8823L12.8185 24.0002L8 27.1181L8 20.8823Z" stroke-linecap="butt"></path>
</svg>`,jl=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<path d="M42 11H6" stroke-linecap="butt"></path>
<path d="M42 24L22 24" stroke-linecap="butt"></path>
<path d="M42 37L6 37" stroke-linecap="butt"></path>
<path d="M13.6593 26.912L8.84075 23.7941L13.6593 20.6762V26.912Z" stroke-linecap="butt"></path>
</svg>`,uo={"theme-button":"_theme-button_1hk73_1","menu-fold-button":"_menu-fold-button_1hk73_2"};var $l=Xe('<button title="menu fold toggle"data-round>');const Kl=b=>(()=>{var h=$l();return h.$$click=()=>b.collapsed[1](!b.collapsed[0]()),h.innerHTML=jl+Xl,We(()=>ua(h,`na-button ${uo["menu-fold-button"]}`)),h})();ha(["click"]);const Ql=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<path d="M39.979 29.2412C40.0886 28.897 39.7495 28.587 39.4053 28.6965C37.8741 29.1836 36.243 29.4465 34.5504 29.4465C25.7155 29.4465 18.5534 22.2844 18.5534 13.4495C18.5534 11.757 18.8162 10.1258 19.3033 8.59469C19.4128 8.25051 19.1028 7.9114 18.7586 8.02095C11.9396 10.1915 7 16.576 7 24.1143C7 33.44 14.56 41 23.8857 41C31.424 41 37.8086 36.0603 39.979 29.2412Z" stroke-linecap="butt"></path>
</svg>`,Jl=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<circle cx="24" cy="24" r="7" stroke-linecap="butt"></circle>
<rect x="23" y="7" width="2" height="2" stroke-linecap="butt"></rect>
<rect x="23" y="39" width="2" height="2" stroke-linecap="butt"></rect>
<rect x="41" y="23" width="2" height="2" transform="rotate(90 41 23)" stroke-linecap="butt"></rect>
<rect x="9" y="23" width="2" height="2" transform="rotate(90 9 23)" stroke-linecap="butt"></rect>
<rect x="36.7285" y="35.3135" width="2" height="2" transform="rotate(135 36.7285 35.3135)" stroke-linecap="butt"></rect>
<rect x="14.0996" y="12.6865" width="2" height="2" transform="rotate(135 14.0996 12.6865)" stroke-linecap="butt"></rect>
<rect x="12.6875" y="36.728" width="2" height="2" transform="rotate(-135 12.6875 36.728)" stroke-linecap="butt"></rect>
<rect x="35.3145" y="14.1006" width="2" height="2" transform="rotate(-135 35.3145 14.1006)" stroke-linecap="butt"></rect>
<rect x="23" y="7" width="2" height="2" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="23" y="39" width="2" height="2" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="41" y="23" width="2" height="2" transform="rotate(90 41 23)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="9" y="23" width="2" height="2" transform="rotate(90 9 23)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="36.7285" y="35.3135" width="2" height="2" transform="rotate(135 36.7285 35.3135)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="14.0996" y="12.6865" width="2" height="2" transform="rotate(135 14.0996 12.6865)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="12.6875" y="36.728" width="2" height="2" transform="rotate(-135 12.6875 36.728)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="35.3145" y="14.1006" width="2" height="2" transform="rotate(-135 35.3145 14.1006)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
</svg>`;var Zl=["dark","light"],ys=Zl;function e1(){const b=ys.at(ys.indexOf(window.theme)-1);b&&(document.documentElement.dataset.theme=b,localStorage.setItem("theme",b))}var t1=Xe('<button title="theme toggle"data-round>');const r1=()=>(()=>{var b=t1();return Ls(b,"click",e1,!0),b.innerHTML=Ql+Jl,We(()=>ua(b,`na-button ${uo["theme-button"]}`)),b})();ha(["click"]);const ws=a1;function a1(b,h,d){const{immediate:o=!0,once:t,parseFn:a,defaultValue:n,...l}=d??{},[u,m]=Re(typeof n=="function"?n():void 0),[y,g]=Re(),[c,r]=Re(encodeURI(b)),[f,e]=Re(0),[p,x]=Re(l),w=()=>{t&&f()>0||fetch(c(),p()).then(E=>{try{if(h=="blob")return E.blob();if(h=="json")return E.json();if(h=="text")return E.text()}catch(N){return Promise.reject(N)}}).then(E=>{if(h=="json"&&typeof a=="function"){m(a(E));return}m(E)}).catch(E=>{g(E)}).finally(()=>{e(E=>E+1)})},_=(E,N)=>{E&&r(encodeURI(E)),N&&x(N),w()};return xo(()=>{o&&w()}),[u,{error:y,refetch:_}]}var n1=Xe('<aside class="na-layout-aside na-watermark pt-1em">');const i1=()=>{const[b]=ws("https://ungh.cc/repos/holy-two/musicbox-papertape/files/main/","json",{parseFn(a){return a.files.filter(n=>new RegExp("^tapes/.*.abc$").test(n.path))},defaultValue(){return[]}}),[h,{refetch:d}]=ws(gs("https://ungh.cc/repos/holy-two/musicbox-papertape/files/main/","tapes/","Air auf der G-Saite.abc"),"json",{parseFn(a){return a.file.contents},defaultValue(){return""}}),o=a=>d(gs("https://ungh.cc/repos/holy-two/musicbox-papertape/files/main/",a.path)),t=Re(!0);return[(()=>{var a=n1();return Ps(a,Ns(()=>t[0]()?{"data-collapsed":""}:{}),!1),dt(a,He(Vl,{onclick:o,get files(){return b()}})),a})(),He(Bs,{get when(){return!!h()},get children(){return He(Hl,{ABCAccessor:h})}}),He(r1,{}),He(Kl,{collapsed:t})]},s1=document.getElementById("root");Ho(()=>He(i1,{}),s1);

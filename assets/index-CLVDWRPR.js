var go=Object.defineProperty;var bo=(p,l,h)=>l in p?go(p,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):p[l]=h;var Ze=(p,l,h)=>bo(p,typeof l!="symbol"?l+"":l,h);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function h(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=h(t);fetch(t.href,a)}})();const mo=!1,yo=(p,l)=>p===l,sa=Symbol("solid-proxy"),wo=typeof Proxy=="function",xo=Symbol("solid-track"),lt={equals:yo};let xs=Es;const He=1,ft=2,Cs={owned:null,cleanups:null,context:null,owner:null};var xe=null;let yt=null,Co=null,ye=null,_e=null,De=null,vt=0;function ot(p,l){const h=ye,s=xe,t=p.length===0,a=l===void 0?s:l,n=t?Cs:{owned:null,cleanups:null,context:a?a.context:null,owner:a},i=t?p:()=>p(()=>Ie(()=>et(n)));xe=n,ye=null;try{return rt(i,!0)}finally{ye=h,xe=s}}function qe(p,l){l=l?Object.assign({},lt,l):lt;const h={value:p,observers:null,observerSlots:null,comparator:l.equals||void 0},s=t=>(typeof t=="function"&&(t=t(h.value)),Ss(h,t));return[Ts.bind(h),s]}function Ye(p,l,h){const s=fa(p,l,!1,He);tt(s)}function ks(p,l,h){xs=Eo;const s=fa(p,l,!1,He);s.user=!0,De?De.push(s):tt(s)}function Xe(p,l,h){h=h?Object.assign({},lt,h):lt;const s=fa(p,l,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=h.equals||void 0,tt(s),Ts.bind(s)}function Ie(p){if(ye===null)return p();const l=ye;ye=null;try{return p()}finally{ye=l}}function ko(p,l,h){const s=Array.isArray(p);let t;return a=>{let n;if(s){n=Array(p.length);for(let f=0;f<p.length;f++)n[f]=p[f]()}else n=p();const i=Ie(()=>l(n,t,a));return t=n,i}}function _o(p){ks(()=>Ie(p))}function _s(p){return xe===null||(xe.cleanups===null?xe.cleanups=[p]:xe.cleanups.push(p)),p}const[h1,u1]=qe(!1);function Ts(){if(this.sources&&this.state)if(this.state===He)tt(this);else{const p=_e;_e=null,rt(()=>ut(this),!1),_e=p}if(ye){const p=this.observers?this.observers.length:0;ye.sources?(ye.sources.push(this),ye.sourceSlots.push(p)):(ye.sources=[this],ye.sourceSlots=[p]),this.observers?(this.observers.push(ye),this.observerSlots.push(ye.sources.length-1)):(this.observers=[ye],this.observerSlots=[ye.sources.length-1])}return this.value}function Ss(p,l,h){let s=p.value;return(!p.comparator||!p.comparator(s,l))&&(p.value=l,p.observers&&p.observers.length&&rt(()=>{for(let t=0;t<p.observers.length;t+=1){const a=p.observers[t],n=yt&&yt.running;n&&yt.disposed.has(a),(n?!a.tState:!a.state)&&(a.pure?_e.push(a):De.push(a),a.observers&&As(a)),n||(a.state=He)}if(_e.length>1e6)throw _e=[],new Error},!1)),l}function tt(p){if(!p.fn)return;et(p);const l=vt;To(p,p.value,l)}function To(p,l,h){let s;const t=xe,a=ye;ye=xe=p;try{s=p.fn(l)}catch(n){return p.pure&&(p.state=He,p.owned&&p.owned.forEach(et),p.owned=null),p.updatedAt=h+1,Ms(n)}finally{ye=a,xe=t}(!p.updatedAt||p.updatedAt<=h)&&(p.updatedAt!=null&&"observers"in p?Ss(p,s):p.value=s,p.updatedAt=h)}function fa(p,l,h,s=He,t){const a={fn:p,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:l,owner:xe,context:xe?xe.context:null,pure:h};return xe===null||xe!==Cs&&(xe.owned?xe.owned.push(a):xe.owned=[a]),a}function ht(p){if(p.state===0)return;if(p.state===ft)return ut(p);if(p.suspense&&Ie(p.suspense.inFallback))return p.suspense.effects.push(p);const l=[p];for(;(p=p.owner)&&(!p.updatedAt||p.updatedAt<vt);)p.state&&l.push(p);for(let h=l.length-1;h>=0;h--)if(p=l[h],p.state===He)tt(p);else if(p.state===ft){const s=_e;_e=null,rt(()=>ut(p,l[0]),!1),_e=s}}function rt(p,l){if(_e)return p();let h=!1;l||(_e=[]),De?h=!0:De=[],vt++;try{const s=p();return So(h),s}catch(s){h||(De=null),_e=null,Ms(s)}}function So(p){if(_e&&(Es(_e),_e=null),p)return;const l=De;De=null,l.length&&rt(()=>xs(l),!1)}function Es(p){for(let l=0;l<p.length;l++)ht(p[l])}function Eo(p){let l,h=0;for(l=0;l<p.length;l++){const s=p[l];s.user?p[h++]=s:ht(s)}for(l=0;l<h;l++)ht(p[l])}function ut(p,l){p.state=0;for(let h=0;h<p.sources.length;h+=1){const s=p.sources[h];if(s.sources){const t=s.state;t===He?s!==l&&(!s.updatedAt||s.updatedAt<vt)&&ht(s):t===ft&&ut(s,l)}}}function As(p){for(let l=0;l<p.observers.length;l+=1){const h=p.observers[l];h.state||(h.state=ft,h.pure?_e.push(h):De.push(h),h.observers&&As(h))}}function et(p){let l;if(p.sources)for(;p.sources.length;){const h=p.sources.pop(),s=p.sourceSlots.pop(),t=h.observers;if(t&&t.length){const a=t.pop(),n=h.observerSlots.pop();s<t.length&&(a.sourceSlots[n]=s,t[s]=a,h.observerSlots[s]=n)}}if(p.tOwned){for(l=p.tOwned.length-1;l>=0;l--)et(p.tOwned[l]);delete p.tOwned}if(p.owned){for(l=p.owned.length-1;l>=0;l--)et(p.owned[l]);p.owned=null}if(p.cleanups){for(l=p.cleanups.length-1;l>=0;l--)p.cleanups[l]();p.cleanups=null}p.state=0}function Ao(p){return p instanceof Error?p:new Error(typeof p=="string"?p:"Unknown error",{cause:p})}function Ms(p,l=xe){throw Ao(p)}const Mo=Symbol("fallback");function Ta(p){for(let l=0;l<p.length;l++)p[l]()}function Bo(p,l,h={}){let s=[],t=[],a=[],n=0,i=l.length>1?[]:null;return _s(()=>Ta(a)),()=>{let f=p()||[],v=f.length,g,d;return f[xo],Ie(()=>{let r,c,e,u,m,b,x,T,E;if(v===0)n!==0&&(Ta(a),a=[],s=[],t=[],n=0,i&&(i=[])),h.fallback&&(s=[Mo],t[0]=ot(D=>(a[0]=D,h.fallback())),n=1);else if(n===0){for(t=new Array(v),d=0;d<v;d++)s[d]=f[d],t[d]=ot(o);n=v}else{for(e=new Array(v),u=new Array(v),i&&(m=new Array(v)),b=0,x=Math.min(n,v);b<x&&s[b]===f[b];b++);for(x=n-1,T=v-1;x>=b&&T>=b&&s[x]===f[T];x--,T--)e[T]=t[x],u[T]=a[x],i&&(m[T]=i[x]);for(r=new Map,c=new Array(T+1),d=T;d>=b;d--)E=f[d],g=r.get(E),c[d]=g===void 0?-1:g,r.set(E,d);for(g=b;g<=x;g++)E=s[g],d=r.get(E),d!==void 0&&d!==-1?(e[d]=t[g],u[d]=a[g],i&&(m[d]=i[g]),d=c[d],r.set(E,d)):a[g]();for(d=b;d<v;d++)d in e?(t[d]=e[d],a[d]=u[d],i&&(i[d]=m[d],i[d](d))):t[d]=ot(o);t=t.slice(0,n=v),s=f.slice(0)}return t});function o(r){if(a[d]=r,i){const[c,e]=qe(d);return i[d]=e,l(f[d],c)}return l(f[d])}}}function Re(p,l){return Ie(()=>p(l||{}))}function st(){return!0}const No={get(p,l,h){return l===sa?h:p.get(l)},has(p,l){return l===sa?!0:p.has(l)},set:st,deleteProperty:st,getOwnPropertyDescriptor(p,l){return{configurable:!0,enumerable:!0,get(){return p.get(l)},set:st,deleteProperty:st}},ownKeys(p){return p.keys()}};function wt(p){return(p=typeof p=="function"?p():p)?p:{}}function Lo(){for(let p=0,l=this.length;p<l;++p){const h=this[p]();if(h!==void 0)return h}}function Bs(...p){let l=!1;for(let n=0;n<p.length;n++){const i=p[n];l=l||!!i&&sa in i,p[n]=typeof i=="function"?(l=!0,Xe(i)):i}if(wo&&l)return new Proxy({get(n){for(let i=p.length-1;i>=0;i--){const f=wt(p[i])[n];if(f!==void 0)return f}},has(n){for(let i=p.length-1;i>=0;i--)if(n in wt(p[i]))return!0;return!1},keys(){const n=[];for(let i=0;i<p.length;i++)n.push(...Object.keys(wt(p[i])));return[...new Set(n)]}},No);const h={},s=Object.create(null);for(let n=p.length-1;n>=0;n--){const i=p[n];if(!i)continue;const f=Object.getOwnPropertyNames(i);for(let v=f.length-1;v>=0;v--){const g=f[v];if(g==="__proto__"||g==="constructor")continue;const d=Object.getOwnPropertyDescriptor(i,g);if(!s[g])s[g]=d.get?{enumerable:!0,configurable:!0,get:Lo.bind(h[g]=[d.get.bind(i)])}:d.value!==void 0?d:void 0;else{const o=h[g];o&&(d.get?o.push(d.get.bind(i)):d.value!==void 0&&o.push(()=>d.value))}}}const t={},a=Object.keys(s);for(let n=a.length-1;n>=0;n--){const i=a[n],f=s[i];f&&f.get?Object.defineProperty(t,i,f):t[i]=f?f.value:void 0}return t}const Po=p=>`Stale read from <${p}>.`;function qo(p){const l="fallback"in p&&{fallback:()=>p.fallback};return Xe(Bo(()=>p.each,p.children,l||void 0))}function Ns(p){const l=p.keyed,h=Xe(()=>p.when,void 0,void 0),s=l?h:Xe(h,void 0,{equals:(t,a)=>!t==!a});return Xe(()=>{const t=s();if(t){const a=p.children;return typeof a=="function"&&a.length>0?Ie(()=>a(l?t:()=>{if(!Ie(s))throw Po("Show");return h()})):a}return p.fallback},void 0,void 0)}const Do=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Io=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Do]),Fo=new Set(["innerHTML","textContent","innerText","children"]),Oo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Ro=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Ho(p,l){const h=Ro[p];return typeof h=="object"?h[l]?h.$:void 0:h}const zo=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Go(p,l,h){let s=h.length,t=l.length,a=s,n=0,i=0,f=l[t-1].nextSibling,v=null;for(;n<t||i<a;){if(l[n]===h[i]){n++,i++;continue}for(;l[t-1]===h[a-1];)t--,a--;if(t===n){const g=a<s?i?h[i-1].nextSibling:h[a-i]:f;for(;i<a;)p.insertBefore(h[i++],g)}else if(a===i)for(;n<t;)(!v||!v.has(l[n]))&&l[n].remove(),n++;else if(l[n]===h[a-1]&&h[i]===l[t-1]){const g=l[--t].nextSibling;p.insertBefore(h[i++],l[n++].nextSibling),p.insertBefore(h[--a],g),l[t]=h[a]}else{if(!v){v=new Map;let d=i;for(;d<a;)v.set(h[d],d++)}const g=v.get(l[n]);if(g!=null)if(i<g&&g<a){let d=n,o=1,r;for(;++d<t&&d<a&&!((r=v.get(l[d]))==null||r!==g+o);)o++;if(o>g-i){const c=l[n];for(;i<g;)p.insertBefore(h[i++],c)}else p.replaceChild(h[i++],l[n++])}else n++;else l[n++].remove()}}}const Sa="_$DX_DELEGATE";function Yo(p,l,h,s={}){let t;return ot(a=>{t=a,l===document?p():dt(l,p(),l.firstChild?null:void 0,h)},s.owner),()=>{t(),l.textContent=""}}function je(p,l,h,s){let t;const a=()=>{const i=document.createElement("template");return i.innerHTML=p,i.content.firstChild},n=()=>(t||(t=a())).cloneNode(!0);return n.cloneNode=n,n}function ha(p,l=window.document){const h=l[Sa]||(l[Sa]=new Set);for(let s=0,t=p.length;s<t;s++){const a=p[s];h.has(a)||(h.add(a),l.addEventListener(a,jo))}}function oa(p,l,h){h==null?p.removeAttribute(l):p.setAttribute(l,h)}function Wo(p,l,h){h?p.setAttribute(l,""):p.removeAttribute(l)}function ua(p,l){l==null?p.removeAttribute("class"):p.className=l}function Ls(p,l,h,s){if(s)Array.isArray(h)?(p[`$$${l}`]=h[0],p[`$$${l}Data`]=h[1]):p[`$$${l}`]=h;else if(Array.isArray(h)){const t=h[0];p.addEventListener(l,h[0]=a=>t.call(p,h[1],a))}else p.addEventListener(l,h,typeof h!="function"&&h)}function Uo(p,l,h={}){const s=Object.keys(l||{}),t=Object.keys(h);let a,n;for(a=0,n=t.length;a<n;a++){const i=t[a];!i||i==="undefined"||l[i]||(Ea(p,i,!1),delete h[i])}for(a=0,n=s.length;a<n;a++){const i=s[a],f=!!l[i];!i||i==="undefined"||h[i]===f||!f||(Ea(p,i,!0),h[i]=f)}return h}function $o(p,l,h){if(!l)return h?oa(p,"style"):l;const s=p.style;if(typeof l=="string")return s.cssText=l;typeof h=="string"&&(s.cssText=h=void 0),h||(h={}),l||(l={});let t,a;for(a in h)l[a]==null&&s.removeProperty(a),delete h[a];for(a in l)t=l[a],t!==h[a]&&(s.setProperty(a,t),h[a]=t);return h}function Ps(p,l={},h,s){const t={};return Ye(()=>typeof l.ref=="function"&&ca(l.ref,p)),Ye(()=>Vo(p,l,h,!0,t,!0)),t}function ca(p,l,h){return Ie(()=>p(l,h))}function dt(p,l,h,s){if(h!==void 0&&!s&&(s=[]),typeof l!="function")return pt(p,l,s,h);Ye(t=>pt(p,l(),t,h),s)}function Vo(p,l,h,s,t={},a=!1){l||(l={});for(const n in t)if(!(n in l)){if(n==="children")continue;t[n]=Aa(p,n,null,t[n],h,a,l)}for(const n in l){if(n==="children")continue;const i=l[n];t[n]=Aa(p,n,i,t[n],h,a,l)}}function Xo(p){return p.toLowerCase().replace(/-([a-z])/g,(l,h)=>h.toUpperCase())}function Ea(p,l,h){const s=l.trim().split(/\s+/);for(let t=0,a=s.length;t<a;t++)p.classList.toggle(s[t],h)}function Aa(p,l,h,s,t,a,n){let i,f,v,g,d;if(l==="style")return $o(p,h,s);if(l==="classList")return Uo(p,h,s);if(h===s)return s;if(l==="ref")a||h(p);else if(l.slice(0,3)==="on:"){const o=l.slice(3);s&&p.removeEventListener(o,s,typeof s!="function"&&s),h&&p.addEventListener(o,h,typeof h!="function"&&h)}else if(l.slice(0,10)==="oncapture:"){const o=l.slice(10);s&&p.removeEventListener(o,s,!0),h&&p.addEventListener(o,h,!0)}else if(l.slice(0,2)==="on"){const o=l.slice(2).toLowerCase(),r=zo.has(o);if(!r&&s){const c=Array.isArray(s)?s[0]:s;p.removeEventListener(o,c)}(r||h)&&(Ls(p,o,h,r),r&&ha([o]))}else l.slice(0,5)==="attr:"?oa(p,l.slice(5),h):l.slice(0,5)==="bool:"?Wo(p,l.slice(5),h):(d=l.slice(0,5)==="prop:")||(v=Fo.has(l))||(g=Ho(l,p.tagName))||(f=Io.has(l))||(i=p.nodeName.includes("-")||"is"in n)?(d&&(l=l.slice(5),f=!0),l==="class"||l==="className"?ua(p,h):i&&!f&&!v?p[Xo(l)]=h:p[g||l]=h):oa(p,Oo[l]||l,h);return h}function jo(p){let l=p.target;const h=`$$${p.type}`,s=p.target,t=p.currentTarget,a=f=>Object.defineProperty(p,"target",{configurable:!0,value:f}),n=()=>{const f=l[h];if(f&&!l.disabled){const v=l[`${h}Data`];if(v!==void 0?f.call(l,v,p):f.call(l,p),p.cancelBubble)return}return l.host&&typeof l.host!="string"&&!l.host._$host&&l.contains(p.target)&&a(l.host),!0},i=()=>{for(;n()&&(l=l._$host||l.parentNode||l.host););};if(Object.defineProperty(p,"currentTarget",{configurable:!0,get(){return l||document}}),p.composedPath){const f=p.composedPath();a(f[0]);for(let v=0;v<f.length-2&&(l=f[v],!!n());v++){if(l._$host){l=l._$host,i();break}if(l.parentNode===t)break}}else i();a(s)}function pt(p,l,h,s,t){for(;typeof h=="function";)h=h();if(l===h)return h;const a=typeof l,n=s!==void 0;if(p=n&&h[0]&&h[0].parentNode||p,a==="string"||a==="number"){if(a==="number"&&(l=l.toString(),l===h))return h;if(n){let i=h[0];i&&i.nodeType===3?i.data!==l&&(i.data=l):i=document.createTextNode(l),h=Ve(p,h,s,i)}else h!==""&&typeof h=="string"?h=p.firstChild.data=l:h=p.textContent=l}else if(l==null||a==="boolean")h=Ve(p,h,s);else{if(a==="function")return Ye(()=>{let i=l();for(;typeof i=="function";)i=i();h=pt(p,i,h,s)}),()=>h;if(Array.isArray(l)){const i=[],f=h&&Array.isArray(h);if(la(i,l,h,t))return Ye(()=>h=pt(p,i,h,s,!0)),()=>h;if(i.length===0){if(h=Ve(p,h,s),n)return h}else f?h.length===0?Ma(p,i,s):Go(p,h,i):(h&&Ve(p),Ma(p,i));h=i}else if(l.nodeType){if(Array.isArray(h)){if(n)return h=Ve(p,h,s,l);Ve(p,h,null,l)}else h==null||h===""||!p.firstChild?p.appendChild(l):p.replaceChild(l,p.firstChild);h=l}}return h}function la(p,l,h,s){let t=!1;for(let a=0,n=l.length;a<n;a++){let i=l[a],f=h&&h[p.length],v;if(!(i==null||i===!0||i===!1))if((v=typeof i)=="object"&&i.nodeType)p.push(i);else if(Array.isArray(i))t=la(p,i,f)||t;else if(v==="function")if(s){for(;typeof i=="function";)i=i();t=la(p,Array.isArray(i)?i:[i],Array.isArray(f)?f:[f])||t}else p.push(i),t=!0;else{const g=String(i);f&&f.nodeType===3&&f.data===g?p.push(f):p.push(document.createTextNode(g))}}return t}function Ma(p,l,h=null){for(let s=0,t=l.length;s<t;s++)p.insertBefore(l[s],h)}function Ve(p,l,h,s){if(h===void 0)return p.textContent="";const t=s||document.createTextNode("");if(l.length){let a=!1;for(let n=l.length-1;n>=0;n--){const i=l[n];if(t!==i){const f=i.parentNode===p;!a&&!n?f?p.replaceChild(t,i):p.insertBefore(t,h):f&&i.remove()}else a=!0}}else p.insertBefore(t,h);return[t]}function Ko(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var xt,Ba;function Qo(){if(Ba)return xt;Ba=1;var p="6.5.2";return xt=p,xt}var Ct,Na;function da(){if(Na)return Ct;Na=1;var p=function(h,s){var t=this;if(s||(s={}),t.qpm=s.qpm?parseInt(s.qpm,10):null,!t.qpm){var a=h.metaText?h.metaText.tempo:null;t.qpm=h.getBpm(a)}t.extraMeasuresAtBeginning=s.extraMeasuresAtBeginning?parseInt(s.extraMeasuresAtBeginning,10):0,t.beatCallback=s.beatCallback,t.eventCallback=s.eventCallback,t.lineEndCallback=s.lineEndCallback,t.lineEndAnticipation=s.lineEndAnticipation?parseInt(s.lineEndAnticipation,10):0,t.beatSubdivisions=s.beatSubdivisions?parseInt(s.beatSubdivisions,10):1,t.joggerTimer=null,t.replaceTarget=function(i){t.noteTimings=i.setTiming(t.qpm,t.extraMeasuresAtBeginning),i.noteTimings.length===0&&(t.noteTimings=i.setTiming(0,0)),t.lineEndCallback&&(t.lineEndTimings=l(i.noteTimings,t.lineEndAnticipation)),t.startTime=null,t.currentBeat=0,t.currentEvent=0,t.currentLine=0,t.currentTime=0,t.isPaused=!1,t.isRunning=!1,t.pausedPercent=null,t.justUnpaused=!1,t.newSeekPercent=0,t.lastTimestamp=0,t.noteTimings.length!==0&&(t.millisecondsPerBeat=1e3/(t.qpm/60)/t.beatSubdivisions,t.lastMoment=t.noteTimings[t.noteTimings.length-1].milliseconds,t.totalBeats=Math.round(t.lastMoment/t.millisecondsPerBeat))},t.replaceTarget(h),t.doTiming=function(i){if(t.lastTimestamp!==i&&(t.lastTimestamp=i,t.startTime||(t.startTime=i),!t.isPaused&&t.isRunning)){for(t.currentTime=i-t.startTime,t.currentTime+=16;t.noteTimings.length>t.currentEvent&&t.noteTimings[t.currentEvent].milliseconds<t.currentTime;){if(t.eventCallback&&t.noteTimings[t.currentEvent].type==="event"){var f=t.startTime;t.eventCallback(t.noteTimings[t.currentEvent]),f!==t.startTime&&(t.currentTime=i-t.startTime)}t.currentEvent++}if(t.lineEndCallback&&t.lineEndTimings.length>t.currentLine&&t.lineEndTimings[t.currentLine].milliseconds<t.currentTime&&t.currentEvent<t.noteTimings.length){var v=t.noteTimings[t.currentEvent].milliseconds===t.currentTime?t.noteTimings[t.currentEvent]:t.noteTimings[t.currentEvent-1];t.lineEndCallback(t.lineEndTimings[t.currentLine],v,{line:t.currentLine,endTimings:t.lineEndTimings,currentTime:t.currentTime}),t.currentLine++}if(t.currentTime<t.lastMoment){if(requestAnimationFrame(t.doTiming),t.currentBeat*t.millisecondsPerBeat<t.currentTime){var g=t.doBeatCallback(i);g!==null&&(t.currentTime=g)}}else if(t.currentBeat<=t.totalBeats&&t.beatCallback){var d=t.doBeatCallback(i);d!==null&&(t.currentTime=d),requestAnimationFrame(t.doTiming)}if(t.currentTime>=t.lastMoment)if(t.eventCallback){var o=t.eventCallback(null);t.shouldStop(o).then(function(r){r&&t.stop()})}else t.stop()}},t.shouldStop=function(i){return new Promise(function(f){if(!i)return f(!0);if(i==="continue")return f(!1);i.then&&i.then(function(v){f(v!=="continue")})})},t.doBeatCallback=function(i){if(t.beatCallback){for(var f=t.currentEvent;f<t.noteTimings.length&&t.noteTimings[f].left===null;)f++;var v,g;if(f<t.noteTimings.length){for(v=t.noteTimings[f].milliseconds,f=Math.max(0,t.currentEvent-1);f>=0&&t.noteTimings[f].left===null;)f--;g=t.noteTimings[f]}var d={},o={};if(g){d.top=g.top,d.height=g.height;var r=Math.max(0,i-t.startTime-g.milliseconds),c=v-g.milliseconds,e=g.endX-g.left,u=c?r*e/c:0;d.left=g.left+u,t.currentEvent===0&&g.milliseconds>i-t.startTime&&(d.left=void 0),o={timestamp:i,startTime:t.startTime,ev:g,endMs:v,offMs:r,offPx:u,gapMs:c,gapPx:e}}else o={timestamp:i,startTime:t.startTime};var m=t.startTime;if(t.beatCallback(t.currentBeat/t.beatSubdivisions,t.totalBeats/t.beatSubdivisions,t.lastMoment,d,o),m!==t.startTime)return i-t.startTime;t.currentBeat++}return null};var n=60;t.animationJogger=function(){t.isRunning&&(t.doTiming(performance.now()),t.joggerTimer=setTimeout(t.animationJogger,n))},t.start=function(i,f){if(t.isRunning=!0,t.isPaused&&(t.isPaused=!1,i===void 0&&(t.justUnpaused=!0)),i)t.setProgress(i,f);else if(i===0)t.reset();else if(t.pausedPercent!==null){var v=performance.now();t.currentTime=t.lastMoment*t.pausedPercent,t.startTime=v-t.currentTime,t.pausedPercent=null,t.reportNext=!0}requestAnimationFrame(t.doTiming),t.joggerTimer=setTimeout(t.animationJogger,n)},t.pause=function(){t.isPaused=!0;var i=performance.now();t.pausedPercent=(i-t.startTime)/t.lastMoment,t.isRunning=!1,t.joggerTimer&&(clearTimeout(t.joggerTimer),t.joggerTimer=null)},t.currentMillisecond=function(){return t.currentTime},t.reset=function(){t.currentBeat=0,t.currentEvent=0,t.currentLine=0,t.startTime=null,t.pausedPercent=null},t.stop=function(){t.pause(),t.reset()},t.setProgress=function(i,f){var v;switch(f){case"seconds":t.currentTime=i*1e3,t.currentTime<0&&(t.currentTime=0),t.currentTime>t.lastMoment&&(t.currentTime=t.lastMoment),v=t.currentTime/t.lastMoment;break;case"beats":t.currentTime=i*t.millisecondsPerBeat*t.beatSubdivisions,t.currentTime<0&&(t.currentTime=0),t.currentTime>t.lastMoment&&(t.currentTime=t.lastMoment),v=t.currentTime/t.lastMoment;break;default:v=i,v<0&&(v=0),v>1&&(v=1),t.currentTime=t.lastMoment*v;break}t.isRunning||(t.pausedPercent=v);var g=performance.now();for(t.startTime=g-t.currentTime,t.currentEvent,t.currentEvent=0;t.noteTimings.length>t.currentEvent&&t.noteTimings[t.currentEvent].milliseconds<t.currentTime;)t.currentEvent++;if(t.lineEndCallback)for(t.currentLine=0;t.lineEndTimings.length>t.currentLine&&t.lineEndTimings[t.currentLine].milliseconds+t.lineEndAnticipation<t.currentTime;)t.currentLine++;var d=t.currentBeat;t.currentBeat=Math.floor(t.currentTime/t.millisecondsPerBeat),t.beatCallback&&d!==t.currentBeat&&t.doBeatCallback(t.startTime+t.currentTime),t.eventCallback&&t.currentEvent>=0&&t.noteTimings[t.currentEvent].type==="event"&&t.eventCallback(t.noteTimings[t.currentEvent]),t.lineEndCallback&&t.lineEndCallback(t.lineEndTimings[t.currentLine],t.noteTimings[t.currentEvent],{line:t.currentLine,endTimings:t.lineEndTimings}),t.joggerTimer=setTimeout(t.animationJogger,n)}};function l(h,s){for(var t=[],a=null,n=0;n<h.length;n++){var i=h[n];i.type!=="end"&&i.top!==a&&(t.push({measureNumber:i.measureNumber,milliseconds:i.milliseconds-s,top:i.top,bottom:i.top+i.height}),a=i.top)}return t}return Ct=p,Ct}var kt,La;function Jo(){if(La)return kt;La=1;var p=da(),l={};return(function(){var h,s;l.startAnimation=function(t,a,n){h&&(h.stop(),h=void 0),n.showCursor&&(s=t.querySelector(".abcjs-cursor"),s||(s=document.createElement("DIV"),s.className="abcjs-cursor cursor",s.style.position="absolute",t.appendChild(s),t.style.position="relative"));function i(c){for(var e=0;e<c.length;e++){var u=c[e];u.classList.contains("abcjs-bar")||(u.style.display="none")}}var f;function v(c){if(f){var e=t.querySelectorAll(f);i(e)}f=c}function g(c){var e=t.querySelectorAll(c);i(e)}function d(c){n.hideCurrentMeasure?g(c):n.hideFinishedMeasures&&v(c)}function o(c){return".abcjs-l"+c.line+".abcjs-m"+c.measureNumber}function r(c){if(c){if(c.measureStart){var e=o(c);e&&d(e)}s&&(s.style.left=c.left+"px",s.style.top=c.top+"px",s.style.width=c.width+"px",s.style.height=c.height+"px")}else h.stop(),h=void 0}h=new p(a,{qpm:n.bpm,eventCallback:r}),h.start()},l.pauseAnimation=function(t){h&&(t?h.pause():h.start())},l.stopAnimation=function(){h&&(h.stop(),h=void 0)}})(),kt=l,kt}var _t,Pa;function Fe(){if(Pa)return _t;Pa=1;var p={};return p.cloneArray=function(l){for(var h=[],s=0;s<l.length;s++)h.push(Object.assign({},l[s]));return h},p.cloneHashOfHash=function(l){var h={};for(var s in l)l.hasOwnProperty(s)&&(h[s]=Object.assign({},l[s]));return h},p.cloneHashOfArrayOfHash=function(l){var h={};for(var s in l)l.hasOwnProperty(s)&&(h[s]=p.cloneArray(l[s]));return h},p.strip=function(l){return l.replace(/^\s+/,"").replace(/\s+$/,"")},p.startsWith=function(l,h){return l.indexOf(h)===0},p.endsWith=function(l,h){var s=l.length-h.length;return s>=0&&l.lastIndexOf(h)===s},p.last=function(l){return l.length===0?null:l[l.length-1]},_t=p,_t}var Tt,qa;function pa(){if(qa)return Tt;qa=1;var p=Fe(),l={};return(function(){var h,s,t,a,n;l.initialize=function(w,C,k,q,R){h=w,s=C,t=k,a=q,n=R,i()};function i(){t.annotationfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},t.gchordfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},t.historyfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},t.infofont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},t.measurefont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},t.partsfont={face:'"Times New Roman"',size:15,weight:"normal",style:"normal",decoration:"none"},t.repeatfont={face:'"Times New Roman"',size:13,weight:"normal",style:"normal",decoration:"none"},t.textfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},t.tripletfont={face:"Times",size:11,weight:"normal",style:"italic",decoration:"none"},t.vocalfont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},t.wordsfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},a.formatting.composerfont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},a.formatting.subtitlefont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},a.formatting.tempofont={face:'"Times New Roman"',size:15,weight:"bold",style:"normal",decoration:"none"},a.formatting.titlefont={face:'"Times New Roman"',size:20,weight:"normal",style:"normal",decoration:"none"},a.formatting.footerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},a.formatting.headerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},a.formatting.voicefont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},a.formatting.tablabelfont={face:'"Trebuchet MS"',size:16,weight:"normal",style:"normal",decoration:"none"},a.formatting.tabnumberfont={face:'"Arial"',size:11,weight:"normal",style:"normal",decoration:"none"},a.formatting.tabgracefont={face:'"Arial"',size:8,weight:"normal",style:"normal",decoration:"none"},a.formatting.annotationfont=t.annotationfont,a.formatting.gchordfont=t.gchordfont,a.formatting.historyfont=t.historyfont,a.formatting.infofont=t.infofont,a.formatting.measurefont=t.measurefont,a.formatting.partsfont=t.partsfont,a.formatting.repeatfont=t.repeatfont,a.formatting.textfont=t.textfont,a.formatting.tripletfont=t.tripletfont,a.formatting.vocalfont=t.vocalfont,a.formatting.wordsfont=t.wordsfont}var f={gchordfont:!0,measurefont:!0,partsfont:!0,annotationfont:!0,composerfont:!0,historyfont:!0,infofont:!0,subtitlefont:!0,textfont:!0,titlefont:!0,voicefont:!0},v=function(w){switch(w){case"Arial-Italic":return{face:"Arial",weight:"normal",style:"italic",decoration:"none"};case"Arial-Bold":return{face:"Arial",weight:"bold",style:"normal",decoration:"none"};case"Bookman-Demi":return{face:"Bookman,serif",weight:"bold",style:"normal",decoration:"none"};case"Bookman-DemiItalic":return{face:"Bookman,serif",weight:"bold",style:"italic",decoration:"none"};case"Bookman-Light":return{face:"Bookman,serif",weight:"normal",style:"normal",decoration:"none"};case"Bookman-LightItalic":return{face:"Bookman,serif",weight:"normal",style:"italic",decoration:"none"};case"Courier":return{face:'"Courier New"',weight:"normal",style:"normal",decoration:"none"};case"Courier-Oblique":return{face:'"Courier New"',weight:"normal",style:"italic",decoration:"none"};case"Courier-Bold":return{face:'"Courier New"',weight:"bold",style:"normal",decoration:"none"};case"Courier-BoldOblique":return{face:'"Courier New"',weight:"bold",style:"italic",decoration:"none"};case"AvantGarde-Book":return{face:"AvantGarde,Arial",weight:"normal",style:"normal",decoration:"none"};case"AvantGarde-BookOblique":return{face:"AvantGarde,Arial",weight:"normal",style:"italic",decoration:"none"};case"AvantGarde-Demi":case"Avant-Garde-Demi":return{face:"AvantGarde,Arial",weight:"bold",style:"normal",decoration:"none"};case"AvantGarde-DemiOblique":return{face:"AvantGarde,Arial",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Oblique":return{face:"Helvetica",weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Bold":return{face:"Helvetica",weight:"bold",style:"normal",decoration:"none"};case"Helvetica-BoldOblique":return{face:"Helvetica",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Narrow":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"normal",decoration:"none"};case"Helvetica-Narrow-Oblique":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Narrow-Bold":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"normal",decoration:"none"};case"Helvetica-Narrow-BoldOblique":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"italic",decoration:"none"};case"Palatino-Roman":return{face:"Palatino",weight:"normal",style:"normal",decoration:"none"};case"Palatino-Italic":return{face:"Palatino",weight:"normal",style:"italic",decoration:"none"};case"Palatino-Bold":return{face:"Palatino",weight:"bold",style:"normal",decoration:"none"};case"Palatino-BoldItalic":return{face:"Palatino",weight:"bold",style:"italic",decoration:"none"};case"NewCenturySchlbk-Roman":return{face:'"New Century",serif',weight:"normal",style:"normal",decoration:"none"};case"NewCenturySchlbk-Italic":return{face:'"New Century",serif',weight:"normal",style:"italic",decoration:"none"};case"NewCenturySchlbk-Bold":return{face:'"New Century",serif',weight:"bold",style:"normal",decoration:"none"};case"NewCenturySchlbk-BoldItalic":return{face:'"New Century",serif',weight:"bold",style:"italic",decoration:"none"};case"Times":case"Times-Roman":case"Times-Narrow":case"Times-Courier":case"Times-New-Roman":return{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none"};case"Times-Italic":case"Times-Italics":return{face:'"Times New Roman"',weight:"normal",style:"italic",decoration:"none"};case"Times-Bold":return{face:'"Times New Roman"',weight:"bold",style:"normal",decoration:"none"};case"Times-BoldItalic":return{face:'"Times New Roman"',weight:"bold",style:"italic",decoration:"none"};case"ZapfChancery-MediumItalic":return{face:'"Zapf Chancery",cursive,serif',weight:"normal",style:"normal",decoration:"none"};default:return null}},g=function(w,C,k,q,R){function z(){var ue=parseInt(w[0].token);return w.shift(),C?w.length===0?{face:C.face,weight:C.weight,style:C.style,decoration:C.decoration,size:ue}:w.length===1&&w[0].token==="box"&&f[R]?{face:C.face,weight:C.weight,style:C.style,decoration:C.decoration,size:ue,box:!0}:(s("Extra parameters in font definition.",k,q),{face:C.face,weight:C.weight,style:C.style,decoration:C.decoration,size:ue}):(s("Can't set just the size of the font since there is no default value.",k,q),{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none",size:ue})}if(w[0].token==="*"){if(w.shift(),w[0].type==="number")return z();s("Expected font size number after *.",k,q)}if(w[0].type==="number")return z();for(var H=[],X,Q="normal",U="normal",ee="none",te=!1,ne="face",V=!1;w.length;){var ae=w.shift(),K=ae.token.toLowerCase();switch(ne){case"face":V||K!=="utf"&&ae.type!=="number"&&K!=="bold"&&K!=="italic"&&K!=="underline"&&K!=="box"?H.length>0&&ae.token==="-"?(V=!0,H[H.length-1]=H[H.length-1]+ae.token):V?(V=!1,H[H.length-1]=H[H.length-1]+ae.token):H.push(ae.token):ae.type==="number"?(X?s("Font size specified twice in font definition.",k,q):X=ae.token,ne="modifier"):K==="bold"?Q="bold":K==="italic"?U="italic":K==="underline"?ee="underline":K==="box"?(f[R]?te=!0:s(`This font style doesn't support "box"`,k,q),ne="finished"):K==="utf"?(ae=w.shift(),ne="size"):s("Unknown parameter "+ae.token+" in font definition.",k,q);break;case"size":ae.type==="number"?X?s("Font size specified twice in font definition.",k,q):X=ae.token:s("Expected font size in font definition.",k,q),ne="modifier";break;case"modifier":K==="bold"?Q="bold":K==="italic"?U="italic":K==="underline"?ee="underline":K==="box"?(f[R]?te=!0:s(`This font style doesn't support "box"`,k,q),ne="finished"):s("Unknown parameter "+ae.token+" in font definition.",k,q);break;case"finished":s('Extra characters found after "box" in font definition.',k,q);break}}X===void 0?C?X=C.size:(s("Must specify the size of the font since there is no default value.",k,q),X=12):X=parseFloat(X),H=H.join(" "),H===""&&(C?H=C.face:(s("Must specify the name of the font since there is no default value.",k,q),H="sans-serif"));var se=v(H),ce={};return se?(ce.face=se.face,ce.weight=se.weight,ce.style=se.style,ce.decoration=se.decoration,ce.size=X,te&&(ce.box=!0),ce):(ce.face=H,ce.weight=Q,ce.style=U,ce.decoration=ee,ce.size=X,te&&(ce.box=!0),ce)},d=function(w,C,k){return C.length===0?'Directive "'+w+'" requires a font as a parameter.':(t[w]=g(C,t[w],k,0,w),t.is_in_header&&(a.formatting[w]=t[w]),null)},o=function(w,C,k){return C.length===0?'Directive "'+w+'" requires a font as a parameter.':(a.formatting[w]=g(C,a.formatting[w],k,0,w),null)},r=function(w,C){var k="";C.forEach(function(R){k+=R.token});var q=parseFloat(k);if(isNaN(q)||q===0)return'Directive "'+w+'" requires a number as a parameter.';a.formatting.scale=q},c=["acoustic-bass-drum","bass-drum-1","side-stick","acoustic-snare","hand-clap","electric-snare","low-floor-tom","closed-hi-hat","high-floor-tom","pedal-hi-hat","low-tom","open-hi-hat","low-mid-tom","hi-mid-tom","crash-cymbal-1","high-tom","ride-cymbal-1","chinese-cymbal","ride-bell","tambourine","splash-cymbal","cowbell","crash-cymbal-2","vibraslap","ride-cymbal-2","hi-bongo","low-bongo","mute-hi-conga","open-hi-conga","low-conga","high-timbale","low-timbale","high-agogo","low-agogo","cabasa","maracas","short-whistle","long-whistle","short-guiro","long-guiro","claves","hi-wood-block","low-wood-block","mute-cuica","open-cuica","mute-triangle","open-triangle"],e=function(w){var C=w.split(/\s+/);if(C.length!==2&&C.length!==3)return{error:'Expected parameters "abc-note", "drum-sound", and optionally "note-head"'};var k=C[0],q=parseInt(C[1],10);if((isNaN(q)||q<35||q>81)&&C[1]&&(q=c.indexOf(C[1].toLowerCase())+35),isNaN(q)||q<35||q>81)return{error:'Expected drum name, received "'+C[1]+'"'};var R={sound:q};return C.length===3&&(R.noteHead=C[2]),{key:k,value:R}},u=function(w,C){var k=h.getMeasurement(C);return k.used===0||C.length!==0?{error:'Directive "'+w+'" requires a measurement as a parameter.'}:k.value},m=function(w,C){var k=h.getMeasurement(C);return k.used===0||C.length!==0?'Directive "'+w+'" requires a measurement as a parameter.':(a.formatting[w]=k.value,null)},b=function(w,C,k,q,R){if(k.length!==1||k[0].type!=="number")return'Directive "'+C+'" requires a number as a parameter.';var z=k[0].intt;return q!==void 0&&z<q?'Directive "'+C+'" requires a number greater than or equal to '+q+" as a parameter.":R!==void 0&&z>R?'Directive "'+C+'" requires a number less than or equal to '+R+" as a parameter.":(t[w]=z,null)},x=function(w,C,k){if(k.length===1&&(k[0].token==="true"||k[0].token==="false"))return t[w]=k[0].token==="true",null;var q=b(w,C,k,0,1);return q!==null?q:(t[w]=t[w]===1,null)},T=function(w,C,k,q){if(k.length!==1)return'Directive "'+C+'" requires one of [ '+q.join(", ")+" ] as a parameter.";for(var R=k[0].token,z=!1,H=0;!z&&H<q.length;H++)q[H]===R&&(z=!0);return z?(t[w]=R,null):'Directive "'+C+'" requires one of [ '+q.join(", ")+" ] as a parameter."},E=["nobarlines","barlines","beataccents","nobeataccents","droneon","droneoff","drumon","drumoff","fermatafixed","fermataproportional","gchordon","gchordoff","controlcombo","temperamentnormal","noportamento"],D=["gchord","ptstress","beatstring"],F=["bassvol","chordvol","c","channel","beatmod","deltaloudness","drumbars","gracedivider","makechordchannels","randomchordattack","chordattack","stressmodel","transpose","rtranspose","vol","volinc","gchordbars"],y=["program"],A=["ratio","snt","bendvelocity","pitchbend","control","temperamentlinear"],N=["beat"],M=["drone"],L=["portamento"],B=["expand","grace","trim"],S=["drum","chordname"],_=["bassprog","chordprog"],P=function(w,C,k){var q=w.shift().token,R=[];if(E.indexOf(q)>=0)w.length!==0&&s("Unexpected parameter in MIDI "+q,k,0);else if(D.indexOf(q)>=0)w.length!==1?s("Expected one parameter in MIDI "+q,k,0):R.push(w[0].token);else if(F.indexOf(q)>=0)w.length!==1?s("Expected one parameter in MIDI "+q,k,0):w[0].type!=="number"?s("Expected one integer parameter in MIDI "+q,k,0):R.push(w[0].intt);else if(y.indexOf(q)>=0)w.length!==1&&w.length!==2?s("Expected one or two parameters in MIDI "+q,k,0):w[0].type!=="number"||w.length===2&&w[1].type!=="number"?s("Expected integer parameter in MIDI "+q,k,0):(R.push(w[0].intt),w.length===2&&R.push(w[1].intt));else if(A.indexOf(q)>=0)w.length!==2?s("Expected two parameters in MIDI "+q,k,0):w[0].type!=="number"||w[1].type!=="number"?s("Expected two integer parameters in MIDI "+q,k,0):(R.push(w[0].intt),R.push(w[1].intt));else if(L.indexOf(q)>=0)w.length!==2?s("Expected two parameters in MIDI "+q,k,0):w[0].type!=="alpha"||w[1].type!=="number"?s("Expected one string and one integer parameters in MIDI "+q,k,0):(R.push(w[0].token),R.push(w[1].intt));else if(q==="drummap")w.length===2&&w[0].type==="alpha"&&w[1].type==="number"?(C.formatting||(C.formatting={}),C.formatting.midi||(C.formatting.midi={}),C.formatting.midi.drummap||(C.formatting.midi.drummap={}),C.formatting.midi.drummap[w[0].token]=w[1].intt,R=C.formatting.midi.drummap):w.length===3&&w[0].type==="punct"&&w[1].type==="alpha"&&w[2].type==="number"?(C.formatting||(C.formatting={}),C.formatting.midi||(C.formatting.midi={}),C.formatting.midi.drummap||(C.formatting.midi.drummap={}),C.formatting.midi.drummap[w[0].token+w[1].token]=w[2].intt,R=C.formatting.midi.drummap):s("Expected one note name and one integer parameter in MIDI "+q,k,0);else if(B.indexOf(q)>=0)w.length!==3||w[0].type!=="number"||w[1].token!=="/"||w[2].type!=="number"?s("Expected fraction parameter in MIDI "+q,k,0):(R.push(w[0].intt),R.push(w[2].intt));else if(N.indexOf(q)>=0)w.length!==4?s("Expected four parameters in MIDI "+q,k,0):w[0].type!=="number"||w[1].type!=="number"||w[2].type!=="number"||w[3].type!=="number"?s("Expected four integer parameters in MIDI "+q,k,0):(R.push(w[0].intt),R.push(w[1].intt),R.push(w[2].intt),R.push(w[3].intt));else if(M.indexOf(q)>=0)w.length!==5?s("Expected five parameters in MIDI "+q,k,0):w[0].type!=="number"||w[1].type!=="number"||w[2].type!=="number"||w[3].type!=="number"||w[4].type!=="number"?s("Expected five integer parameters in MIDI "+q,k,0):(R.push(w[0].intt),R.push(w[1].intt),R.push(w[2].intt),R.push(w[3].intt),R.push(w[4].intt));else if(y.indexOf(q)>=0)w.length!==1||w.length!==4?s("Expected one or two parameters in MIDI "+q,k,0):w[0].type!=="number"?s("Expected integer parameter in MIDI "+q,k,0):w.length===4?(w[1].token!=="octave"&&s("Expected octave parameter in MIDI "+q,k,0),w[2].token!=="="&&s("Expected octave parameter in MIDI "+q,k,0),w[3].type!=="number"&&s("Expected integer parameter for octave in MIDI "+q,k,0)):(R.push(w[0].intt),w.length===4&&R.push(w[3].intt));else if(S.indexOf(q)>=0)if(w.length<2)s("Expected string parameter and at least one integer parameter in MIDI "+q,k,0);else if(w[0].type!=="alpha")s("Expected string parameter and at least one integer parameter in MIDI "+q,k,0);else{var z=w.shift();for(R.push(z.token);w.length>0;)z=w.shift(),z.type!=="number"&&s("Expected integer parameter in MIDI "+q,k,0),R.push(z.intt)}else if(_.indexOf(q)>=0){if(w.length!==1&&w.length!==2)s("Expected one or two parameters in MIDI "+q,k,0);else if(w[0].type!=="number")s("Expected integer parameter in MIDI "+q,k,0);else if(w.length===2&&w[1].type!=="alpha")s("Expected alpha parameter in MIDI "+q,k,0);else if(R.push(w[0].intt),w.length===2){var H=w[1].token;H.indexOf("octave=")!=-1?(H=H.replace("octave=",""),H=parseInt(H),isNaN(H)?s("Expected octave value in MIDI"+q):(H<-1&&(s("Expected octave= in MIDI "+q+" to be >= -1 (recv:"+H+")"),H=-1),H>3&&(s("Expected octave= in MIDI "+q+" to be <= 3 (recv:"+H+")"),H=3),R.push(H))):s("Expected octave= in MIDI"+q)}}n.hasBeginMusic()?n.appendElement("midi",-1,-1,{cmd:q,params:R}):(C.formatting.midi===void 0&&(C.formatting.midi={}),C.formatting.midi[q]=R)};l.parseFontChangeLine=function(w){w=w.replace(/\$\$/g,"");var C=w.split("$");if(C.length>1&&t.setfont){var k=[];C[0]!==""&&k.push({text:C[0]});for(var q=1;q<C.length;q++)if(C[q][0]==="0")k.push({text:C[q].substring(1).replace(/\x03/g,"$$")});else{var R=parseInt(C[q][0],10);t.setfont[R]?k.push({font:t.setfont[R],text:C[q].substring(1).replace(/\x03/g,"$$")}):k[k.length-1].text+="$"+C[q].replace(/\x03/g,"$$")}return k}return w.replace(/\x03/g,"$$")};var O=["auto","above","below","hidden"];l.addDirective=function(w){var C=h.tokenize(w,0,w.length);if(C.length===0||C[0].type!=="alpha")return null;var k=w.substring(w.indexOf(C[0].token)+C[0].token.length);k=h.stripComment(k);var q=C.shift().token.toLowerCase(),R="",z;switch(q){case"bagpipes":a.formatting.bagpipes=!0;break;case"flatbeams":a.formatting.flatbeams=!0;break;case"jazzchords":a.formatting.jazzchords=!0;break;case"accentAbove":a.formatting.accentAbove=!0;break;case"germanAlphabet":a.formatting.germanAlphabet=!0;break;case"landscape":t.landscape=!0;break;case"papersize":t.papersize=k;break;case"graceslurs":if(C.length!==1)return"Directive graceslurs requires one parameter: 0 or 1";if(C[0].token==="0"||C[0].token==="false")a.formatting.graceSlurs=!1;else if(C[0].token==="1"||C[0].token==="true")a.formatting.graceSlurs=!0;else return"Directive graceslurs requires one parameter: 0 or 1 (received "+C[0].token+")";break;case"lineThickness":var H=I(C);if(H.value!==void 0&&(a.formatting.lineThickness=H.value),H.error)return H.error;break;case"stretchlast":var X=I(C);if(X.value!==void 0&&(a.formatting.stretchlast=X.value),X.error)return X.error;break;case"titlecaps":t.titlecaps=!0;break;case"titleleft":a.formatting.titleleft=!0;break;case"measurebox":a.formatting.measurebox=!0;break;case"vocal":return T("vocalPosition",q,C,O);case"dynamic":return T("dynamicPosition",q,C,O);case"gchord":return T("chordPosition",q,C,O);case"ornament":return T("ornamentPosition",q,C,O);case"volume":return T("volumePosition",q,C,O);case"botmargin":case"botspace":case"composerspace":case"indent":case"leftmargin":case"linesep":case"musicspace":case"partsspace":case"pageheight":case"pagewidth":case"rightmargin":case"stafftopmargin":case"staffsep":case"staffwidth":case"subtitlespace":case"sysstaffsep":case"systemsep":case"textspace":case"titlespace":case"topmargin":case"topspace":case"vocalspace":case"wordsspace":return m(q,C);case"voicescale":if(C.length!==1||C[0].type!=="number")return"voicescale requires one float as a parameter";var Q=C.shift();return t.currentVoice&&(t.currentVoice.scale=Q.floatt,n.changeVoiceScale(t.currentVoice.scale)),null;case"voicecolor":if(C.length!==1)return"voicecolor requires one string as a parameter";var U=C.shift();return t.currentVoice&&(t.currentVoice.color=U.token,n.changeVoiceColor(t.currentVoice.color)),null;case"vskip":var ee=Math.round(u(q,C));return ee.error?ee.error:(n.addSpacing(ee),null);case"scale":r(q,C);break;case"sep":if(C.length===0)n.addSeparator(14,14,85,{startChar:t.iChar,endChar:t.iChar+5});else{var te=h.getMeasurement(C);if(te.used===0)return'Directive "'+q+'" requires 3 numbers: space above, space below, length of line';var ne=te.value;if(te=h.getMeasurement(C),te.used===0)return'Directive "'+q+'" requires 3 numbers: space above, space below, length of line';var V=te.value;if(te=h.getMeasurement(C),te.used===0||C.length!==0)return'Directive "'+q+'" requires 3 numbers: space above, space below, length of line';var ae=te.value;n.addSeparator(ne,V,ae,{startChar:t.iChar,endChar:t.iChar+k.length})}break;case"barsperstaff":if(R=b("barsperstaff",q,C),R!==null)return R;break;case"staffnonote":if(C.length!==1)return"Directive staffnonote requires one parameter: 0 or 1";if(C[0].token==="0")t.staffnonote=!0;else if(C[0].token==="1")t.staffnonote=!1;else return"Directive staffnonote requires one parameter: 0 or 1 (received "+C[0].token+")";break;case"printtempo":if(R=x("printTempo",q,C),R!==null)return R;break;case"partsbox":if(R=x("partsBox",q,C),R!==null)return R;t.partsfont.box=t.partsBox;break;case"freegchord":if(R=x("freegchord",q,C),R!==null)return R;break;case"measurenb":case"barnumbers":if(R=b("barNumbers",q,C),R!==null)return R;break;case"setbarnb":if(C.length!==1||C[0].type!=="number")return"Directive setbarnb requires a number as a parameter.";t.currBarNumber=n.setBarNumberImmediate(C[0].intt);break;case"keywarn":if(C.length!==1||C[0].type!=="number"||C[0].intt!==1&&C[0].intt!==0)return"Directive "+q+" requires 0 or 1 as a parameter.";t[q]=C[0].intt===1;break;case"begintext":var K="";for(z=h.nextLine();z&&z.indexOf("%%endtext")!==0;){if(p.startsWith(z,"%%")){var se=z.substring(2);se=se.trim()+`
`,K+=se}else K+=z.trim()+`
`;z=h.nextLine()}n.addText(K,{startChar:t.iChar,endChar:t.iChar+K.length+7});break;case"continueall":t.continueall=!0;break;case"beginps":for(z=h.nextLine();z&&z.indexOf("%%endps")!==0;)h.nextLine();s("Postscript ignored",w,0);break;case"deco":k.length>0&&t.ignoredDecorations.push(k.substring(0,k.indexOf(" "))),s("Decoration redefinition ignored",w,0);break;case"text":var ce=h.translateString(k);n.addText(l.parseFontChangeLine(ce),{startChar:t.iChar,endChar:t.iChar+k.length+7});break;case"center":var ue=h.translateString(k);n.addCentered(l.parseFontChangeLine(ue));break;case"font":break;case"setfont":var le=h.tokenize(k,0,k.length);if(le.length>=4&&le[0].token==="-"&&le[1].type==="number"){var ge=parseInt(le[1].token);ge>=1&&ge<=9&&(t.setfont||(t.setfont=[]),le.shift(),le.shift(),t.setfont[ge]=g(le,t.setfont[ge],w,0,"setfont"))}break;case"gchordfont":case"partsfont":case"tripletfont":case"vocalfont":case"textfont":case"annotationfont":case"historyfont":case"infofont":case"measurefont":case"repeatfont":case"wordsfont":return d(q,C,w);case"composerfont":case"subtitlefont":case"tempofont":case"titlefont":case"voicefont":case"footerfont":case"headerfont":return o(q,C,w);case"barlabelfont":case"barnumberfont":case"barnumfont":return d("measurefont",C,w);case"staves":case"score":t.score_is_present=!0;for(var ve=function(Oe,nt,$e,Je,it){(nt||t.staves.length===0)&&t.staves.push({index:t.staves.length,numVoices:0});var Be=p.last(t.staves);$e!==void 0&&Be.bracket===void 0&&(Be.bracket=$e),Je!==void 0&&Be.brace===void 0&&(Be.brace=Je),it&&(Be.connectBarLines="end"),t.voices[Oe]===void 0&&(t.voices[Oe]={staffNum:Be.index,index:Be.numVoices},Be.numVoices++)},we=!1,Y=!1,$=!1,G=!1,W=!1,j=!1,J=!1,re,fe=function(){if(J=!0,re){var Oe="start";re.staffNum>0&&(t.staves[re.staffNum-1].connectBarLines==="start"||t.staves[re.staffNum-1].connectBarLines==="continue")&&(Oe="continue"),t.staves[re.staffNum].connectBarLines=Oe}};C.length;){var Z=C.shift();switch(Z.token){case"(":we?s("Can't nest parenthesis in %%score",w,Z.start):(we=!0,G=!0);break;case")":!we||G?s("Unexpected close parenthesis in %%score",w,Z.start):we=!1;break;case"[":Y?s("Can't nest brackets in %%score",w,Z.start):(Y=!0,W=!0);break;case"]":!Y||W?s("Unexpected close bracket in %%score",w,Z.start):(Y=!1,t.staves[re.staffNum].bracket="end");break;case"{":$?s("Can't nest braces in %%score",w,Z.start):($=!0,j=!0);break;case"}":!$||j?s("Unexpected close brace in %%score",w,Z.start):($=!1,t.staves[re.staffNum].brace="end");break;case"|":fe();break;default:for(var ie="";(Z.type==="alpha"||Z.type==="number")&&(ie+=Z.token,Z.continueId);)Z=C.shift();var me=!we||G,de=W?"start":Y?"continue":void 0,oe=j?"start":$?"continue":void 0;ve(ie,me,de,oe,J),G=!1,W=!1,j=!1,J=!1,re=t.voices[ie],q==="staves"&&fe();break}}break;case"maxstaves":var pe=h.getInt(k);pe.digits===0?s("Expected number of staves in maxstaves"):pe.value>0&&(a.formatting.maxStaves=pe.value);break;case"newpage":var Ne=h.getInt(k);n.addNewPage(Ne.digits===0?-1:Ne.value);break;case"abc":var he=k.split(" ");switch(he[0]){case"-copyright":case"-creator":case"-edited-by":case"-version":case"-charset":var Te=he.shift();n.addMetaText(q+Te,he.join(" "),{startChar:t.iChar,endChar:t.iChar+k.length+5});break;default:return"Unknown directive: "+q+he[0]}break;case"header":case"footer":var Ee=h.getMeat(k,0,k.length);Ee=k.substring(Ee.start,Ee.end),Ee[0]==='"'&&Ee[Ee.length-1]==='"'&&(Ee=Ee.substring(1,Ee.length-1));var Ce=Ee.split("	"),be={};Ce.length===1?be={left:"",center:Ce[0],right:""}:Ce.length===2?be={left:Ce[0],center:Ce[1],right:""}:be={left:Ce[0],center:Ce[1],right:Ce[2]},Ce.length>3&&s("Too many tabs in "+q+": "+Ce.length+" found.",k,0),n.addMetaTextObj(q,be,{startChar:t.iChar,endChar:t.iChar+w.length});break;case"midi":var Ae=h.tokenize(k,0,k.length,!0);Ae.length>0&&Ae[0].token==="="&&Ae.shift(),Ae.length===0?s("Expected midi command",k,0):P(Ae,a,k);break;case"percmap":var ke=e(k);ke.error?s(ke.error,w,8):(a.formatting.percmap||(a.formatting.percmap={}),a.formatting.percmap[ke.key]=ke.value);break;case"visualtranspose":var Ue=h.getInt(k);Ue.digits===0?s("Expected number of half steps in visualTranspose"):t.globalTranspose=Ue.value;break;case"map":case"playtempo":case"auquality":case"continuous":case"nobarcheck":a.formatting[q]=k;break;default:return"Unknown directive: "+q}return null},l.globalFormatting=function(w){for(var C in w)if(w.hasOwnProperty(C)){var k=""+w[C],q=h.tokenize(k,0,k.length),R;switch(C){case"titlefont":case"gchordfont":case"composerfont":case"footerfont":case"headerfont":case"historyfont":case"infofont":case"measurefont":case"partsfont":case"repeatfont":case"subtitlefont":case"tempofont":case"textfont":case"voicefont":case"tripletfont":case"vocalfont":case"wordsfont":case"annotationfont":case"tablabelfont":case"tabnumberfont":case"tabgracefont":d(C,q,k);break;case"scale":r(C,q);break;case"partsbox":R=x("partsBox",C,q),R!==null&&s(R),t.partsfont.box=t.partsBox;break;case"freegchord":R=x("freegchord",C,q),R!==null&&s(R);break;case"fontboxpadding":(q.length!==1||q[0].type!=="number")&&s('Directive "'+C+'" requires a number as a parameter.'),a.formatting.fontboxpadding=q[0].floatt;break;case"stafftopmargin":(q.length!==1||q[0].type!=="number")&&s('Directive "'+C+'" requires a number as a parameter.'),a.formatting.stafftopmargin=q[0].floatt;break;case"stretchlast":var z=I(q);if(z.value!==void 0&&(a.formatting.stretchlast=z.value),z.error)return z.error;break;default:s("Formatting directive unrecognized: ",C,0)}}};function I(w){if(w.length===0)return{value:1};if(w.length===1)if(w[0].type==="number"){if(w[0].floatt>=0||w[0].floatt<=1)return{value:w[0].floatt}}else{if(w[0].token==="false")return{value:0};if(w[0].token==="true")return{value:1}}return{error:"Directive stretchlast requires zero or one parameter: false, true, or number between 0 and 1 (received "+w[0].token+")"}}})(),Tt=l,Tt}var St,Da;function Zo(){if(Da)return St;Da=1;var p={};const l=["C,,,","D,,,","E,,,","F,,,","G,,,","A,,,","B,,,","C,,","D,,","E,,","F,,","G,,","A,,","B,,","C,","D,","E,","F,","G,","A,","B,","C","D","E","F","G","A","B","c","d","e","f","g","a","b","c'","d'","e'","f'","g'","a'","b'","c''","d''","e''","f''","g''","a''","b''","c'''","d'''","e'''","f'''","g'''","a'''","b'''"];return p.pitchIndex=function(h){return l.indexOf(h)},p.noteName=function(h){return l[h]},St=p,St}var Et,Ia;function qs(){if(Ia)return Et;Ia=1;var p=["C","C","D","D","E","F","F","G","G","A","A","B"],l=["C","D","D","E","E","F","G","G","A","A","B","B"],h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function t(a,n,i,f){if(!n||n%12===0)return a;for(;n<0;)n+=12;n>11&&(n=n%12);var v=a.match(/^([A-G][b#]?)([^\/]+)?\/?([A-G][b#]?)?(.+)?/);if(!v)return a;var g=v[1],d=v[2],o=v[3],r=v[4],c=p.indexOf(g);if(c<0&&(c=l.indexOf(g)),c<0&&(c=h.indexOf(g)),c<0&&(c=s.indexOf(g)),c<0)return a;c+=n,c=c%12,i?f?a=s[c]:a=l[c]:f?a=h[c]:a=p[c];var e=d&&(d.indexOf("dim")>=0||d.indexOf("")>=0);if(e&&a==="A#"&&(a="Bb"),e&&a==="D#"&&(a="Eb"),e&&a==="A"&&(a="B"),e&&a==="D"&&(a="E"),d&&(a+=d),o){var c=p.indexOf(o);c<0&&(c=l.indexOf(o)),c<0&&(c=h.indexOf(o)),c<0&&(c=s.indexOf(o)),a+="/",c>=0?(c+=n,c=c%12,i?f?a+=s[c]:a+=l[c]:f?a+=h[c]:a+=p[c]):a+=o}return r&&(a+=r),a}return Et=t,Et}var At,Fa;function Ds(){if(Fa)return At;Fa=1;var p={C:{modes:["CMaj","Amin","Am","GMix","DDor","EPhr","FLyd","BLoc"],stepsFromC:0},Db:{modes:["DbMaj","Bbmin","Bbm","AbMix","EbDor","FPhr","GbLyd","CLoc"],stepsFromC:1},D:{modes:["DMaj","Bmin","Bm","AMix","EDor","F#Phr","GLyd","C#Loc"],stepsFromC:2},Eb:{modes:["EbMaj","Cmin","Cm","BbMix","FDor","GPhr","AbLyd","DLoc"],stepsFromC:3},E:{modes:["EMaj","C#min","C#m","BMix","F#Dor","G#Phr","ALyd","D#Loc"],stepsFromC:4},F:{modes:["FMaj","Dmin","Dm","CMix","GDor","APhr","BbLyd","ELoc"],stepsFromC:5},Gb:{modes:["GbMaj","Ebmin","Ebm","DbMix","AbDor","BbPhr","CbLyd","FLoc"],stepsFromC:6},G:{modes:["GMaj","Emin","Em","DMix","ADor","BPhr","CLyd","F#Loc"],stepsFromC:7},Ab:{modes:["AbMaj","Fmin","Fm","EbMix","BbDor","CPhr","DbLyd","GLoc"],stepsFromC:8},A:{modes:["AMaj","F#min","F#m","EMix","BDor","C#Phr","DLyd","G#Loc"],stepsFromC:9},Bb:{modes:["BbMaj","Gmin","Gm","FMix","CDor","DPhr","EbLyd","ALoc"],stepsFromC:10},B:{modes:["BMaj","G#min","G#m","F#Mix","C#Dor","D#Phr","ELyd","A#Loc"],stepsFromC:11},"C#":{modes:["C#Maj","A#min","A#m","G#Mix","D#Dor","E#Phr","F#Lyd","B#Loc"],stepsFromC:1},"F#":{modes:["F#Maj","D#min","D#m","C#Mix","G#Dor","A#Phr","BLyd","E#Loc"],stepsFromC:6},Cb:{modes:["CbMaj","Abmin","Abm","GbMix","DbDor","EbPhr","FbLyd","BbLoc"],stepsFromC:11}},l=null;function h(){l={};for(var n=Object.keys(p),i=0;i<n.length;i++){var f=p[n[i]];l[n[i].toLowerCase()]=n[i];for(var v=0;v<f.modes.length;v++){var g=f.modes[v].toLowerCase();l[g]=n[i]}}}function s(n){l||h();var i=n.toLowerCase().match(/([a-g][b#]?)(maj|min|mix|dor|phr|lyd|loc|m)?/);if(!i||!i[2])return n;i=i[1]+i[2];var f=l[i];return f||n}function t(n,i){var f=p[n];if(!f||i==="")return n;var v=i.toLowerCase().match(/^(maj|min|mix|dor|phr|lyd|loc|m)/);if(!v)return n;for(var g=v[1],d=0;d<f.modes.length;d++){var o=f.modes[d],r=o.toLowerCase().indexOf(g);if(r!==-1&&r===o.length-g.length)return o.substring(0,o.length-g.length)}return n}function a(n,i){var f=p[n];if(!f)return n;for(;i<0;)i+=12;for(var v=(f.stepsFromC+i)%12,g=0;g<Object.keys(p).length;g++){var d=Object.keys(p)[g];if(p[d].stepsFromC===v)return d}return n}return At={relativeMajor:s,relativeMode:t,transposeKey:a},At}var Mt,Oa;function Is(){if(Oa)return Mt;Oa=1;var{relativeMajor:p}=Ds(),l={acc:"sharp",note:"f"},h={acc:"sharp",note:"c"},s={acc:"sharp",note:"g"},t={acc:"sharp",note:"d"},a={acc:"sharp",note:"A"},n={acc:"sharp",note:"e"},i={acc:"sharp",note:"B"},f={acc:"flat",note:"B"},v={acc:"flat",note:"e"},g={acc:"flat",note:"A"},d={acc:"flat",note:"d"},o={acc:"flat",note:"G"},r={acc:"flat",note:"c"},c={acc:"flat",note:"F"},e={"C#":[l,h,s,t,a,n,i],"F#":[l,h,s,t,a,n],B:[l,h,s,t,a],E:[l,h,s,t],A:[l,h,s],D:[l,h],G:[l],C:[],F:[f],Bb:[f,v],Eb:[f,v,g],Cm:[f,v,g],Ab:[f,v,g,d],Db:[f,v,g,d,o],Gb:[f,v,g,d,o,r],Cb:[f,v,g,d,o,r,c],"A#":[f,v],"B#":[],"D#":[f,v,g],"E#":[f],"G#":[f,v,g,d],none:[]};function u(m){var b=e[p(m)];return b?JSON.parse(JSON.stringify(b)):null}return Mt=u,Mt}var Bt,Ra;function Fs(){if(Ra)return Bt;Ra=1;var p=Zo(),l=qs(),h=Is(),s={},t={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},a=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],n=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"];s.keySignature=function(o,r,c,e,u){if(o.clef.type==="perc"||o.clef.type==="none")return{accidentals:h(r),root:c,acc:e};u||(u=0),o.localTransposeVerticalMovement=0,o.localTransposePreferFlats=!1;var m=h(r);if(!m)return o.key;if(o.localTranspose=(o.globalTranspose?o.globalTranspose:0)+u,!o.localTranspose)return{accidentals:m,root:c,acc:e};if(o.globalTransposeOrigKeySig=m,o.localTranspose%12===0)return o.localTransposeVerticalMovement=o.localTranspose/12*7,{accidentals:m,root:c,acc:e};var b=r[0];r[1]==="b"||r[1]==="#"?(b+=r[1],r=r.substr(2)):r=r.substr(1);var x=t[b],T=x!==void 0;T||(x=0,b="C",r="");for(var E=x+o.localTranspose;E<0;)E+=12;E>11&&(E=E%12);var D=r[0]==="m"?n[E]:a[E],F=D+r,y=h(F);(y.length===0||y[0].acc==="flat")&&(o.localTransposePreferFlats=!0);var A=F.charCodeAt(0)-b.charCodeAt(0);return o.localTranspose>0?(A<0||A===0&&(b[1]==="#"||F[1]==="b"))&&(A+=7):o.localTranspose<0&&(A>0||A===0&&(b[1]==="b"||F[1]==="#"))&&(A-=7),o.localTranspose>0?o.localTransposeVerticalMovement=A+Math.floor(o.localTranspose/12)*7:o.localTransposeVerticalMovement=A+Math.ceil(o.localTranspose/12)*7,T?{accidentals:y,root:D[0],acc:D.length>1?D[1]:""}:{accidentals:[],root:c,acc:e}},s.chordName=function(o,r){return l(r,o.localTranspose,o.localTransposePreferFlats,o.freegchord)};var i=["c","d","e","f","g","a","b"];function f(o,r,c,e,u){for(var m=i[(o+49)%7],b=0,x=0;x<e.length;x++)e[x].note.toLowerCase()===m&&(b=v[e[x].acc]);for(var T=v[c],E=T-b,D=i[(r+49)%7],F=0,y=0;y<u.accidentals.length;y++)u.accidentals[y].note.toLowerCase()===D&&(F=v[u.accidentals[y].acc]);var A=E+F;return A<-2&&(r--,A+=D==="c"||D==="f"?1:2),A>2&&(r++,A-=D==="b"||D==="e"?1:2),[r,A]}var v={dblflat:-2,flat:-1,natural:0,sharp:1,dblsharp:2},g={"-2":"dblflat","-1":"flat",0:"natural",1:"sharp",2:"dblsharp"},d={"-2":"__","-1":"_",0:"=",1:"^",2:"^^"};return s.note=function(o,r){if(!(!o.localTranspose||o.clef.type==="perc")){var c=r.pitch;if(o.localTransposeVerticalMovement&&(r.pitch=r.pitch+o.localTransposeVerticalMovement,r.name)){var e=r.accidental?r.name.substring(1):r.name,u=r.accidental?r.name[0]:"",m=p.pitchIndex(e);r.name=u+p.noteName(m+o.localTransposeVerticalMovement)}if(r.accidental){var b=f(c,r.pitch,r.accidental,o.globalTransposeOrigKeySig,o.targetKey);r.pitch=b[0],r.accidental=g[b[1]],r.name&&(r.name=d[b[1]]+r.name.replace(/[_^=]/g,""))}}},Bt=s,Bt}var Nt,Ha;function va(){if(Ha)return Nt;Ha=1;var p=pa(),l=Fs(),h={};return(function(){var s,t,a,n;h.initialize=function(r,c,e,u,m){s=r,t=c,a=e,n=m},h.standardKey=function(r,c,e,u){return l.keySignature(a,r,c,e,u)};var i={treble:{clef:"treble",pitch:4,mid:0},"treble+8":{clef:"treble+8",pitch:4,mid:0},"treble-8":{clef:"treble-8",pitch:4,mid:0},"treble^8":{clef:"treble+8",pitch:4,mid:0},treble_8:{clef:"treble-8",pitch:4,mid:0},treble1:{clef:"treble",pitch:2,mid:2},treble2:{clef:"treble",pitch:4,mid:0},treble3:{clef:"treble",pitch:6,mid:-2},treble4:{clef:"treble",pitch:8,mid:-4},treble5:{clef:"treble",pitch:10,mid:-6},perc:{clef:"perc",pitch:6,mid:0},none:{clef:"none",mid:0},bass:{clef:"bass",pitch:8,mid:-12},"bass+8":{clef:"bass+8",pitch:8,mid:-12},"bass-8":{clef:"bass-8",pitch:8,mid:-12},"bass^8":{clef:"bass+8",pitch:8,mid:-12},bass_8:{clef:"bass-8",pitch:8,mid:-12},"bass+16":{clef:"bass",pitch:8,mid:-12},"bass-16":{clef:"bass",pitch:8,mid:-12},"bass^16":{clef:"bass",pitch:8,mid:-12},bass_16:{clef:"bass",pitch:8,mid:-12},bass1:{clef:"bass",pitch:2,mid:-6},bass2:{clef:"bass",pitch:4,mid:-8},bass3:{clef:"bass",pitch:6,mid:-10},bass4:{clef:"bass",pitch:8,mid:-12},bass5:{clef:"bass",pitch:10,mid:-14},tenor:{clef:"alto",pitch:8,mid:-8},tenor1:{clef:"alto",pitch:2,mid:-2},tenor2:{clef:"alto",pitch:4,mid:-4},tenor3:{clef:"alto",pitch:6,mid:-6},tenor4:{clef:"alto",pitch:8,mid:-8},tenor5:{clef:"alto",pitch:10,mid:-10},alto:{clef:"alto",pitch:6,mid:-6},alto1:{clef:"alto",pitch:2,mid:-2},alto2:{clef:"alto",pitch:4,mid:-4},alto3:{clef:"alto",pitch:6,mid:-6},alto4:{clef:"alto",pitch:8,mid:-8},alto5:{clef:"alto",pitch:10,mid:-10},"alto+8":{clef:"alto+8",pitch:6,mid:-6},"alto-8":{clef:"alto-8",pitch:6,mid:-6},"alto^8":{clef:"alto+8",pitch:6,mid:-6},alto_8:{clef:"alto-8",pitch:6,mid:-6}},f=function(r,c){var e=i[r],u=e?e.mid:0;return u+c};h.fixClef=function(r){var c=i[r.type];c&&(r.clefPos=c.pitch,r.type=c.clef)},h.deepCopyKey=function(r){var c={accidentals:[],root:r.root,acc:r.acc,mode:r.mode};return r.accidentals.forEach(function(e){c.accidentals.push(Object.assign({},e))}),c};var v={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};h.addPosToKey=function(r,c){var e=r.verticalPos;c.accidentals.forEach(function(u){var m=v[u.note];m=m-e,u.verticalPos=m}),c.impliedNaturals&&c.impliedNaturals.forEach(function(u){var m=v[u.note];m=m-e,u.verticalPos=m}),e<-10?(c.accidentals.forEach(function(u){u.verticalPos-=7,(u.verticalPos>=11||u.verticalPos===10&&u.acc==="flat")&&(u.verticalPos-=7),u.note==="A"&&u.acc==="sharp"&&(u.verticalPos-=7),(u.note==="G"||u.note==="F")&&u.acc==="flat"&&(u.verticalPos-=7)}),c.impliedNaturals&&c.impliedNaturals.forEach(function(u){u.verticalPos-=7,(u.verticalPos>=11||u.verticalPos===10&&u.acc==="flat")&&(u.verticalPos-=7),u.note==="A"&&u.acc==="sharp"&&(u.verticalPos-=7),(u.note==="G"||u.note==="F")&&u.acc==="flat"&&(u.verticalPos-=7)})):e<-4?(c.accidentals.forEach(function(u){u.verticalPos-=7,e===-8&&(u.note==="f"||u.note==="g")&&u.acc==="sharp"&&(u.verticalPos-=7)}),c.impliedNaturals&&c.impliedNaturals.forEach(function(u){u.verticalPos-=7,e===-8&&(u.note==="f"||u.note==="g")&&u.acc==="sharp"&&(u.verticalPos-=7)})):e>=7&&(c.accidentals.forEach(function(u){u.verticalPos+=7}),c.impliedNaturals&&c.impliedNaturals.forEach(function(u){u.verticalPos+=7}))},h.fixKey=function(r,c){var e=Object.assign({},c);return h.addPosToKey(r,e),e};var g=function(r){var c=0,e=r[c++];(e==="^"||e==="_")&&(e=r[c++]);var u=v[e];for(u===void 0&&(u=6);c<r.length;c++)if(r[c]===",")u-=7;else if(r[c]==="'")u+=7;else break;return{mid:u-6,str:r.substring(c)}},d=function(r){for(var c=0;c<r.length;c++)r[c].note==="b"?r[c].note="B":r[c].note==="a"?r[c].note="A":r[c].note==="F"?r[c].note="f":r[c].note==="E"?r[c].note="e":r[c].note==="D"?r[c].note="d":r[c].note==="C"?r[c].note="c":r[c].note==="G"&&r[c].acc==="sharp"?r[c].note="g":r[c].note==="g"&&r[c].acc==="flat"&&(r[c].note="G")};h.parseKey=function(r,c){r.length===0&&(r="none");var e=s.tokenize(r,0,r.length),u={};if(e.length===0)return t("Must pass in key signature.",r,0),u;switch(e[0].token){case"HP":p.addDirective("bagpipes"),a.key={root:"HP",accidentals:[],acc:"",mode:""},u.foundKey=!0,e.shift();break;case"Hp":p.addDirective("bagpipes"),a.key={root:"Hp",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}],acc:"",mode:""},u.foundKey=!0,e.shift();break;case"none":a.key={root:"none",accidentals:[],acc:"",mode:""},u.foundKey=!0,e.shift();break;default:var m=s.getKeyPitch(e[0].token);if(m.len>0){u.foundKey=!0;var b="",x="";e[0].token.length>1?e[0].token=e[0].token.substring(1):e.shift();var T=m.token;if(e.length>0){var E=s.getSharpFlat(e[0].token);if(E.len>0&&(e[0].token.length>1?e[0].token=e[0].token.substring(1):e.shift(),T+=E.token,b=E.token),e.length>0){var D=s.getMode(e[0].token);D.len>0&&(e.shift(),T+=D.token,x=D.token)}if(h.standardKey(T,m.token,b,0)===void 0)return t("Unsupported key signature: "+T,r,0),u}var F=h.deepCopyKey(a.key),y=!c&&a.globalTranspose?-a.globalTranspose:0,A;if(c&&(A=a.globalTransposeOrigKeySig),a.key=h.deepCopyKey(h.standardKey(T,m.token,b,y)),c&&(a.globalTransposeOrigKeySig=A),a.key.mode=x,F&&a.keywarn!==!1){for(var N,M=0;M<a.key.accidentals.length;M++)for(N=0;N<F.accidentals.length;N++)F.accidentals[N].note&&a.key.accidentals[M].note.toLowerCase()===F.accidentals[N].note.toLowerCase()&&(F.accidentals[N].note=null);for(N=0;N<F.accidentals.length;N++)F.accidentals[N].note&&(a.key.impliedNaturals||(a.key.impliedNaturals=[]),a.key.impliedNaturals.push({acc:"natural",note:F.accidentals[N].note}))}}break}if(e.length===0||(e[0].token==="exp"&&e.shift(),e.length===0)||(e[0].token==="oct"&&e.shift(),e.length===0))return u;var L=s.getKeyAccidentals2(e);if(L.warn&&t(L.warn,r,0),L.accs){u.foundKey||(u.foundKey=!0,a.key={root:"none",acc:"",mode:"",accidentals:[]}),d(L.accs);for(var B=0;B<L.accs.length;B++){for(var S=!1,_=0;_<a.key.accidentals.length&&!S;_++)a.key.accidentals[_].note===L.accs[B].note&&(S=!0,a.key.accidentals[_].acc!==L.accs[B].acc&&(a.key.accidentals[_].acc=L.accs[B].acc,a.key.explicitAccidentals||(a.key.explicitAccidentals=[]),a.key.explicitAccidentals.push(L.accs[B])));if(!S&&(a.key.explicitAccidentals||(a.key.explicitAccidentals=[]),a.key.explicitAccidentals.push(L.accs[B]),a.key.accidentals.push(L.accs[B]),a.key.impliedNaturals))for(var P=0;P<a.key.impliedNaturals.length;P++)a.key.impliedNaturals[P].note===L.accs[B].note&&a.key.impliedNaturals.splice(P,1)}}for(var O;e.length>0;)switch(e[0].token){case"m":case"middle":if(e.shift(),e.length===0)return t("Expected = after middle",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after middle",r,O.start);break}if(e.length===0)return t("Expected parameter after middle=",r,0),u;var I=s.getPitchFromTokens(e);I.warn&&t(I.warn,r,0),I.position&&(a.clef.verticalPos=I.position-6);break;case"transpose":if(e.shift(),e.length===0)return t("Expected = after transpose",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after transpose",r,O.start);break}if(e.length===0)return t("Expected parameter after transpose=",r,0),u;if(e[0].type!=="number"){t("Expected number after transpose",r,e[0].start);break}a.clef.transpose=e[0].intt,e.shift();break;case"stafflines":if(e.shift(),e.length===0)return t("Expected = after stafflines",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after stafflines",r,O.start);break}if(e.length===0)return t("Expected parameter after stafflines=",r,0),u;if(e[0].type!=="number"){t("Expected number after stafflines",r,e[0].start);break}a.clef.stafflines=e[0].intt,e.shift();break;case"staffscale":if(e.shift(),e.length===0)return t("Expected = after staffscale",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after staffscale",r,O.start);break}if(e.length===0)return t("Expected parameter after staffscale=",r,0),u;if(e[0].type!=="number"){t("Expected number after staffscale",r,e[0].start);break}a.clef.staffscale=e[0].floatt,e.shift();break;case"octave":if(e.shift(),e.length===0)return t("Expected = after octave",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after octave",r,O.start);break}if(e.length===0)return t("Expected parameter after octave=",r,0),u;if(e[0].type!=="number"){t("Expected number after octave",r,e[0].start);break}a.octave=e[0].intt,e.shift();break;case"style":if(e.shift(),e.length===0)return t("Expected = after style",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after style",r,O.start);break}if(e.length===0)return t("Expected parameter after style=",r,0),u;switch(e[0].token){case"normal":case"harmonic":case"rhythm":case"x":case"triangle":a.style=e[0].token,e.shift();break;default:t("error parsing style element: "+e[0].token,r,e[0].start);break}break;case"clef":if(e.shift(),e.length===0)return t("Expected = after clef",r,0),u;if(O=e.shift(),O.token!=="="){t("Expected = after clef",r,O.start);break}if(e.length===0)return t("Expected parameter after clef=",r,0),u;case"treble":case"bass":case"alto":case"tenor":case"perc":case"none":var w=e.shift();switch(w.token){case"treble":case"tenor":case"alto":case"bass":case"perc":case"none":break;case"C":w.token="alto";break;case"F":w.token="bass";break;case"G":w.token="treble";break;case"c":w.token="alto";break;case"f":w.token="bass";break;case"g":w.token="treble";break;default:t("Expected clef name. Found "+w.token,r,w.start);break}e.length>0&&e[0].type==="number"&&(w.token+=e[0].token,e.shift()),e.length>1&&(e[0].token==="-"||e[0].token==="+"||e[0].token==="^"||e[0].token==="_")&&e[1].token==="8"&&(w.token+=e[0].token+e[1].token,e.shift(),e.shift()),a.clef={type:w.token,verticalPos:f(w.token,0)},a.currentVoice&&a.currentVoice.transpose!==void 0&&(a.clef.transpose=a.currentVoice.transpose),u.foundClef=!0;break;default:t("Unknown parameter: "+e[0].token,r,e[0].start),e.shift()}return u};var o=function(r){var c=a.voices[r];if(!(a.currentVoice&&a.currentVoice.index===c.index&&a.currentVoice.staffNum===c.staffNum))return a.currentVoice=c,n.setCurrentVoice(c.staffNum,c.index,r)};h.parseVoice=function(r,c,e){var u=s.getMeat(r,c,e),m=u.start,b=u.end,x=s.getToken(r,m,b);if(x.length===0){t("Expected a voice id",r,m);return}var T=!1;a.voices[x]===void 0&&(a.voices[x]={},T=!0,a.score_is_present&&t("Can't have an unknown V: id when the %score directive is present",r,m)),m+=x.length,m+=s.eatWhiteSpace(r,m);for(var E={startStaff:T},D=function(I){var w=s.getVoiceToken(r,m,b);w.warn!==void 0?t("Expected value for "+I+" in voice: "+w.warn,r,m):w.err!==void 0?t("Expected value for "+I+" in voice: "+w.err,r,m):w.token.length===0&&r[m]!=='"'?t("Expected value for "+I+" in voice",r,m):E[I]=w.token,m+=w.len},F=function(I,w,C){var k=s.getVoiceToken(r,m,b);k.warn!==void 0?t("Expected value for "+w+" in voice: "+k.warn,r,m):k.err!==void 0?t("Expected value for "+w+" in voice: "+k.err,r,m):k.token.length===0&&r[m]!=='"'?t("Expected value for "+w+" in voice",r,m):(k.token=parseFloat(k.token),a.voices[I][w]=k.token),m+=k.len},y=function(I,w){var C=s.getVoiceToken(r,m,b);if(C.warn!==void 0)t("Expected value for "+I+" in voice: "+C.warn,r,m);else if(C.err!==void 0)t("Expected value for "+I+" in voice: "+C.err,r,m);else if(C.token.length===0&&r[m]!=='"')t("Expected value for "+I+" in voice",r,m);else return C.token;m+=C.len},A=function(I,w){var C={_B:2,_E:9,_b:-10,_e:-3},k=s.getVoiceToken(r,m,b);if(k.warn!==void 0)t("Expected one of (_B, _E, _b, _e) for "+w+" in voice: "+k.warn,r,m);else if(k.token.length===0&&r[m]!=='"')t("Expected one of (_B, _E, _b, _e) for "+w+" in voice",r,m);else{var q=C[k.token];q?a.voices[I][w]=q:t("Expected one of (_B, _E, _b, _e) for "+w+" in voice",r,m)}m+=k.len};m<b;){var N=s.getVoiceToken(r,m,b);if(m+=N.len,N.warn)t("Error parsing voice: "+N.warn,r,m);else{var M=null;switch(N.token){case"clef":case"cl":D("clef");var L=0;E.clef!==void 0&&(E.clef=E.clef.replace(/[',]/g,""),E.clef.indexOf("+16")!==-1&&(L+=14,E.clef=E.clef.replace("+16","")),E.verticalPos=f(E.clef,L));break;case"treble":case"bass":case"tenor":case"alto":case"perc":case"none":case"treble'":case"bass'":case"tenor'":case"alto'":case"none'":case"treble''":case"bass''":case"tenor''":case"alto''":case"none''":case"treble,":case"bass,":case"tenor,":case"alto,":case"none,":case"treble,,":case"bass,,":case"tenor,,":case"alto,,":case"none,,":case"treble+8":case"treble-8":case"treble^8":case"treble_8":case"treble1":case"treble2":case"treble3":case"treble4":case"treble5":case"bass+8":case"bass-8":case"bass^8":case"bass_8":case"bass+16":case"bass-16":case"bass^16":case"bass_16":case"bass1":case"bass2":case"bass3":case"bass4":case"bass5":case"tenor1":case"tenor2":case"tenor3":case"tenor4":case"tenor5":case"alto1":case"alto2":case"alto3":case"alto4":case"alto5":case"alto+8":case"alto-8":case"alto^8":case"alto_8":var B=0;E.clef=N.token.replace(/[',]/g,""),E.verticalPos=f(E.clef,B),a.voices[x].clef=N.token;break;case"staves":case"stave":case"stv":D("staves");break;case"brace":case"brc":D("brace");break;case"bracket":case"brk":D("bracket");break;case"name":case"nm":D("name");break;case"subname":case"sname":case"snm":D("subname");break;case"merge":E.startStaff=!1;break;case"stem":case"stems":M=s.getVoiceToken(r,m,b),M.warn!==void 0?t("Expected value for stems in voice: "+M.warn,r,m):M.err!==void 0?t("Expected value for stems in voice: "+M.err,r,m):M.token==="up"||M.token==="down"?a.voices[x].stem=M.token:t("Expected up or down for voice stem",r,m),m+=M.len;break;case"up":case"down":a.voices[x].stem=N.token;break;case"middle":case"m":D("verticalPos"),E.verticalPos=g(E.verticalPos).mid;break;case"gchords":case"gch":a.voices[x].suppressChords=!0,M=s.getVoiceToken(r,m,b),M.token==="0"&&(m=m+M.len);break;case"space":case"spc":D("spacing");break;case"scale":F(x,"scale");break;case"score":A(x,"scoreTranspose");break;case"transpose":F(x,"transpose");break;case"stafflines":F(x,"stafflines");break;case"staffscale":F(x,"staffscale");break;case"octave":F(x,"octave");break;case"volume":F(x,"volume");break;case"cue":var S=y("cue");S==="on"?a.voices[x].scale=.6:a.voices[x].scale=1;break;case"style":M=s.getVoiceToken(r,m,b),M.warn!==void 0?t("Expected value for style in voice: "+M.warn,r,m):M.err!==void 0?t("Expected value for style in voice: "+M.err,r,m):M.token==="normal"||M.token==="harmonic"||M.token==="rhythm"||M.token==="x"||M.token==="triangle"?a.voices[x].style=M.token:t("Expected one of [normal, harmonic, rhythm, x, triangle] for voice style",r,m),m+=M.len;break}}m+=s.eatWhiteSpace(r,m)}if((E.startStaff||a.staves.length===0)&&(a.staves.push({index:a.staves.length,meter:a.origMeter}),a.score_is_present||(a.staves[a.staves.length-1].numVoices=0)),a.voices[x].staffNum===void 0){a.voices[x].staffNum=a.staves.length-1;var _=0;for(var P in a.voices)a.voices.hasOwnProperty(P)&&a.voices[P].staffNum===a.voices[x].staffNum&&_++;a.voices[x].index=_-1}var O=a.staves[a.voices[x].staffNum];return a.score_is_present||O.numVoices++,E.clef&&(O.clef={type:E.clef,verticalPos:E.verticalPos}),E.spacing&&(O.spacing_below_offset=E.spacing),E.verticalPos&&(O.verticalPos=E.verticalPos),E.name&&(O.name?O.name.push(E.name):O.name=[E.name]),E.subname&&(O.subname?O.subname.push(E.subname):O.subname=[E.subname]),o(x)}})(),Nt=h,Nt}var Lt,za;function ec(){if(za)return Lt;za=1;var p=Fe(),l=pa(),h=va(),s=function(t,a,n,i,f){this.reset=function(d,o,r,c){h.initialize(d,o,r,c,f),l.initialize(d,o,r,c,f)},this.reset(t,a,n,i),this.setTitle=function(d,o){n.hasMainTitle?f.addSubtitle(d,{startChar:n.iChar,endChar:n.iChar+o+2}):(f.addMetaText("title",d,{startChar:n.iChar,endChar:n.iChar+o+2}),n.hasMainTitle=!0)},this.setMeter=function(d){if(d=t.stripComment(d),d==="C")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"common_time"};if(d==="C|")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"cut_time"};if(d==="o")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_perfectum"};if(d==="c")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_imperfectum"};if(d==="o.")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_perfectum_prolatio"};if(d==="c.")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),{type:"tempus_imperfectum_prolatio"};if(d.length===0||d.toLowerCase()==="none")return n.havent_set_length===!0&&(n.default_length=.125,n.havent_set_length=!1),null;var o=t.tokenize(d,0,d.length);try{var r=function(){var x={value:0,num:""},T=o.shift();for(T.token==="("&&(T=o.shift());;){if(T.type!=="number")throw"Expected top number of meter";if(x.value+=parseInt(T.token),x.num+=T.token,o.length===0||o[0].token==="/")return x;if(T=o.shift(),T.token===")"){if(o.length===0||o[0].token==="/")return x;throw"Unexpected paren in meter"}if(T.token!=="."&&T.token!=="+"||(x.num+=T.token,o.length===0))throw"Expected top number of meter";T=o.shift()}return x},c=function(){var x=r();if(o.length===0)return x;var T=o.shift();if(T.token!=="/")throw"Expected slash in meter";if(T=o.shift(),T.type!=="number")throw"Expected bottom number of meter";return x.den=T.token,x.value=x.value/parseInt(x.den),x};if(o.length===0)throw"Expected meter definition in M: line";for(var e={type:"specified",value:[]},u=0;;){var m=c();u+=m.value;var b={num:m.num};if(m.den!==void 0&&(b.den=m.den),e.value.push(b),o.length===0)break}return n.havent_set_length===!0&&(n.default_length=u<.75?.0625:.125,n.havent_set_length=!1),e}catch(x){a(x,d,0)}return null},this.calcTempo=function(d){var o=.25;n.meter&&n.meter.type==="specified"?o=1/parseInt(n.meter.value[0].den):n.origMeter&&n.origMeter.type==="specified"&&(o=1/parseInt(n.origMeter.value[0].den));for(var r=0;r<d.duration;r++)d.duration[r]=o*d.duration[r];return d},this.resolveTempo=function(){n.tempo&&(this.calcTempo(n.tempo),i.metaText.tempo=n.tempo,delete n.tempo)},this.addUserDefinition=function(d,o,r){var c=d.indexOf("=",o);if(c===-1){a("Need an = in a macro definition",d,o);return}var e=p.strip(d.substring(o,c)),u=p.strip(d.substring(c+1));if(e.length!==1){a("Macro definitions can only be one character",d,o);return}var m="HIJKLMNOPQRSTUVWXYhijklmnopqrstuvw~";if(m.indexOf(e)===-1){a("Macro definitions must be H-Y, h-w, or tilde",d,o);return}if(u.length===0){a("Missing macro definition",d,o);return}n.macros===void 0&&(n.macros={}),n.macros[e]=u},this.setDefaultLength=function(d,o,r){var c=d.substring(o,r).replace(/ /g,""),e=c.split("/");if(e.length===2){var u=parseInt(e[0]),m=parseInt(e[1]);m>0&&(n.default_length=u/m,n.havent_set_length=!1)}else e.length===1&&e[0]==="1"&&(n.default_length=1,n.havent_set_length=!1)};var v={larghissimo:20,adagissimo:24,sostenuto:28,grave:32,largo:40,lento:50,larghetto:60,adagio:68,adagietto:74,andante:80,andantino:88,"marcia moderato":84,"andante moderato":100,moderato:112,allegretto:116,"allegro moderato":120,allegro:126,animato:132,agitato:140,veloce:148,"mosso vivo":156,vivace:164,vivacissimo:172,allegrissimo:176,presto:184,prestissimo:210};this.setTempo=function(d,o,r,c){try{var e=t.tokenize(d,o,r);if(e.length===0)throw"Missing parameter in Q: field";var u={startChar:c+o-2,endChar:c+r},m=!0,b=e.shift();if(b.type==="quote"&&(u.preString=b.token,b=e.shift(),e.length===0))return v[u.preString.toLowerCase()]&&(u.bpm=v[u.preString.toLowerCase()],u.suppressBpm=!0),{type:"immediate",tempo:u};if(b.type==="alpha"&&b.token==="C"){if(e.length===0)throw"Missing tempo after C in Q: field";if(b=e.shift(),b.type==="punct"&&b.token==="="){if(e.length===0)throw"Missing tempo after = in Q: field";if(b=e.shift(),b.type!=="number")throw"Expected number after = in Q: field";u.duration=[1],u.bpm=parseInt(b.token)}else if(b.type==="number"){if(u.duration=[parseInt(b.token)],e.length===0)throw"Missing = after duration in Q: field";if(b=e.shift(),b.type!=="punct"||b.token!=="=")throw"Expected = after duration in Q: field";if(e.length===0)throw"Missing tempo after = in Q: field";if(b=e.shift(),b.type!=="number")throw"Expected number after = in Q: field";u.bpm=parseInt(b.token)}else throw"Expected number or equal after C in Q: field"}else if(b.type==="number"){var x=parseInt(b.token);if(e.length===0||e[0].type==="quote")u.duration=[1],u.bpm=x;else{if(m=!1,b=e.shift(),b.type!=="punct"&&b.token!=="/"||(b=e.shift(),b.type!=="number"))throw"Expected fraction in Q: field";var T=parseInt(b.token);for(u.duration=[x/T];e.length>0&&e[0].token!=="="&&e[0].type!=="quote";){if(b=e.shift(),b.type!=="number"||(x=parseInt(b.token),b=e.shift(),b.type!=="punct"&&b.token!=="/")||(b=e.shift(),b.type!=="number"))throw"Expected fraction in Q: field";T=parseInt(b.token),u.duration.push(x/T)}if(b=e.shift(),b.type!=="punct"&&b.token!=="=")throw"Expected = in Q: field";if(b=e.shift(),b.type!=="number")throw"Expected tempo in Q: field";u.bpm=parseInt(b.token)}}else throw"Unknown value in Q: field";if(e.length!==0&&(b=e.shift(),b.type==="quote"&&(u.postString=b.token,b=e.shift()),e.length!==0))throw"Unexpected string at end of Q: field";return n.printTempo===!1&&(u.suppress=!0),{type:m?"delaySet":"immediate",tempo:u}}catch(E){return a(E,d,o),{type:"none"}}},this.letter_to_inline_header=function(d,o,r){var c=!1,e=t.eatWhiteSpace(d,o);if(o+=e,d.length>=o+5&&d[o]==="["&&d[o+2]===":"){var u=d.indexOf("]",o),m=n.iChar+o,b=n.iChar+u+1;switch(d.substring(o,o+3)){case"[I:":var x=l.addDirective(d.substring(o+3,u));return x&&a(x,d,o),[u-o+1+e];case"[M:":var T=this.setMeter(d.substring(o+3,u));return f.hasBeginMusic()&&T?f.appendStartingElement("meter",m,b,T):n.meter=T,[u-o+1+e];case"[K:":var E=h.parseKey(d.substring(o+3,u),!0);return E.foundClef&&f.hasBeginMusic()&&f.appendStartingElement("clef",m,b,n.clef),E.foundKey&&f.hasBeginMusic()&&f.appendStartingElement("key",m,b,h.fixKey(n.clef,n.key)),[u-o+1+e];case"[P:":var D=l.parseFontChangeLine(d.substring(o+3,u));return r||i.lines.length<=i.lineNum?n.partForNextLine={title:D,startChar:m,endChar:b}:f.appendElement("part",m,b,{title:D}),[u-o+1+e];case"[L:":return this.setDefaultLength(d,o+3,u),[u-o+1+e];case"[Q:":if(u>0){var F=this.setTempo(d,o+3,u,n.iChar);return F.type==="delaySet"?f.hasBeginMusic()?f.appendElement("tempo",m,b,this.calcTempo(F.tempo)):n.tempoForNextLine=["tempo",m,b,this.calcTempo(F.tempo)]:F.type==="immediate"&&(!r&&f.hasBeginMusic()?f.appendElement("tempo",m,b,F.tempo):n.tempoForNextLine=["tempo",m,b,F.tempo]),[u-o+1+e,d[o+1],d.substring(o+3,u)]}break;case"[V:":if(u>0)return c=h.parseVoice(d,o+3,u),[u-o+1+e,d[o+1],d.substring(o+3,u),c];break;case"[r:":return[u-o+1+e]}}return[0]},this.letter_to_body_header=function(d,o){var r=!1;if(d.length>=o+3)switch(d.substring(o,o+2)){case"I:":var c=l.addDirective(d.substring(o+2));return c&&a(c,d,o),[d.length];case"M:":var e=this.setMeter(d.substring(o+2));return f.hasBeginMusic()&&e&&f.appendStartingElement("meter",n.iChar+o,n.iChar+d.length,e),[d.length];case"K:":var u=h.parseKey(d.substring(o+2),f.hasBeginMusic());return u.foundClef&&f.hasBeginMusic()&&n.keywarn!==!1&&f.appendStartingElement("clef",n.iChar+o,n.iChar+d.length,n.clef),u.foundKey&&f.hasBeginMusic()&&n.keywarn!==!1&&f.appendStartingElement("key",n.iChar+o,n.iChar+d.length,h.fixKey(n.clef,n.key)),[d.length];case"P:":return f.hasBeginMusic()&&f.appendElement("part",n.iChar+o,n.iChar+d.length,{title:d.substring(o+2)}),[d.length];case"L:":return this.setDefaultLength(d,o+2,d.length),[d.length];case"Q:":var m=d.indexOf("",o+2);m===-1&&(m=d.length);var b=this.setTempo(d,o+2,m,n.iChar);return b.type==="delaySet"?f.appendElement("tempo",n.iChar+o,n.iChar+d.length,this.calcTempo(b.tempo)):b.type==="immediate"&&f.appendElement("tempo",n.iChar+o,n.iChar+d.length,b.tempo),[m,d[o],p.strip(d.substring(o+2))];case"V:":return r=h.parseVoice(d,o+2,d.length),[d.length,d[o],p.strip(d.substring(o+2)),r]}return[0]};var g={A:"author",B:"book",C:"composer",D:"discography",F:"url",G:"group",I:"instruction",N:"notes",O:"origin",R:"rhythm",S:"source",W:"unalignedWords",Z:"transcription"};this.parseHeader=function(d){var o=g[d[0]],r=d.length-2,c=t.translateString(t.stripComment(d.substring(2)));if(o==="unalignedWords"||o==="notes")f.addMetaTextArray(o,l.parseFontChangeLine(c),{startChar:n.iChar,endChar:n.iChar+d.length});else if(o!==void 0)f.addMetaText(o,l.parseFontChangeLine(c),{startChar:n.iChar,endChar:n.iChar+d.length});else{var e=n.iChar,u=e+d.length;switch(d[0]){case"H":for(f.addMetaTextArray("history",l.parseFontChangeLine(c),{startChar:n.iChar,endChar:n.iChar+d.length}),d=t.peekLine();d&&d[1]!==":";)t.nextLine(),f.addMetaTextArray("history",l.parseFontChangeLine(t.translateString(t.stripComment(d))),{startChar:n.iChar,endChar:n.iChar+d.length}),d=t.peekLine();break;case"K":this.resolveTempo();var m=h.parseKey(d.substring(2),!1);!n.is_in_header&&f.hasBeginMusic()&&n.keywarn!==!1&&(m.foundClef&&f.appendStartingElement("clef",e,u,n.clef),m.foundKey&&f.appendStartingElement("key",e,u,h.fixKey(n.clef,n.key))),n.is_in_header=!1;break;case"L":this.setDefaultLength(d,2,d.length);break;case"M":n.origMeter=n.meter=this.setMeter(d.substring(2));break;case"P":n.is_in_header?f.addMetaText("partOrder",l.parseFontChangeLine(c),{startChar:n.iChar,endChar:n.iChar+d.length}):n.partForNextLine={title:c,startChar:e,endChar:u};break;case"Q":var b=this.setTempo(d,2,d.length,n.iChar);b.type==="delaySet"?n.tempo=b.tempo:b.type==="immediate"&&(i.metaText.tempo?n.tempoForNextLine=["tempo",e,u,b.tempo]:i.metaText.tempo=b.tempo);break;case"T":n.titlecaps&&(c=c.toUpperCase()),this.setTitle(l.parseFontChangeLine(t.theReverser(c)),r);break;case"U":this.addUserDefinition(d,2,d.length);break;case"V":if(h.parseVoice(d,2,d.length),!n.is_in_header)return{newline:!0};break;case"s":return{symbols:!0};case"w":return{words:!0};case"X":break;case"E":case"m":a("Ignored header",d,0);break;default:return{regular:!0}}}return{}}};return Lt=s,Lt}var Me={},Ga;function tc(){return Ga||(Ga=1,Me.legalAccents=["trill","trillh","lowermordent","uppermordent","mordent","pralltriller","accent","fermata","invertedfermata","tenuto","0","1","2","3","4","5","+","wedge","open","thumb","snap","turn","roll","breath","shortphrase","mediumphrase","longphrase","segno","coda","D.S.","D.C.","fine","beambr1","beambr2","slide","marcato","upbow","downbow","/","//","///","////","trem1","trem2","trem3","trem4","turnx","invertedturn","invertedturnx","trill(","trill)","arpeggio","xstem","mark","umarcato","style=normal","style=harmonic","style=rhythm","style=x","style=triangle","D.C.alcoda","D.C.alfine","D.S.alcoda","D.S.alfine","editorial","courtesy"],Me.volumeDecorations=["p","pp","f","ff","mf","mp","ppp","pppp","fff","ffff","sfz"],Me.dynamicDecorations=["crescendo(","crescendo)","diminuendo(","diminuendo)","glissando(","glissando)","~(","~)"],Me.accentPseudonyms=[["<","accent"],[">","accent"],["tr","trill"],["plus","+"],["emphasis","accent"],["^","umarcato"],["marcato","umarcato"]],Me.accentDynamicPseudonyms=[["<(","crescendo("],["<)","crescendo)"],[">(","diminuendo("],[">)","diminuendo)"]],Me.nonDecorations="ABCDEFGabcdefgxyzZ[]|^_{",Me.durations=[.5,.75,.875,.9375,.96875,.984375,.25,.375,.4375,.46875,.484375,.4921875,.125,.1875,.21875,.234375,.2421875,.24609375,.0625,.09375,.109375,.1171875,.12109375,.123046875,.03125,.046875,.0546875,.05859375,.060546875,.0615234375,.015625,.0234375,.02734375,.029296875,.0302734375,.03076171875],Me.pitches={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11},Me.rests={x:"invisible",X:"invisible-multimeasure",y:"spacer",z:"rest",Z:"multimeasure"},Me.accMap={dblflat:"__",flat:"_",natural:"=",sharp:"^",dblsharp:"^^",quarterflat:"_/",quartersharp:"^/"},Me.tripletQ={2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2}),Me}var Pt,Ya;function rc(){if(Ya)return Pt;Ya=1;var p=va(),l=Fs(),h,s,t,a,n,i,{legalAccents:f,volumeDecorations:v,dynamicDecorations:g,accentPseudonyms:d,accentDynamicPseudonyms:o,nonDecorations:r,durations:c,pitches:e,rests:u,accMap:m,tripletQ:b}=tc(),x=function(w,C,k,q,R,z){h=w,s=C,t=k,a=q,n=R,i=z,this.lineContinuation=!1},T=function(w,C,k){if(w.inTie[C]===void 0)return!1;var q=w.currentVoice?w.currentVoice.staffNum*100+w.currentVoice.index:0;return!!(w.inTie[C][q]&&(k.pitches!==void 0||k.rest.type!=="spacer"))},E={};x.prototype.parseMusic=function(w){i.resolveTempo(),t.is_in_header=!1;for(var C=0,k=t.iChar;h.isWhiteSpace(w[C])&&C<w.length;)C++;if(!(C===w.length||w[C]==="%")){var q=t.start_new_line;t.continueall===void 0?t.start_new_line=!0:t.start_new_line=!1;var R=0,z=i.letter_to_body_header(w,C);z[0]>0&&(C+=z[0],z[1]==="V"&&this.startNewLine());for(var H=0;C<w.length;){var X=C;if(w[C]==="%")break;var Q=i.letter_to_inline_header(w,C,q);if(Q[0]>0)C+=Q[0],Q[1]==="V"&&(q=!0);else{(!n.hasBeginMusic()||q&&!this.lineContinuation)&&(this.startNewLine(),q=!1);for(var U;;)if(U=h.eatWhiteSpace(w,C),U>0&&(C+=U),C>0&&w[C-1]===""&&(U=i.letter_to_body_header(w,C),U[0]>0&&(U[1]==="V"&&this.startNewLine(),C=U[0],t.start_new_line=!1)),U=L(w,C),U[0]>0&&(C+=U[0]),U=F(w,C),U[0]>0){E.chord||(E.chord=[]);var ee=h.translateString(U[1]);ee=ee.replace(/;/g,`
`);for(var te=!1,ne=0;ne<E.chord.length;ne++)E.chord[ne].position===U[2]&&(te=!0,E.chord[ne].name+=`
`+ee);te===!1&&(U[2]===null&&U[3]?E.chord.push({name:ee,rel_position:U[3]}):E.chord.push({name:ee,position:U[2]})),C+=U[0];var V=h.skipWhiteSpace(w.substring(C));V>0&&(E.force_end_beam_last=!0),C+=V}else if(r.indexOf(w[C])===-1?U=M(w,C):U=[0],U[0]>0)U[1]===null?C+1<w.length&&this.startNewLine():U[1].length>0&&(U[1].indexOf("style=")===0?E.style=U[1].substr(6):(E.decoration===void 0&&(E.decoration=[]),U[1]==="beambr1"?E.beambr=1:U[1]==="beambr2"?E.beambr=2:E.decoration.push(U[1]))),C+=U[0];else if(U=y(w,C),U[0]>0)E.gracenotes=U[1],C+=U[0];else break;if(U=B(w,C),U[0]>0){H=0,E.gracenotes!==void 0&&(E.rest={type:"spacer"},E.duration=.125,t.addFormattingOptions(E,a.formatting,"note"),n.appendElement("note",k+C,k+C+U[0],E),t.measureNotEmpty=!0,E={});var ae={type:U[1]};ae.type.length===0?s("Unknown bar type",w,C):(t.inEnding&&ae.type!=="bar_thin"&&(ae.endEnding=!0,t.inEnding=!1),U[2]&&(ae.startEnding=U[2],t.inEnding&&(ae.endEnding=!0),t.inEnding=!0,U[1]==="bar_right_repeat"?t.restoreStartEndingHoldOvers():t.duplicateStartEndingHoldOvers()),E.decoration!==void 0&&(ae.decoration=E.decoration),E.chord!==void 0&&(ae.chord=E.chord),ae.startEnding&&t.barFirstEndingNum===void 0?t.barFirstEndingNum=t.currBarNumber:ae.startEnding&&ae.endEnding&&t.barFirstEndingNum?t.currBarNumber=t.barFirstEndingNum:ae.endEnding&&(t.barFirstEndingNum=void 0),ae.type!=="bar_invisible"&&t.measureNotEmpty&&I()&&(t.currBarNumber++,t.barNumbers&&t.currBarNumber%t.barNumbers===0&&(ae.barNumber=t.currBarNumber)),t.addFormattingOptions(E,a.formatting,"bar"),n.appendElement("bar",k+X,k+C+U[0],ae),t.measureNotEmpty=!1,E={}),C+=U[0]}else if(w[C]==="&")U=A(w,C),U[0]>0&&(n.appendElement("overlay",k,k+1,{}),C+=1,H++);else{if(U=S(w,C),U.consumed>0&&(U.startSlur!==void 0&&(E.startSlur=U.startSlur),U.dottedSlur&&(E.dottedSlur=!0),U.triplet!==void 0&&(R>0?s("Can't nest triplets",w,C):(E.startTriplet=U.triplet,E.tripletMultiplier=U.tripletQ/U.triplet,E.tripletR=U.num_notes,R=U.num_notes===void 0?U.triplet:U.num_notes)),C+=U.consumed),w[C]==="["){C++;for(var K=null,se=!1,ce=!1;!ce;){var ue=M(w,C);ue[0]>0&&(C+=ue[0]);var le=P(w,C,{},!1);if(le!==null&&le.pitch!==void 0)ue[0]>0&&ue[1].indexOf("style=")!==0&&(E.decoration===void 0&&(E.decoration=[]),E.decoration.push(ue[1])),le.end_beam&&(E.end_beam=!0,delete le.end_beam),E.pitches===void 0?(E.duration=le.duration,E.pitches=[le]):E.pitches.push(le),delete le.duration,ue[0]>0&&ue[1].indexOf("style=")===0&&(E.pitches[E.pitches.length-1].style=ue[1].substr(6)),t.inTieChord[E.pitches.length]&&(le.endTie=!0,t.inTieChord[E.pitches.length]=void 0),le.startTie&&(t.inTieChord[E.pitches.length]=!0),C=le.endChar,delete le.endChar;else if(w[C]===" ")s("Spaces are not allowed in chords",w,C),C++;else{if(C<w.length&&w[C]==="]"){C++,t.next_note_duration!==0&&(E.duration=E.duration*t.next_note_duration,t.next_note_duration=0),T(t,H,E)&&(E.pitches.forEach(function(j){j.endTie=!0}),D(t,H,!1)),R>0&&!(E.rest&&E.rest.type==="spacer")&&(R--,R===0&&(E.endTriplet=!0));for(var ge=!1;C<w.length&&!ge;){switch(w[C]){case" ":case"	":_(E);break;case")":E.endSlur===void 0?E.endSlur=1:E.endSlur++;break;case"-":E.pitches.forEach(function(j){j.startTie={}}),D(t,H,!0);break;case">":case"<":var ve=O(w,C);C+=ve[0]-1,t.next_note_duration=ve[2],K?K=K*ve[1]:K=ve[1];break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":var we=h.getFraction(w,C);K=we.value,C=we.index;var Y=w[C];Y===" "&&(se=!0),Y==="-"||Y===")"||Y===" "||Y==="<"||Y===">"?C--:ge=!0;break;case"0":K=0;break;default:ge=!0;break}ge||C++}}else s("Expected ']' to end the chords",w,C);E.pitches!==void 0&&(K!==null&&(E.duration=E.duration*K,se&&_(E)),t.addFormattingOptions(E,a.formatting,"note"),n.appendElement("note",k+X,k+C,E),t.measureNotEmpty=!0,E={}),ce=!0}}}else{var $={},G=P(w,C,$,!0);if($.endTie!==void 0&&D(t,H,!0),G!==null){G.pitch!==void 0?(E.pitches=[{}],G.accidental!==void 0&&(E.pitches[0].accidental=G.accidental),E.pitches[0].pitch=G.pitch,E.pitches[0].name=G.name,(G.midipitch||G.midipitch===0)&&(E.pitches[0].midipitch=G.midipitch),G.endSlur!==void 0&&(E.pitches[0].endSlur=G.endSlur),G.endTie!==void 0&&(E.pitches[0].endTie=G.endTie),G.startSlur!==void 0&&(E.pitches[0].startSlur=G.startSlur),E.startSlur!==void 0&&(E.pitches[0].startSlur=E.startSlur),E.dottedSlur!==void 0&&(E.pitches[0].dottedSlur=!0),G.startTie!==void 0&&(E.pitches[0].startTie=G.startTie),E.startTie!==void 0&&(E.pitches[0].startTie=E.startTie)):(E.rest=G.rest,G.rest.type==="multimeasure"&&I()&&(t.currBarNumber+=G.rest.text-1),G.endSlur!==void 0&&(E.endSlur=G.endSlur),G.endTie!==void 0&&(E.rest.endTie=G.endTie),G.startSlur!==void 0&&(E.startSlur=G.startSlur),G.startTie!==void 0&&(E.rest.startTie=G.startTie),E.startTie!==void 0&&(E.rest.startTie=E.startTie)),G.chord!==void 0&&(E.chord=G.chord),G.duration!==void 0&&(E.duration=G.duration),G.decoration!==void 0&&(E.decoration=G.decoration),G.graceNotes!==void 0&&(E.graceNotes=G.graceNotes),delete E.startSlur,delete E.dottedSlur,T(t,H,E)&&(E.pitches!==void 0?E.pitches[0].endTie=!0:E.rest.type!=="spacer"&&(E.rest.endTie=!0),D(t,H,!1)),(G.startTie||E.startTie)&&D(t,H,!0),C=G.endChar,R>0&&!(G.rest&&G.rest.type==="spacer")&&(R--,R===0&&(E.endTriplet=!0)),G.end_beam&&_(E),E.rest&&E.rest.type==="rest"&&E.duration===1&&N(t)<=1&&(E.rest.type="whole",E.duration=N(t)),E.duration<1&&c.indexOf(E.duration)===-1&&E.duration!==0&&(!E.rest||E.rest.type!=="spacer")&&s("Duration not representable: "+w.substring(X,C),w,C),t.addFormattingOptions(E,a.formatting,"note");var W=n.appendElement("note",k+X,k+C,E);W||(this.startNewLine(),n.appendElement("note",k+X,k+C,E)),t.measureNotEmpty=!0,E={}}}C===X&&(w[C]!==" "&&w[C]!=="`"&&s("Unknown character ignored",w,C),C++)}}}this.lineContinuation=w.indexOf("")>=0||z[0]>0,this.lineContinuation||(E={})}};var D=function(w,C,k){var q=w.currentVoice?w.currentVoice.staffNum*100+w.currentVoice.index:0;w.inTie[C]===void 0&&(w.inTie[C]=[]),w.inTie[C][q]=k},F=function(w,C){if(w[C]==='"'){var k=h.getBrackettedSubstring(w,C,5);if(k[2]||s("Missing the closing quote while parsing the chord symbol",w,C),k[0]>0&&k[1].length>0&&k[1][0]==="^")k[1]=k[1].substring(1),k[2]="above";else if(k[0]>0&&k[1].length>0&&k[1][0]==="_")k[1]=k[1].substring(1),k[2]="below";else if(k[0]>0&&k[1].length>0&&k[1][0]==="<")k[1]=k[1].substring(1),k[2]="left";else if(k[0]>0&&k[1].length>0&&k[1][0]===">")k[1]=k[1].substring(1),k[2]="right";else if(k[0]>0&&k[1].length>0&&k[1][0]==="@"){k[1]=k[1].substring(1);var q=h.getFloat(k[1]);if(q.digits===0)return s("Missing first position in absolutely positioned annotation.",w,C),k[1]=k[1].replace("@",""),k[2]="above",k;if(k[1]=k[1].substring(q.digits),k[1][0]!==",")return s("Missing comma absolutely positioned annotation.",w,C),k[1]=k[1].replace("@",""),k[2]="above",k;k[1]=k[1].substring(1);var R=h.getFloat(k[1]);if(R.digits===0)return s("Missing second position in absolutely positioned annotation.",w,C),k[1]=k[1].replace("@",""),k[2]="above",k;k[1]=k[1].substring(R.digits);var z=h.skipWhiteSpace(k[1]);k[1]=k[1].substring(z),k[2]=null,k[3]={x:q.value,y:R.value}}else t.freegchord!==!0&&(k[1]=k[1].replace(/([ABCDEFG0-9])b/g,"$1"),k[1]=k[1].replace(/([ABCDEFG0-9])#/g,"$1"),k[1]=k[1].replace(/^([ABCDEFG])([]?)o([^A-Za-z])/g,"$1$2$3"),k[1]=k[1].replace(/^([ABCDEFG])([]?)o$/g,"$1$2"),k[1]=k[1].replace(/^([ABCDEFG])([]?)0([^A-Za-z])/g,"$1$2$3"),k[1]=k[1].replace(/^([ABCDEFG])([]?)\^([^A-Za-z])/g,"$1$2$3")),k[2]="default",k[1]=l.chordName(t,k[1]);return k}return[0,""]},y=function(w,C){if(w[C]==="{"){var k=h.getBrackettedSubstring(w,C,1,"}");k[2]||s("Missing the closing '}' while parsing grace note",w,C),w[C+k[0]]===")"&&(k[0]++,k[1]+=")");for(var q=[],R=0,z=!1;R<k[1].length;){var H=!1;k[1][R]==="/"&&(H=!0,R++);var X=P(k[1],R,{},!1);X!==null?(X.duration=X.duration/(t.default_length*8),H&&(X.acciaccatura=!0),X.rest?s("Rests not allowed as grace notes '"+k[1][R]+"' while parsing grace note",w,C):q.push(X),z&&(X.endTie=!0,z=!1),X.startTie&&(z=!0),R=X.endChar,delete X.endChar,X.end_beam&&(X.endBeam=!0,delete X.end_beam)):(k[1][R]===" "?q.length>0&&(q[q.length-1].endBeam=!0):s("Unknown character '"+k[1][R]+"' while parsing grace note",w,C),R++)}if(q.length)return[k[0],q]}return[0]};function A(w,C){if(w[C]==="&"){for(var k=C;w[C]&&w[C]!==":"&&w[C]!=="|";)C++;return[C-k,w.substring(k+1,C)]}return[0]}function N(w){var C=w.origMeter;return!C||C.type!=="specified"||!C.value||C.value.length===0?1:parseInt(C.value[0].num,10)/parseInt(C.value[0].den,10)}var M=function(w,C){var k=t.macros[w[C]];if(k!==void 0)return(k[0]==="!"||k[0]==="+")&&(k=k.substring(1)),(k[k.length-1]==="!"||k[k.length-1]==="+")&&(k=k.substring(0,k.length-1)),f.includes(k)?[1,k]:v.includes(k)?(t.volumePosition==="hidden"&&(k=""),[1,k]):g.includes(k)?(t.dynamicPosition==="hidden"&&(k=""),[1,k]):(t.ignoredDecorations.includes(k)||s("Unknown macro: "+k,w,C),[1,""]);switch(w[C]){case".":if(w[C+1]==="("||w[C+1]==="-")break;return[1,"staccato"];case"u":return[1,"upbow"];case"v":return[1,"downbow"];case"~":return[1,"irishroll"];case"!":case"+":var q=h.getBrackettedSubstring(w,C,5);if(q[1].length>1&&(q[1][0]==="^"||q[1][0]==="_")&&(q[1]=q[1].substring(1)),f.includes(q[1]))return q;if(v.includes(q[1]))return t.volumePosition==="hidden"&&(q[1]=""),q;if(g.includes(q[1]))return t.dynamicPosition==="hidden"&&(q[1]=""),q;var R=d.findIndex(function(z){return q[1]===z[0]});return R>=0?(q[1]=d[R][1],q):(R=o.findIndex(function(z){return q[1]===z[0]}),R>=0?(q[1]=o[R][1],t.dynamicPosition==="hidden"&&(q[1]=""),q):w[C]==="!"&&(q[0]===1||w[C+q[0]-1]!=="!")?[1,null]:(s("Unknown decoration: "+q[1],w,C),q[1]="",q));case"H":return[1,"fermata"];case"J":return[1,"slide"];case"L":return[1,"accent"];case"M":return[1,"mordent"];case"O":return[1,"coda"];case"P":return[1,"pralltriller"];case"R":return[1,"roll"];case"S":return[1,"segno"];case"T":return[1,"trill"];case"t":return[1,"trillh"]}return[0,0]},L=function(w,C){for(var k=C;h.isWhiteSpace(w[C]);)C++;return[C-k]},B=function(w,C){var k=h.getBarLine(w,C);if(k.len===0)return[0,""];if(k.warn)return s(k.warn,w,C),[k.len,""];for(var q=0;q<w.length&&w[C+k.len+q]===" ";q++);var R=k.len;if(w[C+k.len+q]==="["&&(k.len+=q+1),w[C+k.len]==='"'&&w[C+k.len-1]==="["){var z=h.getBrackettedSubstring(w,C+k.len,5);return[k.len+z[0],k.token,z[1]]}var H=h.getTokenOf(w.substring(C+k.len),"1234567890-,");return H.len===0||H.token[0]==="-"?[R,k.token]:[k.len+H.len,k.token,H.token]},S=function(w,C){var k={},q=C;for(w[C]==="."&&w[C+1]==="("&&(k.dottedSlur=!0,C++);w[C]==="("||h.isWhiteSpace(w[C]);)w[C]==="("&&(C+1<w.length&&w[C+1]>="2"&&w[C+1]<="9"?(k.triplet!==void 0?s("Can't nest triplets",w,C):(k.triplet=w[C+1]-"0",k.tripletQ=b[k.triplet],k.num_notes=k.triplet,C+2<w.length&&w[C+2]===":"&&(C+3<w.length&&w[C+3]===":"?C+4<w.length&&w[C+4]>="1"&&w[C+4]<="9"?(k.num_notes=w[C+4]-"0",C+=3):s("expected number after the two colons after the triplet to mark the duration",w,C):C+3<w.length&&w[C+3]>="1"&&w[C+3]<="9"?(k.tripletQ=w[C+3]-"0",C+4<w.length&&w[C+4]===":"?C+5<w.length&&w[C+5]>="1"&&w[C+5]<="9"&&(k.num_notes=w[C+5]-"0",C+=4):C+=2):s("expected number after the triplet to mark the duration",w,C))),C++):k.startSlur===void 0?k.startSlur=1:k.startSlur++),C++;return k.consumed=C-q,k};x.prototype.startNewLine=function(){var w={startChar:-1,endChar:-1};t.partForNextLine.title&&(w.part=t.partForNextLine),w.clef=t.currentVoice&&t.staves[t.currentVoice.staffNum].clef!==void 0?Object.assign({},t.staves[t.currentVoice.staffNum].clef):Object.assign({},t.clef);var C=t.currentVoice?t.currentVoice.scoreTranspose:0;if(w.key=p.standardKey(t.key.root+t.key.acc+t.key.mode,t.key.root,t.key.acc,C),w.key.mode=t.key.mode,t.key.impliedNaturals&&(w.key.impliedNaturals=t.key.impliedNaturals),t.key.explicitAccidentals)for(var k=0;k<t.key.explicitAccidentals.length;k++){for(var q=!1,R=0;R<w.key.accidentals.length;R++)w.key.accidentals[R].note===t.key.explicitAccidentals[k].note&&(w.key.accidentals[R].acc=t.key.explicitAccidentals[k].acc,q=!0);q||w.key.accidentals.push(t.key.explicitAccidentals[k])}if(t.targetKey=w.key,w.key.explicitAccidentals&&delete w.key.explicitAccidentals,p.addPosToKey(w.clef,w.key),t.meter!==null?(t.currentVoice?(t.staves.forEach(function(Q){Q.meter=t.meter}),w.meter=t.staves[t.currentVoice.staffNum].meter,t.staves[t.currentVoice.staffNum].meter=null):w.meter=t.meter,t.meter=null):t.currentVoice&&t.staves[t.currentVoice.staffNum].meter&&(w.meter=t.staves[t.currentVoice.staffNum].meter,t.staves[t.currentVoice.staffNum].meter=null),t.currentVoice&&t.currentVoice.name&&(w.name=t.currentVoice.name),t.vocalfont&&(w.vocalfont=t.vocalfont),t.tripletfont&&(w.tripletfont=t.tripletfont),t.gchordfont&&(w.gchordfont=t.gchordfont),t.style&&(w.style=t.style),t.currentVoice){var z=t.staves[t.currentVoice.staffNum];z.brace&&(w.brace=z.brace),z.bracket&&(w.bracket=z.bracket),z.connectBarLines&&(w.connectBarLines=z.connectBarLines),z.name&&(w.name=z.name[t.currentVoice.index]),z.subname&&(w.subname=z.subname[t.currentVoice.index]),t.currentVoice.stem&&(w.stem=t.currentVoice.stem),t.currentVoice.stafflines&&(w.stafflines=t.currentVoice.stafflines),t.currentVoice.staffscale&&(w.staffscale=t.currentVoice.staffscale),t.currentVoice.scale&&(w.scale=t.currentVoice.scale),t.currentVoice.color&&(w.color=t.currentVoice.color),t.currentVoice.style&&(w.style=t.currentVoice.style),t.currentVoice.transpose&&(w.clef.transpose=t.currentVoice.transpose),w.currentVoice=t.currentVoice;for(var H=Object.keys(t.voices),X=0;X<H.length;X++)w.currentVoice.staffNum===t.voices[H[X]].staffNum&&w.currentVoice.index===t.voices[H[X]].index&&(w.currentVoiceName=H[X])}t.barNumbers===0&&I()&&t.currBarNumber!==1&&(w.barNumber=t.currBarNumber),n.startNewLine(w),t.key.impliedNaturals&&delete t.key.impliedNaturals,t.partForNextLine={},t.tempoForNextLine.length===4&&n.appendElement(t.tempoForNextLine[0],t.tempoForNextLine[1],t.tempoForNextLine[2],t.tempoForNextLine[3]),t.tempoForNextLine=[]};var _=function(w){return w.duration!==void 0&&w.duration<.25&&(w.end_beam=!0),w},P=function(w,C,k,q){var R=function(ne){return ne==="octave"||ne==="duration"||ne==="Zduration"||ne==="broken_rhythm"||ne==="end_slur"},z;w[C]==="."&&w[C+1]==="-"&&(z=!0,C++);for(var H="startSlur",X=!1;;){switch(w[C]){case"(":if(H==="startSlur")k.startSlur===void 0?k.startSlur=1:k.startSlur++;else return R(H)?(k.endChar=C,k):null;break;case")":if(R(H))k.endSlur===void 0?k.endSlur=1:k.endSlur++;else return null;break;case"^":if(H==="startSlur")k.accidental="sharp",H="sharp2";else if(H==="sharp2")k.accidental="dblsharp",H="pitch";else return R(H)?(k.endChar=C,k):null;break;case"_":if(H==="startSlur")k.accidental="flat",H="flat2";else if(H==="flat2")k.accidental="dblflat",H="pitch";else return R(H)?(k.endChar=C,k):null;break;case"=":if(H==="startSlur")k.accidental="natural",H="pitch";else return R(H)?(k.endChar=C,k):null;break;case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"a":case"b":case"c":case"d":case"e":case"f":case"g":if(H==="startSlur"||H==="sharp2"||H==="flat2"||H==="pitch"){if(k.pitch=e[w[C]],k.pitch+=7*(t.currentVoice&&t.currentVoice.octave!==void 0?t.currentVoice.octave:t.octave),k.name=w[C],k.accidental&&(k.name=m[k.accidental]+k.name),l.note(t,k),H="octave",q&&t.next_note_duration!==0?(k.duration=t.default_length*t.next_note_duration,t.next_note_duration=0,X=!0):k.duration=t.default_length,t.clef&&t.clef.type==="perc"||t.currentVoice&&t.currentVoice.clef==="perc"){var Q=w[C];k.accidental&&(Q=m[k.accidental]+Q),a.formatting&&a.formatting.midi&&a.formatting.midi.drummap&&(k.midipitch=a.formatting.midi.drummap[Q])}}else return R(H)?(k.endChar=C,k):null;break;case",":if(H==="octave")k.pitch-=7,k.name+=",";else return R(H)?(k.endChar=C,k):null;break;case"'":if(H==="octave")k.pitch+=7,k.name+="'";else return R(H)?(k.endChar=C,k):null;break;case"x":case"X":case"y":case"z":case"Z":if(H==="startSlur")k.rest={type:u[w[C]]},delete k.accidental,delete k.startSlur,delete k.startTie,delete k.endSlur,delete k.endTie,delete k.end_beam,delete k.grace_notes,k.rest.type.indexOf("multimeasure")>=0?(k.duration=a.getBarLength(),k.rest.text=1,H="Zduration"):(q&&t.next_note_duration!==0?(k.duration=t.default_length*t.next_note_duration,t.next_note_duration=0,X=!0):k.duration=t.default_length,H="duration");else return R(H)?(k.endChar=C,k):null;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"/":if(H==="octave"||H==="duration"){var U=h.getFraction(w,C);for(k.duration=k.duration*U.value,k.endChar=U.index;U.index<w.length&&(h.isWhiteSpace(w[U.index])||w[U.index]==="-");)w[U.index]==="-"?k.startTie={}:k=_(k),U.index++;C=U.index-1,H="broken_rhythm"}else if(H==="sharp2")k.accidental="quartersharp",H="pitch";else if(H==="flat2")k.accidental="quarterflat",H="pitch";else if(H==="Zduration"){var ee=h.getNumber(w,C);return k.duration=ee.num*a.getBarLength(),k.rest.text=ee.num,k.endChar=ee.index,k}else return null;break;case"-":if(H==="startSlur")n.addTieToLastNote(z),k.endTie=!0;else if(H==="octave"||H==="duration"||H==="end_slur")if(k.startTie={},!X&&q)H="broken_rhythm";else return h.isWhiteSpace(w[C+1])&&_(k),k.endChar=C+1,k;else return H==="broken_rhythm"?(k.endChar=C,k):null;break;case" ":case"	":if(R(H)){k.end_beam=!0,z=!1;do w[C]==="."&&w[C+1]==="-"&&(z=!0,C++),w[C]==="-"&&(k.startTie={},z&&(k.startTie.style="dotted")),C++;while(C<w.length&&(h.isWhiteSpace(w[C])||w[C]==="-")||w[C]==="."&&w[C+1]==="-");if(k.endChar=C,!X&&q&&(w[C]==="<"||w[C]===">"))C--,H="broken_rhythm";else return k}else return null;break;case">":case"<":if(R(H))if(q){var te=O(w,C);C+=te[0]-1,t.next_note_duration=te[2],k.duration=te[1]*k.duration,H="end_slur"}else return k.endChar=C,k;else return null;break;default:return R(H)?(k.endChar=C,k):null}if(C++,C===w.length)return R(H)?(k.endChar=C,k):null}return null},O=function(w,C){switch(w[C]){case">":return C<w.length-2&&w[C+1]===">"&&w[C+2]===">"?[3,1.875,.125]:C<w.length-1&&w[C+1]===">"?[2,1.75,.25]:[1,1.5,.5];case"<":return C<w.length-2&&w[C+1]==="<"&&w[C+2]==="<"?[3,.125,1.875]:C<w.length-1&&w[C+1]==="<"?[2,.25,1.75]:[1,.5,1.5]}return null};function I(){return t.currentVoice===void 0||t.currentVoice.staffNum===0&&t.currentVoice.index===0}return Pt=x,Pt}var qt,Wa;function ac(){if(Wa)return qt;Wa=1;var p=Fe(),l=function(h,s){this.lineIndex=0,this.lines=h,this.multilineVars=s,this.skipWhiteSpace=function(r){for(var c=0;c<r.length;c++)if(!this.isWhiteSpace(r[c]))return c;return r.length};var t=function(r,c){return c>=r.length};this.eatWhiteSpace=function(r,c){for(var e=c;e<r.length;e++)if(!this.isWhiteSpace(r[e]))return e-c;return e-c},this.getKeyPitch=function(r){var c=this.skipWhiteSpace(r);if(t(r,c))return{len:0};switch(r[c]){case"A":return{len:c+1,token:"A"};case"B":return{len:c+1,token:"B"};case"C":return{len:c+1,token:"C"};case"D":return{len:c+1,token:"D"};case"E":return{len:c+1,token:"E"};case"F":return{len:c+1,token:"F"};case"G":return{len:c+1,token:"G"}}return{len:0}},this.getSharpFlat=function(r){if(r==="bass")return{len:0};switch(r[0]){case"#":return{len:1,token:"#"};case"b":return{len:1,token:"b"}}return{len:0}},this.getMode=function(r){var c=function(m,b){for(;b<m.length&&(m[b]>="a"&&m[b]<="z"||m[b]>="A"&&m[b]<="Z");)b++;return b},e=this.skipWhiteSpace(r);if(t(r,e))return{len:0};var u=r.substring(e,e+3).toLowerCase();switch((u.length>1&&u[1]===" "||u[1]==="^"||u[1]==="_"||u[1]==="=")&&(u=u[0]),u){case"mix":return{len:c(r,e),token:"Mix"};case"dor":return{len:c(r,e),token:"Dor"};case"phr":return{len:c(r,e),token:"Phr"};case"lyd":return{len:c(r,e),token:"Lyd"};case"loc":return{len:c(r,e),token:"Loc"};case"aeo":return{len:c(r,e),token:"m"};case"maj":return{len:c(r,e),token:""};case"ion":return{len:c(r,e),token:""};case"min":return{len:c(r,e),token:"m"};case"m":return{len:c(r,e),token:"m"}}return{len:0}},this.getClef=function(r,c){var e=r,u=this.skipWhiteSpace(r);if(t(r,u))return{len:0};var m=!1,b=r.substring(u);if(p.startsWith(b,"clef=")&&(m=!0,b=b.substring(5),u+=5),b.length===0&&m)return{len:u+5,warn:"No clef specified: "+e};var x=this.skipWhiteSpace(b);if(t(b,x))return{len:0};x>0&&(u+=x,b=b.substring(x));var T=null;if(p.startsWith(b,"treble"))T="treble";else if(p.startsWith(b,"bass3"))T="bass3";else if(p.startsWith(b,"bass"))T="bass";else if(p.startsWith(b,"tenor"))T="tenor";else if(p.startsWith(b,"alto2"))T="alto2";else if(p.startsWith(b,"alto1"))T="alto1";else if(p.startsWith(b,"alto"))T="alto";else if(!c&&m&&p.startsWith(b,"none"))T="none";else if(p.startsWith(b,"perc"))T="perc";else if(!c&&m&&p.startsWith(b,"C"))T="tenor";else if(!c&&m&&p.startsWith(b,"F"))T="bass";else if(!c&&m&&p.startsWith(b,"G"))T="treble";else return{len:u+5,warn:"Unknown clef specified: "+e};return b=b.substring(T.length),x=this.isMatch(b,"+8"),x>0?T+="+8":(x=this.isMatch(b,"-8"),x>0&&(T+="-8")),{len:u+T.length,token:T,explicit:m}},this.getBarLine=function(r,c){switch(r[c]){case"]":switch(++c,r[c]){case"|":return{len:2,token:"bar_thick_thin"};case"[":return++c,r[c]>="1"&&r[c]<="9"||r[c]==='"'?{len:2,token:"bar_invisible"}:{len:1,warn:"Unknown bar symbol"};default:return{len:1,token:"bar_invisible"}}case":":switch(++c,r[c]){case":":return{len:2,token:"bar_dbl_repeat"};case"|":switch(++c,r[c]){case"]":switch(++c,r[c]){case"|":return++c,r[c]===":"?{len:5,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:3,token:"bar_right_repeat"}}case"|":return++c,r[c]===":"?{len:4,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:2,token:"bar_right_repeat"}}default:return{len:1,warn:"Unknown bar symbol"}}case"[":if(++c,r[c]==="|")switch(++c,r[c]){case":":return{len:3,token:"bar_left_repeat"};case"]":return{len:3,token:"bar_invisible"};default:return{len:2,token:"bar_thick_thin"}}else return r[c]>="1"&&r[c]<="9"||r[c]==='"'?{len:1,token:"bar_invisible"}:{len:0};case"|":switch(++c,r[c]){case"]":return{len:2,token:"bar_thin_thick"};case"|":return++c,r[c]===":"?{len:3,token:"bar_left_repeat"}:{len:2,token:"bar_thin_thin"};case":":for(var e=0;r[c+e]===":";)e++;return{len:1+e,token:"bar_left_repeat"};default:return{len:1,token:"bar_thin"}}}return{len:0}},this.getTokenOf=function(r,c){for(var e=0;e<r.length;e++)if(c.indexOf(r[e])<0)return{len:e,token:r.substring(0,e)};return{len:e,token:r}},this.getToken=function(r,c,e){for(var u=c;u<e&&!this.isWhiteSpace(r[u]);)u++;return r.substring(c,u)},this.isMatch=function(r,c){var e=this.skipWhiteSpace(r);return t(r,e)?0:p.startsWith(r.substring(e),c)?e+c.length:0},this.getPitchFromTokens=function(r){var c={},e={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};if(c.position=e[r[0].token],c.position===void 0)return{warn:"Pitch expected. Found: "+r[0].token};for(r.shift();r.length;)switch(r[0].token){case",":c.position-=7,r.shift();break;case"'":c.position+=7,r.shift();break;default:return c}return c},this.getKeyAccidentals2=function(r){for(var c;r.length>0;){var e;if(r[0].token==="^"){if(e="sharp",r.shift(),r.length===0)return{accs:c,warn:"Expected note name after "+e};switch(r[0].token){case"^":e="dblsharp",r.shift();break;case"/":e="quartersharp",r.shift();break}}else if(r[0].token==="=")e="natural",r.shift();else if(r[0].token==="_"){if(e="flat",r.shift(),r.length===0)return{accs:c,warn:"Expected note name after "+e};switch(r[0].token){case"_":e="dblflat",r.shift();break;case"/":e="quarterflat",r.shift();break}}else return{accs:c};if(r.length===0)return{accs:c,warn:"Expected note name after "+e};switch(r[0].token[0]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":c===void 0&&(c=[]),c.push({acc:e,note:r[0].token[0]}),r[0].token.length===1?r.shift():r[0].token=r[0].token.substring(1);break;default:return{accs:c,warn:"Expected note name after "+e+" Found: "+r[0].token}}}return{accs:c}},this.getKeyAccidental=function(r){var c={"^":"sharp","^^":"dblsharp","=":"natural",_:"flat",__:"dblflat","_/":"quarterflat","^/":"quartersharp"},e=this.skipWhiteSpace(r);if(t(r,e))return{len:0};var u=null;switch(r[e]){case"^":case"_":case"=":u=r[e];break;default:return{len:0}}if(e++,t(r,e))return{len:1,warn:"Expected note name after accidental"};switch(r[e]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:e+1,token:{acc:c[u],note:r[e]}};case"^":case"_":case"/":if(u+=r[e],e++,t(r,e))return{len:2,warn:"Expected note name after accidental"};switch(r[e]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:e+1,token:{acc:c[u],note:r[e]}};default:return{len:2,warn:"Expected note name after accidental"}}break;default:return{len:1,warn:"Expected note name after accidental"}}},this.isWhiteSpace=function(r){return r===" "||r==="	"||r===""},this.getMeat=function(r,c,e){var u=r.indexOf("%",c);for(u>=0&&u<e&&(e=u);c<e&&(r[c]===" "||r[c]==="	"||r[c]==="");)c++;for(;c<e&&(r[e-1]===" "||r[e-1]==="	"||r[e-1]==="");)e--;return{start:c,end:e}};var a=function(r){return r>="A"&&r<="Z"||r>="a"&&r<="z"},n=function(r){return r>="0"&&r<="9"};this.tokenize=function(r,c,e,u){var m=this.getMeat(r,c,e);c=m.start,e=m.end;for(var b=[],x;c<e;){if(r[c]==='"'){for(x=c+1;x<e&&r[x]!=='"';)x++;b.push({type:"quote",token:r.substring(c+1,x),start:c+1,end:x}),x++}else if(a(r[c])){if(x=c+1,u)for(;x<e&&!this.isWhiteSpace(r[x]);)x++;else for(;x<e&&a(r[x]);)x++;b.push({type:"alpha",token:r.substring(c,x),continueId:n(r[x]),start:c,end:x}),c=x+1}else if(r[c]==="."&&n(r[x+1])){x=c+1;for(var T=null,E=null;x<e&&n(r[x]);)x++;E=parseFloat(r.substring(c,x)),b.push({type:"number",token:r.substring(c,x),intt:T,floatt:E,continueId:a(r[x]),start:c,end:x}),c=x+1}else if(n(r[c])||r[c]==="-"&&n(r[x+1])){x=c+1;for(var D=null,F=null;x<e&&n(r[x]);)x++;if(r[x]==="."&&n(r[x+1]))for(x++;x<e&&n(r[x]);)x++;else D=parseInt(r.substring(c,x));F=parseFloat(r.substring(c,x)),b.push({type:"number",token:r.substring(c,x),intt:D,floatt:F,continueId:a(r[x]),start:c,end:x}),c=x+1}else r[c]===" "||r[c]==="	"||b.push({type:"punct",token:r[c],start:c,end:c+1}),x=c+1;c=x}return b},this.getVoiceToken=function(r,c,e){for(var u=c;u<e&&this.isWhiteSpace(r[u])||r[u]==="=";)u++;if(r[u]==='"'){var m=r.indexOf('"',u+1);return m===-1||m>=e?{len:1,err:"Missing close quote"}:{len:m-c+1,token:this.translateString(r.substring(u+1,m))}}else{for(var b=u;b<e&&!this.isWhiteSpace(r[b])&&r[b]!=="=";)b++;return{len:b-c+1,token:r.substring(u,b)}}};var i={"`a":"","'a":"","^a":"","~a":"",'"a':"",oa:"",aa:"","=a":"",ua:"",";a":"","`e":"","'e":"","^e":"",'"e':"","=e":"",ue:"",";e":"",".e":"","`i":"","'i":"","^i":"",'"i':"","=i":"",ui:"",";i":"","`o":"","'o":"","^o":"","~o":"",'"o':"","=o":"",uo:"","/o":"","`u":"","'u":"","^u":"","~u":"",'"u':"",ou:"","=u":"",uu:"",";u":"","`A":"","'A":"","^A":"","~A":"",'"A':"",oA:"",AA:"","=A":"",uA:"",";A":"","`E":"","'E":"","^E":"",'"E':"","=E":"",uE:"",";E":"",".E":"","`I":"","'I":"","^I":"","~I":"",'"I':"","=I":"",uI:"",";I":"",".I":"","`O":"","'O":"","^O":"","~O":"",'"O':"","=O":"",uO:"","/O":"","`U":"","'U":"","^U":"","~U":"",'"U':"",oU:"","=U":"",uU:"",";U":"",ae:"",AE:"",oe:"",OE:"",ss:"","'c":"","^c":"",uc:"",cc:"",".c":"",cC:"","'C":"","^C":"",uC:"",".C":"","~N":"","~n":"","=s":"",vs:"",DH:"",dh:"",HO:"",Ho:"",HU:"",Hu:"","'Y":"","'y":"","^Y":"","^y":"",'"Y':"",'"y':"",vS:"",vZ:"",vz:""},f={"#":"",b:"","=":""},v={201:"",202:"",203:"",241:"",242:"",252:"a",262:"2",272:"o",302:"",312:"",322:"",332:"",342:"",352:"",362:"",372:"",243:"",253:"",263:"3",273:"",303:"",313:"",323:"",333:"",343:"",353:"",363:"",373:"",244:"",254:"",264:"  ",274:"14",304:"",314:"",324:"",334:"",344:"",354:"",364:"",374:"",245:"",255:"-",265:"",275:"12",305:"",315:"",325:"",335:"",345:"",355:"",365:"",375:"",246:"",256:"",266:"",276:"34",306:"",316:"",326:"",336:"",346:"",356:"",366:"",376:"",247:"",257:" ",267:"",277:"",307:"",317:"",327:"",337:"",347:"",357:"",367:"",377:"",250:" ",260:"",270:" ",300:"",310:"",320:"",330:"",340:"",350:"",360:"",370:"",251:"",261:"",271:"1",301:"",311:"",321:"",331:"",341:"",351:"",361:"",371:""};this.translateString=function(r){var c=r.split("\\");if(c.length===1)return r;var e=null;return c.forEach(function(u){if(e===null)e=u;else{var m=i[u.substring(0,2)];m!==void 0?e+=m+u.substring(2):(m=v[u.substring(0,3)],m!==void 0?e+=m+u.substring(3):(m=f[u.substring(0,1)],m!==void 0?e+=m+u.substring(1):e+="\\"+u))}}),e},this.getNumber=function(r,c){for(var e=0;c<r.length;)switch(r[c]){case"0":e=e*10,c++;break;case"1":e=e*10+1,c++;break;case"2":e=e*10+2,c++;break;case"3":e=e*10+3,c++;break;case"4":e=e*10+4,c++;break;case"5":e=e*10+5,c++;break;case"6":e=e*10+6,c++;break;case"7":e=e*10+7,c++;break;case"8":e=e*10+8,c++;break;case"9":e=e*10+9,c++;break;default:return{num:e,index:c}}return{num:e,index:c}},this.getFraction=function(r,c){var e=1,u=1;if(r[c]!=="/"){var m=this.getNumber(r,c);e=m.num,c=m.index}if(r[c]==="/")if(c++,r[c]==="/"){for(var b=.5;r[c++]==="/";)b=b/2;return{value:e*b,index:c-1}}else{var x=c,T=this.getNumber(r,c);T.num===0&&x===c&&(T.num=2),T.num!==0&&(u=T.num),c=T.index}return{value:e/u,index:c}};function g(r){const e=/^(\d+)\./.exec(r);return e?e[1]:null}var d=[{match:/,\s*The$/,replace:"The "},{match:/,\s*the$/,replace:"the "},{match:/,\s*A$/,replace:"A "},{match:/,\s*a$/,replace:"a "},{match:/,\s*An$/,replace:"An "},{match:/,\s*an$/,replace:"an "},{match:/,\s*Da$/,replace:"Da "},{match:/,\s*La$/,replace:"La "},{match:/,\s*Le$/,replace:"Le "},{match:/,\s*Les$/,replace:"Les "},{match:/,\s*Ye$/,replace:"Ye "}];this.theReverser=function(r){for(var c=0;c<d.length;c++){var e=d[c],u=r.match(e.match);if(u){var m=g(r);m&&(r=r.replace(m+".",""),r=r.trim());var b=u[0].length,x=e.replace+r.substring(0,r.length-b);return m&&(x=m+". "+x),x}}return r},this.stripComment=function(r){var c=r.indexOf("%");return c>=0?p.strip(r.substring(0,c)):p.strip(r)},this.getInt=function(r){var c=parseInt(r);if(isNaN(c))return{digits:0};var e=""+c,u=r.indexOf(e);return{value:c,digits:u+e.length}},this.getFloat=function(r){var c=parseFloat(r);if(isNaN(c))return{digits:0};var e=""+c,u=r.indexOf(e);return{value:c,digits:u+e.length}},this.getMeasurement=function(r){if(r.length===0)return{used:0};var c=1,e="";if(r[0].token==="-")r.shift(),e="-",c++;else if(r[0].type!=="number")return{used:0};if(e+=r.shift().token,r.length===0)return{used:1,value:parseInt(e)};var u=r.shift();if(u.token==="."){if(c++,r.length===0)return{used:c,value:parseInt(e)};if(r[0].type==="number"&&(u=r.shift(),e=e+"."+u.token,c++,r.length===0))return{used:c,value:parseFloat(e)};u=r.shift()}switch(u.token){case"pt":return{used:c+1,value:parseFloat(e)};case"px":return{used:c+1,value:parseFloat(e)};case"cm":return{used:c+1,value:parseFloat(e)/2.54*72};case"in":return{used:c+1,value:parseFloat(e)*72};default:return r.unshift(u),{used:c,value:parseFloat(e)}}};var o=function(r){return r=r.replace(/\\n/g,`
`),r=r.replace(/\\"/g,'"'),r};this.getBrackettedSubstring=function(r,c,e,u){for(var m=u||r[c],b=c+1,x=!1;b<r.length&&(x||r[b]!==m);)x=r[b]==="\\",++b;return r[b]===m?[b-c+1,o(r.substring(c+1,b)),!0]:(b=c+e,b>r.length-1&&(b=r.length-1),[b-c+1,o(r.substring(c+1,b)),!1])}};return l.prototype.peekLine=function(){return this.lines[this.lineIndex]},l.prototype.nextLine=function(){if(this.lineIndex>0&&(this.multilineVars.iChar+=this.lines[this.lineIndex-1].length+1),this.lineIndex<this.lines.length){var h=this.lines[this.lineIndex];return this.lineIndex++,h}return null},qt=l,qt}var Dt,Ua;function Os(){if(Ua)return Dt;Ua=1;function p(g,d,o){if(!(!d||g.lines.length===0)){var r=g.deline({lineBreaks:!1}),c=h(r,d);g.lines=l(r,c,o),g.lineBreaks=c}}function l(g,d,o){for(var r=[],c=[],e=[],u=1,m=0;m<d.length;m++){var b=d[m];if(g[b.ogLine].staff){var x=g[b.ogLine].staff[b.staff];if(r[b.line]||(r[b.line]={staff:[]}),!r[b.line].staff[b.staff]){r[b.line].staff[b.staff]={voices:[]},o!==void 0&&b.staff===0&&b.line>0&&(r[b.line].staff[b.staff].barNumber=u);for(var T=Object.keys(x),E=0;E<T.length;E++){var D=T[E]==="voices";T[E]==="meter"&&b.line!==0&&(D=!0),D||(r[b.line].staff[b.staff][T[E]]=x[T[E]])}c[b.staff]&&(r[b.line].staff[b.staff].key=c[b.staff])}r[b.line].staff[b.staff].voices[b.voice]||(r[b.line].staff[b.staff].voices[b.voice]=[]),r[b.line].staff[b.staff].voices[b.voice]=g[b.ogLine].staff[b.staff].voices[b.voice].slice(b.start,b.end+1),e[b.staff*10+b.voice]&&r[b.line].staff[b.staff].voices[b.voice].unshift({el_type:"stem",direction:e[b.staff*10+b.voice].direction});for(var F=r[b.line].staff[b.staff].voices[b.voice],y=F.length-1;y>=0;y--)if(F[y].el_type==="key"){c[b.staff]={root:F[y].root,acc:F[y].acc,mode:F[y].mode,accidentals:F[y].accidentals.filter(function(N){return N.acc!=="natural"})};break}for(y=F.length-1;y>=0;y--)if(F[y].el_type==="stem"){e[b.staff*10+b.voice]={direction:F[y].direction};break}if(o!==void 0&&b.staff===0&&b.voice===0)for(y=0;y<F.length;y++)F[y].el_type==="bar"&&(u++,y===F.length-1?delete F[y].barNumber:F[y].barNumber=u)}else r[b.line]=g[b.ogLine]}for(var A=0;A<r.length;A++)r[A].staff&&(r[A].staff=r[A].staff.filter(function(N){return N!=null}));return r}function h(g,d){for(var o=[],r=0,c=0,e=0,u=0;u<g.length;u++){var m=g[u];if(m.staff){var b=c,x=d[r];r++;for(var T=0;T<m.staff.length;T++)for(var E=m.staff[T],D=0;D<E.voices.length;D++){e=b;for(var F=0,y=0,A=E.voices[D],N=0,M=0;M<A.length;M++){var L=A[M];L.el_type==="bar"&&(x[y]===F&&(o.push({ogLine:u,line:e,staff:T,voice:D,start:N,end:M}),N=M+1,e++,c=Math.max(c,e),y++),F++)}o.push({ogLine:u,line:e,staff:T,voice:D,start:N,end:A.length}),e++,c=Math.max(c,e)}}else o.push({ogLine:u,line:e}),e++,c=Math.max(c,e)}return o}function s(g,d){for(var o=[],r=[],c=0,e=0;e<g.length;e++){var u=g[e],m=c+u;if(m<d)c=m;else{var b=d-c,x=m-d;b<x&&c>0?(o.push(e-1),r.push(Math.round(c-u)),c=u):e<g.length-1&&(o.push(e),r.push(Math.round(c)),c=0)}}return r.push(Math.round(c)),{lineBreaks:o,totals:r}}function t(g){for(var d=[],o=0;o<g.length;o++)d.push(g[o]);return d}function a(g,d,o,r,c,e,u,m,b,x,T){for(var E=x;E<g.length;E++){var D=g[E];o+=D,r+=D;var F=Math.abs(o-d[m]),y=Math.abs(F-e)<d[0]/10;if(y)if(F<e){var A=t(c),N=t(b);N.push(E-1),A.push(r-D),T.push({accumulator:o,lineAccumulator:D,lineWidths:A,lastVariance:Math.abs(o-d[m+1]),highestVariance:Math.max(u,e),currLine:m+1,lineBreaks:N,startIndex:E+1})}else F>e&&E<g.length-1&&(A=t(c),N=t(b),T.push({accumulator:o,lineAccumulator:r,lineWidths:A,lastVariance:F,highestVariance:Math.max(u,F),currLine:m,lineBreaks:N,startIndex:E+1}));F>e?(b.push(E-1),m++,u=Math.max(u,e),e=Math.abs(o-d[m]),c.push(r-D),r=D):e=F}c.push(r)}function n(g,d,o,r){for(var c=Math.ceil(g.total/d),e=Math.floor(g.total/c),u=[],m=0;m<c;m++)u.push(e*(m+1));var b=[];b.push({accumulator:0,lineAccumulator:0,lineWidths:[],lastVariance:999999,highestVariance:0,currLine:0,lineBreaks:[],startIndex:0});for(var x=0;x<b.length;)a(g.measureWidths,u,b[x].accumulator,b[x].lineAccumulator,b[x].lineWidths,b[x].lastVariance,b[x].highestVariance,b[x].currLine,b[x].lineBreaks,b[x].startIndex,b),x++;for(m=0;m<b.length;m++){var T=b[m];T.variances=[],T.aveVariance=0;for(var E=0;E<T.lineWidths.length;E++){var D=T.lineWidths[E];T.variances.push(D-u[0]),T.aveVariance+=Math.abs(D-u[0])}T.aveVariance=T.aveVariance/T.lineWidths.length,r.attempts.push({type:"optimizeLineWidths",lineBreaks:T.lineBreaks,variances:T.variances,aveVariance:T.aveVariance,widths:g.measureWidths})}var F=9999999,y=-1;for(m=0;m<b.length;m++)T=b[m],T.aveVariance<F&&(F=T.aveVariance,y=m);return{failed:!1,lineBreaks:b[y].lineBreaks,variance:b[y].highestVariance}}function i(g,d,o){for(var r=[],c=[],e=0,u=!1,m=0;m<g.length;m++)e+=g[m],e>d&&(u=!0),m%o===o-1&&(m!==g.length-1&&r.push(m),c.push(Math.round(e)),e=0);return{failed:u,totals:c,lineBreaks:r}}function f(g,d,o){var r={lineBreaks:g,staffwidth:d};for(var c in o)o.hasOwnProperty(c)&&c!=="wrap"&&c!=="staffwidth"&&(r[c]=o[c]);return{revisedParams:r}}function v(g,d,o){if(d.length===0||o.staffwidth<d[0].left)return{reParse:!1,explanation:"Staff width is narrower than the margin",revisedParams:o};var r=o.scale?Math.max(o.scale,.1):1,c=o.wrap.minSpacing?Math.max(parseFloat(o.wrap.minSpacing),1):1,e=o.wrap.minSpacingLimit?Math.max(parseFloat(o.wrap.minSpacingLimit),1):c-.1,u=o.wrap.maxSpacing?Math.max(parseFloat(o.wrap.maxSpacing),1):void 0;o.wrap.lastLineLimit&&!u&&(u=Math.max(parseFloat(o.wrap.lastLineLimit),1));for(var m=o.wrap.preferredMeasuresPerLine?Math.max(parseInt(o.wrap.preferredMeasuresPerLine,10),0):void 0,b=[],x=[],T=0;T<d.length;T++){var E=d[T],D=o.staffwidth-E.left,F=D/c/r,y=D/u/r,A=D/e/r,N={widths:E,lineBreakPoint:F,minLineSize:y,attempts:[],staffWidth:o.staffwidth,minWidth:Math.round(A)},M=null;if(m){var L=i(E.measureWidths,F,m);N.attempts.push({type:"Fixed Measures Per Line",preferredMeasuresPerLine:m,lineBreaks:L.lineBreaks,failed:L.failed,totals:L.totals}),L.failed||(M=L.lineBreaks)}if(!M){var B=s(E.measureWidths,F);N.attempts.push({type:"Free Form",lineBreaks:B.lineBreaks,totals:B.totals}),M=B.lineBreaks,M.length>0&&E.measureWidths.length<25&&(B=n(E,F,M,N),N.attempts.push({type:"Optimize",failed:B.failed,reason:B.reason,lineBreaks:B.lineBreaks,totals:B.totals}),B.failed||(M=B.lineBreaks))}b.push(M),x.push(N)}var S=o.staffwidth,_=f(b,S,o);return _.explanation=x,_.reParse=!0,_}return Dt={wrapLines:p,calcLineWraps:v},Dt}var It,$a;function Se(){if($a)return It;$a=1;var p={};return p.FONTEM=360,p.FONTSIZE=30,p.STEP=p.FONTSIZE*93/720,p.SPACE=10,p.TOPNOTE=15,p.STAVEHEIGHT=100,p.INDENT=50,It=p,It}var Ft,Va;function Rs(){if(Va)return Ft;Va=1;var p,l=Fe();return(function(){var h=1,s=128;p=function(e,u){u=u||{};var m,b=u.program||0,x=u.midiTranspose||0;e.visualTranspose&&(x-=e.visualTranspose);var T=u.channel||0,E=!1,D=u.drum||"",F=u.drumBars||1,y=u.drumIntro||0,A=D!=="",N=!!u.drumOff,M=[],L=50;b=parseInt(b,10),x=parseInt(x,10),T=parseInt(T,10),T===10&&(b=s),D=D.split(" "),F=parseInt(F,10),y=parseInt(y,10);var B=e.formatting.bagpipes;B&&(b=71);var S=[];if(e.formatting.midi){var _=e.formatting.midi;_.program&&_.program.length>0&&(b=_.program[0],_.program.length>1&&(b=_.program[1],T=_.program[0]),E=!0),_.transpose&&(x=_.transpose[0]),_.channel&&(T=_.channel[0],E=!0),_.drum&&(D=_.drum),_.drumbars&&(F=_.drumbars[0]),_.drumon&&(A=!0),T===10&&(b=s),_.beat&&S.push({el_type:"beat",beats:_.beat}),_.nobeataccents&&S.push({el_type:"beataccents",value:!1})}u.qpm?m=parseInt(u.qpm,10):e.metaText.tempo?m=v(e.metaText.tempo,e.getBeatLength()):u.defaultQpm?m=u.defaultQpm:m=180;var P=[];B&&P.push({el_type:"bagpipes"}),P.push({el_type:"instrument",program:b}),T&&P.push({el_type:"channel",channel:T}),x&&P.push({el_type:"transpose",transpose:x}),P.push({el_type:"tempo",qpm:m});for(var O=0;O<S.length;O++)P.push(S[O]);var I=[],w=[],C=[],k=[],q=[0],R={};R[0]={el_type:"tempo",qpm:m,timing:0};for(var z,H=[],X=[],Q=!1,U=e.lines,ee=0;ee<U.length;ee++){var te=U[ee];if(te.staff){let Ce=function(be){var Ae={pppp:[15,10,5,1],ppp:[30,20,10,1],pp:[45,35,20,1],p:[60,50,35,1],mp:[75,65,50,1],mf:[90,80,65,1],f:[105,95,80,1],ff:[120,110,95,1],fff:[127,125,110,1],ffff:[127,125,110,1]},ke;if(be.decoration){if(be.decoration.indexOf("pppp")>=0?ke="pppp":be.decoration.indexOf("ppp")>=0?ke="ppp":be.decoration.indexOf("pp")>=0?ke="pp":be.decoration.indexOf("p")>=0?ke="p":be.decoration.indexOf("mp")>=0?ke="mp":be.decoration.indexOf("mf")>=0?ke="mf":be.decoration.indexOf("f")>=0?ke="f":be.decoration.indexOf("ff")>=0?ke="ff":be.decoration.indexOf("fff")>=0?ke="fff":be.decoration.indexOf("ffff")>=0&&(ke="ffff"),ke){z=Ae[ke].slice(0);let Be=[z];Array.isArray(be.decoration)&&(Be=[],be.decoration.forEach(_a=>{_a in Ae&&Be.push(Ae[_a].slice(0))})),I[V].push({el_type:"beat",beats:z.slice(0),volumesPerNotePitch:Be}),C[se]=!1,k[se]=!1}if(be.decoration.indexOf("crescendo(")>=0){var Ue=t(ce,$,"crescendo)"),Oe=Math.min(127,z[0]+L),nt=a(ce,$+Ue+1,Object.keys(Ae));nt&&(Oe=Ae[nt][0]),Ue>0?C[se]=Math.floor((Oe-z[0])/Ue):C[se]=!1,k[se]=!1}else if(be.decoration.indexOf("crescendo)")>=0)C[se]=!1;else if(be.decoration.indexOf("diminuendo(")>=0){var $e=t(ce,$,"diminuendo)"),Je=Math.max(15,z[0]-L),it=a(ce,$+$e+1,Object.keys(Ae));it&&(Je=Ae[it][0]),C[se]=!1,$e>0?k[se]=Math.floor((Je-z[0])/$e):k[se]=!1}else be.decoration.indexOf("diminuendo)")>=0&&(k[se]=!1)}};for(var Ee=Ce,ne=te.staff,V=0,ae=0;ae<ne.length;ae++){var K=ne[ae];if(!(K.clef&&K.clef.type==="TAB"))for(var se=0;se<K.voices.length;se++){var ce=K.voices[se];if(!I[V]){I[V]=[].concat(JSON.parse(JSON.stringify(P)));var ue=f(te.staff,V);ue&&I[V].unshift({el_type:"name",trackName:ue})}if(x&&K.clef.type==="perc"&&I[V].push({el_type:"transpose",transpose:0}),K.clef&&K.clef.type==="perc"&&!E)for(var le=0;le<I[V].length;le++)I[V][le].el_type==="instrument"&&(I[V][le].program=s);else K.key&&o(I[V],K.key);K.meter&&r(I[V],K.meter),!Q&&A&&(I[V].push({el_type:"drum",params:{pattern:D,bars:F,on:A,intro:y}}),Q=!0),K.clef&&K.clef.type!=="perc"&&K.clef.transpose&&(K.clef.el_type="clef",I[V].push({el_type:"transpose",transpose:K.clef.transpose}),w[V]=!1),K.clef&&K.clef.type&&(K.clef.type.indexOf("-8")>=0?(I[V].push({el_type:"transpose",transpose:-12}),w[V]=!0):K.clef.type.indexOf("+8")>=0?(I[V].push({el_type:"transpose",transpose:12}),w[V]=!0):w[V]&&(I[V].push({el_type:"transpose",transpose:0}),w[V]=!1)),e.formatting.midi&&e.formatting.midi.drumoff&&(I[V].push({el_type:"bar"}),I[V].push({el_type:"drum",params:{pattern:"",on:!1}}));var ge=0,ve=0,we=0,Y=0;z=[105,95,85,1];for(var $=0;$<ce.length;$++){var G=ce[$];switch(G.el_type){case"note":if(C[se]&&(z[0]+=C[se],z[1]+=C[se],z[2]+=C[se],I[V].push({el_type:"beat",beats:z.slice(0)})),k[se]&&(z[0]+=k[se],z[1]+=k[se],z[2]+=k[se],I[V].push({el_type:"beat",beats:z.slice(0)})),Ce(G),!G.rest||G.rest.type!=="spacer"){var W={elem:G,el_type:"note",timing:q[V]};if(G.style?W.style=G.style:M[V]&&(W.style=M[V]),W.duration=G.duration===0?.25:G.duration,G.startTriplet){if(ve=G.tripletMultiplier,we=G.startTriplet*ve*G.duration,G.startTriplet!==G.tripletR&&$+G.tripletR<=ce.length){for(var j=0,J=$;J<$+G.tripletR;J++)j+=ce[J].duration;we=ve*j}W.duration=W.duration*ve,W.duration=Math.round(W.duration*1e6)/1e6,Y=W.duration}else ve&&(G.endTriplet?(ve=0,W.duration=Math.round((we-Y)*1e6)/1e6):(W.duration=W.duration*ve,W.duration=Math.round(W.duration*1e6)/1e6,Y+=W.duration));G.rest&&(W.rest=G.rest),G.decoration&&(W.decoration=G.decoration.slice(0)),G.pitches&&(W.pitches=l.cloneArray(G.pitches)),G.gracenotes&&(W.gracenotes=l.cloneArray(G.gracenotes)),G.chord&&(W.chord=l.cloneArray(G.chord)),I[V].push(W),G.style==="rhythm"&&i(I),ge++,q[V]+=W.duration}break;case"key":case"keySignature":o(I[V],G);break;case"meter":r(I[V],G);break;case"clef":G.transpose&&I[V].push({el_type:"transpose",transpose:G.transpose}),G.type&&(G.type.indexOf("-8")>=0?I[V].push({el_type:"transpose",transpose:-12}):G.type.indexOf("+8")>=0&&I[V].push({el_type:"transpose",transpose:12}));break;case"tempo":m=v(G,e.getBeatLength()),I[V].push({el_type:"tempo",qpm:m,timing:q[V]}),R[""+q[V]]={el_type:"tempo",qpm:m,timing:q[V]};break;case"bar":ge>0&&I[V].push({el_type:"bar"}),Ce(G),ge=0;var re=G.type==="bar_right_repeat"||G.type==="bar_dbl_repeat",fe=G.startEnding==="1",Z=G.type==="bar_left_repeat"||G.type==="bar_dbl_repeat"||G.type==="bar_right_repeat";if(re){var ie=H[V];ie||(ie=0);var me=X[V];me||(me=I[V].length);for(var de=ie;de<me;de++){var oe=Object.assign({},I[V][de]);oe.pitches&&(oe.pitches=l.cloneArray(oe.pitches)),I[V].push(oe)}X[V]=void 0,H[V]=void 0}fe&&(X[V]=I[V].length),Z&&(H[V]=I[V].length);break;case"style":M[V]=G.head;break;case"timeSignature":I[V].push(g(G));break;case"part":break;case"stem":case"scale":case"break":case"font":break;case"midi":var pe=!1;switch(G.cmd){case"drumon":A=!0,pe=!0;break;case"drumoff":A=!1,pe=!0;break;case"drum":D=G.params,pe=!0;break;case"drumbars":F=G.params[0],pe=!0;break;case"drummap":break;case"channel":G.params[0]===10&&I[V].push({el_type:"instrument",program:s});break;case"program":c(I[V],{el_type:"instrument",program:G.params[0]}),E=!0;break;case"transpose":I[V].push({el_type:"transpose",transpose:G.params[0]});break;case"gchordoff":I[V].push({el_type:"gchordOn",tacet:!0});break;case"gchordon":I[V].push({el_type:"gchordOn",tacet:!1});break;case"beat":I[V].push({el_type:"beat",beats:G.params});break;case"nobeataccents":I[V].push({el_type:"beataccents",value:!1});break;case"beataccents":I[V].push({el_type:"beataccents",value:!0});break;case"vol":case"volinc":I[V].push({el_type:G.cmd,volume:G.params[0]});break;case"swing":case"gchord":case"bassvol":case"chordvol":I[V].push({el_type:G.cmd,param:G.params[0]});break;case"bassprog":case"chordprog":I[V].push({el_type:G.cmd,value:G.params[0],octaveShift:G.params[1]});break;case"gchordbars":I[V].push({el_type:G.cmd,param:G.params[0]});break;default:console.log("MIDI seq: midi cmd not handled: ",G.cmd,G)}pe&&(I[0].push({el_type:"drum",params:{pattern:D,bars:F,intro:y,on:A}}),Q=!0);break;default:console.log("MIDI: element type "+G.el_type+" not handled.")}}V++,q[V]||(q[V]=0)}}}}if(n(I,R),y)for(var Ne=e.getPickupLength(),he=0;he<I.length;he++){for(var Te=0;I[he][Te].el_type!=="note"&&I[he].length>Te;)Te++;if(I[he].length>Te){for(var J=0;J<y;J++)Ne===0||J<y-1?(I[he].splice(Te,0,{el_type:"note",rest:{type:"rest"},duration:h},{el_type:"bar"}),Te+=2):I[he].splice(Te++,0,{el_type:"note",rest:{type:"rest"},duration:h-Ne});N&&(A=!1,I[he].splice(Te++,0,{el_type:"drum",params:{pattern:D,bars:F,intro:y,on:A}}),N=!1)}}return I.length>0&&I[0].length>0&&(I[0][0].pickupLength=e.getPickupLength()),I};function t(e,u,m){for(var b=0,x=u+1;x<e.length;x++)if(e[x].el_type==="note"&&b++,e[x].decoration&&e[x].decoration.indexOf(m)>=0)return b;return b}function a(e,u,m){for(var b=Math.min(e.length,u+3),x=u;x<b;x++)if(e[x].el_type==="note"&&e[x].decoration){for(var T=0;T<e[x].decoration.length;T++)if(m.indexOf(e[x].decoration[T])>=0)return e[x].decoration[T]}return null}function n(e,u){if(!(!u||u.length===0))for(var m=Object.keys(u),b=0;b<e.length;b++)for(var x=e[b],T=u[0]?u[0].qpm:0,E=0;E<x.length;E++){var D=x[E];D.el_type==="tempo"&&(T=D.qpm),m.indexOf(""+D.timing)>=0&&T!==u[""+D.timing].qpm&&(T=u[""+D.timing].qpm,D.el_type==="tempo"?(D.qpm=u[""+D.timing].qpm,E++):(e[b].splice(E,0,{el_type:"tempo",qpm:u[""+D.timing].qpm,timing:D.timing}),E+=2))}}function i(e){for(var u=0;u<e.length;u++)for(var m=e[u],b=m.length-1;b>=0&&m[b].el_type!=="bar";)m[b].noChordVoice=!0,b--}function f(e,u){if(!(!e||e.length<=u||!e[u].title))return e[u].title.join(" ")}function v(e,u){var m=.25;e.duration&&(m=e.duration[0]);var b=60;return e.bpm&&(b=e.bpm),m*b/u}function g(e){var u;switch(e.type){case"common_time":u={el_type:"meter",num:4,den:4};break;case"cut_time":u={el_type:"meter",num:2,den:2};break;case"specified":u={el_type:"meter",num:e.value[0].num,den:e.value[0].den};break;default:u={el_type:"meter"}}return h=u.num/u.den,u}function d(e){for(var u=[],m=0;m<e.length;m++)e[m].acc!=="natural"&&u.push(e[m]);return u}function o(e,u){var m;u.root==="HP"?m={el_type:"key",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}]}:m={el_type:"key",accidentals:d(u.accidentals)},c(e,m)}function r(e,u){var m=g(u);c(e,m)}function c(e,u){for(var m=e.length-1;m>=0;m--)if(e[m].el_type===u.el_type){JSON.stringify(e[m])!==JSON.stringify(u)&&e.push(u);return}e.push(u)}})(),Ft=p,Ft}var Ot,Xa;function nc(){if(Xa)return Ot;Xa=1;var p=function(v,g,d,o){this.chordTrack=[],this.chordTrackFinished=!1,this.chordChannel=v,this.currentChords=[],this.lastChord,this.chordLastBar,this.chordsOff=!!g,this.gChordTacet=this.chordsOff,this.hasRhythmHead=!1,this.transpose=0,this.lastBarTime=0,this.meter=o,this.tempoChangeFactor=1,this.bassInstrument=d.bassprog&&d.bassprog.length>=1?d.bassprog[0]:0,this.chordInstrument=d.chordprog&&d.chordprog.length>=1?d.chordprog[0]:0,this.bassOctaveShift=d.bassprog&&d.bassprog.length===2?d.bassprog[1]:0,this.chordOctaveShift=d.chordprog&&d.chordprog.length===2?d.chordprog[1]:0,this.boomVolume=d.bassvol&&d.bassvol.length===1?d.bassvol[0]:64,this.chickVolume=d.chordvol&&d.chordvol.length===1?d.chordvol[0]:48,d.gchord&&d.gchord.length>0?this.overridePattern=s(d.gchord[0]):this.overridePattern=void 0};p.prototype.setMeter=function(f){this.meter=f},p.prototype.setTempoChangeFactor=function(f){this.tempoChangeFactor=f},p.prototype.setLastBarTime=function(f){this.lastBarTime=f},p.prototype.setTranspose=function(f){this.transpose=f},p.prototype.setRhythmHead=function(f,v){this.hasRhythmHead=f;var g=[];if(f&&this.lastChord&&this.lastChord.chick)for(var d=0;d<this.lastChord.chick.length;d++){var o=Object.assign({},v.pitches[0]);o.actualPitch=this.lastChord.chick[d],g.push(o)}return g},p.prototype.barEnd=function(f){this.chordTrack.length>0&&!this.chordTrackFinished&&(this.resolveChords(this.lastBarTime,n(f.time)),this.currentChords=[]),this.chordLastBar=this.lastChord},p.prototype.gChordOn=function(f){this.chordsOff||(this.gChordTacet=f.tacet)},p.prototype.paramChange=function(f){switch(f.el_type){case"gchord":f.param&&f.param.length>0?this.overridePattern=s(f.param):this.overridePattern=void 0;break;case"bassprog":this.bassInstrument=f.value,f.octaveShift!=null&&f.octaveShift!=null?this.bassOctaveShift=f.octaveShift:this.bassOctaveShift=0;break;case"chordprog":this.chordInstrument=f.value,f.octaveShift!=null&&f.octaveShift!=null?this.chordOctaveShift=f.octaveShift:this.chordOctaveShift=0;break;case"bassvol":this.boomVolume=f.param;break;case"chordvol":this.chickVolume=f.param;break;default:console.log("unhandled midi param",f)}},p.prototype.finish=function(){this.chordTrackEmpty()||(this.chordTrackFinished=!0)},p.prototype.addTrack=function(f){this.chordTrackEmpty()||f.push(this.chordTrack)},p.prototype.findChord=function(f){if(this.gChordTacet)return"break";if(this.chordTrackFinished||!f.chord||f.chord.length===0)return null;for(var v=0;v<f.chord.length;v++){var g=f.chord[v];if(g.position==="default")return g.name;if(this.breakSynonyms.indexOf(g.name.toLowerCase())>=0)return"break"}return null},p.prototype.interpretChord=function(f){if(f.length!==0){if(f==="break")return{chick:[]};var v=f.substring(0,1);if(v==="("){if(f=f.substring(1,f.length-1),f.length===0)return;v=f.substring(0,1)}var g=this.basses[v];if(g){for(var d=this.transpose;d<-8;)d+=12;for(;d>8;)d-=12;g+=d,g<33?g+=12:g>44&&(g-=12);var o=g;g+=this.bassOctaveShift*12;var r=g-5,c;f.length===1&&(c=this.chordNotes(g,""));var e=f.substring(1),u=e.substring(0,1);u==="b"||u===""?(o--,g--,r--,e=e.substring(1)):(u==="#"||u==="")&&(o++,g++,r++,e=e.substring(1));var m=e.split("/");if(c=this.chordNotes(o,m[0]),c.length>=3){var b=c[2]-c[0];r=r+b-7}if(m.length===2){var x=this.basses[m[1].substring(0,1)];if(x){var T=m[1].substring(1),E={"#":1,"":1,b:-1,"":-1}[T]||0;g=this.basses[m[1].substring(0,1)]+E+d,g+=this.bassOctaveShift*12,r=g}}return{boom:g,boom2:r,chick:c}}}},p.prototype.chordNotes=function(f,v){var g=this.chordIntervals[v];g||(v.slice(0,2).toLowerCase()==="ma"||v[0]==="M"?g=this.chordIntervals.M:v[0]==="m"||v[0]==="-"?g=this.chordIntervals.m:g=this.chordIntervals.M),f+=12,f+=this.chordOctaveShift*12;for(var d=[],o=0;o<g.length;o++)d.push(f+g[o]);return d},p.prototype.writeNote=function(f,v,g,d,o,r){f!==void 0&&this.chordTrack.push({cmd:"note",pitch:f,volume:g,start:this.lastBarTime+d*i(v,this.tempoChangeFactor),duration:i(o,this.tempoChangeFactor),gap:0,instrument:r})},p.prototype.chordTrackEmpty=function(){for(var f=!0,v=0;v<this.chordTrack.length&&f;v++)this.chordTrack[v].cmd==="note"&&(f=!1);return f},p.prototype.resolveChords=function(f,v){if(!this.hasRhythmHead){var g=this.meter.num,d=this.meter.den,o=1/d,r=o/2,c=parseInt(g,10)/parseInt(d,10),e=c-(v-f)/this.tempoChangeFactor;Math.abs(e)<1e-5&&(e=0),(this.currentChords.length===0||this.currentChords[0].beat!==0)&&this.currentChords.unshift({beat:0,chord:this.chordLastBar});var u=t(this.currentChords,8*g/d),m=this.overridePattern?this.overridePattern:this.rhythmPatterns[g+"/"+d];if(e){m=[];for(var b=(v-f)/this.tempoChangeFactor*8,x=0;x<b/2;x+=2)m.push("chick"),m.push("")}if(!m){m=[];for(var x=0;x<8*g/d/2;x++)m.push("chick"),m.push("")}for(var T=!0,E=Math.min(m.length,u.length),x=0;x<E;x++){x>0&&u[x-1]&&u[x]&&u[x-1].boom!==u[x].boom&&(T=!0);var D=m[x],F=D.indexOf("boom")>=0,y=!F&&x!==0&&m[0].indexOf("boom")>=0&&(!u[x-1]||u[x-1].boom!==u[x].boom),A=l(u[x],D,T,y);F&&(T=!1);for(var N=0;N<A.length;N++)this.writeNote(A[N],.125,F||y?this.boomVolume:this.chickVolume,x,r,F||y?this.bassInstrument:this.chordInstrument),y?y=!1:F=!1}}},p.prototype.processChord=function(f){if(!this.chordTrackFinished){var v=this.findChord(f);if(v){var g=this.interpretChord(v);if(g){this.chordTrack.length===0&&this.chordTrack.push({cmd:"program",channel:this.chordChannel,instrument:this.chordInstrument}),this.lastChord=g;var d=a(this.lastBarTime,n(f.time));this.currentChords.push({chord:this.lastChord,beat:d,start:n(f.time)})}}}};function l(f,v,g,d){var o=[];if(!f)return o;v.indexOf("boom")>=0?o.push(g?f.boom:f.boom2):d&&o.push(f.boom);var r=f.chick.length;if(v.indexOf("chick")>=0)for(var c=0;c<r;c++)o.push(f.chick[c]);switch(v){case"DO":o.push(f.chick[0]);break;case"MI":o.push(f.chick[1]);break;case"SOL":o.push(h(f,2));break;case"TI":o.push(h(f,3));break;case"TOP":o.push(h(f,4));break;case"do":o.push(f.chick[0]+12);break;case"mi":o.push(f.chick[1]+12);break;case"sol":o.push(h(f,2)+12);break;case"ti":o.push(h(f,3)+12);break;case"top":o.push(h(f,4)+12);break}return o}function h(f,v){var g=Math.floor(v/f.chick.length),d=f.chick[v%f.chick.length];return d+g*12}function s(f){for(var v=[],g=0;g<f.length;g++){var d=f[g];switch(d){case"z":v.push("");break;case"2":v.push("");break;case"c":v.push("chick");break;case"b":v.push("boom&chick");break;case"f":v.push("boom");break;case"G":v.push("DO");break;case"H":v.push("MI");break;case"I":v.push("SOL");break;case"J":v.push("TI");break;case"K":v.push("TOP");break;case"g":v.push("do");break;case"h":v.push("mi");break;case"i":v.push("sol");break;case"j":v.push("ti");break;case"k":v.push("top");break}}return v}function t(f,v,g){var d=[];if(f.length===0)return d;for(var o=f[0].chord,r=1;r<f.length;r++){for(var c=f[r];d.length<c.beat;)d.push(o);o=c.chord}for(;d.length<v;)d.push(o);return d}function a(f,v){var g=v-f;return g*8}p.prototype.breakSynonyms=["break","(break)","no chord","n.c.","tacet"],p.prototype.basses={A:33,B:35,C:36,D:38,E:40,F:41,G:43},p.prototype.chordIntervals={dim:[0,3,6],"":[0,3,6],"":[0,3,6],dim7:[0,3,6,9],"7":[0,3,6,9],"7":[0,3,6,9],7:[0,3,6,10],"m7(b5)":[0,3,6,10],m7b5:[0,3,6,10],"m75":[0,3,6,10],"-7(b5)":[0,3,6,10],"-7b5":[0,3,6,10],"7b5":[0,4,6,10],"7(b5)":[0,4,6,10],"75":[0,4,6,10],"7(b9,b5)":[0,4,6,10,13],"7b9,b5":[0,4,6,10,13],"7(#9,b5)":[0,4,6,10,15],"7#9b5":[0,4,6,10,15],"maj7(b5)":[0,4,6,11],maj7b5:[0,4,6,11],"13(b5)":[0,4,6,10,14,21],"13b5":[0,4,6,10,14,21],m:[0,3,7],"-":[0,3,7],m6:[0,3,7,9],"-6":[0,3,7,9],m7:[0,3,7,10],"-7":[0,3,7,10],"-(b6)":[0,3,7,8],"-b6":[0,3,7,8],"-6/9":[0,3,7,9,14],"-7(b9)":[0,3,7,10,13],"-7b9":[0,3,7,10,13],"-maj7":[0,3,7,11],"-9+7":[0,3,7,11,13],"-11":[0,3,7,11,14,17],m11:[0,3,7,11,14,17],"-maj9":[0,3,7,11,14],"-9":[0,3,7,11,14],mM9:[0,3,7,11,14],M:[0,4,7],6:[0,4,7,9],"6/9":[0,4,7,9,14],"6add9":[0,4,7,9,14],69:[0,4,7,9,14],7:[0,4,7,10],9:[0,4,7,10,14],11:[0,7,10,14,17],13:[0,4,7,10,14,21],"7b9":[0,4,7,10,13],"79":[0,4,7,10,13],"7(b9)":[0,4,7,10,13],"7(#9)":[0,4,7,10,15],"7#9":[0,4,7,10,15],"(13)":[0,4,7,10,14,21],"7(9,13)":[0,4,7,10,14,21],"7(#9,b13)":[0,4,7,10,15,20],"7(#11)":[0,4,7,10,14,18],"7#11":[0,4,7,10,14,18],"7(b13)":[0,4,7,10,20],"7b13":[0,4,7,10,20],"9(#11)":[0,4,7,10,14,18],"9#11":[0,4,7,10,14,18],"13(#11)":[0,4,7,10,18,21],"13#11":[0,4,7,10,18,21],maj7:[0,4,7,11],"7":[0,4,7,11],7:[0,4,7,11],maj9:[0,4,7,11,14],"maj7(9)":[0,4,7,11,14],"maj7(11)":[0,4,7,11,17],"maj7(#11)":[0,4,7,11,18],"maj7(13)":[0,4,7,14,21],"maj7(9,13)":[0,4,7,11,14,21],"7sus4":[0,5,7,10],m7sus4:[0,3,7,10,17],sus4:[0,5,7],sus2:[0,2,7],"7sus2":[0,2,7,10],"9sus4":[0,5,7,10,14],"13sus4":[0,5,7,10,14,21],aug7:[0,4,8,10],"+7":[0,4,8,10],"+":[0,4,8],"7#5":[0,4,8,10],"75":[0,4,8,10],"7+5":[0,4,8,10],"9#5":[0,4,8,10,14],"95":[0,4,8,10,14],"9+5":[0,4,8,10,14],"-7(#5)":[0,3,8,10],"-7#5":[0,3,8,10],"7(#5)":[0,4,8,10],"7(b9,#5)":[0,4,8,10,13],"7b9#5":[0,4,8,10,13],"maj7(#5)":[0,4,8,11],"maj7#5":[0,4,8,11],"maj7(#5,#11)":[0,4,8,11,18],"maj7#5#11":[0,4,8,11,18],"9(#5)":[0,4,8,10,14],"13(#5)":[0,4,8,10,14,21],"13#5":[0,4,8,10,14,21],5:[0,7],"5(8)":[0,7,12],"5add8":[0,7,12]},p.prototype.rhythmPatterns={"2/2":["boom","","","","chick","","",""],"3/2":["boom","","","","chick","","","","chick","","",""],"4/2":["boom","","","","chick","","","","boom","","","","chick","","",""],"2/4":["boom","","chick",""],"3/4":["boom","","chick","","chick",""],"4/4":["boom","","chick","","boom","","chick",""],"5/4":["boom","","chick","","chick","","boom","","chick",""],"6/4":["boom","","chick","","boom","","chick","","boom","","chick",""],"3/8":["boom","","chick"],"5/8":["boom","chick","chick","boom","chick"],"6/8":["boom","","chick","boom","","chick"],"7/8":["boom","chick","chick","boom","chick","boom","chick"],"9/8":["boom","","chick","boom","","chick","boom","","chick"],"10/8":["boom","chick","chick","boom","chick","chick","boom","chick","boom","chick"],"11/8":["boom","chick","chick","boom","chick","chick","boom","chick","boom","chick","chick"],"12/8":["boom","","chick","boom","","chick","boom","","chick","boom","","chick"]};function n(f){return f/1e6}function i(f,v){return Math.round(f*v*1e6)/1e6}return Ot=p,Ot}var Rt,ja;function Hs(){if(ja)return Rt;ja=1;var p={f0:"_C",n0:"=C",s0:"^C",x0:"C",f1:"_D",n1:"=D",s1:"^D",x1:"D",f2:"_E",n2:"=E",s2:"^E",x2:"E",f3:"_F",n3:"=F",s3:"^F",x3:"F",f4:"_G",n4:"=G",s4:"^G",x4:"G",f5:"_A",n5:"=A",s5:"^A",x5:"A",f6:"_B",n6:"=B",s6:"^B",x6:"B",f7:"_c",n7:"=c",s7:"^c",x7:"c",f8:"_d",n8:"=d",s8:"^d",x8:"d",f9:"_e",n9:"=e",s9:"^e",x9:"e",f10:"_f",n10:"=f",s10:"^f",x10:"f",f11:"_g",n11:"=g",s11:"^g",x11:"g",f12:"_a",n12:"=a",s12:"^a",x12:"a",f13:"_b",n13:"=b",s13:"^b",x13:"b",f14:"_c'",n14:"=c'",s14:"^c'",x14:"c'",f15:"_d'",n15:"=d'",s15:"^d'",x15:"d'",f16:"_e'",n16:"=e'",s16:"^e'",x16:"e'"};function l(h){var s=(h.accidental?h.accidental[0]:"x")+h.verticalPos;return p[s]}return Rt=l,Rt}var Ht,Ka;function ic(){if(Ka)return Ht;Ka=1;var p,l=nc(),h=Hs();return(function(){var s,t,a,n,i,f=1,v,g,d,o,r,c,e={num:4,den:4},u=128,m,b=!0,x=105,T=95,E=85,D=[[x,T,E]],F=.25,y,A,N=0,M,L={},B,S=0,_,P=0,O=-.001,I=.4;p=function(Y,$,G,W){$||($={}),W||(W={}),s=[],t=[0,0,0,0,0,0,0],n=[],i=$.qpm,f=1,v=void 0,g=void 0,d=void 0,o=void 0,r=0,_=G,e={num:4,den:4},b=!0,x=105,T=95,E=85,D=[],F=.25,y=void 0,A=void 0,N=0,M=[],L={},B=1,Y.length>0&&Y[0].length>0&&(S=Y[0][0].pickupLength),$.bassprog!==void 0&&!W.bassprog&&(W.bassprog=[$.bassprog]),$.bassvol!==void 0&&!W.bassvol&&(W.bassvol=[$.bassvol]),$.chordprog!==void 0&&!W.chordprog&&(W.chordprog=[$.chordprog]),$.chordvol!==void 0&&!W.chordvol&&(W.chordvol=[$.chordvol]),$.gchord!==void 0&&!W.gchord&&(W.gchord=[$.gchord]),c=new l(Y.length,$.chordsOff,W,e),q(Y,$);for(var j=0;j<Y.length;j++){a=0,c.setTranspose(a);var J=Y[j];d=[{cmd:"program",channel:j,instrument:v}],o=void 0,m=0,c.setLastBarTime(0);var re=!1;($.voicesOff===!0||$.voicesOff&&$.voicesOff.length&&$.voicesOff.indexOf(j)>=0)&&(re=!0);for(var fe=0;fe<J.length;fe++){var Z=J[fe];switch(Z.el_type){case"name":o={cmd:"text",type:"name",text:Z.trackName};break;case"note":U(Z,re);break;case"key":t=V(Z);break;case"meter":e=Z,c.setMeter(e),F=R(e),ge();break;case"tempo":i?f=Z.qpm?i/Z.qpm:1:i=Z.qpm,c.setTempoChangeFactor(f);break;case"transpose":a=Z.transpose,c.setTranspose(a);break;case"bar":c.barEnd(Z),s=[],j===0&&ve(Y.length+1),c.setRhythmHead(!1),m=C(Z.time),c.setLastBarTime(m);break;case"bagpipes":break;case"instrument":if(v===void 0&&(v=Z.program),g=Z.program,d.length>0&&d[d.length-1].cmd==="program")d[d.length-1].instrument=Z.program;else{var ie;for(ie=d.length-1;ie>=0&&d[ie].cmd!=="program";ie--);(ie<0||d[ie].instrument!==Z.program)&&d.push({cmd:"program",channel:0,instrument:Z.program})}break;case"channel":w(Z.channel);break;case"drum":L=le(Z.params),ge();break;case"gchordOn":c.gChordOn(Z);break;case"beat":x=Z.beats[0],T=Z.beats[1],E=Z.beats[2],Z.volumesPerNotePitch?D=Z.volumesPerNotePitch:D=[];break;case"vol":y=Z.volume;break;case"volinc":A=Z.volume;break;case"beataccents":b=Z.value;break;case"gchord":case"bassprog":case"chordprog":case"bassvol":case"chordvol":case"gchordbars":c.paramChange(Z);break;default:console.log("MIDI creation. Unknown el_type: "+Z.el_type+`
`);break}}d[0].instrument===void 0&&(d[0].instrument=v||0),o&&d.unshift(o),n.push(d),c.finish(),M.length>0}return $.detuneOctave&&we(n,parseInt($.detuneOctave,10)),c.addTrack(n),M.length>0&&n.push(M),{tempo:i,instrument:v,tracks:n,totalDuration:r}};function w(Y){for(var $=d.length-1;$>=0;$--)if(d[$].cmd==="program"){d[$].channel=Y;return}}function C(Y){return Y/1e6}function k(Y){return Math.round(Y*f*1e6)/1e6}function q(Y,$){for(var G=0;G<Y.length;G++){for(var W=Y[G],j={},J=$.qpm,re=0,fe=1,Z=0;Z<W.length;Z++){var ie=W[Z];if(ie.el_type==="tempo"){J?fe=ie.qpm?J/ie.qpm:1:J=ie.qpm;continue}ie.time=re;var me=ie.duration?ie.duration:0;if(re+=Math.round(me*fe*1e6),ie.pitches){for(var de=0;de<ie.pitches.length;de++){var oe=ie.pitches[de];if(oe){if(oe.duration=ie.duration,oe.startTie)j[oe.pitch]===void 0?j[oe.pitch]={el:Z,pitch:de}:(W[j[oe.pitch].el].pitches[j[oe.pitch].pitch].duration+=oe.duration,ie.pitches[de]=null);else if(oe.endTie){var pe=j[oe.pitch];if(pe){var Ne=oe.duration;delete W[pe.el].pitches[pe.pitch].startTie,W[pe.el].pitches[pe.pitch].duration+=Ne,ie.pitches[de]=null,delete j[oe.pitch]}else delete oe.endTie}}}delete ie.duration}}for(var he in j)if(j.hasOwnProperty(he)){var Te=j[he];delete W[Te.el].pitches[Te.pitch].startTie}}}function R(Y){switch(parseInt(Y.den,10)){case 2:return .5;case 4:return .25;case 8:return Y.num%3===0?.375:.125;case 16:return .125}return .25}function z(Y,$,G){var W=G-Y;return W/$}function H(Y,$,G){if($)return 0;let W=x,j=T,J=E;G!==void 0&&D.length>=G+1&&(W=D[G][0],j=D[G][1],J=D[G][2]);var re;if(y!==void 0)re=y,y=void 0;else if(!b)re=j;else if(S>Y)re=J;else{var fe=z(m,R(e),Y);fe===0?re=W:parseInt(fe,10)===fe?re=j:re=J}return A&&(re+=A,A=void 0),re<0&&(re=0),re>127&&(re=127),$?0:re}function X(Y,$){var G={};if(Y.decoration)for(var W=0;W<Y.decoration.length;W++)Y.decoration[W]==="staccato"?G.thisBreakBetweenNotes="staccato":Y.decoration[W]==="tenuto"?G.thisBreakBetweenNotes="tenuto":Y.decoration[W]==="accent"?G.velocity=Math.min(127,$*1.5):Y.decoration[W]==="trill"?G.noteModification="trill":Y.decoration[W]==="lowermordent"?G.noteModification="lowermordent":Y.decoration[W]==="uppermordent"?G.noteModification="pralltriller":Y.decoration[W]==="mordent"?G.noteModification="mordent":Y.decoration[W]==="turn"?G.noteModification="turn":Y.decoration[W]==="roll"?G.noteModification="roll":Y.decoration[W]==="pralltriller"?G.noteModification="pralltriller":Y.decoration[W]==="trillh"&&(G.noteModification="trillh");return G}function Q(Y,$){var G=$.start,W=$.duration,j=k(1/32);switch(Y){case"trill":for(var J=2;W>0;)d.push({cmd:"note",pitch:$.pitch+J,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),J=J===2?0:2,W-=j,G+=j;break;case"trillh":for(var J=1;W>0;)d.push({cmd:"note",pitch:$.pitch+J,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),J=J===1?0:1,W-=j,G+=j;break;case"pralltriller":d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),W-=j,G+=j,d.push({cmd:"note",pitch:$.pitch+2,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),W-=j,G+=j,d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G,duration:W,gap:0,instrument:g});break;case"mordent":case"lowermordent":d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),W-=j,G+=j,d.push({cmd:"note",pitch:$.pitch-2,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),W-=j,G+=j,d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G,duration:W,gap:0,instrument:g});break;case"turn":j=$.duration/4,d.push({cmd:"note",pitch:$.pitch+2,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G+j,duration:j,gap:0,instrument:g,style:"decoration"}),d.push({cmd:"note",pitch:$.pitch-1,volume:$.volume,start:G+j*2,duration:j,gap:0,instrument:g,style:"decoration"}),d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G+j*3,duration:j,gap:0,instrument:g,style:"decoration"});break;case"roll":for(;W>0;)d.push({cmd:"note",pitch:$.pitch,volume:$.volume,start:G,duration:j,gap:0,instrument:g,style:"decoration"}),W-=j*2,G+=j*2;break}}function U(Y,$){var G=H(C(Y.time),$);c.processChord(Y);var W;if(Y.gracenotes&&Y.pitches&&Y.pitches.length>0&&Y.pitches[0]&&(W=ae(Y.gracenotes,Y.pitches[0].duration),Y.elem&&(Y.elem.midiGraceNotePitches=K(W,C(Y.time),G*2/3,g))),Y.elem){var j=C(Y.time),J=j/F/i*60*1e3;if(Y.elem.currentTrackMilliseconds===void 0)Y.elem.currentTrackMilliseconds=J,Y.elem.currentTrackWholeNotes=j;else if(Y.elem.currentTrackMilliseconds.length===void 0)Y.elem.currentTrackMilliseconds!==J&&(Y.elem.currentTrackMilliseconds=[Y.elem.currentTrackMilliseconds,J],Y.elem.currentTrackWholeNotes=[Y.elem.currentTrackWholeNotes,j]);else{for(var re=!1,fe=0;fe<Y.elem.currentTrackMilliseconds.length;fe++)Y.elem.currentTrackMilliseconds[fe]===J&&(re=!0);re||(Y.elem.currentTrackMilliseconds.push(J),Y.elem.currentTrackWholeNotes.push(j))}}if(Y.pitches){var Z="",ie=X(Y,G);ie.thisBreakBetweenNotes&&(Z=ie.thisBreakBetweenNotes),ie.velocity&&(G=ie.velocity);var me=Y.pitches;Y.style==="rhythm"&&(me=c.setRhythmHead(!0,Y)),Y.elem&&(Y.elem.midiPitches=[]);for(var de=0;de<me.length;de++){let Ce=G;!ie.velocity&&Array.isArray(Y.decoration)&&Y.decoration.length>de&&(Ce=H(C(Y.time),$,de));var oe=me[de];if(oe){oe.startSlur&&(N+=oe.startSlur.length),oe.endSlur&&(N-=oe.endSlur.length);var pe=oe.actualPitch?oe.actualPitch:ne(oe);if(g===u&&_){var Ne=h(oe);Ne&&_[Ne]&&(pe=_[Ne].sound)}var he={cmd:"note",pitch:pe,volume:Ce,start:C(Y.time),duration:k(oe.duration),instrument:g,startChar:Y.elem.startChar,endChar:Y.elem.endChar};if(he=se(he),Y.gracenotes&&(he.duration=he.duration/2,he.start=he.start+he.duration),Y.elem&&Y.elem.midiPitches.push(he),ie.noteModification)Q(ie.noteModification,he);else{switch(N>0?he.endType="tenuto":Z&&(he.endType=Z),he.endType){case"tenuto":he.gap=O;break;case"staccato":var Te=he.duration*I;he.gap=i/60*Te;break;default:he.gap=P;break}d.push(he)}}}d.length-1}var Ee=ee(Y);r=Math.max(r,C(Y.time)+k(Ee))}function ee(Y){return Y.pitches&&Y.pitches.length>0&&Y.pitches[0]?Y.pitches[0].duration:Y.elem?Y.elem.duration:Y.duration}var te=[0,2,4,5,7,9,11];function ne(Y){if(Y.midipitch!==void 0)return Y.midipitch;var $=Y.pitch;if(Y.accidental)switch(Y.accidental){case"sharp":s[$]=1;break;case"flat":s[$]=-1;break;case"natural":s[$]=0;break;case"dblsharp":s[$]=2;break;case"dblflat":s[$]=-2;break;case"quartersharp":s[$]=.25;break;case"quarterflat":s[$]=-.25;break}var G=ce($)*12+te[ue($)]+60;return s[$]!==void 0?G+=s[$]:G+=t[ue($)],G+=a,G}function V(Y){var $=[0,0,0,0,0,0,0];if(!Y.accidentals)return $;for(var G=0;G<Y.accidentals.length;G++){var W=Y.accidentals[G],j;switch(W.acc){case"flat":j=-1;break;case"quarterflat":j=-.25;break;case"sharp":j=1;break;case"quartersharp":j=.25;break;default:j=0;break}var J=W.note.toLowerCase(),re=ue(J.charCodeAt(0)-99);$[re]+=j}return $}function ae(Y,$){for(var G=0,W=[],j,J=0;J<Y.length;J++)j=Y[J],G+=j.duration;var re=$/2/G;for(J=0;J<Y.length;J++){j=Y[J];var fe=ne(j);if(g===u&&_){var Z=h(j);Z&&_[Z]&&(fe=_[Z].sound)}var ie={pitch:fe,duration:j.duration*re};ie=se(ie),W.push(ie)}return W}function K(Y,$,G,W){var j=[];G=Math.round(G);for(var J=0;J<Y.length;J++){var re=Y[J];d.push({cmd:"note",pitch:re.pitch,volume:G,start:$,duration:re.duration,gap:0,instrument:W,style:"grace"}),j.push({pitch:re.pitch,durationInMeasures:re.duration,volume:G,instrument:W}),$+=re.duration}return j}function se(Y){var $=""+Y.pitch;return $.indexOf(".75")>=0?(Y.pitch=Math.round(Y.pitch),Y.cents=-50):$.indexOf(".25")>=0&&(Y.pitch=Math.round(Y.pitch),Y.cents=50),Y}function ce(Y){return Math.floor(Y/7)}function ue(Y){return Y=Y%7,Y<0&&(Y+=7),Y}function le(Y){if(Y.pattern.length===0||Y.on===!1)return{on:!1};for(var $=Y.pattern[0],G=[],W="",j=0,J=0;J<$.length;J++)if($[J]==="d"&&j++,$[J]==="d"||$[J]==="z")W.length!==0?(G.push(W),W=$[J]):W=W+$[J];else{if(W.length===0)return{on:!1};W=W+$[J]}if(W.length!==0&&G.push(W),Y.pattern.length!==j*2+1)return{on:!1};for(var re={on:!0,bars:Y.bars,pattern:[]},fe=R(e),Z=0,ie=0;ie<G.length;ie++){W=G[ie];for(var me=1,de=!1,oe=0,pe=1;pe<W.length;pe++)switch(W[pe]){case"/":oe!==0&&(me*=oe),oe=0,de=!0;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=oe*10+W[pe];break;default:return{on:!1}}de?(oe===0&&(oe=2),me/=oe):oe&&(me*=oe),W[0]==="d"?(re.pattern.push({len:me*fe,pitch:Y.pattern[1+Z],velocity:Y.pattern[1+Z+j]}),Z++):re.pattern.push({len:me*fe,pitch:null})}return B=Y.bars?Y.bars:1,re}function ge(){if(!(!L||!L.pattern)){for(var Y=L,$=0,G=e.num/e.den,W=0;W<Y.pattern.length;W++)$+=Y.pattern[W].len;var j=$/B/G;for(W=0;W<Y.pattern.length;W++)Y.pattern[W].len=Y.pattern[W].len/j;L=Y}}function ve(Y){if(!(M.length===0&&!L.on)){var $=e.num/e.den;if(M.length===0){if(r<$)return;M.push({cmd:"program",channel:Y,instrument:u})}if(L.on)for(var G=m,W=0;W<L.pattern.length;W++){var j=k(L.pattern[W].len);L.pattern[W].pitch&&M.push({cmd:"note",pitch:L.pattern[W].pitch,volume:L.pattern[W].velocity,start:G,duration:j,gap:0,instrument:u}),G+=j}}}function we(Y,$){for(var G={},W=0;W<Y.length;W++)for(var j=0;j<Y[W].length;j++){var J=Y[W][j];J.cmd==="note"&&(G[J.start]===void 0&&(G[J.start]=[]),G[J.start].push({track:W,event:j,pitch:J.pitch}))}var re=Object.keys(G);for(W=0;W<re.length;W++){var fe=G[re[W]];if(fe.length>1){fe=fe.sort(function(oe,pe){return oe.pitch-pe.pitch});var Z=fe[fe.length-1],ie=Z.pitch%12,me=!1;for(j=0;!me&&j<fe.length-1;j++)fe[j].pitch%12===ie&&(me=!0);if(me){var de=Y[Z.track][Z.event];de.cents||(de.cents=0),de.cents+=$}}}}})(),Ht=p,Ht}var zt,Qa;function sc(){if(Qa)return zt;Qa=1;function p(f,v){v||(v={});for(var g=!!v.lineBreaks,d=[],o=!1,r=[],c=[],e=[],u=[],m=[],b=[],x=[],T=0;T<f.length;T++){var E=f[T];if(E.staff){if(o&&!E.vskip)for(var D=d[d.length-1],F=0;F<D.staff.length;F++){var y=E.staff[F],A=D.staff[F];if(y&&(n(y.meter,r[F])||(h(y.meter,y.voices),r[F]=y.meter,delete y.meter),n(y.key,c[F])||(s(y.key,y.voices),c[F]=y.key,delete y.key),y.title&&(A.abbrevTitle=y.title),n(y.clef,e[F])||(t(y.clef,y.voices),e[F]=y.clef,delete y.clef),n(y.vocalfont,u[F])||(a(y.vocalfont,y.voices,"vocalfont"),u[F]=y.vocalfont,delete y.vocalfont),n(y.gchordfont,m[F])||(a(y.gchordfont,y.voices,"gchordfont"),m[F]=y.gchordfont,delete y.gchordfont),n(y.tripletfont,b[F])||(a(y.tripletfont,y.voices,"tripletfont"),b[F]=y.tripletfont,delete y.tripletfont),n(y.annotationfont,x[F])||(a(y.annotationfont,y.voices,"annotationfont"),x[F]=y.annotationfont,delete y.annotationfont)),y)for(var N=0;N<A.voices.length;N++){var M=A.voices[N],L=y.voices[N];g&&M.push({el_type:"break"}),L&&(A.voices[N]=M.concat(L))}}else{for(var B=0;B<E.staff.length;B++)c[B]=E.staff[B].key,r[B]=E.staff[B].meter,e[B]=E.staff[B].clef;d.push(i(E))}o=!0}else o=!1,d.push(E)}return d}function l(f,v){return f==="abselem"?"abselem":v}function h(f,v){f.el_type="meter",f.startChar=-1,f.endChar=-1;for(var g=0;g<v.length;g++)v[g].unshift(f)}function s(f,v){f.el_type="key",f.startChar=-1,f.endChar=-1;for(var g=0;g<v.length;g++)v[g].unshift(f)}function t(f,v){f.el_type="clef",f.startChar=-1,f.endChar=-1;for(var g=0;g<v.length;g++)v[g].unshift(f)}function a(f,v,g){f.el_type="font",f.type=g,f.startChar=-1,f.endChar=-1;for(var d=0;d<v.length;d++)v[d].unshift(f)}function n(f,v){if(!f)return!0;var g=JSON.stringify(f,l),d=JSON.stringify(v,l);return g===d}function i(f){for(var v={},g=Object.keys(f),d=0;d<g.length;d++)if(g[d]!=="staff")v[g[d]]=f[g[d]];else{v.staff=[];for(var o=0;o<f.staff.length;o++){for(var r={},c=Object.keys(f.staff[o]),e=0;e<c.length;e++)if(c[e]!=="voices")r[c[e]]=f.staff[o][c[e]];else{r.voices=[];for(var u=0;u<f.staff[o].voices.length;u++)r.voices.push([].concat(f.staff[o].voices[u]))}v.staff.push(r)}}return v}return zt=p,zt}var Gt,Ja;function zs(){if(Ja)return Gt;Ja=1;var p=Fe(),l=Se(),h=Rs(),s=ic(),t=sc(),a=function(){this.reset=function(){this.version="1.1.0",this.media="screen",this.metaText={},this.metaTextInfo={},this.formatting={},this.lines=[],this.staffNum=0,this.voiceNum=0,this.lineNum=0,this.runningFonts={},delete this.visualTranspose},this.reset();function n(o,r,c,e){for(var u=0;u<e.length;u++)o[c][e[u]]=r[c][e[u]]}this.copyTopInfo=function(o){var r=["tempo","title","header","rhythm","origin","composer","author","partOrder"];n(this,o,"metaText",r),n(this,o,"metaTextInfo",r)},this.copyBottomInfo=function(o){var r=["unalignedWords","book","source","discography","notes","transcription","history","abc-copyright","abc-creator","abc-edited-by","footer"];n(this,o,"metaText",r),n(this,o,"metaTextInfo",r)},this.getBeatLength=function(){var o=this.getMeterFraction(),r=1;return(o.num===6||o.num===9||o.num===12||o.num===3&&o.den===8)&&(r=3),r/o.den};function i(o,r){for(var c=0,e=0;e<o.length;e++)if(o[e].staff)for(var u=0;u<o[e].staff.length;u++)for(var m=0;m<o[e].staff[u].voices.length;m++)for(var b=o[e].staff[u].voices[m],x=1,T=0;T<b.length;T++){var E=b[T].rest&&b[T].rest.type==="spacer";if(b[T].startTriplet&&(x=b[T].tripletMultiplier),b[T].duration&&!E&&b[T].el_type!=="tempo"&&(c+=b[T].duration*x),b[T].endTriplet&&(x=1),c>=r&&(c-=r),b[T].el_type==="bar")return c}return c}this.getPickupLength=function(){var o=this.getBarLength(),r=i(this.lines,o);return r<1e-8||o-r<1e-8?0:r},this.getBarLength=function(){var o=this.getMeterFraction();return o.num/o.den},this.getTotalTime=function(){return this.totalTime},this.getTotalBeats=function(){return this.totalBeats},this.millisecondsPerMeasure=function(o){var r;if(o)r=o;else{var c=this.metaText?this.metaText.tempo:null;r=this.getBpm(c)}r<=0&&(r=1);var e=this.getBeatsPerMeasure(),u=e/r;return u*6e4},this.getBeatsPerMeasure=function(){var o=this.getBeatLength(),r=this.getBarLength();return r/o},this.getMeter=function(){for(var o=0;o<this.lines.length;o++){var r=this.lines[o];if(r.staff)for(var c=0;c<r.staff.length;c++){var e=r.staff[c].meter;if(e)return e}}return{type:"common_time"}},this.getMeterFraction=function(){var o=this.getMeter(),r=4,c=4;return o&&(o.type==="specified"?(r=parseInt(o.value[0].num,10),c=parseInt(o.value[0].den,10)):o.type==="cut_time"?(r=2,c=2):o.type==="common_time"&&(r=4,c=4)),this.meter={num:r,den:c},this.meter},this.getKeySignature=function(){for(var o=0;o<this.lines.length;o++){var r=this.lines[o];if(r.staff){for(var c=0;c<r.staff.length;c++)if(r.staff[c].key)return r.staff[c].key}}return{}},this.getElementFromChar=function(o){for(var r=0;r<this.lines.length;r++){var c=this.lines[r];if(c.staff)for(var e=0;e<c.staff.length;e++)for(var u=c.staff[e],m=0;m<u.voices.length;m++)for(var b=u.voices[m],x=0;x<b.length;x++){var T=b[x];if(T.startChar&&T.endChar&&T.startChar<=o&&T.endChar>o)return T}}return null};function f(o){for(var r,c,e,u,m=o.length-1;m>=0;m--){var b=o[m];b.type==="bar"?(b.top=e,b.nextTop=r,r=e,b.bottom=u,b.nextBottom=c,c=u):b.type==="event"&&(e=b.top,u=b.top+b.height)}}function v(o){var r=[];for(var c in o)o.hasOwnProperty(c)&&r.push(o[c]);return r=r.sort(function(e,u){var m=e.milliseconds-u.milliseconds;return m!==0?m:e.type==="bar"?-1:1}),r}this.addElementToEvents=function(o,r,c,e,u,m,b,x,T,E){if(r.hint)return{isTiedState:void 0,duration:0};var D=r.durationClass?r.durationClass:r.duration;if(r.abcelem.rest&&r.abcelem.rest.type==="spacer"&&(D=0),D>0){for(var F=[],y=0;y<r.elemset.length;y++)r.elemset[y]!==null&&F.push(r.elemset[y]);var A=r.startTie;if(T!==void 0)o["event"+T].elements.push(F),E&&(o["event"+c]||(o["event"+c]={type:"event",milliseconds:c,line:m,measureNumber:b,top:e,height:u,left:null,width:0,elements:[],startChar:null,endChar:null,startCharArray:[],endCharArray:[]}),o["event"+c].measureStart=!0,E=!1),A||(T=void 0);else{if(!o["event"+c])o["event"+c]={type:"event",milliseconds:c,line:m,measureNumber:b,top:e,height:u,left:r.x,width:r.w,elements:[F],startChar:r.abcelem.startChar,endChar:r.abcelem.endChar,startCharArray:[r.abcelem.startChar],endCharArray:[r.abcelem.endChar],midiPitches:r.abcelem.midiPitches?p.cloneArray(r.abcelem.midiPitches):[]},r.abcelem.midiGraceNotePitches&&(o["event"+c].midiGraceNotePitches=p.cloneArray(r.abcelem.midiGraceNotePitches));else{if(o["event"+c].left?o["event"+c].left=Math.min(o["event"+c].left,r.x):o["event"+c].left=r.x,o["event"+c].elements.push(F),o["event"+c].startCharArray.push(r.abcelem.startChar),o["event"+c].endCharArray.push(r.abcelem.endChar),o["event"+c].startChar===null&&(o["event"+c].startChar=r.abcelem.startChar),o["event"+c].endChar===null&&(o["event"+c].endChar=r.abcelem.endChar),r.abcelem.midiPitches&&r.abcelem.midiPitches.length){o["event"+c].midiPitches||(o["event"+c].midiPitches=[]);for(var y=0;y<r.abcelem.midiPitches.length;y++)o["event"+c].midiPitches.push(r.abcelem.midiPitches[y])}if(r.abcelem.midiGraceNotePitches&&r.abcelem.midiGraceNotePitches.length){o["event"+c].midiGraceNotePitches||(o["event"+c].midiGraceNotePitches=[]);for(var N=0;N<r.abcelem.midiGraceNotePitches.length;N++)o["event"+c].midiGraceNotePitches.push(r.abcelem.midiGraceNotePitches[N])}}E&&(o["event"+c].measureStart=!0,E=!1)}}return{isTiedState:T,duration:D/x,nextIsBar:E||r.type==="bar"}},this.makeVoicesArray=function(){for(var o=[],r=[],c={},e=0;e<this.engraver.staffgroups.length;e++){var u=this.engraver.staffgroups[e];if(u&&u.staffs&&u.staffs.length>0){var m=u.staffs[0],b=m.absoluteY,x=b-m.top*l.STEP,T=u.staffs[u.staffs.length-1];b=T.absoluteY;for(var E=b-T.bottom*l.STEP,D=E-x,F=u.voices,y=0;y<F.length;y++)if(!(F[y].staff&&F[y].staff.isTabStaff)){var A=!1;o[y]||(o[y]=[]),r[y]===void 0&&(r[y]=0);for(var N=F[y].children,M=0;M<N.length;M++)N[M].type==="tempo"&&(c[r[y]]=this.getBpm(N[M].abcelem)),o[y].push({top:x,height:D,line:u.line,measureNumber:r[y],elem:N[M]}),N[M].type==="bar"&&A&&r[y]++,(N[M].type==="note"||N[M].type==="rest")&&(A=!0)}}}return this.tempoLocations=c,o},this.setupEvents=function(o,r,c,e){e||(e=1);for(var u=[],m={},b=o,x,T=!0,E=this.makeVoicesArray(),D=0,F=0;F<E.length;F++){var y=b,A=Math.round(y*1e3),N=0,M=-1,L=E[F],B=c;r=this.getBeatLength()*B/60;for(var S=-1,_=0;_<L.length;_++){var P=L[_].measureNumber;S!==P&&this.tempoLocations[P]&&(B=this.tempoLocations[P],r=e*this.getBeatLength()*B/60,S=P);var O=L[_].elem,I=this.addElementToEvents(m,O,A,L[_].top,L[_].height,L[_].line,L[_].measureNumber,r,x,T);x=I.isTiedState,T=I.nextIsBar,y+=I.duration;var w;if(O.duration>0&&m["event"+A]&&(w="event"+A),A=Math.round(y*1e3),O.type==="bar"){var C=O.abcelem.type,k=C==="bar_right_repeat"||C==="bar_dbl_repeat",q=O.abcelem.startEnding==="1",R=C==="bar_left_repeat"||C==="bar_dbl_repeat"||C==="bar_right_repeat";if(k){_>0&&(m[w].endX=O.x),M===-1&&(M=_);var z=0;S=-1;for(var H=N;H<M;H++){P=L[H].measureNumber,S!==P&&this.tempoLocations[P]&&(B=this.tempoLocations[P],r=e*this.getBeatLength()*B/60,S=P);var X=L[H].elem;I=this.addElementToEvents(m,X,A,L[H].top,L[H].height,L[H].line,L[H].measureNumber,r,x,T),x=I.isTiedState,T=I.nextIsBar,y+=I.duration,z=A,A=Math.round(y*1e3)}m["event"+z]&&(m["event"+z].endX=L[M].elem.x),T=!0,M=-1}q&&(M=_),R&&(N=_)}}D=Math.max(D,A)}return u=v(m),f(u),d(this.lines,u),u.push({type:"end",milliseconds:D}),this.addUsefulCallbackInfo(u,B*e),u},this.addUsefulCallbackInfo=function(o,r){for(var c=this.millisecondsPerMeasure(r),e=0;e<o.length;e++){var u=o[e];u.millisecondsPerMeasure=c}};function g(o,r){for(;r<o.length&&o[r].left===null;)r++;return o[r]}function d(o,r){if(!(r.length<1)){for(var c=0;c<r.length-1;c++){var e=r[c],u=g(r,c+1);if(e.left!==null){var m=u&&e.top===u.top?u.left:o[e.line].staffGroup.w;e.endX!==void 0?m>e.left&&(e.endX=Math.min(e.endX,m)):e.endX=m}}var b=r[r.length-1];b.endX=o[b.line].staffGroup.w}}this.getBpm=function(o){var r;if(o||(o=this.metaText?this.metaText.tempo:null),o){r=o.bpm;var c=this.getBeatLength(),e=o.duration&&o.duration.length>0?o.duration[0]:c;r=r*e/c}if(!r){r=180;var u=this.getMeterFraction();u&&u.num!==3&&u.num%3===0&&(r=120)}return r},this.setTiming=function(o,r){if(r=r||0,!this.engraver||!this.engraver.staffgroups)return console.log("setTiming cannot be called before the tune is drawn."),this.noteTimings=[],this.noteTimings;var c=this.metaText?this.metaText.tempo:null,e=this.getBpm(c),u=1;o?c&&(u=o/e):o=e;var m=this.getBeatLength(),b=o/60,x=this.getBarLength(),T=x/m*r/b;T&&(T-=this.getPickupLength()/m/b);var E=m*b;return this.noteTimings=this.setupEvents(T,E,o,u),this.noteTimings.length>0?(this.totalTime=this.noteTimings[this.noteTimings.length-1].milliseconds/1e3,this.totalBeats=this.totalTime*b):(this.totalTime=void 0,this.totalBeats=void 0),this.noteTimings},this.setUpAudio=function(o){o||(o={});var r=h(this,o);return s(r,o,this.formatting.percmap,this.formatting.midi)},this.deline=function(o){return t(this.lines,o)},this.findSelectableElement=function(o){return this.engraver&&this.engraver.selectables?this.engraver.findSelectableElement(o):null},this.getSelectableArray=function(){return this.engraver&&this.engraver.selectables?this.engraver.selectables:[]}};return Gt=a,Gt}var Yt,Za;function oc(){if(Za)return Yt;Za=1;var p=va(),l=function(y){var A=this,N={},M="";y.reset(),this.setVisualTranspose=function(L){L!==void 0&&(y.visualTranspose=L)},this.cleanUp=function(L,B,S){r(y),delete y.runningFonts,s(y),y.metaText.tempo&&y.metaText.tempo.bpm&&!y.metaText.tempo.duration&&(y.metaText.tempo.duration=[y.getBeatLength()]);var _=!1,P,O,I;for(P=0;P<y.lines.length;P++)if(y.lines[P].staff!==void 0){var w=!1;for(O=0;O<y.lines[P].staff.length;O++)if(y.lines[P].staff[O]===void 0)_=!0,y.lines[P].staff[O]=null;else for(I=0;I<y.lines[P].staff[O].voices.length;I++)y.lines[P].staff[O].voices[I]===void 0?y.lines[P].staff[O].voices[I]=[]:c(y.lines[P].staff[O].voices[I])&&(w=!0);w||(y.lines[P]=null,_=!0)}if(_&&(y.lines=y.lines.filter(function(H){return!!H}),y.lines.forEach(function(H){H.staff&&(H.staff=H.staff.filter(function(X){return!!X}))})),L)for(;f(y.lines,L););if(B){for(_=!1,P=0;P<y.lines.length;P++)if(y.lines[P].staff!==void 0)for(O=0;O<y.lines[P].staff.length;O++){var C=!1;for(I=0;I<y.lines[P].staff[O].voices.length;I++)e(y.lines[P].staff[O].voices[I])&&(C=!0);C||(_=!0,y.lines[P].staff[O]=null)}_&&y.lines.forEach(function(H){H.staff&&(H.staff=H.staff.filter(function(X){return!!X}))})}for(n(y.lines),P=0;P<y.lines.length;P++)if(y.lines[P].staff)for(O=0;O<y.lines[P].staff.length;O++)delete y.lines[P].staff[O].workingClef;for(;t(y););for(var P=0;P<y.lines.length;P++){var k=y.lines[P].staff;if(k)for(y.staffNum=0;y.staffNum<k.length;y.staffNum++)for(k[y.staffNum].clef&&p.fixClef(k[y.staffNum].clef),y.voiceNum=0;y.voiceNum<k[y.staffNum].voices.length;y.voiceNum++){var q=k[y.staffNum].voices[y.voiceNum];i(q,y.staffNum,y.voiceNum,S);for(var R=0;R<q.length;R++)q[R].el_type==="clef"&&p.fixClef(q[R]);if(q.length>0&&q[q.length-1].barNumber){var z=g(y.lines,P);z&&(z.staff[0].barNumber=q[q.length-1].barNumber),delete q[q.length-1].barNumber}}}return delete y.staffNum,delete y.voiceNum,delete y.lineNum,delete y.potentialStartBeam,delete y.potentialEndBeam,delete y.vskipPending,S},this.addTieToLastNote=function(L){var B=d(y);return B&&B.pitches&&B.pitches.length>0?(B.pitches[0].startTie={},L&&(B.pitches[0].startTie.style="dotted"),!0):!1},this.appendElement=function(L,B,S,_){if(_.el_type=L,B!==null&&(_.startChar=B),S!==null&&(_.endChar=S),L==="note"){var P=o(_);P>=.25||_.force_end_beam_last&&y.potentialStartBeam!==void 0?x(y):_.end_beam&&y.potentialStartBeam!==void 0?_.rest===void 0?b(_,y):x(y):_.rest===void 0&&(y.potentialStartBeam===void 0?_.end_beam||(y.potentialStartBeam=_,delete y.potentialEndBeam):y.potentialEndBeam=_)}else x(y);return delete _.end_beam,delete _.force_end_beam_last,_.rest&&_.rest.type==="invisible"&&delete _.decoration,y.lines.length<=y.lineNum||y.lines[y.lineNum].staff.length<=y.staffNum?!1:(m(A,y,_,N,M),!0)},this.appendStartingElement=function(L,B,S,_){r(y);var P;L==="key"&&(P=_.impliedNaturals,delete _.impliedNaturals,delete _.explicitAccidentals);var O=Object.assign({},_);if(y.lines[y.lineNum]){var I=y.lines[y.lineNum].staff;if(I){I.length<=y.staffNum&&(I[y.staffNum]={},I[y.staffNum].clef=Object.assign({},I[0].clef),I[y.staffNum].key=Object.assign({},I[0].key),I[0].meter&&(I[y.staffNum].meter=Object.assign({},I[0].meter)),I[y.staffNum].workingClef=Object.assign({},I[0].workingClef),I[y.staffNum].voices=[[]]),L==="clef"&&(I[y.staffNum].workingClef=O);for(var w=I[y.staffNum].voices[y.voiceNum],C=0;C<w.length;C++){if(w[C].el_type==="note"||w[C].el_type==="bar"){O.el_type=L,O.startChar=B,O.endChar=S,P&&(O.accidentals=P.concat(O.accidentals)),w.push(O);return}if(w[C].el_type===L){O.el_type=L,O.startChar=B,O.endChar=S,P&&(O.accidentals=P.concat(O.accidentals)),w[C]=O;return}}I[y.staffNum][L]=_}}},this.addSubtitle=function(L,B){u(y,{subtitle:{text:L,startChar:B.startChar,endChar:B.endChar}})},this.addSpacing=function(L){y.vskipPending=L},this.addNewPage=function(L){u(y,{newpage:L})},this.addSeparator=function(L,B,S,_){u(y,{separator:{spaceAbove:Math.round(L),spaceBelow:Math.round(B),lineLength:Math.round(S),startChar:_.startChar,endChar:_.endChar}})},this.addText=function(L,B){u(y,{text:{text:L,startChar:B.startChar,endChar:B.endChar}})},this.addCentered=function(L){u(y,{text:[{text:L,center:!0}]})},this.changeVoiceScale=function(L){A.appendElement("scale",null,null,{size:L})},this.changeVoiceColor=function(L){A.appendElement("color",null,null,{color:L})},this.startNewLine=function(L){r(y),L.currentVoiceName&&(M=L.currentVoiceName,N[L.currentVoiceName]=L),y.lines[y.lineNum]===void 0?F(A,y,L):y.lines[y.lineNum].staff===void 0?(y.lineNum++,this.startNewLine(L)):y.lines[y.lineNum].staff[y.staffNum]===void 0?D(A,y,L):y.lines[y.lineNum].staff[y.staffNum].voices[y.voiceNum]===void 0?E(A,y,L):c(y.lines[y.lineNum].staff[y.staffNum].voices[y.voiceNum])?(y.lineNum++,this.startNewLine(L)):L.part&&A.appendElement("part",L.part.startChar,L.part.endChar,{title:L.part.title})},this.setRunningFont=function(L,B){y.runningFonts[L]=B},this.setBarNumberImmediate=function(L){var B=this.getCurrentVoice();if(B&&B.length>0){var S=B[B.length-1];if(S.el_type==="bar")S.barNumber!==void 0&&(S.barNumber=L);else return L-1}return L},this.hasBeginMusic=function(){for(var L=0;L<y.lines.length;L++)if(y.lines[L].staff)return!0;return!1},this.isFirstLine=function(L){for(var B=L-1;B>=0;B--)if(y.lines[B].staff!==void 0)return!1;return!0},this.getCurrentVoice=function(){var L=v(y.lines,y.lineNum);if(!L)return null;var B=L.staff[y.staffNum];return B&&B.voices[y.voiceNum]!==void 0?B.voices[y.voiceNum]:null},this.setCurrentVoice=function(L,B,S){y.staffNum=L,y.voiceNum=B,M=S;for(var _=0;_<y.lines.length;_++)if(y.lines[_].staff&&(y.lines[_].staff[L]===void 0||y.lines[_].staff[L].voices[B]===void 0||!c(y.lines[_].staff[L].voices[B])))return y.lineNum=_,!!(!y.lines[_].staff[L]||y.lines[_].staff[L].voices[B]);return y.lineNum=_,!1},this.addMetaText=function(L,B,S){y.metaText[L]===void 0?(y.metaText[L]=B,y.metaTextInfo[L]=S):(typeof y.metaText[L]=="string"&&typeof B=="string"?y.metaText[L]+=`
`+B:(y.metaText[L]==="string"&&(y.metaText[L]=[{text:y.metaText[L]}]),typeof B=="string"&&(B=[{text:B}]),y.metaText[L]=y.metaText[L].concat(B)),y.metaTextInfo[L].endChar=S.endChar)},this.addMetaTextArray=function(L,B,S){y.metaText[L]===void 0?(y.metaText[L]=[B],y.metaTextInfo[L]=S):(y.metaText[L].push(B),y.metaTextInfo[L].endChar=S.endChar)},this.addMetaTextObj=function(L,B,S){y.metaText[L]=B,y.metaTextInfo[L]=S}};function h(y){if(!y||typeof y=="string")return!1;for(var A=0;A<y.length;A++)if(typeof y[A]!="string")return!1;return!0}function s(y){h(y.metaText.notes)&&(y.metaText.notes=y.metaText.notes.join(`
`)),h(y.metaText.history)&&(y.metaText.history=y.metaText.history.join(`
`))}function t(y){for(var A=!1,N=[],M=0;M<y.lines.length;M++){var L=y.lines[M];if(L.staff)for(var B=0;B<L.staff.length;B++){for(var S=L.staff[B],_=[],P=0;P<S.voices.length;P++){var O=S.voices[P];_.push({hasOverlay:!1,voice:[],snip:[]}),N[M]=0;for(var I=0,w=!1,C=-1,k=0;k<O.length;k++){var q=O[k];if(q.el_type==="overlay"&&!w){A=!0,w=!0,C=k,_[P].hasOverlay=!0;for(var R=0;R<M;R++)N[R]&&y.lines[R].staff&&S.voices.length>=y.lines[R].staff[0].voices.length&&y.lines[R].staff[0].voices.push([{el_type:"note",duration:N[R],rest:{type:"invisible"},startChar:q.startChar,endChar:q.endChar}])}else q.el_type==="bar"?(w?(w=!1,_[P].snip.push({start:C,len:k-C}),_[P].voice.push(q)):(I>0&&_[P].voice.push({el_type:"note",duration:I,rest:{type:"invisible"},startChar:q.startChar,endChar:q.endChar}),_[P].voice.push(q)),I=0):q.el_type==="note"?w?_[P].voice.push(q):(I+=q.duration,N[M]+=q.duration):(q.el_type==="scale"||q.el_type==="stem"||q.el_type==="overlay"||q.el_type==="style"||q.el_type==="transpose"||q.el_type==="color")&&_[P].voice.push(q)}_[P].hasOverlay&&_[P].snip.length===0&&_[P].snip.push({start:C,len:O.length-C})}for(P=0;P<_.length;P++){var z=_[P];if(z.hasOverlay){z.voice.splice(0,0,{el_type:"stem",direction:"down"}),S.voices.push(z.voice);for(var H=z.snip.length-1;H>=0;H--){var X=z.snip[H];S.voices[P].splice(X.start,X.len),S.voices[P].splice(X.start+1,0,{el_type:"stem",direction:"auto"});var Q=a(S.voices[P],X.start);S.voices[P].splice(Q,0,{el_type:"stem",direction:"up"})}for(H=0;H<S.voices[S.voices.length-1].length;H++){S.voices[S.voices.length-1][H]=Object.assign({},S.voices[S.voices.length-1][H]);var U=S.voices[S.voices.length-1][H];U.el_type==="bar"&&U.startEnding&&delete U.startEnding,U.el_type==="bar"&&U.endEnding&&delete U.endEnding}}}}}return A}function a(y,A){for(var N=A-1;N>0&&y[N].el_type!=="bar";N--);return N}function n(y){for(var A=!0,N=0;N<y.length;N++){var M=y[N];if(M.staff){for(var L=0;L<M.staff.length;L++){var B=M.staff[L];if(B.title){for(var S=!1,_=0;_<B.title.length;_++)B.title[_]?(B.title[_]=A?B.title[_].name:B.title[_].subname,B.title[_]?S=!0:B.title[_]=""):B.title[_]="";S||delete B.title}}A=!1}}}function i(y,A,N,M){M[A]||(M[A]=[]),M[A][N]||(M[A][N]=[]);for(var L,B=function(H,X,Q){if(M[A][N][Q]===void 0){for(L=0;L<M[A][N].length;L++)if(M[A][N][L]!==void 0){Q=L;break}if(M[A][N][Q]===void 0){var U=Q*100+1;H.endSlur.forEach(function(ne){U===ne&&--U}),M[A][N][Q]=[U]}}for(var ee,te=0;te<X;te++)ee=M[A][N][Q].pop(),H.endSlur.push(ee);return M[A][N][Q].length===0&&delete M[A][N][Q],ee},S=function(H,X,Q,U){H.startSlur=[],M[A][N][Q]===void 0&&(M[A][N][Q]=[]);for(var ee=Q*100+1,te=0;te<X;te++)U&&(U.forEach(function(ne){ee===ne&&++ee}),U.forEach(function(ne){ee===ne&&++ee}),U.forEach(function(ne){ee===ne&&++ee})),M[A][N][Q].forEach(function(ne){ee===ne&&++ee}),M[A][N][Q].forEach(function(ne){ee===ne&&++ee}),M[A][N][Q].push(ee),H.startSlur.push({label:ee}),H.dottedSlur&&(H.startSlur[H.startSlur.length-1].style="dotted",delete H.dottedSlur),ee++},_=0;_<y.length;_++){var P=y[_];if(P.el_type==="note"){if(P.gracenotes)for(var O=0;O<P.gracenotes.length;O++){if(P.gracenotes[O].endSlur){var I=P.gracenotes[O].endSlur;P.gracenotes[O].endSlur=[];for(var w=0;w<I;w++)B(P.gracenotes[O],1,20)}P.gracenotes[O].startSlur&&(L=P.gracenotes[O].startSlur,S(P.gracenotes[O],L,20))}if(P.endSlur&&(L=P.endSlur,P.endSlur=[],B(P,L,0)),P.startSlur&&(L=P.startSlur,S(P,L,0)),P.pitches){for(var C=[],k=0;k<P.pitches.length;k++)if(P.pitches[k].endSlur){var q=P.pitches[k].endSlur;P.pitches[k].endSlur=[];for(var R=0;R<q;R++){var z=B(P.pitches[k],1,k+1);C.push(z)}}for(k=0;k<P.pitches.length;k++)P.pitches[k].startSlur&&(L=P.pitches[k].startSlur,S(P.pitches[k],L,k+1,C));P.gracenotes&&P.pitches[0].endSlur&&P.pitches[0].endSlur[0]===100&&P.pitches[0].startSlur&&(P.gracenotes[0].endSlur?P.gracenotes[0].endSlur.push(P.pitches[0].startSlur[0].label):P.gracenotes[0].endSlur=[P.pitches[0].startSlur[0].label],P.pitches[0].endSlur.length===1?delete P.pitches[0].endSlur:P.pitches[0].endSlur[0]===100?P.pitches[0].endSlur.shift():P.pitches[0].endSlur[P.pitches[0].endSlur.length-1]===100&&P.pitches[0].endSlur.pop(),M[A][N][1].length===1?delete M[A][N][1]:M[A][N][1].pop())}}}}function f(y,A){for(var N=0;N<y.length;N++)if(y[N].staff!==void 0)for(var M=0;M<y[N].staff.length;M++)for(var L=[],B=0;B<y[N].staff[M].voices.length;B++)for(var S=y[N].staff[M].voices[B],_=0,P=0;P<S.length;P++)if(S[P].el_type==="bar"){if(_++,_>=A&&P<S.length-1){var O=g(y,N);if(!O){var I=JSON.parse(JSON.stringify(y[N]));y.push(Object.assign({},I)),O=y[y.length-1];for(var w=0;w<O.staff.length;w++)for(var C=0;C<O.staff[w].voices.length;C++)O.staff[w].voices[C]=[]}var k=P+1,q=y[N].staff[M].voices[B].slice(k);return y[N].staff[M].voices[B]=y[N].staff[M].voices[B].slice(0,k),O.staff[M].voices[B]=L.concat(q.concat(O.staff[M].voices[B])),!0}}else S[P].duration||L.push(S[P]);return!1}function v(y,A){if(y.length<=A)return null;for(;A>=0;){if(y[A].staff)return y[A];A--}return null}function g(y,A){for(A++;y.length>A;){if(y[A].staff)return y[A];A++}return null}function d(y){if(!y.lines[y.lineNum]||!y.lines[y.lineNum].staff||!y.lines[y.lineNum].staff[y.staffNum])return null;var A=y.lines[y.lineNum].staff[y.staffNum].voices[y.voiceNum];if(!A)return null;for(var N=A.length-1;N>=0;N--){var M=A[N];if(M.el_type==="note")return M}return null}function o(y){return y.duration?y.duration:0}function r(y){y.potentialStartBeam&&y.potentialEndBeam&&(y.potentialStartBeam.startBeam=!0,y.potentialEndBeam.endBeam=!0),delete y.potentialStartBeam,delete y.potentialEndBeam}function c(y){for(var A=0;A<y.length;A++)if(y[A].el_type==="note"||y[A].el_type==="bar")return!0;return!1}function e(y){for(var A=0;A<y.length;A++)if(y[A].el_type==="note"&&(y[A].rest===void 0||y[A].chord!==void 0))return!0;return!1}function u(y,A){y.vskipPending&&(A.vskip=y.vskipPending,delete y.vskipPending),y.lines.push(A)}function m(y,A,N,M,L){var B=A.lines[A.lineNum].staff[A.staffNum];if(N.pitches!==void 0){var S=B.workingClef.verticalPos;N.pitches.forEach(function(P){P.verticalPos=P.pitch-S})}if(N.gracenotes!==void 0){var _=B.workingClef.verticalPos;N.gracenotes.forEach(function(P){P.verticalPos=P.pitch-_})}B.voices.length<=A.voiceNum&&(M[L]||(M[L]={}),E(y,A,M[L])),B.voices[A.voiceNum].push(N)}function b(y,A){A.potentialStartBeam.startBeam=!0,y.endBeam=!0,delete A.potentialStartBeam,delete A.potentialEndBeam}function x(y){y.potentialStartBeam!==void 0&&y.potentialEndBeam!==void 0&&(y.potentialStartBeam.startBeam=!0,y.potentialEndBeam.endBeam=!0),delete y.potentialStartBeam,delete y.potentialEndBeam}function T(y,A,N){if(y.runningFonts[A]){for(var M=!1,L=Object.keys(N),B=0;B<L.length;B++)y.runningFonts[A][L[B]]!==N[L[B]]&&(M=!0);M&&(y.lines[y.lineNum].staff[y.staffNum][A]=N)}y.runningFonts[A]=N}function E(y,A,N){var M=A.lines[A.lineNum].staff[A.staffNum];if(M.voices[A.voiceNum]=[],M.title||(M.title=[]),M.title[A.voiceNum]={name:N.name,subname:N.subname},N.style&&y.appendElement("style",null,null,{head:N.style}),N.stem)y.appendElement("stem",null,null,{direction:N.stem});else if(A.voiceNum>0){if(M.voices[0]!==void 0){for(var L=!1,B=0;B<M.voices[0].length;B++)M.voices[0].el_type==="stem"&&(L=!0);if(!L){var S={el_type:"stem",direction:"up"};M.voices[0].splice(0,0,S)}}y.appendElement("stem",null,null,{direction:"down"})}N.scale&&y.appendElement("scale",null,null,{size:N.scale}),N.color&&y.appendElement("color",null,null,{color:N.color})}function D(y,A,N){N.key&&N.key.impliedNaturals&&(N.key.accidentals=N.key.accidentals.concat(N.key.impliedNaturals),delete N.key.impliedNaturals),A.lines[A.lineNum].staff[A.staffNum]={voices:[],clef:N.clef,key:N.key,workingClef:N.clef};var M=A.lines[A.lineNum].staff[A.staffNum];N.stafflines!==void 0&&(M.clef.stafflines=N.stafflines,M.workingClef.stafflines=N.stafflines),N.staffscale&&(M.staffscale=N.staffscale),N.annotationfont&&T(A,"annotationfont",N.annotationfont),N.gchordfont&&T(A,"gchordfont",N.gchordfont),N.tripletfont&&T(A,"tripletfont",N.tripletfont),N.vocalfont&&T(A,"vocalfont",N.vocalfont),N.bracket&&(M.bracket=N.bracket),N.brace&&(M.brace=N.brace),N.connectBarLines&&(M.connectBarLines=N.connectBarLines),N.barNumber&&(M.barNumber=N.barNumber),E(y,A,N),N.part&&y.appendElement("part",N.part.startChar,N.part.endChar,{title:N.part.title}),N.meter!==void 0&&(M.meter=N.meter),A.vskipPending&&(A.lines[A.lineNum].vskip=A.vskipPending,delete A.vskipPending)}function F(y,A,N){A.lines[A.lineNum]={staff:[]},D(y,A,N)}return Yt=l,Yt}var Wt,en;function Gs(){if(en)return Wt;en=1;var p=Fe(),l=pa(),h=ec(),s=rc(),t=ac(),a=Os(),n=zs(),i=oc(),f=function(){var v=new n,g=new i(v),d,o="",r="";this.getTune=function(){var B={formatting:v.formatting,lines:v.lines,media:v.media,metaText:v.metaText,metaTextInfo:v.metaTextInfo,version:v.version,addElementToEvents:v.addElementToEvents,addUsefulCallbackInfo:v.addUsefulCallbackInfo,getTotalTime:v.getTotalTime,getTotalBeats:v.getTotalBeats,getBarLength:v.getBarLength,getBeatLength:v.getBeatLength,getBeatsPerMeasure:v.getBeatsPerMeasure,getBpm:v.getBpm,getMeter:v.getMeter,getMeterFraction:v.getMeterFraction,getPickupLength:v.getPickupLength,getKeySignature:v.getKeySignature,getElementFromChar:v.getElementFromChar,makeVoicesArray:v.makeVoicesArray,millisecondsPerMeasure:v.millisecondsPerMeasure,setupEvents:v.setupEvents,setTiming:v.setTiming,setUpAudio:v.setUpAudio,deline:v.deline,findSelectableElement:v.findSelectableElement,getSelectableArray:v.getSelectableArray};return v.lineBreaks&&(B.lineBreaks=v.lineBreaks),v.visualTranspose&&(B.visualTranspose=v.visualTranspose),B};function c(B,S,_){B.positioning||(B.positioning={}),B.positioning[S]=_}function e(B,S,_){B.fonts||(B.fonts={}),B.fonts[S]=_}var u={reset:function(){for(var B in this)this.hasOwnProperty(B)&&typeof this[B]!="function"&&delete this[B];this.iChar=0,this.key={accidentals:[],root:"none",acc:"",mode:""},this.meter=null,this.origMeter=null,this.hasMainTitle=!1,this.default_length=.125,this.clef={type:"treble",verticalPos:0},this.octave=0,this.next_note_duration=0,this.start_new_line=!0,this.is_in_header=!0,this.partForNextLine={},this.tempoForNextLine=[],this.havent_set_length=!0,this.voices={},this.staves=[],this.macros={},this.currBarNumber=1,this.barCounter={},this.ignoredDecorations=[],this.score_is_present=!1,this.inEnding=!1,this.inTie=[],this.inTieChord={},this.vocalPosition="auto",this.dynamicPosition="auto",this.chordPosition="auto",this.ornamentPosition="auto",this.volumePosition="auto",this.openSlurs=[],this.freegchord=!1,this.endingHoldOver={}},differentFont:function(B,S){return this[B].decoration!==S[B].decoration||this[B].face!==S[B].face||this[B].size!==S[B].size||this[B].style!==S[B].style||this[B].weight!==S[B].weight},addFormattingOptions:function(B,S,_){_==="note"?(this.vocalPosition!=="auto"&&c(B,"vocalPosition",this.vocalPosition),this.dynamicPosition!=="auto"&&c(B,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&c(B,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&c(B,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&c(B,"volumePosition",this.volumePosition),this.differentFont("annotationfont",S)&&e(B,"annotationfont",this.annotationfont),this.differentFont("gchordfont",S)&&e(B,"gchordfont",this.gchordfont),this.differentFont("vocalfont",S)&&e(B,"vocalfont",this.vocalfont),this.differentFont("tripletfont",S)&&e(B,"tripletfont",this.tripletfont)):_==="bar"&&(this.dynamicPosition!=="auto"&&c(B,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&c(B,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&c(B,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&c(B,"volumePosition",this.volumePosition),this.differentFont("measurefont",S)&&e(B,"measurefont",this.measurefont),this.differentFont("repeatfont",S)&&e(B,"repeatfont",this.repeatfont))},duplicateStartEndingHoldOvers:function(){this.endingHoldOver={inTie:[],inTieChord:{}};for(var B=0;B<this.inTie.length;B++)if(this.endingHoldOver.inTie.push([]),this.inTie[B])for(var S=0;S<this.inTie[B].length;S++)this.endingHoldOver.inTie[B].push(this.inTie[B][S]);for(var _ in this.inTieChord)this.inTieChord.hasOwnProperty(_)&&(this.endingHoldOver.inTieChord[_]=this.inTieChord[_])},restoreStartEndingHoldOvers:function(){if(this.endingHoldOver.inTie){this.inTie=[],this.inTieChord={};for(var B=0;B<this.endingHoldOver.inTie.length;B++){this.inTie.push([]);for(var S=0;S<this.endingHoldOver.inTie[B].length;S++)this.inTie[B].push(this.endingHoldOver.inTie[B][S])}for(var _ in this.endingHoldOver.inTieChord)this.endingHoldOver.inTieChord.hasOwnProperty(_)&&(this.inTieChord[_]=this.endingHoldOver.inTieChord[_])}}},m=function(B){u.warnings||(u.warnings=[]),u.warnings.push(B)},b=function(B){u.warningObjects||(u.warningObjects=[]),u.warningObjects.push(B)},x=function(B){var S=B.replace(/\x12/g," ");return S=S.replace(/&/g,"&amp;"),S=S.replace(/</g,"&lt;"),S.replace(/>/g,"&gt;")},T=function(B,S,_){S||(S=" ");var P=S[_];(P===" "||!P)&&(P="SPACE");var O=x(S.substring(_-64,_))+'<span style="text-decoration:underline;font-size:1.3em;font-weight:bold;">'+P+"</span>"+x(S.substring(_+1).substring(0,64));m("Music Line:"+d.lineIndex+":"+(_+1)+": "+B+":  "+O),b({message:B,line:S,startChar:u.iChar+_,column:_})},E,D;this.getWarnings=function(){return u.warnings},this.getWarningObjects=function(){return u.warningObjects};var F=function(B,S){if(S.indexOf("")>=0){o+=S;return}if(S=o+S,o="",!B){T("Can't add words before the first line of music",B,0);return}S=p.strip(S),S[S.length-1]!=="-"&&(S=S+" ");for(var _=[],P=0,O=!1,I=function(k){var q=p.strip(S.substring(P,k));if(q=q.replace(/\\([-_*|~])/g,"$1"),P=k+1,q.length>0){O&&(q=q.replace(/~/g," "));var R=S[k];return R!=="_"&&R!=="-"&&(R=" "),_.push({syllable:d.translateString(q),divider:R}),O=!1,!0}return!1},w=!1,C=0;C<S.length;C++){switch(S[C]){case" ":case"":I(C);break;case"-":!w&&!I(C)&&_.length>0&&(p.last(_).divider="-",_.push({skip:!0,to:"next"}));break;case"_":w||(I(C),_.push({skip:!0,to:"slur"}));break;case"*":w||(I(C),_.push({skip:!0,to:"next"}));break;case"|":w||(I(C),_.push({skip:!0,to:"bar"}));break;case"~":w||(O=!0);break}w=S[C]==="\\"}B.forEach(function(k){if(_.length!==0){if(_[0].skip){switch(_[0].to){case"next":k.el_type==="note"&&k.pitches!==null&&_.shift();break;case"slur":k.el_type==="note"&&k.pitches!==null&&_.shift();break;case"bar":k.el_type==="bar"&&_.shift();break}k.el_type!=="bar"&&(k.lyric===void 0?k.lyric=[{syllable:"",divider:" "}]:k.lyric.push({syllable:"",divider:" "}))}else if(k.el_type==="note"&&k.rest===void 0){var q=_.shift();q.syllable&&(q.syllable=q.syllable.replace(/ +/g,"")),k.lyric===void 0?k.lyric=[q]:k.lyric.push(q)}}})},y=function(B,S){if(S.indexOf("")>=0){r+=S;return}if(S=r+S,r="",!B){T("Can't add symbols before the first line of music",B,0);return}S=p.strip(S),S[S.length-1]!=="-"&&(S=S+" ");for(var _=[],P=0,O=!1,I=function(C){var k=p.strip(S.substring(P,C));if(P=C+1,k.length>0){O&&(k=k.replace(/~/g," "));var q=S[C];return q!=="_"&&q!=="-"&&(q=" "),_.push({syllable:d.translateString(k),divider:q}),O=!1,!0}return!1},w=0;w<S.length;w++)switch(S[w]){case" ":case"":I(w);break;case"-":!I(w)&&_.length>0&&(p.last(_).divider="-",_.push({skip:!0,to:"next"}));break;case"_":I(w),_.push({skip:!0,to:"slur"});break;case"*":I(w),_.push({skip:!0,to:"next"});break;case"|":I(w),_.push({skip:!0,to:"bar"});break;case"~":O=!0;break}B.forEach(function(C){if(_.length!==0){if(_[0].skip)switch(_[0].to){case"next":C.el_type==="note"&&C.pitches!==null&&_.shift();break;case"slur":C.el_type==="note"&&C.pitches!==null&&_.shift();break;case"bar":C.el_type==="bar"&&_.shift();break}else if(C.el_type==="note"&&C.rest===void 0){var k=_.shift();C.lyric===void 0?C.lyric=[k]:C.lyric.push(k)}}})},A=function(B){if(p.startsWith(B,"%%")){var S=l.addDirective(B.substring(2));S&&T(S,B,2);return}var _=B.indexOf("%");if(_>=0&&(B=B.substring(0,_)),B=B.replace(/\s+$/,""),B.length!==0){if(o){F(g.getCurrentVoice(),B.substring(2));return}if(r){y(g.getCurrentVoice(),B.substring(2));return}if(B.length<2||B[1]!==":"||D.lineContinuation){D.parseMusic(B);return}var P=E.parseHeader(B);P.regular&&D.parseMusic(B),P.newline&&D.startNewLine(),P.words&&F(g.getCurrentVoice(),B.substring(2)),P.symbols&&y(g.getCurrentVoice(),B.substring(2))}};function N(B,S){B.push({el_type:"hint"});for(var _=0;_<S.length;_++){var P=S[_],O=Object.assign({},P);if(B.push(O),P.el_type==="bar")return}}function M(B,S){for(var _=0;_<B.length;_++){var P=B[_],O=S[_];if(O)for(var I=0;I<O.voices.length;I++){var w=O.voices[I],C=P.voices[I];C&&N(C,w)}}}function L(){for(var B=0;B<v.lines.length;B++){var S=v.lines[B].staff;if(S){for(var _=B+1;_<v.lines.length&&v.lines[_].staff===void 0;)_++;if(_<v.lines.length){var P=v.lines[_].staff;M(S,P)}}}}this.parse=function(B,S,_){S||(S={}),_||(_=0),v.reset(),B=B.replace(/\r\n?/g,`
`)+`
`;var P=B.split(`
\\`);if(P.length>1){for(var O=1;O<P.length;O++)for(;P[O].length>0&&P[O][0]!==`
`;)P[O]=P[O].substr(1),P[O-1]+=" ";B=P.join("  ")}B=B.replace(/\\([ \t]*)(%.*)*\n/g,function(z,H,X){var Q=X?Array(X.length+1).join(" "):"";return H+""+Q+`
`});var I=B.split(`
`);p.last(I).length===0&&I.pop(),d=new t(I,u),E=new h(d,T,u,v,g),D=new s(d,T,u,v,g,E),S.print&&(v.media="print"),u.reset(),u.iChar=_,S.visualTranspose?(u.globalTranspose=parseInt(S.visualTranspose),u.globalTranspose===0?u.globalTranspose=void 0:g.setVisualTranspose(S.visualTranspose)):u.globalTranspose=void 0,S.lineBreaks&&(u.lineBreaks=S.lineBreaks),E.reset(d,T,u,v);try{S.format&&l.globalFormatting(S.format);for(var w=d.nextLine();w;){if(S.header_only&&u.is_in_header===!1||S.stop_on_warning&&u.warnings)throw"normal_abort";var C=u.is_in_header;A(w),C&&!u.is_in_header&&(g.setRunningFont("annotationfont",u.annotationfont),g.setRunningFont("gchordfont",u.gchordfont),g.setRunningFont("tripletfont",u.tripletfont),g.setRunningFont("vocalfont",u.vocalfont)),w=d.nextLine()}o&&F(g.getCurrentVoice(),""),r&&y(g.getCurrentVoice(),""),u.openSlurs=g.cleanUp(u.barsperstaff,u.staffnonote,u.openSlurs)}catch(z){if(z!=="normal_abort")throw z}var k=792,q=8.5*72;switch(u.papersize){case"legal":k=1008,q=8.5*72;break;case"A4":k=11.7*72,q=8.3*72;break}if(u.landscape){var R=k;k=q,q=R}v.formatting.pagewidth||(v.formatting.pagewidth=q),v.formatting.pageheight||(v.formatting.pageheight=k),S.hint_measures&&L(),a.wrapLines(v,u.lineBreaks,u.barNumbers)}};return Wt=f,Wt}var Ut,tn;function cc(){if(tn)return Ut;tn=1;var p=Fe(),l=function(h){var s="",t=h.match(/(\s*)/);h=p.strip(h);for(var a=h.split(`
X:`),n=1;n<a.length;n++)a[n]="X:"+a[n];var i=t?t[0].length:0,f=[];if(a.forEach(function(o){f.push({abc:o,startPos:i}),i+=o.length+1}),f.length>1&&!p.startsWith(f[0].abc,"X:")){var v=f.shift(),g=v.abc.split(`
`);g.forEach(function(o){p.startsWith(o,"%%")&&(s+=o+`
`)})}var d=s;return f.forEach(function(o){var r=o.abc.indexOf(`

`);r>0&&(o.abc=o.abc.substring(0,r)),o.pure=o.abc,o.abc=s+o.abc,o.title="";var c=o.pure.split("T:");c.length>1&&(c=c[1].split(`
`),o.title=p.strip(c[0]));var e=o.pure.substring(2,o.pure.indexOf(`
`));o.id=p.strip(e)}),{header:d,tunes:f}};return Ut=l,Ut}var $t,rn;function lc(){if(rn)return $t;rn=1;function p(l,h){this.numLines=l,this.lineSpace=h,this.verticalSize=this.numLines*this.lineSpace;var s=3;this.bar={pitch:s,pitch2:h*l,height:5}}return p.prototype.bypass=function(l){var h=l.staffGroup.voices;return!!(h.length>0&&h[0].isPercussion)},p.prototype.setRelative=function(l,h,s){switch(l.type){case"bar":h.pitch=this.bar.pitch,h.pitch2=this.bar.pitch2,h.height=this.height;break;case"symbol":var t=this.bar.pitch2/2;if(l.name=="dots.dot")return s?(h.pitch=t,!1):(h.pitch=t+this.lineSpace,!0);break}return s},$t=p,$t}var Vt,an;function Ys(){if(an)return Vt;an=1;var p=function(h,s){this.children=[],this.beams=[],this.otherchildren=[],this.w=0,this.duplicate=!1,this.voicenumber=h,this.voicetotal=s,this.bottom=7,this.top=7,this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return p.prototype.addChild=function(l){if(l.type==="bar"){for(var h=!0,s=0;h&&s<this.children.length;s++)this.children[s].type.indexOf("staff-extra")<0&&this.children[s].type!=="tempo"&&(h=!1);h||(this.beams.push("bar"),this.otherchildren.push("bar"))}this.children[this.children.length]=l,this.setRange(l)},p.prototype.setLimit=function(l,h){var s=h.specialY;s||(s=h),s[l]&&(this.specialY[l]?this.specialY[l]=Math.max(this.specialY[l],s[l]):this.specialY[l]=s[l])},p.prototype.adjustRange=function(l){l.bottom!==void 0&&(this.bottom=Math.min(this.bottom,l.bottom)),l.top!==void 0&&(this.top=Math.max(this.top,l.top))},p.prototype.setRange=function(l){this.adjustRange(l),this.setLimit("tempoHeightAbove",l),this.setLimit("partHeightAbove",l),this.setLimit("volumeHeightAbove",l),this.setLimit("dynamicHeightAbove",l),this.setLimit("endingHeightAbove",l),this.setLimit("chordHeightAbove",l),this.setLimit("lyricHeightAbove",l),this.setLimit("lyricHeightBelow",l),this.setLimit("chordHeightBelow",l),this.setLimit("volumeHeightBelow",l),this.setLimit("dynamicHeightBelow",l)},p.prototype.addOther=function(l){this.otherchildren.push(l),this.setRange(l)},p.prototype.addBeam=function(l){this.beams.push(l)},p.prototype.setWidth=function(l){this.w=l},Vt=p,Vt}var Xt,nn;function ga(){if(nn)return Xt;nn=1;var p=function(l,h,s,t){if(l)for(var a=0;a<l.length;a++){var n=l[a],i=n.getAttribute("highlight");i||(i="fill"),n.setAttribute(i,t);var f=n.getAttribute("class");f||(f=""),f=f.replace(s,""),f=f.replace(h,""),h.length>0&&(f.length>0&&f[f.length-1]!==" "&&(f+=" "),f+=h),n.setAttribute("class",f)}};return Xt=p,Xt}var jt,sn;function Ws(){if(sn)return jt;sn=1;var p=ga(),l=function(h,s){h===void 0&&(h="abcjs-note_selected"),s===void 0&&(s="#ff0000"),p(this.elemset,h,"",s)};return jt=l,jt}var Kt,on;function Us(){if(on)return Kt;on=1;var p=ga(),l=function(h,s){h===void 0&&(h="abcjs-note_selected"),s===void 0&&(s="#000000"),p(this.elemset,"",h,s)};return Kt=l,Kt}var Qt,cn;function Ke(){if(cn)return Qt;cn=1;var p=Ws(),l=Us(),h=function(t,a,n,i,f,v){v||(v={}),this.tuneNumber=f,this.abcelem=t,this.duration=a,this.durationClass=v.durationClassOveride?v.durationClassOveride:this.duration,this.minspacing=n||0,this.x=0,this.children=[],this.heads=[],this.extra=[],this.extraw=0,this.w=0,this.right=[],this.invisible=!1,this.bottom=void 0,this.top=void 0,this.type=i,this.fixed={w:0,t:void 0,b:void 0},this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return h.prototype.getFixedCoords=function(){return{x:this.x,w:this.fixed.w,t:this.fixed.t,b:this.fixed.b}},h.prototype.addExtra=function(s){this.fixed.w=Math.max(this.fixed.w,s.dx+s.w),this.fixed.t===void 0?this.fixed.t=s.top:this.fixed.t=Math.max(this.fixed.t,s.top),this.fixed.b===void 0?this.fixed.b=s.bottom:this.fixed.b=Math.min(this.fixed.b,s.bottom),s.dx<this.extraw&&(this.extraw=s.dx),this.extra[this.extra.length]=s,this._addChild(s)},h.prototype.addHead=function(s){s.dx<this.extraw&&(this.extraw=s.dx),this.heads[this.heads.length]=s,this.addRight(s)},h.prototype.addRight=function(s){this.fixed.w=Math.max(this.fixed.w,s.dx+s.w),s.top!==void 0&&(this.fixed.t===void 0?this.fixed.t=s.top:this.fixed.t=Math.max(this.fixed.t,s.top)),s.bottom!==void 0&&(this.fixed.b===void 0?this.fixed.b=s.bottom:this.fixed.b=Math.min(this.fixed.b,s.bottom)),s.dx+s.w>this.w&&(this.w=s.dx+s.w),this.right[this.right.length]=s,this._addChild(s)},h.prototype.addFixed=function(s){this._addChild(s)},h.prototype.addFixedX=function(s){this._addChild(s)},h.prototype.addCentered=function(s){var t=s.w/2;-t<this.extraw&&(this.extraw=-t),this.extra[this.extra.length]=s,s.dx+t>this.w&&(this.w=s.dx+t),this.right[this.right.length]=s,this._addChild(s)},h.prototype.setLimit=function(s,t){t[s]&&(this.specialY[s]?this.specialY[s]=Math.max(this.specialY[s],t[s]):this.specialY[s]=t[s])},h.prototype._addChild=function(s){var t=!0;this.abcelem.el_type=="clef"&&s.type=="barNumber"&&(t=!1),s.parent=this,this.children[this.children.length]=s,t&&this.pushTop(s.top),this.pushBottom(s.bottom),this.setLimit("tempoHeightAbove",s),this.setLimit("partHeightAbove",s),this.setLimit("volumeHeightAbove",s),this.setLimit("dynamicHeightAbove",s),this.setLimit("endingHeightAbove",s),this.setLimit("chordHeightAbove",s),this.setLimit("lyricHeightAbove",s),this.setLimit("lyricHeightBelow",s),this.setLimit("chordHeightBelow",s),this.setLimit("volumeHeightBelow",s),this.setLimit("dynamicHeightBelow",s)},h.prototype.pushTop=function(s){s!==void 0&&(this.top===void 0?this.top=s:this.top=Math.max(s,this.top))},h.prototype.pushBottom=function(s){s!==void 0&&(this.bottom===void 0?this.bottom=s:this.bottom=Math.min(s,this.bottom))},h.prototype.setX=function(s){this.x=s;for(var t=0;t<this.children.length;t++)this.children[t].setX(s)},h.prototype.center=function(s,t){var a=(t.x-s.x)/2+s.x;this.x=a-this.w/2;for(var n=0;n<this.children.length;n++)this.children[n].setX(this.x)},h.prototype.setHint=function(){this.hint=!0},h.prototype.highlight=function(s,t){p.bind(this)(s,t)},h.prototype.unhighlight=function(s,t){l.bind(this)(s,t)},Qt=h,Qt}var Jt,ln;function Le(){if(ln)return Jt;ln=1;var p=function(h,s,t,a,n){switch(n=n||{},this.x=0,this.c=h,this.dx=s,this.w=t,this.pitch=a,this.scalex=n.scalex||1,this.scaley=n.scaley||1,this.type=n.type||"symbol",this.pitch2=n.pitch2,this.linewidth=n.linewidth,this.klass=n.klass,this.anchor=n.anchor?n.anchor:"middle",this.top=a,this.pitch2!==void 0&&this.pitch2>this.top&&(this.top=this.pitch2),this.bottom=a,this.pitch2!==void 0&&this.pitch2<this.bottom&&(this.bottom=this.pitch2),n.thickness&&(this.top+=n.thickness/2,this.bottom-=n.thickness/2),n.stemHeight&&(n.stemHeight>0?this.top+=n.stemHeight:this.bottom+=n.stemHeight),n.dim&&(this.dim=n.dim),n.position&&(this.position=n.position),this.height=n.height?n.height:4,n.top&&(this.top=n.top),n.bottom&&(this.bottom=n.bottom),n.name?this.name=n.name:this.c?this.name=this.c:this.name=this.type,n.realWidth?this.realWidth=n.realWidth:this.realWidth=this.w,this.centerVertically=!1,this.type){case"debug":this.chordHeightAbove=this.height;break;case"lyric":n.position&&n.position==="below"?this.lyricHeightBelow=this.height:this.lyricHeightAbove=this.height;break;case"chord":n.position&&n.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height;break;case"text":this.pitch===void 0?n.position&&n.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height:this.centerVertically=!0;break;case"part":this.partHeightAbove=this.height;break}};return p.prototype.getChordDim=function(){if(this.type==="debug"||!this.chordHeightAbove&&!this.chordHeightBelow)return null;var l=0,h=this.type==="chord"?this.realWidth/2:0,s=this.x-h-l,t=s+this.realWidth+l;return{left:s,right:t}},p.prototype.invertLane=function(l){this.lane===void 0&&(this.lane=0),this.lane=l-this.lane-1},p.prototype.putChordInLane=function(l){this.lane=l,this.chordHeightAbove?this.chordHeightAbove=this.height*1.25*this.lane:this.chordHeightBelow=this.height*1.25*this.lane},p.prototype.getLane=function(){return this.lane===void 0?0:this.lane},p.prototype.setX=function(l){this.x=l+this.dx},Jt=p,Jt}var Zt,fn;function fc(){if(fn)return Zt;fn=1;var p=Ke(),l=Le();function h(e){return e!=null&&e.constructor===Object}function s(e,u){for(var m in u)u.hasOwnProperty(m)&&(Array.isArray(u[m])||h(u[m])||(e[m]=u[m]))}function t(e){var u=new p("",0,0,"",0);return s(u,e),u.top=0,u.bottom=-1,e.abcelem&&(u.abcelem={},s(u.abcelem,e.abcelem),u.abcelem.el_type==="note"&&(u.abcelem.el_type="tabNumber")),e.cloned=u,u}function a(e,u){var m=t(e);if(u)for(var b=e.children,x=!0,T=0;T<b.length;T++){var E=b[T],D=new l("",0,0,0,"");s(D,E),x=u.tablature.setRelative(E,D,x),m.children.push(D)}return m}function n(e,u,m){var b="tab.tiny",x=7.5;e.isTabBig&&(b="tab.big",x=10);var T={el_type:"tab",icon:b,Ypos:x};if(x+=e.tabSymbolOffset,!e.hideTabSymbol){var E=new p(T,0,0,"symbol",0);E.x=u;var D=new l(b,0,0,7.5,"tab");D.x=m,E.children.push(D),E.abcelem.el_type=="tab"&&(D.pitch=x)}return E}function i(e){if(e.extra)for(var u=0;u<e.extra.length;u++){var m=e.extra[u];if(m.type=="lyric")return{bottom:m.bottom,height:m.height}}return null}function f(){this.accidentals=null}function v(e){for(var u=0,m=0;m<e.length;m++)e[m].tabNameInfos||u++;return u}function g(e,u,m,b,x){var T=b.num;b.note.quarter!=null&&(T=T.toString(),T+=b.note.quarter);var E=e.semantics.stringToPitch(b.str);m.notes.push({num:T,str:b.str,pitch:b.note.emit()});var D={type:"tabNumber"},F=new l(T,0,0,E+.3,D);return F.x=u,F.isGrace=x,F.isAltered=b.note.isAltered,F}function d(e,u){var m=0;if(e.extra){for(var b=0;b<e.extra.length;b++)if(e.extra[b].c.indexOf("noteheads")>=0){if(m===u)return e.extra[b].x+e.extra[b].w/2;m++}}return-1}function o(e){if(e.abcelem){var u=e.abcelem;if(u.rest)return u.gracenotes}return null}function r(e,u,m){var b=e.semantics.notesToNumber(u,m);if(b.error)return e.setError(b.error),b;if(b.graces&&b.notes){var x=b.notes.length-1;b.notes[x].graces=b.graces}return b}function c(e,u,m,b,x){for(var T=0;T<b.length;T++){var E={el_type:"note",startChar:m.abcelem.startChar,endChar:m.abcelem.endChar,notes:[],grace:!0},D=d(m,T),F=b[T],y=g(e,D,E,F,!0);u.children.push(y),x.push(E)}}return f.prototype.build=function(e,u,m,b,x,T,E){v(u);var D=u[x+b],F=u[E],y=null,A=null;D.children[0].abcelem.el_type!="clef"&&T!="none"&&D.children.splice(0,0,T);for(var N=0;N<D.children.length;N++){var M=D.children[N],L=M.x,B=L;switch(M.isClef&&(F.children.push(n(e,L,B)),M.abcelem.type.indexOf("-8")>=0&&(e.semantics.clefTranspose=-12),M.abcelem.type.indexOf("+8")>=0&&(e.semantics.clefTranspose=12)),M.type){case"staff-extra key-signature":this.accidentals=M.abcelem.accidentals,e.semantics.accidentals=this.accidentals;break;case"bar":e.semantics.measureAccidentals={};var S=!1;N===D.children.length-1&&(S=!0);var _=a(M,e);if(_.abcelem.barNumber){delete _.abcelem.barNumber;for(var P=0;P<_.children.length;P++)if(_.children[P].type==="barNumber"){_.children.splice(P,1);break}}_.abcelem.lastBar=S,F.children.push(_),m.push({el_type:M.abcelem.el_type,type:M.abcelem.type,endChar:M.abcelem.endChar,startChar:M.abcelem.startChar,abselem:_});break;case"rest":var O=o(M);if(O){if(y=r(e,null,O),y.error)return;H={el_type:"note",startChar:M.abcelem.startChar,endChar:M.abcelem.endChar,notes:[],grace:!0},c(e,I,M,y.graces,m)}break;case"note":var I=t(M);I.x=M.heads[0].x+M.heads[0].w/2,I.lyricDim=i(M);var w=M.abcelem.pitches,C=M.abcelem.gracenotes;if(I.type="tabNumber",y=r(e,w,C),y.error)return;if(y.graces){var k=y.notes.length-1;y.notes[k].graces=y.graces}A={el_type:"note",startChar:M.abcelem.startChar,endChar:M.abcelem.endChar,notes:[]};for(var q=0;q<y.notes.length;q++){var R=y.notes[q];if(R.graces)for(var z=0;z<R.graces.length;z++){var H={el_type:"note",startChar:M.abcelem.startChar,endChar:M.abcelem.endChar,notes:[],grace:!0},X=d(M,z),Q=R.graces[z],U=g(e,X,H,Q,!0);I.children.push(U),m.push(H)}var ee=g(e,I.x+M.heads[q].dx,A,R,!1);I.children.push(ee)}A.notes.length>0&&(A.abselem=I,m.push(A),F.children.push(I));break}}},Zt=f,Zt}var e0,hn;function hc(){if(hn)return e0;hn=1;var p=Ys(),l=fc(),h=Se();function s(){return{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}}function t(e){for(var u=0,m=0;m<e.children.length;m++){var b=e.children[m];b.specialY&&b.specialY.lyricHeightBelow>u&&(u=b.specialY.lyricHeightBelow)}return u}function a(e,u,m){var b=e.semantics,x=u.controller.getTextSize,T=b.tabInfos(e),E=b.suppress(e),D=!0;if(E&&(D=!1),D){var F=x.calc(T,"tablabelfont","text instrumentname");return m.tabNameInfos={textSize:{height:F.height,width:F.width},name:T},F.height}return 0}function n(e,u){return u[e].isTabStaff?e===u.length-1?!0:!u[e+1].isTabStaff:!1}function i(e){for(var u=0,m=0;m<e.length;m++)e[m].isTabStaff||u++;return u}function f(e,u){for(var m=u;m>=0;m--)if(!e[m].isTabStaff)return m;return-1}function v(e){for(var u=0;u<e.length;u++)if(e[u].isTabStaff){var m=f(e,u);e[u].hasStaff=e[m],e[m].hasTab||(e[m].hasTab=[]),e[m].hasTab.push(e[u])}}function g(e,u){return i(e)===1&&u.voices.length>1}function d(e,u){for(var m=0,b=0,x=!0,T=0;x;){if(!u[m])return-1;if(u[m].isTabStaff||(T=u[m].voices.length),u[m].isTabStaff){if(b++,n(m,u)&&b<T)return m+1}else if(b=0,m>=e&&(m+1==u.length||!u[m+1].isTabStaff))return m+1;if(m++,m>u.length)return-1}}function o(e,u){for(var m=u;m>=0;m--)if(!e[m].isTabStaff)return e[m];return null}function r(e,u){var m=e[u],b=m.children[0].abcelem;return b.el_type==="clef"?null:u==0?"none":e[u-1].children[0]}function c(e,u,m,b){var x=new l,T={clef:{type:"TAB"}},E=e.linePitch*e.nbLines,D=m.staff;if(D){var F=D[0];if(F&&F.clef&&F.clef.stafflines==0){e.setError("No tablatures when stafflines=0");return}D.splice(D.length,0,T)}var y=m.staffGroup,A=y.voices,N=A[0],M=t(N),L=3,B=b,S=y.staffs[B],_=E+L-S.bottom-M;S.isTabStaff&&(_=S.top);var P={bottom:-1,isTabStaff:!0,specialY:s(),lines:e.nbLines,linePitch:e.linePitch,dy:.15,top:_},O=d(b,y.staffs);if(O!==-1){P.parentIndex=O-1,y.staffs.splice(O,0,P),y.height+=E+L;var I=o(y.staffs,O),w=1;g(y.staffs,I)&&(w=I.voices.length),T.voices=[];for(var C=0;C<w;C++){var k=new p(0,0);C>0&&(k.duplicate=!0);var q=a(e,u,k)/h.STEP;q=Math.max(q,1),y.staffs[b].top+=1,y.height+=q,k.staff=P;var R=A.length;A.splice(A.length,0,k);var z=r(A,C+b);T.voices[C]=[],x.build(e,A,T.voices[C],C,b,z,R)}v(y.staffs)}}return e0=c,e0}var t0,un;function $s(){if(un)return t0;un=1;var p={__:-2,_:-1,"_/":-.5,"=":0,"":0,"^/":.5,"^":1,"^^":2},l=["C","-","D","-","E","F","-","G","-","A","-","B","c","-","d","-","e","f","-","g","-","a","-","b"];function h(t){var a=t.match(/([_^\/]*)([ABCDEFGabcdefg])(,*)('*)/);if(a&&a.length===5){var n=p[a[1]],i=l.indexOf(a[2]),f=a[4].length-a[3].length;return 48+i+n+f*12}return 0}function s(t){t=parseInt(t,10);var a=Math.floor(t/12),n=t%12,i=l[n];if(i==="-"&&(i="^"+l[n-1]),a>4)for(i=i.toLowerCase(),a-=5;a>0;)i+="'",a--;else for(;a<4;)i+=",",a++;return i}return t0={noteToMidi:h,midiToNote:s},t0}var r0,dn;function Vs(){if(dn)return r0;dn=1;var{noteToMidi:p,midiToNote:l}=$s();function h(t,a){var n=p(t);a&&(n+=a);var i=l(n),f=!1,v=!1,g=!1,d=null,o=null,r=!1,c=0;t.startsWith("_")?(f=!0,c=-1,t[1]=="/"?(f=!1,o="v",c=0):t[1]=="_"&&(r=!0,c-=1)):t.startsWith("^")?(v=!0,c=1,t[1]=="/"?(v=!1,o="^",c=0):t[1]=="^"&&(r=!0,c+=1)):t.startsWith("=")&&(d=!0,c=0),g=f||v||o!=null,(g||d)&&(o!=null||r?i=t.slice(2):i=t.slice(1));var e=(i.match(/,/g)||[]).length,u=(i.match(/'/g)||[]).length;this.pitch=n,this.pitchAltered=0,this.name=i,this.acc=c,this.isSharp=v,this.isKeySharp=!1,this.isDouble=r,this.isAltered=g,this.isFlat=f,this.isKeyFlat=!1,this.natural=d,this.quarter=o,this.isLower=this.name==this.name.toLowerCase(),this.name=this.name[0].toUpperCase(),this.hasComma=e,this.isQuoted=u}function s(t){var a=t.name,n=new h(a);return n.pitch=t.pitch,n.hasComma=t.hasComma,n.isLower=t.isLower,n.isQuoted=t.isQuoted,n.isSharp=t.isSharp,n.isKeySharp=t.isKeySharp,n.isFlat=t.isFlat,n.isKeyFlat=t.isKeyFlat,n}return h.prototype.sameNoteAs=function(t){return t.pitch===this.pitch},h.prototype.isLowerThan=function(t){return t.pitch>this.pitch},h.prototype.checkKeyAccidentals=function(t,a){if(!(this.isAltered||this.natural)){if(a[this.name.toUpperCase()])switch(a[this.name.toUpperCase()]){case"__":this.acc=-2,this.pitchAltered=-2;return;case"_":this.acc=-1,this.pitchAltered=-1;return;case"=":this.acc=0,this.pitchAltered=0;return;case"^":this.acc=1,this.pitchAltered=1;return;case"^^":this.acc=2,this.pitchAltered=2;return}else if(t)for(var n=this.name,i=0;i<t.length;i++){var f=t[i];n==f.note.toUpperCase()&&(f.acc=="flat"&&(this.acc=-1,this.isKeyFlat=!0,this.pitchAltered=-1),f.acc=="sharp"&&(this.acc=1,this.isKeySharp=!0,this.pitchAltered=1))}}},h.prototype.getAccidentalEquiv=function(){var t=s(this);return t.isSharp||t.isKeySharp?(t=t.nextNote(),t.isFlat=!0,t.isSharp=!1,t.isKeySharp=!1):(t.isFlat||t.isKeyFlat)&&(t=t.prevNote(),t.isSharp=!0,t.isFlat=!1,t.isKeyFlat=!1),t},h.prototype.nextNote=function(){var t=l(this.pitch+1+this.pitchAltered);return new h(t)},h.prototype.prevNote=function(){var t=l(this.pitch-1+this.pitchAltered);return new h(t)},h.prototype.emitNoAccidentals=function(){var t=this.name;this.isLower&&(t=t.toLowerCase());for(var a=0;a<this.isQuoted;a++)t+="'";for(var n=0;n<this.hasComma;n++)t+=",";return t},h.prototype.emit=function(){var t=this.name;(this.isSharp||this.isKeySharp)&&(t="^"+t,this.isDouble&&(t="^"+t)),(this.isFlat||this.isKeyFlat)&&(t="_"+t,this.isDouble&&(t="_"+t)),this.quarter&&(this.quarter=="^"?t="^/"+t:t="_/"+t),this.natural&&(t="="+t);for(var a=1;a<=this.hasComma;a++)t+=",";if(this.isLower){t=t.toLowerCase();for(var n=1;n<=this.isQuoted;n++)t+="'"}return t},r0=h,r0}var a0,pn;function uc(){if(pn)return a0;pn=1;var p=Vs(),l=["A","B","C","D","E","F","G"];function h(s,t){var a=new p(s),n=new p(t);if(n.isLowerThan(a)){var i=a.emit(),f=n.emit();return{error:"Invalid string Instrument tuning : "+f+" string lower than "+i+" string"}}var v=[],g=l.indexOf(a.name),d=l.indexOf(n.name);if(g==-1||d==-1)return v;for(var o=!1;!o;)v.push(a.emit()),a=a.nextNote(),a.sameNoteAs(n)&&(o=!0);return v}return a0=h,a0}var n0,vn;function dc(){if(vn)return n0;vn=1;const{noteToMidi:p}=$s();var l=Vs(),h=uc();function s(o){var r=null,c=o.tuning;if(o.capo>0){r=[];for(var e=0;e<c.length;e++){for(var u=new l(c[e]),m=0;m<o.capo;m++)u=u.nextNote();r[e]=u.emit()}}return r}function t(o){var r=[],c=o.tuning;o.capo>0&&(c=o.capoTuning);for(var e=c.length-1,u=0;u<c.length;u++){var m=o.highestNote;u!=c.length-1&&(m=c[u+1]);var b=h(c[u],m);if(b.error)return b;r[e--]=b}return r}function a(o){var r=[];r[0]=[];for(var c=o.strings,e=1;e<c.length;e++)r[e]=c[e-1];return r}function n(o,r){for(var c=0;c<r.length-1;c++){var e=r[c],u=r[c+1];if(e.str==u.str){if(e.str==o.strings.length-1){e.num="?",u.num="?";return}u.num<e.num?(u.str++,u=f(o,u.note,u.str,o.secondPos,o.strings[u.str].length)):(e.str++,e=f(o,e.note,e.str,o.secondPos,o.strings[e.str].length)),r[c]=e,r[c+1]=u}}return null}function i(o,r){for(var c=[],e=0;e<r.length;e++)if(!r[e].endTie){var u=new l(r[e].name,o.clefTranspose);u.checkKeyAccidentals(o.accidentals,o.measureAccidentals);var m=v(o,u);c.push(m)}return n(o,c),c}function f(o,r,c,e,u){var m=o.strings;r.checkKeyAccidentals(o.accidentals,o.measureAccidentals),e&&(m=e);var b=r.emitNoAccidentals(),x=m[c].indexOf(b),T=r.acc;if(x!=-1){if(e&&(x+=u),(r.isFlat||r.acc==-1)&&x==0){var E=r.getAccidentalEquiv();c++,x=m[c].indexOf(E.emit()),T=0}return{num:x+T,str:c,note:r}}return null}function v(o,r){if(r.isAltered||r.natural){var c;r.isFlat?r.isDouble?c="__":c="_":r.isSharp?r.isDouble?c="^^":c="^":r.natural&&(c="="),o.measureAccidentals[r.name.toUpperCase()]=c}for(var e=o.stringPitches.length-1;e>=0;e--)if(r.pitch+r.pitchAltered>=o.stringPitches[e]){var u=r.pitch+r.pitchAltered-o.stringPitches[e];return r.quarter==="^"?u-=.5:r.quarter==="v"&&(u+=.5),{num:Math.round(u),str:o.stringPitches.length-1-e,note:r}}return{num:"?",str:o.stringPitches.length-1,note:r}}d.prototype.stringToPitch=function(o){var r=5.3,c=this.strings.length-1;return r+(c-o)*this.linePitch};function g(o,r){var c={num:"?",str:0,note:r};o.push(c),o.error=r.emit()+": unexpected note for instrument"}d.prototype.notesToNumber=function(o,r){var c,e,u=null,m=null;if(o&&(m=[],o.length>1?(m=i(this,o),m.error&&(u=m.error)):o[0].endTie||(c=new l(o[0].name,this.clefTranspose),c.checkKeyAccidentals(this.accidentals,this.measureAccidentals),e=v(this,c),e?m.push(e):(g(m,c),u=m.error))),u)return m;var b=null;if(r){b=[];for(var x=0;x<r.length;x++)c=new l(r[x].name,this.clefTranspose),c.checkKeyAccidentals(this.accidentals,this.measureAccidentals),e=v(this,c),e?b.push(e):(g(b,c),u=m.error)}return{notes:m,graces:b,error:u}},d.prototype.toString=function(){for(var o=[],r=0;r<this.tuning.length;r++){var c=this.tuning[r].replaceAll(",","").replaceAll("'","").toUpperCase();c[0]==="_"?c=c[1]+"b ":c[0]==="^"&&(c=c[1]+"# "),o.push(c)}return o.join("")},d.prototype.tabInfos=function(o){var r=o.params.label;if(r){var c=r.indexOf("%T"),e="";return c!=-1&&(e=this.toString(),o.capo>0&&(e+=" capo:"+o.capo),r=r.replace("%T",e)),r}return""},d.prototype.suppress=function(o){var r=o.params.suppress;return!!r};function d(o){var r=o.tuning,c=o.capo,e=o.params.highestNote;this.linePitch=o.linePitch,this.highestNote="a'",e&&(this.highestNote=e),this.measureAccidentals={},this.capo=0,c&&(this.capo=parseInt(c,10)),this.transpose=o.transpose?o.transpose:0,this.tuning=r,this.stringPitches=[];for(var u=0;u<this.tuning.length;u++){var m=p(this.tuning[u])+this.capo;this.stringPitches.push(m)}if(this.capo>0&&(this.capoTuning=s(this)),this.strings=t(this),this.strings.error){o.setError(this.strings.error),o.inError=!0;return}this.secondPos=a(this)}return n0=d,n0}var i0,gn;function pc(){if(gn)return i0;gn=1;var p=lc(),l=hc(),h=dc();s.prototype.init=function(a,n,i,f){this.tune=a,this.params=i,this.tuneNumber=n,this.inError=!1,this.abcTune=a,this.linePitch=3,this.nbLines=f.defaultTuning.length,this.isTabBig=f.isTabBig,this.tabSymbolOffset=f.tabSymbolOffset,this.capo=i.capo,this.transpose=i.visualTranspose,this.hideTabSymbol=i.hideTabSymbol,this.tablature=new p(this.nbLines,this.linePitch);var v=i.tuning;v||(v=f.defaultTuning),this.tuning=v,this.semantics=new h(this)},s.prototype.setError=function(a){a&&(this.error=a,this.inError=!0,this.tune.warnings?this.tune.warnings.push(a):this.tune.warnings=[a])},s.prototype.render=function(a,n,i){this.inError||this.tablature.bypass(n)||l(this,a,n,i)};function s(){}var t=function(){return{name:"StringTab",tablature:s}};return i0=t,i0}var s0,bn;function Xs(){if(bn)return s0;bn=1;var p=pc(),l={violin:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},fiddle:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},mandolin:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},guitar:{name:"StringTab",defaultTuning:["E,","A,","D","G","B","e"],isTabBig:!0,tabSymbolOffset:0},fiveString:{name:"StringTab",defaultTuning:["C,","G,","D","A","e"],isTabBig:!1,tabSymbolOffset:-.95}},h={inited:!1,plugins:{},register:function(s){var t=s.name,a=s.tablature;this.plugins[t]=a},setError:function(s,t){s.warnings?s.warning.push(t):s.warnings=[t]},preparePlugins:function(s,t,a){this.inited||(this.register(new p),this.inited=!0);var n=null;if(a.tablature){var i=a.tablature;n=[];for(var f=0;f<i.length;f++){var v=i[f],g=v.instrument;if(g==null)return this.setError(s,"tablature 'instrument' is missing"),n;var d=l[g],o=null;if(d&&(o=this.plugins[d.name]),o){a.visualTranspose!=0&&(v.visualTranspose=a.visualTranspose),v.abcSrc=a.tablature.abcSrc;var r={classz:o,tuneNumber:t,params:v,instance:null,tabType:d};n.push(r)}else if(g==="")n.push(null);else return this.setError(s,"Undefined tablature plugin: "+g),n}}return n},layoutTablatures:function(t,a){var n=a.tablatures,i=0;if(n&&n.length>0)for(var f=n.length,v=0;v<f;++v)n[v]&&n[v].params.firstStaffOnly&&(n[v].params.suppress=!1);for(var g=0;g<a.lines.length;g++){var d=a.lines[g];if(d.staff&&i++,i>1&&n&&n.length>0)for(var f=n.length,v=0;v<f;++v)n[v].params.firstStaffOnly&&(n[v].params.suppress=!0);var o=d.staff;if(o){for(var r=o.length,c=0;c<o.length;c++)if(n[c]&&c<r){var e=n[c];e.instance==null&&(e.instance=new e.classz,e.instance.init(a,e.tuneNumber,e.params,e.tabType)),e.instance.render(t,d,c)}}}}};return s0=h,s0}var o0,mn;function gt(){if(mn)return o0;mn=1;var p=Gs(),l=cc(),h=Xs(),s={};return(function(){s.numberOfTunes=function(a){var n=a.split(`
X:`),i=n.length;return i===0&&(i=1),i};var t=s.TuneBook=function(a){var n=l(a);this.header=n.header,this.tunes=n.tunes};t.prototype.getTuneById=function(a){for(var n=0;n<this.tunes.length;n++)if(this.tunes[n].id===""+a)return this.tunes[n];return null},t.prototype.getTuneByTitle=function(a){for(var n=0;n<this.tunes.length;n++)if(this.tunes[n].title===a)return this.tunes[n];return null},s.parseOnly=function(a,n){for(var i=s.numberOfTunes(a),f=[],v=0;v<i;v++)f.push(1);function g(){}return s.renderEngine(g,f,a,n)},s.renderEngine=function(a,n,i,f){var v=[],g=function(x){return x&&!x.propertyIsEnumerable("length")&&typeof x=="object"&&typeof x.length=="number"};if(!(n===void 0||i===void 0)){g(n)||(n=[n]),f===void 0&&(f={});for(var d=f.startingTune?parseInt(f.startingTune,10):0,o=new t(i),r=new p,c=0;c<n.length;c++){var e=n[c];if(e==="*"||typeof e=="string"&&(e=document.getElementById(e)),e)if(d>=0&&d<o.tunes.length){r.parse(o.tunes[d].abc,f,o.tunes[d].startPos-o.header.length);var u=r.getTune();f.tablature&&(u.tablatures=h.preparePlugins(u,d,f));var m=r.getWarnings();m&&(u.warnings=m);var b=a(e,u,c,o.tunes[d].abc);v.push(b||u)}else e.innerHTML&&(e.innerHTML="");d++}return v}},s.extractMeasures=function(a){for(var n=[],i=new t(a),f=0;f<i.tunes.length;f++){for(var v=i.tunes[f],g=v.abc.split("K:"),d=g[1].split(`
`),o=g[0]+"K:"+d[0]+`
`,r=null,c=null,e=null,u=[],m=!1,b=s.parseOnly(v.abc)[0],x=b.getPickupLength()>0,T=0;T<b.lines.length;T++){var E=b.lines[T];if(E.staff)for(var D=0;D<1;D++)for(var F=E.staff[D],y=0;y<1;y++)for(var A=F.voices[y],N=0;N<A.length;N++){var M=A[N];if(e===null&&M.startChar>=0&&(e=M.startChar,M.chord===void 0?c=r:c=null),M.chord&&(r=M),M.el_type==="bar"){if(m){var L=v.abc.substring(e,M.endChar),B={abc:L};r=c&&c.chord&&c.chord.length>0?c.chord[0].name:null,r&&(B.lastChord=r),M.startEnding&&(B.startEnding=M.startEnding),M.endEnding&&(B.endEnding=M.endEnding),u.push(B),e=null,m=!1}}else M.el_type==="note"&&(m=!0)}}n.push({header:o,measures:u,hasPickup:x})}return n}})(),o0=s,o0}var c0,yn;function vc(){if(yn)return c0;yn=1;var p=Is(),{relativeMajor:l,transposeKey:h,relativeMode:s}=Ds(),t=qs(),a;return(function(){a=function(A,N,M){if(N==="TEST")return{keyAccidentals:p,relativeMajor:l,transposeKey:h,relativeMode:s,transposeChordName:t};M=parseInt(M,10);var L=[],B;for(B=0;B<N.length;B++)L=L.concat(n(A,N[B],M));L=L.sort(function(P,O){return O.start-P.start});var S=A.split("");for(B=0;B<L.length;B++){var _=L[B];S.splice(_.start,_.end-_.start,_.note)}return S.join("")};function n(A,N,M){var L=[],B=N.getKeySignature();if(B.root==="Hp"||B.root==="HP")return L;L=L.concat(i(A,M));for(var S=0;S<N.lines.length;S++){var _=N.lines[S].staff;if(_)for(var P=0;P<_.length;P++){var O=_[P];O.clef.type!=="perc"&&(L=L.concat(f(A,O.voices,O.key,M)))}}return L}function i(A,N){for(var M=[],L=A.split("K:"),B=L[0].length,S=1;S<L.length;S++){var _=L[S],P=_.match(/^( *)([A-G])([#b]?)( ?)(\w*)/);if(P){var O=B+2+P[1].length,I=P[2]+P[3]+P[4]+P[5],w=c({root:P[2],acc:P[3],mode:P[5]},N),C=w.root+w.acc+P[4]+w.mode;M.push({start:O,end:O+I.length,note:C})}B+=_.length+2}return M}function f(A,N,M,L){for(var B=[],S=c(M,L),_=0;_<N.length;_++)B=B.concat(d(A,N[_],M.root,v(M),S,L));return B}function v(A){for(var N={},M=0;M<A.accidentals.length;M++){var L=A.accidentals[M];L.acc==="flat"?N[L.note.toUpperCase()]="_":L.acc==="sharp"&&(N[L.note.toUpperCase()]="^")}return N}function g(A,N,M){var L=o.indexOf(A.root)-o.indexOf(N);return N==="none"&&(L=o.indexOf(A.root)),L===0?M>2?L+=7:M===-12&&(L-=7):M>0&&L<0?L+=7:M<0&&L>0&&(L-=7),M>12?L+=7:M<-12&&(L-=7),L}function d(A,N,M,L,B,S){for(var _=[],P=g(B,M,S),O={},I={},w=0;w<N.length;w++){var C=N[w];if(C.chord)for(var k=0;k<C.chord.length;k++){var q=C.chord[k];if(q.position==="default"){var R=B.accidentals.length&&B.accidentals[0].acc==="flat",z=t(q.name,S,R,!0);z=z.replace(//g,"b").replace(//g,"#"),z!==q.name&&_.push(F(A,C.startChar,C.endChar,z))}}if(C.el_type==="note"&&C.pitches){for(var H=0;H<C.pitches.length;H++){var X=T(C.pitches[H].name,M,L,O);X.acc&&(O[X.name.toUpperCase()]=X.acc);var Q=e(X,B,P,I);Q.acc&&(I[Q.upper]=Q.acc),_.push(E(A,C.startChar,C.endChar,Q.acc+Q.name,H))}if(C.gracenotes)for(var U=0;U<C.gracenotes.length;U++){var ee=T(C.gracenotes[U].name,M,L,O);ee.acc&&(O[ee.name.toUpperCase()]=ee.acc);var te=e(ee,B,P,O);te.acc&&(I[te.upper]=te.acc),_.push(D(A,C.startChar,C.endChar,te.acc+te.name,U))}}else C.el_type==="bar"?(O={},I={}):C.el_type==="keySignature"&&(M=C.root,L=v(C),B=c(C,S),P=g(B,M,S))}return _}var o="CDEFGAB",r=[",,,,",",,,",",,",",","","'","''","'''","''''"];function c(A,N){if(A.root==="none")return{root:h("C",N),mode:"",acc:"",accidentals:[]};var M=l(A.root+A.acc+A.mode),L=h(M,N),B=s(L,A.mode),S=p(L);return{root:B[0],mode:A.mode,acc:B.length>1?B[1]:"",accidentals:S}}function e(A,N,M,L){for(var B=A.pitch,S=o.indexOf(A.name),_=o.indexOf(N.root),P=(_+B)%7,O=S+M,I=A.oct;O>6;)I++,O-=7;for(;O<0;)I--,O+=7;for(var w=o[P],C="",k=A.adj,q="=",R=0;R<N.accidentals.length;R++)if(N.accidentals[R].note.toLowerCase()===w.toLowerCase()){k=k+(N.accidentals[R].acc==="flat"?-1:1),q=N.accidentals[R].acc==="flat"?"_":"^";break}switch(k){case-2:C="__";break;case-1:C="_";break;case 0:C="=";break;case 1:C="^";break;case 2:C="^^";break;case-3:var z={};return z.pitch=A.pitch-1,z.oct=A.oct,z.name=o[o.indexOf(A.name)-1],z.name||(z.name="B",z.oct--),z.name==="B"||z.name==="E"?z.adj=A.adj+1:z.adj=A.adj+2,e(z,N,M+1,L);case 3:var z={};return z.pitch=A.pitch+1,z.oct=A.oct,z.name=o[o.indexOf(A.name)+1],z.name||(z.name="C",z.oct++),z.name==="C"||z.name==="F"?z.adj=A.adj-1:z.adj=A.adj-2,e(z,N,M+1,L)}switch((L[w]===C||!L[w]&&C===q)&&!A.courtesy&&(C=""),I){case 0:w=w+",,,";break;case 1:w=w+",,";break;case 2:w=w+",";break;case 4:w=w.toLowerCase();break;case 5:w=w.toLowerCase()+"'";break;case 6:w=w.toLowerCase()+"''";break;case 7:w=w.toLowerCase()+"'''";break;case 8:w=w.toLowerCase()+"''''";break}return I>4&&(w=w.toLowerCase()),{acc:C,name:w,upper:w.toUpperCase()}}var u=/([_^=]*)([A-Ga-g])([,']*)/,m=/([_^=]*[A-Ga-g][,']*)(\d*\/*\d*)([\>\<\-\)\.\s\\]*)/,b=/([_^=]*[A-Ga-g][,']*)?(\d*\/*\d*)?([\>\<\-\)]*)?/,x=/(\s*)$/;function T(A,N,M,L){var B=N==="none"?0:o.indexOf(N),S=A.match(u),_=S[2].toUpperCase(),P=o.indexOf(_)-B;P<0&&(P+=7);var O=r.indexOf(S[3]);_===S[2]&&O--;var I=L[_]||M[_]||"=";return{acc:S[1],name:_,pitch:P,oct:O,adj:y(S[1],M[_],L[_]),courtesy:S[1]===I}}function E(A,N,M,L,B){var S=A.substring(N,M),_=S.match(new RegExp(m.source+x.source));if(_){var P=_[1].length,O=_[2].length+_[3].length+_[4].length,I=M-N-P-O;N+=I,M-=O}else{var w=/([^\[]*)/,C=/\[/,k=/\-?](\d*\/*\d*)?([\>\<\-\)]*)/,q=new RegExp(w.source+C.source+"(?:"+b.source+"\\s*){1,8}"+k.source+x.source);if(_=S.match(q),_){var R=_[1].length+1,z=S.slice(_[1].length+1,S.lastIndexOf("]")),H=[],X=new RegExp(b.source+"\\s*","g");for(const ne of z.matchAll(X)){let V=ne[0].trim();V!==""&&H.push({text:V,index:ne.index})}if(B>=H.length)throw new Error("Chord index out of range for chord: "+S);var Q=H[B];let U=Q.text.match(/^(.+?)(\d+\/?\d*)?(-)?$/);U?U[1]:Q.text;let ee=U&&U[2]?U[2]:"",te=U&&U[3]?U[3]:"";L=L+ee+te,N+=R+Q.index,M=N+Q.text.length}}return{start:N,end:M,note:L}}function D(A,N,M,L,B){var S=A.substring(N,M),_=/\{/,P=/\}/,O=/([^\{]*)/,I=/(\/*)/,w=S.match(new RegExp(O.source+_.source+I.source+b.source+I.source+b.source+I.source+b.source+I.source+b.source+I.source+b.source+I.source+b.source+I.source+b.source+I.source+b.source+P.source));if(w){for(var C=1+w[1].length,k=0;k<B;k++)w[k*3+2]&&(C+=w[k*3+2].length),w[k*3+3]&&(C+=w[k*3+3].length),w[k*3+4]&&(C+=w[k*3+4].length),w[k*3+5]&&(C+=w[k*3+5].length);w[B*3+2]&&(C+=w[k*3+2].length),N+=C;var q=w[B*3+3]?w[B*3+3].length:0;q+=w[B*3+4]?w[B*3+4].length:0,q+=w[B*3+5]?w[B*3+5].length:0,M=N+q}return{start:N,end:M,note:L}}function F(A,N,M,L){var B=A.substring(N,M).match(/([^"]+)?(".+")+/);return B[1]&&(N+=B[1].length),M=N+B[2].length,{start:N+1,end:M-1,note:L}}function y(A,N,M){if(!A&&M&&(A=M),!A)return 0;switch(N){case void 0:switch(A){case"__":return-2;case"_":return-1;case"=":return 0;case"^":return 1;case"^^":return 2;default:return 0}case"_":switch(A){case"__":return-1;case"_":return 0;case"=":return 1;case"^":return 2;case"^^":return 3;default:return 0}case"^":switch(A){case"__":return-3;case"_":return-2;case"=":return-1;case"^":return 0;case"^^":return 1;default:return 0}}return 0}})(),c0=a,c0}var l0,wn;function gc(){if(wn)return l0;wn=1;var p=function(s,t,a,n){this.type="BeamElem",this.isflat=!!a,this.isgrace=!!(t&&t==="grace"),this.forceup=!!(this.isgrace||t&&t==="up"),this.forcedown=!!(t&&t==="down"),this.elems=[],this.total=0,this.average=6,this.allrests=!0,this.stemHeight=s,this.beams=[],n&&n.duration?(this.duration=n.duration,n.startTriplet&&(this.duration*=n.tripletMultiplier),this.duration=Math.round(this.duration*1e3)/1e3):this.duration=0};p.prototype.setHint=function(){this.hint=!0},p.prototype.runningDirection=function(h){var s=h.averagepitch;s!==void 0&&(this.total=Math.round(this.total+s),this.count||(this.count=0),this.count++)},p.prototype.add=function(h){var s=h.abcelem.averagepitch;s!==void 0&&(h.abcelem.rest||(this.allrests=!1),h.beam=this,this.elems.push(h),this.total=Math.round(this.total+s),(this.min===void 0||h.abcelem.minpitch<this.min)&&(this.min=h.abcelem.minpitch),(this.max===void 0||h.abcelem.maxpitch>this.max)&&(this.max=h.abcelem.maxpitch))},p.prototype.addBeam=function(h){this.beams.push(h)},p.prototype.setStemDirection=function(){if(this.average=l(this.total,this.count),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var h=6;this.stemsUp=this.average<h}delete this.count,this.total=0},p.prototype.calcDir=function(){if(this.average=l(this.total,this.elems.length),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var h=6;this.stemsUp=this.average<h}for(var s=this.stemsUp?"up":"down",t=0;t<this.elems.length;t++)for(var a=0;a<this.elems[t].heads.length;a++)this.elems[t].heads[a].stemDir=s};function l(h,s){return s?h/s:0}return l0=p,l0}var f0,xn;function bc(){if(xn)return f0;xn=1;var p=function(h,s){this.startVoice=h,this.type=s};return p.prototype.setBottomStaff=function(l){this.endVoice=l,this.startVoice.header&&!this.endVoice.header&&(this.header=this.startVoice.header,delete this.startVoice.header)},p.prototype.continuing=function(l){this.lastContinuedVoice=l},p.prototype.getWidth=function(){return 10},p.prototype.isStartVoice=function(l){return!!(this.startVoice&&this.startVoice.staff&&this.startVoice.staff.voices.length>0&&this.startVoice.staff.voices[0]===l)},f0=p,f0}var h0,Cn;function ze(){if(Cn)return h0;Cn=1;var p=Se(),l={0:{d:[["M",4.83,-14.97],["c",.33,-.03,1.11,0,1.47,.06],["c",1.68,.36,2.97,1.59,3.78,3.6],["c",1.2,2.97,.81,6.96,-.9,9.27],["c",-.78,1.08,-1.71,1.71,-2.91,1.95],["c",-.45,.09,-1.32,.09,-1.77,0],["c",-.81,-.18,-1.47,-.51,-2.07,-1.02],["c",-2.34,-2.07,-3.15,-6.72,-1.74,-10.2],["c",.87,-2.16,2.28,-3.42,4.14,-3.66],["z"],["m",1.11,.87],["c",-.21,-.06,-.69,-.09,-.87,-.06],["c",-.54,.12,-.87,.42,-1.17,.99],["c",-.36,.66,-.51,1.56,-.6,3],["c",-.03,.75,-.03,4.59,0,5.31],["c",.09,1.5,.27,2.4,.6,3.06],["c",.24,.48,.57,.78,.96,.9],["c",.27,.09,.78,.09,1.05,0],["c",.39,-.12,.72,-.42,.96,-.9],["c",.33,-.66,.51,-1.56,.6,-3.06],["c",.03,-.72,.03,-4.56,0,-5.31],["c",-.09,-1.47,-.27,-2.37,-.6,-3.03],["c",-.24,-.48,-.54,-.78,-.93,-.9],["z"]],w:10.78,h:14.959},1:{d:[["M",3.3,-15.06],["c",.06,-.06,.21,-.03,.66,.15],["c",.81,.39,1.08,.39,1.83,.03],["c",.21,-.09,.39,-.15,.42,-.15],["c",.12,0,.21,.09,.27,.21],["c",.06,.12,.06,.33,.06,5.94],["c",0,3.93,0,5.85,.03,6.03],["c",.06,.36,.15,.69,.27,.96],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.12,-.27,.21,-.6,.27,-.96],["c",.03,-.18,.03,-1.59,.03,-4.29],["c",0,-3.87,0,-4.05,-.06,-4.14],["c",-.09,-.15,-.18,-.24,-.39,-.24],["c",-.12,0,-.15,.03,-.21,.06],["c",-.03,.06,-.45,.99,-.96,2.13],["c",-.48,1.14,-.9,2.1,-.93,2.16],["c",-.06,.15,-.21,.24,-.33,.24],["c",-.24,0,-.42,-.18,-.42,-.39],["c",0,-.06,3.27,-7.62,3.33,-7.74],["z"]],w:8.94,h:15.058},2:{d:[["M",4.23,-14.97],["c",.57,-.06,1.68,0,2.34,.18],["c",.69,.18,1.5,.54,2.01,.9],["c",1.35,.96,1.95,2.25,1.77,3.81],["c",-.15,1.35,-.66,2.34,-1.68,3.15],["c",-.6,.48,-1.44,.93,-3.12,1.65],["c",-1.32,.57,-1.8,.81,-2.37,1.14],["c",-.57,.33,-.57,.33,-.24,.27],["c",.39,-.09,1.26,-.09,1.68,0],["c",.72,.15,1.41,.45,2.1,.9],["c",.99,.63,1.86,.87,2.55,.75],["c",.24,-.06,.42,-.15,.57,-.3],["c",.12,-.09,.3,-.42,.3,-.51],["c",0,-.09,.12,-.21,.24,-.24],["c",.18,-.03,.39,.12,.39,.3],["c",0,.12,-.15,.57,-.3,.87],["c",-.54,1.02,-1.56,1.74,-2.79,2.01],["c",-.42,.09,-1.23,.09,-1.62,.03],["c",-.81,-.18,-1.32,-.45,-2.01,-1.11],["c",-.45,-.45,-.63,-.57,-.96,-.69],["c",-.84,-.27,-1.89,.12,-2.25,.9],["c",-.12,.21,-.21,.54,-.21,.72],["c",0,.12,-.12,.21,-.27,.24],["c",-.15,0,-.27,-.03,-.33,-.15],["c",-.09,-.21,.09,-1.08,.33,-1.71],["c",.24,-.66,.66,-1.26,1.29,-1.89],["c",.45,-.45,.9,-.81,1.92,-1.56],["c",1.29,-.93,1.89,-1.44,2.34,-1.98],["c",.87,-1.05,1.26,-2.19,1.2,-3.63],["c",-.06,-1.29,-.39,-2.31,-.96,-2.91],["c",-.36,-.33,-.72,-.51,-1.17,-.54],["c",-.84,-.03,-1.53,.42,-1.59,1.05],["c",-.03,.33,.12,.6,.57,1.14],["c",.45,.54,.54,.87,.42,1.41],["c",-.15,.63,-.54,1.11,-1.08,1.38],["c",-.63,.33,-1.2,.33,-1.83,0],["c",-.24,-.12,-.33,-.18,-.54,-.39],["c",-.18,-.18,-.27,-.3,-.36,-.51],["c",-.24,-.45,-.27,-.84,-.21,-1.38],["c",.12,-.75,.45,-1.41,1.02,-1.98],["c",.72,-.72,1.74,-1.17,2.85,-1.32],["z"]],w:10.764,h:14.97},3:{d:[["M",3.78,-14.97],["c",.3,-.03,1.41,0,1.83,.06],["c",2.22,.3,3.51,1.32,3.72,2.91],["c",.03,.33,.03,1.26,-.03,1.65],["c",-.12,.84,-.48,1.47,-1.05,1.77],["c",-.27,.15,-.36,.24,-.45,.39],["c",-.09,.21,-.09,.36,0,.57],["c",.09,.15,.18,.24,.51,.39],["c",.75,.42,1.23,1.14,1.41,2.13],["c",.06,.42,.06,1.35,0,1.71],["c",-.18,.81,-.48,1.38,-1.02,1.95],["c",-.75,.72,-1.8,1.2,-3.18,1.38],["c",-.42,.06,-1.56,.06,-1.95,0],["c",-1.89,-.33,-3.18,-1.29,-3.51,-2.64],["c",-.03,-.12,-.03,-.33,-.03,-.6],["c",0,-.36,0,-.42,.06,-.63],["c",.12,-.3,.27,-.51,.51,-.75],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.51,.36,-.63,.54,-.6,.87],["c",.06,.54,.54,.9,1.38,.99],["c",.36,.06,.72,.03,.96,-.06],["c",.81,-.27,1.29,-1.23,1.44,-2.79],["c",.03,-.45,.03,-1.95,-.03,-2.37],["c",-.09,-.75,-.33,-1.23,-.75,-1.44],["c",-.33,-.18,-.45,-.18,-1.98,-.18],["c",-1.35,0,-1.41,0,-1.5,-.06],["c",-.18,-.12,-.24,-.39,-.12,-.6],["c",.12,-.15,.15,-.15,1.68,-.15],["c",1.5,0,1.62,0,1.89,-.15],["c",.18,-.09,.42,-.36,.54,-.57],["c",.18,-.42,.27,-.9,.3,-1.95],["c",.03,-1.2,-.06,-1.8,-.36,-2.37],["c",-.24,-.48,-.63,-.81,-1.14,-.96],["c",-.3,-.06,-1.08,-.06,-1.38,.03],["c",-.6,.15,-.9,.42,-.96,.84],["c",-.03,.3,.06,.45,.63,.84],["c",.33,.24,.42,.39,.45,.63],["c",.03,.72,-.57,1.5,-1.32,1.65],["c",-1.05,.27,-2.1,-.57,-2.1,-1.65],["c",0,-.45,.15,-.96,.39,-1.38],["c",.12,-.21,.54,-.63,.81,-.81],["c",.57,-.42,1.38,-.69,2.25,-.81],["z"]],w:9.735,h:14.967},4:{d:[["M",8.64,-14.94],["c",.27,-.09,.42,-.12,.54,-.03],["c",.09,.06,.15,.21,.15,.3],["c",-.03,.06,-1.92,2.31,-4.23,5.04],["c",-2.31,2.73,-4.23,4.98,-4.26,5.01],["c",-.03,.06,.12,.06,2.55,.06],["l",2.61,0],["l",0,-2.37],["c",0,-2.19,.03,-2.37,.06,-2.46],["c",.03,-.06,.21,-.18,.57,-.42],["c",1.08,-.72,1.38,-1.08,1.86,-2.16],["c",.12,-.3,.24,-.54,.27,-.57],["c",.12,-.12,.39,-.06,.45,.12],["c",.06,.09,.06,.57,.06,3.96],["l",0,3.9],["l",1.08,0],["c",1.05,0,1.11,0,1.2,.06],["c",.24,.15,.24,.54,0,.69],["c",-.09,.06,-.15,.06,-1.2,.06],["l",-1.08,0],["l",0,.33],["c",0,.57,.09,1.11,.3,1.53],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.21,-.42,.3,-.96,.3,-1.53],["l",0,-.33],["l",-2.7,0],["c",-2.91,0,-2.85,0,-3.09,-.15],["c",-.18,-.12,-.3,-.39,-.27,-.54],["c",.03,-.06,.18,-.24,.33,-.45],["c",.75,-.9,1.59,-2.07,2.13,-3.03],["c",.33,-.54,.84,-1.62,1.05,-2.16],["c",.57,-1.41,.84,-2.64,.9,-4.05],["c",.03,-.63,.06,-.72,.24,-.81],["l",.12,-.06],["l",.45,.12],["c",.66,.18,1.02,.24,1.47,.27],["c",.6,.03,1.23,-.09,2.01,-.33],["z"]],w:11.795,h:14.994},5:{d:[["M",1.02,-14.94],["c",.12,-.09,.03,-.09,1.08,.06],["c",2.49,.36,4.35,.36,6.96,-.06],["c",.57,-.09,.66,-.06,.81,.06],["c",.15,.18,.12,.24,-.15,.51],["c",-1.29,1.26,-3.24,2.04,-5.58,2.31],["c",-.6,.09,-1.2,.12,-1.71,.12],["c",-.39,0,-.45,0,-.57,.06],["c",-.09,.06,-.15,.12,-.21,.21],["l",-.06,.12],["l",0,1.65],["l",0,1.65],["l",.21,-.21],["c",.66,-.57,1.41,-.96,2.19,-1.14],["c",.33,-.06,1.41,-.06,1.95,0],["c",2.61,.36,4.02,1.74,4.26,4.14],["c",.03,.45,.03,1.08,-.03,1.44],["c",-.18,1.02,-.78,2.01,-1.59,2.7],["c",-.72,.57,-1.62,1.02,-2.49,1.2],["c",-1.38,.27,-3.03,.06,-4.2,-.54],["c",-1.08,-.54,-1.71,-1.32,-1.86,-2.28],["c",-.09,-.69,.09,-1.29,.57,-1.74],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.18,.12,-.36,.3,-.42,.33],["c",-.36,.42,-.18,.99,.36,1.26],["c",.51,.27,1.47,.36,2.01,.27],["c",.93,-.21,1.47,-1.17,1.65,-2.91],["c",.06,-.45,.06,-1.89,0,-2.31],["c",-.15,-1.2,-.51,-2.1,-1.05,-2.55],["c",-.21,-.18,-.54,-.36,-.81,-.39],["c",-.3,-.06,-.84,-.03,-1.26,.06],["c",-.93,.18,-1.65,.6,-2.16,1.2],["c",-.15,.21,-.27,.3,-.39,.3],["c",-.15,0,-.3,-.09,-.36,-.18],["c",-.06,-.09,-.06,-.15,-.06,-3.66],["c",0,-3.39,0,-3.57,.06,-3.66],["c",.03,-.06,.09,-.15,.15,-.18],["z"]],w:10.212,h:14.997},6:{d:[["M",4.98,-14.97],["c",.36,-.03,1.2,0,1.59,.06],["c",.9,.15,1.68,.51,2.25,1.05],["c",.57,.51,.87,1.23,.84,1.98],["c",-.03,.51,-.21,.9,-.6,1.26],["c",-.24,.24,-.45,.39,-.75,.51],["c",-.21,.06,-.27,.06,-.6,.06],["c",-.33,0,-.39,0,-.6,-.06],["c",-.3,-.12,-.51,-.27,-.75,-.51],["c",-.39,-.36,-.57,-.78,-.57,-1.26],["c",0,-.27,0,-.3,.09,-.42],["c",.03,-.09,.18,-.21,.3,-.3],["c",.12,-.09,.3,-.21,.39,-.27],["c",.09,-.06,.21,-.18,.27,-.24],["c",.06,-.12,.09,-.15,.09,-.33],["c",0,-.18,-.03,-.24,-.09,-.36],["c",-.24,-.39,-.75,-.6,-1.38,-.57],["c",-.54,.03,-.9,.18,-1.23,.48],["c",-.81,.72,-1.08,2.16,-.96,5.37],["l",0,.63],["l",.3,-.12],["c",.78,-.27,1.29,-.33,2.1,-.27],["c",1.47,.12,2.49,.54,3.27,1.29],["c",.48,.51,.81,1.11,.96,1.89],["c",.06,.27,.06,.42,.06,.93],["c",0,.54,0,.69,-.06,.96],["c",-.15,.78,-.48,1.38,-.96,1.89],["c",-.54,.51,-1.17,.87,-1.98,1.08],["c",-1.14,.3,-2.4,.33,-3.24,.03],["c",-1.5,-.48,-2.64,-1.89,-3.27,-4.02],["c",-.36,-1.23,-.51,-2.82,-.42,-4.08],["c",.3,-3.66,2.28,-6.3,4.95,-6.66],["z"],["m",.66,7.41],["c",-.27,-.09,-.81,-.12,-1.08,-.06],["c",-.72,.18,-1.08,.69,-1.23,1.71],["c",-.06,.54,-.06,3,0,3.54],["c",.18,1.26,.72,1.77,1.8,1.74],["c",.39,-.03,.63,-.09,.9,-.27],["c",.66,-.42,.9,-1.32,.9,-3.24],["c",0,-2.22,-.36,-3.12,-1.29,-3.42],["z"]],w:9.956,h:14.982},7:{d:[["M",.21,-14.97],["c",.21,-.06,.45,0,.54,.15],["c",.06,.09,.06,.15,.06,.39],["c",0,.24,0,.33,.06,.42],["c",.06,.12,.21,.24,.27,.24],["c",.03,0,.12,-.12,.24,-.21],["c",.96,-1.2,2.58,-1.35,3.99,-.42],["c",.15,.12,.42,.3,.54,.45],["c",.48,.39,.81,.57,1.29,.6],["c",.69,.03,1.5,-.3,2.13,-.87],["c",.09,-.09,.27,-.3,.39,-.45],["c",.12,-.15,.24,-.27,.3,-.3],["c",.18,-.06,.39,.03,.51,.21],["c",.06,.18,.06,.24,-.27,.72],["c",-.18,.24,-.54,.78,-.78,1.17],["c",-2.37,3.54,-3.54,6.27,-3.87,9],["c",-.03,.33,-.03,.66,-.03,1.26],["c",0,.9,0,1.08,.15,1.89],["c",.06,.45,.06,.48,.03,.6],["c",-.06,.09,-.21,.21,-.3,.21],["c",-.03,0,-.27,-.06,-.54,-.15],["c",-.84,-.27,-1.11,-.3,-1.65,-.3],["c",-.57,0,-.84,.03,-1.56,.27],["c",-.6,.18,-.69,.21,-.81,.15],["c",-.12,-.06,-.21,-.18,-.21,-.3],["c",0,-.15,.6,-1.44,1.2,-2.61],["c",1.14,-2.22,2.73,-4.68,5.1,-8.01],["c",.21,-.27,.36,-.48,.33,-.48],["c",0,0,-.12,.06,-.27,.12],["c",-.54,.3,-.99,.39,-1.56,.39],["c",-.75,.03,-1.2,-.18,-1.83,-.75],["c",-.99,-.9,-1.83,-1.17,-2.31,-.72],["c",-.18,.15,-.36,.51,-.45,.84],["c",-.06,.24,-.06,.33,-.09,1.98],["c",0,1.62,-.03,1.74,-.06,1.8],["c",-.15,.24,-.54,.24,-.69,0],["c",-.06,-.09,-.06,-.15,-.06,-3.57],["c",0,-3.42,0,-3.48,.06,-3.57],["c",.03,-.06,.09,-.12,.15,-.15],["z"]],w:10.561,h:15.093},8:{d:[["M",4.98,-14.97],["c",.33,-.03,1.02,-.03,1.32,0],["c",1.32,.12,2.49,.6,3.21,1.32],["c",.39,.39,.66,.81,.78,1.29],["c",.09,.36,.09,1.08,0,1.44],["c",-.21,.84,-.66,1.59,-1.59,2.55],["l",-.3,.3],["l",.27,.18],["c",1.47,.93,2.31,2.31,2.25,3.75],["c",-.03,.75,-.24,1.35,-.63,1.95],["c",-.45,.66,-1.02,1.14,-1.83,1.53],["c",-1.8,.87,-4.2,.87,-6,.03],["c",-1.62,-.78,-2.52,-2.16,-2.46,-3.66],["c",.06,-.99,.54,-1.77,1.8,-2.97],["c",.54,-.51,.54,-.54,.48,-.57],["c",-.39,-.27,-.96,-.78,-1.2,-1.14],["c",-.75,-1.11,-.87,-2.4,-.3,-3.6],["c",.69,-1.35,2.25,-2.25,4.2,-2.4],["z"],["m",1.53,.69],["c",-.42,-.09,-1.11,-.12,-1.38,-.06],["c",-.3,.06,-.6,.18,-.81,.3],["c",-.21,.12,-.6,.51,-.72,.72],["c",-.51,.87,-.42,1.89,.21,2.52],["c",.21,.21,.36,.3,1.95,1.23],["c",.96,.54,1.74,.99,1.77,1.02],["c",.09,0,.63,-.6,.99,-1.11],["c",.21,-.36,.48,-.87,.57,-1.23],["c",.06,-.24,.06,-.36,.06,-.72],["c",0,-.45,-.03,-.66,-.15,-.99],["c",-.39,-.81,-1.29,-1.44,-2.49,-1.68],["z"],["m",-1.44,8.07],["l",-1.89,-1.08],["c",-.03,0,-.18,.15,-.39,.33],["c",-1.2,1.08,-1.65,1.95,-1.59,3],["c",.09,1.59,1.35,2.85,3.21,3.24],["c",.33,.06,.45,.06,.93,.06],["c",.63,0,.81,-.03,1.29,-.27],["c",.9,-.42,1.47,-1.41,1.41,-2.4],["c",-.06,-.66,-.39,-1.29,-.9,-1.65],["c",-.12,-.09,-1.05,-.63,-2.07,-1.23],["z"]],w:10.926,h:14.989},9:{d:[["M",4.23,-14.97],["c",.42,-.03,1.29,0,1.62,.06],["c",.51,.12,.93,.3,1.38,.57],["c",1.53,1.02,2.52,3.24,2.73,5.94],["c",.18,2.55,-.48,4.98,-1.83,6.57],["c",-1.05,1.26,-2.4,1.89,-3.93,1.83],["c",-1.23,-.06,-2.31,-.45,-3.03,-1.14],["c",-.57,-.51,-.87,-1.23,-.84,-1.98],["c",.03,-.51,.21,-.9,.6,-1.26],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.39,.36,.57,.78,.57,1.26],["c",0,.27,0,.3,-.09,.42],["c",-.03,.09,-.18,.21,-.3,.3],["c",-.12,.09,-.3,.21,-.39,.27],["c",-.09,.06,-.21,.18,-.27,.24],["c",-.06,.12,-.06,.15,-.06,.33],["c",0,.18,0,.24,.06,.36],["c",.24,.39,.75,.6,1.38,.57],["c",.54,-.03,.9,-.18,1.23,-.48],["c",.81,-.72,1.08,-2.16,.96,-5.37],["l",0,-.63],["l",-.3,.12],["c",-.78,.27,-1.29,.33,-2.1,.27],["c",-1.47,-.12,-2.49,-.54,-3.27,-1.29],["c",-.48,-.51,-.81,-1.11,-.96,-1.89],["c",-.06,-.27,-.06,-.42,-.06,-.96],["c",0,-.51,0,-.66,.06,-.93],["c",.15,-.78,.48,-1.38,.96,-1.89],["c",.15,-.12,.33,-.27,.42,-.36],["c",.69,-.51,1.62,-.81,2.76,-.93],["z"],["m",1.17,.66],["c",-.21,-.06,-.57,-.06,-.81,-.03],["c",-.78,.12,-1.26,.69,-1.41,1.74],["c",-.12,.63,-.15,1.95,-.09,2.79],["c",.12,1.71,.63,2.4,1.77,2.46],["c",1.08,.03,1.62,-.48,1.8,-1.74],["c",.06,-.54,.06,-3,0,-3.54],["c",-.15,-1.05,-.51,-1.53,-1.26,-1.68],["z"]],w:9.959,h:14.986},"rests.multimeasure":{d:[["M",0,-4],["l",0,16],["l",1,0],["l",0,-5],["l",40,0],["l",0,5],["l",1,0],["l",0,-16],["l",-1,0],["l",0,5],["l",-40,0],["l",0,-5],["z"]],w:42,h:18},"rests.whole":{d:[["M",.06,.03],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.half":{d:[["M",.06,-4.62],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.quarter":{d:[["M",1.89,-11.82],["c",.12,-.06,.24,-.06,.36,-.03],["c",.09,.06,4.74,5.58,4.86,5.82],["c",.21,.39,.15,.78,-.15,1.26],["c",-.24,.33,-.72,.81,-1.62,1.56],["c",-.45,.36,-.87,.75,-.96,.84],["c",-.93,.99,-1.14,2.49,-.6,3.63],["c",.18,.39,.27,.48,1.32,1.68],["c",1.92,2.25,1.83,2.16,1.83,2.34],["c",0,.18,-.18,.36,-.36,.39],["c",-.15,0,-.27,-.06,-.48,-.27],["c",-.75,-.75,-2.46,-1.29,-3.39,-1.08],["c",-.45,.09,-.69,.27,-.9,.69],["c",-.12,.3,-.21,.66,-.24,1.14],["c",-.03,.66,.09,1.35,.3,2.01],["c",.15,.42,.24,.66,.45,.96],["c",.18,.24,.18,.33,.03,.42],["c",-.12,.06,-.18,.03,-.45,-.3],["c",-1.08,-1.38,-2.07,-3.36,-2.4,-4.83],["c",-.27,-1.05,-.15,-1.77,.27,-2.07],["c",.21,-.12,.42,-.15,.87,-.15],["c",.87,.06,2.1,.39,3.3,.9],["l",.39,.18],["l",-1.65,-1.95],["c",-2.52,-2.97,-2.61,-3.09,-2.7,-3.27],["c",-.09,-.24,-.12,-.48,-.03,-.75],["c",.15,-.48,.57,-.96,1.83,-2.01],["c",.45,-.36,.84,-.72,.93,-.78],["c",.69,-.75,1.02,-1.8,.9,-2.79],["c",-.06,-.33,-.21,-.84,-.39,-1.11],["c",-.09,-.15,-.45,-.6,-.81,-1.05],["c",-.36,-.42,-.69,-.81,-.72,-.87],["c",-.09,-.18,0,-.42,.21,-.51],["z"]],w:7.888,h:21.435},"rests.8th":{d:[["M",1.68,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.33,-.09],["c",.39,-.18,1.32,-1.29,1.68,-1.98],["c",.09,-.21,.24,-.3,.39,-.3],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.27,1.11,-1.86,6.42],["c",-1.02,3.48,-1.89,6.39,-1.92,6.42],["c",0,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.15,-.57,1.68,-4.92],["c",.96,-2.67,1.74,-4.89,1.71,-4.89],["l",-.51,.15],["c",-1.08,.36,-1.74,.48,-2.55,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:7.534,h:13.883},"rests.16th":{d:[["M",3.33,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.87,.42],["c",.39,-.18,1.2,-1.23,1.62,-2.07],["c",.06,-.15,.24,-.24,.36,-.24],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.45,1.86,-2.67,10.17],["c",-1.5,5.55,-2.73,10.14,-2.76,10.17],["c",-.03,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.12,-.57,1.44,-4.92],["c",.81,-2.67,1.47,-4.86,1.47,-4.89],["c",-.03,0,-.27,.06,-.54,.15],["c",-1.08,.36,-1.77,.48,-2.58,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.12,0,.18,0,.33,-.09],["c",.33,-.15,1.02,-.93,1.41,-1.59],["c",.12,-.21,.18,-.39,.39,-1.08],["c",.66,-2.1,1.17,-3.84,1.17,-3.87],["c",0,0,-.21,.06,-.42,.15],["c",-.51,.15,-1.2,.33,-1.68,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:9.724,h:21.383},"rests.32nd":{d:[["M",4.23,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.27,-.06],["c",.33,-.21,.99,-1.11,1.44,-1.98],["c",.09,-.24,.21,-.33,.39,-.33],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.57,2.67,-3.21,13.89],["c",-1.8,7.62,-3.3,13.89,-3.3,13.92],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.09,-.57,1.23,-4.92],["c",.69,-2.67,1.26,-4.86,1.29,-4.89],["c",0,-.03,-.12,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.12,.09,.3,.18,.48,.21],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.29,-1.29,1.56,-1.89],["c",.03,-.12,1.23,-4.59,1.23,-4.65],["c",0,-.03,-.18,.03,-.39,.12],["c",-.63,.18,-1.2,.36,-1.74,.45],["c",-.39,.06,-.54,.06,-1.02,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.18,.18,.51,.27,.72,.15],["c",.3,-.12,.69,-.57,1.08,-1.17],["c",.42,-.6,.39,-.51,1.05,-3.03],["c",.33,-1.26,.6,-2.31,.6,-2.34],["c",0,0,-.21,.03,-.45,.12],["c",-.57,.18,-1.14,.33,-1.62,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:11.373,h:28.883},"rests.64th":{d:[["M",5.13,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.54,.3,.75,.18],["c",.24,-.12,.63,-.66,1.08,-1.56],["c",.33,-.66,.39,-.72,.6,-.72],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.69,3.66,-3.54,17.64],["c",-1.95,9.66,-3.57,17.61,-3.57,17.64],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.06,-.57,1.05,-4.95],["c",.6,-2.7,1.08,-4.89,1.08,-4.92],["c",0,0,-.24,.06,-.51,.15],["c",-.66,.24,-1.2,.36,-1.77,.48],["c",-.42,.06,-.57,.06,-1.05,.06],["c",-.69,0,-.87,-.03,-1.35,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.21,.03,.39,-.09,.72,-.42],["c",.45,-.45,1.02,-1.26,1.17,-1.65],["c",.03,-.09,.27,-1.14,.54,-2.34],["c",.27,-1.2,.48,-2.19,.51,-2.22],["c",0,-.03,-.09,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.9,.42],["c",.36,-.18,1.2,-1.26,1.47,-1.89],["c",.03,-.09,.3,-1.2,.57,-2.43],["l",.51,-2.28],["l",-.54,.18],["c",-1.11,.36,-1.8,.48,-2.61,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.21,.21,.54,.3,.75,.18],["c",.36,-.18,.93,-.93,1.29,-1.68],["c",.12,-.24,.18,-.48,.63,-2.55],["l",.51,-2.31],["c",0,-.03,-.18,.03,-.39,.12],["c",-1.14,.36,-2.1,.54,-2.82,.51],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.453,h:36.383},"rests.128th":{d:[["M",6.03,-21.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.21,0,.33,-.06,.54,-.36],["c",.15,-.21,.54,-.93,.78,-1.47],["c",.15,-.33,.18,-.39,.3,-.48],["c",.18,-.09,.45,0,.51,.15],["c",.03,.09,-7.11,42.75,-7.17,42.84],["c",-.03,.03,-.15,.09,-.24,.15],["c",-.18,.06,-.24,.06,-.45,.06],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.03,-.57,.84,-4.98],["c",.51,-2.7,.93,-4.92,.9,-4.92],["c",0,0,-.15,.06,-.36,.12],["c",-.78,.27,-1.62,.48,-2.31,.57],["c",-.15,.03,-.54,.03,-.81,.03],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.63,.48],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.14,-1.11,1.5,-1.83],["c",.12,-.27,.12,-.27,.54,-2.52],["c",.24,-1.23,.42,-2.25,.39,-2.25],["c",0,0,-.24,.06,-.51,.18],["c",-1.26,.39,-2.25,.57,-3.06,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.51,.3,.75,.18],["c",.36,-.15,1.05,-.99,1.41,-1.77],["l",.15,-.3],["l",.42,-2.25],["c",.21,-1.26,.42,-2.28,.39,-2.28],["l",-.51,.15],["c",-1.11,.39,-1.89,.51,-2.7,.51],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.18,.48,.27,.72,.21],["c",.33,-.12,1.14,-1.26,1.41,-1.95],["c",0,-.09,.21,-1.11,.45,-2.34],["c",.21,-1.2,.39,-2.22,.39,-2.28],["c",.03,-.03,0,-.03,-.45,.12],["c",-.57,.18,-1.2,.33,-1.71,.42],["c",-.3,.06,-.51,.06,-.93,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.18,0,.36,-.09,.57,-.33],["c",.33,-.36,.78,-1.14,.93,-1.56],["c",.03,-.12,.24,-1.2,.45,-2.4],["c",.24,-1.2,.42,-2.22,.42,-2.28],["c",.03,-.03,0,-.03,-.39,.09],["c",-1.05,.36,-1.8,.48,-2.58,.48],["c",-.63,0,-.84,-.03,-1.29,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.992,h:43.883},"accidentals.sharp":{d:[["M",5.73,-11.19],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.31],["c",0,1.23,0,2.22,.03,2.22],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.43],["c",0,1.32,0,2.43,.03,2.43],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.52],["c",0,2.28,-.03,2.55,-.06,2.64],["c",-.21,.36,-.72,.36,-.93,0],["c",-.03,-.09,-.06,-.33,-.06,-2.43],["l",0,-2.31],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.43],["c",0,2.58,0,2.52,-.15,2.67],["c",-.06,.09,-.27,.18,-.36,.18],["c",-.12,0,-.33,-.09,-.39,-.18],["c",-.15,-.15,-.15,-.09,-.15,-2.43],["c",0,-1.23,0,-2.22,-.03,-2.22],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.43],["c",0,-1.32,0,-2.43,-.03,-2.43],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.52],["c",0,-2.28,.03,-2.55,.06,-2.64],["c",.21,-.36,.72,-.36,.93,0],["c",.03,.09,.06,.33,.06,2.43],["l",.03,2.31],["l",1.26,-.51],["l",1.26,-.51],["l",0,-2.43],["c",0,-2.28,0,-2.43,.06,-2.55],["c",.06,-.12,.12,-.18,.27,-.24],["z"],["m",-.33,10.65],["l",0,-2.43],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.46],["l",0,2.43],["l",.09,-.03],["c",.06,-.03,.63,-.27,1.29,-.51],["l",1.17,-.48],["l",0,-2.46],["z"]],w:8.25,h:22.462},"accidentals.halfsharp":{d:[["M",2.43,-10.05],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.01],["c",0,1.05,0,1.89,.03,1.89],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.37],["c",0,1.32,0,2.37,.03,2.37],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.25],["c",0,1.95,0,2.28,-.06,2.37],["c",-.06,.12,-.12,.21,-.24,.27],["c",-.27,.12,-.54,.03,-.69,-.24],["c",-.06,-.12,-.06,-.21,-.06,-2.01],["c",0,-1.05,0,-1.89,-.03,-1.89],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.37],["c",0,-1.32,0,-2.37,-.03,-2.37],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.25],["c",0,-2.13,0,-2.28,.06,-2.4],["c",.06,-.12,.12,-.18,.27,-.24],["z"]],w:5.25,h:20.174},"accidentals.nat":{d:[["M",.21,-11.4],["c",.24,-.06,.78,0,.99,.15],["c",.03,.03,.03,.48,0,2.61],["c",-.03,1.44,-.03,2.61,-.03,2.61],["c",0,.03,.75,-.09,1.68,-.24],["c",.96,-.18,1.71,-.27,1.74,-.27],["c",.15,.03,.27,.15,.36,.3],["l",.06,.12],["l",.09,8.67],["c",.09,6.96,.12,8.67,.09,8.67],["c",-.03,.03,-.12,.06,-.21,.09],["c",-.24,.09,-.72,.09,-.96,0],["c",-.09,-.03,-.18,-.06,-.21,-.09],["c",-.03,-.03,-.03,-.48,0,-2.61],["c",.03,-1.44,.03,-2.61,.03,-2.61],["c",0,-.03,-.75,.09,-1.68,.24],["c",-.96,.18,-1.71,.27,-1.74,.27],["c",-.15,-.03,-.27,-.15,-.36,-.3],["l",-.06,-.15],["l",-.09,-7.53],["c",-.06,-4.14,-.09,-8.04,-.12,-8.67],["l",0,-1.11],["l",.15,-.06],["c",.09,-.03,.21,-.06,.27,-.09],["z"],["m",3.75,8.4],["c",0,-.33,0,-.42,-.03,-.42],["c",-.12,0,-2.79,.45,-2.79,.48],["c",-.03,0,-.09,6.3,-.09,6.33],["c",.03,0,2.79,-.45,2.82,-.48],["c",0,0,.09,-4.53,.09,-5.91],["z"]],w:5.4,h:22.8},"accidentals.flat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:6.75,h:18.801},"accidentals.halfflat":{d:[["M",4.83,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.6,-.12,9.06],["c",-.09,5.55,-.15,9.06,-.18,9.12],["c",-.03,.09,-.09,.18,-.15,.27],["c",-.24,.21,-.54,.24,-.81,.06],["c",-.06,-.03,-.27,-.24,-.45,-.42],["c",-.36,-.42,-.66,-.66,-1.8,-1.44],["c",-1.23,-.84,-1.83,-1.32,-2.25,-1.77],["c",-.66,-.78,-.96,-1.56,-.93,-2.46],["c",.09,-1.41,1.11,-2.58,2.4,-2.79],["c",.3,-.06,.84,-.03,1.23,.06],["c",.54,.12,1.08,.33,1.53,.63],["c",.12,.09,.24,.15,.24,.12],["c",0,0,-.12,-8.37,-.18,-9.75],["l",0,-.66],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",-1.65,10.95],["c",-.6,-.18,-1.08,.09,-1.38,.69],["c",-.27,.6,-.36,1.38,-.18,2.07],["c",.12,.42,.42,.99,.72,1.41],["c",.3,.42,.93,1.05,1.56,1.59],["l",.48,.39],["l",0,-.12],["c",.03,-.09,.03,-.48,.06,-.9],["c",.03,-.57,.03,-1.08,0,-2.22],["c",-.03,-1.62,-.03,-1.62,-.24,-2.07],["c",-.21,-.42,-.6,-.75,-1.02,-.84],["z"]],w:6.728,h:18.801},"accidentals.dblflat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"],["m",3,-11],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:12.1,h:18.804},"accidentals.dblsharp":{d:[["M",-.18,-3.96],["c",.06,-.03,.12,-.06,.15,-.06],["c",.09,0,2.76,.27,2.79,.3],["c",.12,.03,.15,.12,.15,.51],["c",.06,.96,.24,1.59,.57,2.1],["c",.06,.09,.15,.21,.18,.24],["l",.09,.06],["l",.09,-.06],["c",.03,-.03,.12,-.15,.18,-.24],["c",.33,-.51,.51,-1.14,.57,-2.1],["c",0,-.39,.03,-.45,.12,-.51],["c",.03,0,.66,-.09,1.44,-.15],["c",1.47,-.15,1.5,-.15,1.56,-.03],["c",.03,.06,0,.42,-.09,1.44],["c",-.09,.72,-.15,1.35,-.15,1.38],["c",0,.03,-.03,.09,-.06,.12],["c",-.06,.06,-.12,.09,-.51,.09],["c",-1.08,.06,-1.8,.3,-2.28,.75],["l",-.12,.09],["l",.09,.09],["c",.12,.15,.39,.33,.63,.45],["c",.42,.18,.96,.27,1.68,.33],["c",.39,0,.45,.03,.51,.09],["c",.03,.03,.06,.09,.06,.12],["c",0,.03,.06,.66,.15,1.38],["c",.09,1.02,.12,1.38,.09,1.44],["c",-.06,.12,-.09,.12,-1.56,-.03],["c",-.78,-.06,-1.41,-.15,-1.44,-.15],["c",-.09,-.06,-.12,-.12,-.12,-.54],["c",-.06,-.93,-.24,-1.56,-.57,-2.07],["c",-.06,-.09,-.15,-.21,-.18,-.24],["l",-.09,-.06],["l",-.09,.06],["c",-.03,.03,-.12,.15,-.18,.24],["c",-.33,.51,-.51,1.14,-.57,2.07],["c",0,.42,-.03,.48,-.12,.54],["c",-.03,0,-.66,.09,-1.44,.15],["c",-1.47,.15,-1.5,.15,-1.56,.03],["c",-.03,-.06,0,-.42,.09,-1.44],["c",.09,-.72,.15,-1.35,.15,-1.38],["c",0,-.03,.03,-.09,.06,-.12],["c",.06,-.06,.12,-.09,.51,-.09],["c",.72,-.06,1.26,-.15,1.68,-.33],["c",.24,-.12,.51,-.3,.63,-.45],["l",.09,-.09],["l",-.12,-.09],["c",-.48,-.45,-1.2,-.69,-2.28,-.75],["c",-.39,0,-.45,-.03,-.51,-.09],["c",-.03,-.03,-.06,-.09,-.06,-.12],["c",0,-.03,-.06,-.63,-.12,-1.38],["c",-.09,-.72,-.15,-1.35,-.15,-1.38],["z"]],w:7.95,h:7.977},"dots.dot":{d:[["M",1.32,-1.68],["c",.09,-.03,.27,-.06,.39,-.06],["c",.96,0,1.74,.78,1.74,1.71],["c",0,.96,-.78,1.74,-1.71,1.74],["c",-.96,0,-1.74,-.78,-1.74,-1.71],["c",0,-.78,.54,-1.5,1.32,-1.68],["z"]],w:3.45,h:3.45},"noteheads.dbl":{d:[["M",-.69,-4.02],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["c",.06,.15,.06,.18,.06,1.41],["l",0,1.23],["l",.12,-.18],["c",.72,-1.26,2.64,-2.31,4.86,-2.64],["c",.81,-.15,1.11,-.15,2.13,-.15],["c",.99,0,1.29,0,2.1,.15],["c",.75,.12,1.38,.27,2.04,.54],["c",1.35,.51,2.34,1.26,2.82,2.1],["l",.12,.18],["l",0,-1.23],["c",0,-1.2,0,-1.26,.06,-1.38],["c",.09,-.18,.15,-.24,.33,-.33],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,3.54],["l",0,3.54],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.38],["l",0,-1.23],["l",-.12,.18],["c",-.48,.84,-1.47,1.59,-2.82,2.1],["c",-.84,.33,-1.71,.54,-2.85,.66],["c",-.45,.06,-2.16,.06,-2.61,0],["c",-1.14,-.12,-2.01,-.33,-2.85,-.66],["c",-1.35,-.51,-2.34,-1.26,-2.82,-2.1],["l",-.12,-.18],["l",0,1.23],["c",0,1.23,0,1.26,-.06,1.38],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-3.54],["c",0,-3.48,0,-3.54,.06,-3.66],["c",.09,-.18,.15,-.24,.33,-.33],["z"],["m",7.71,.63],["c",-.36,-.06,-.9,-.06,-1.14,0],["c",-.3,.03,-.66,.24,-.87,.42],["c",-.6,.54,-.9,1.62,-.75,2.82],["c",.12,.93,.51,1.68,1.11,2.31],["c",.75,.72,1.83,1.2,2.85,1.26],["c",1.05,.06,1.83,-.54,2.1,-1.65],["c",.21,-.9,.12,-1.95,-.24,-2.82],["c",-.36,-.81,-1.08,-1.53,-1.95,-1.95],["c",-.3,-.15,-.78,-.3,-1.11,-.39],["z"]],w:16.83,h:8.145},"noteheads.whole":{d:[["M",6.51,-4.05],["c",.51,-.03,2.01,0,2.52,.03],["c",1.41,.18,2.64,.51,3.72,1.08],["c",1.2,.63,1.95,1.41,2.19,2.31],["c",.09,.33,.09,.9,0,1.23],["c",-.24,.9,-.99,1.68,-2.19,2.31],["c",-1.08,.57,-2.28,.9,-3.75,1.08],["c",-.66,.06,-2.31,.06,-2.97,0],["c",-1.47,-.18,-2.67,-.51,-3.75,-1.08],["c",-1.2,-.63,-1.95,-1.41,-2.19,-2.31],["c",-.09,-.33,-.09,-.9,0,-1.23],["c",.24,-.9,.99,-1.68,2.19,-2.31],["c",1.2,-.63,2.61,-.99,4.23,-1.11],["z"],["m",.57,.66],["c",-.87,-.15,-1.53,0,-2.04,.51],["c",-.15,.15,-.24,.27,-.33,.48],["c",-.24,.51,-.36,1.08,-.33,1.77],["c",.03,.69,.18,1.26,.42,1.77],["c",.6,1.17,1.74,1.98,3.18,2.22],["c",1.11,.21,1.95,-.15,2.34,-.99],["c",.24,-.51,.36,-1.08,.33,-1.8],["c",-.06,-1.11,-.45,-2.04,-1.17,-2.76],["c",-.63,-.63,-1.47,-1.05,-2.4,-1.2],["z"]],w:14.985,h:8.097},"noteheads.half":{d:[["M",7.44,-4.05],["c",.06,-.03,.27,-.03,.48,-.03],["c",1.05,0,1.71,.24,2.1,.81],["c",.42,.6,.45,1.35,.18,2.4],["c",-.42,1.59,-1.14,2.73,-2.16,3.39],["c",-1.41,.93,-3.18,1.44,-5.4,1.53],["c",-1.17,.03,-1.89,-.21,-2.28,-.81],["c",-.42,-.6,-.45,-1.35,-.18,-2.4],["c",.42,-1.59,1.14,-2.73,2.16,-3.39],["c",.63,-.42,1.23,-.72,1.98,-.96],["c",.9,-.3,1.65,-.42,3.12,-.54],["z"],["m",1.29,.87],["c",-.27,-.09,-.63,-.12,-.9,-.03],["c",-.72,.24,-1.53,.69,-3.27,1.8],["c",-2.34,1.5,-3.3,2.25,-3.57,2.79],["c",-.36,.72,-.06,1.5,.66,1.77],["c",.24,.12,.69,.09,.99,0],["c",.84,-.3,1.92,-.93,4.14,-2.37],["c",1.62,-1.08,2.37,-1.71,2.61,-2.19],["c",.36,-.72,.06,-1.5,-.66,-1.77],["z"]],w:10.37,h:8.132},"noteheads.quarter":{d:[["M",6.09,-4.05],["c",.36,-.03,1.2,0,1.53,.06],["c",1.17,.24,1.89,.84,2.16,1.83],["c",.06,.18,.06,.3,.06,.66],["c",0,.45,0,.63,-.15,1.08],["c",-.66,2.04,-3.06,3.93,-5.52,4.38],["c",-.54,.09,-1.44,.09,-1.83,.03],["c",-1.23,-.27,-1.98,-.87,-2.25,-1.86],["c",-.06,-.18,-.06,-.3,-.06,-.66],["c",0,-.45,0,-.63,.15,-1.08],["c",.24,-.78,.75,-1.53,1.44,-2.22],["c",1.2,-1.2,2.85,-2.01,4.47,-2.22],["z"]],w:9.81,h:8.094},"noteheads.slash.nostem":{d:[["M",9.3,-7.77],["c",.06,-.06,.18,-.06,1.71,-.06],["l",1.65,0],["l",.09,.09],["c",.06,.06,.06,.09,.06,.15],["c",-.03,.12,-9.21,15.24,-9.3,15.33],["c",-.06,.06,-.18,.06,-1.71,.06],["l",-1.65,0],["l",-.09,-.09],["c",-.06,-.06,-.06,-.09,-.06,-.15],["c",.03,-.12,9.21,-15.24,9.3,-15.33],["z"]],w:12.81,h:15.63},"noteheads.indeterminate":{d:[["M",.78,-4.05],["c",.12,-.03,.24,-.03,.36,.03],["c",.03,.03,.93,.72,1.95,1.56],["l",1.86,1.5],["l",1.86,-1.5],["c",1.02,-.84,1.92,-1.53,1.95,-1.56],["c",.21,-.12,.33,-.09,.75,.24],["c",.3,.27,.36,.36,.36,.54],["c",0,.03,-.03,.12,-.06,.18],["c",-.03,.06,-.9,.75,-1.89,1.56],["l",-1.8,1.47],["c",0,.03,.81,.69,1.8,1.5],["c",.99,.81,1.86,1.5,1.89,1.56],["c",.03,.06,.06,.15,.06,.18],["c",0,.18,-.06,.27,-.36,.54],["c",-.42,.33,-.54,.36,-.75,.24],["c",-.03,-.03,-.93,-.72,-1.95,-1.56],["l",-1.86,-1.5],["l",-1.86,1.5],["c",-1.02,.84,-1.92,1.53,-1.95,1.56],["c",-.21,.12,-.33,.09,-.75,-.24],["c",-.3,-.27,-.36,-.36,-.36,-.54],["c",0,-.03,.03,-.12,.06,-.18],["c",.03,-.06,.9,-.75,1.89,-1.56],["l",1.8,-1.47],["c",0,-.03,-.81,-.69,-1.8,-1.5],["c",-.99,-.81,-1.86,-1.5,-1.89,-1.56],["c",-.06,-.12,-.09,-.21,-.03,-.36],["c",.03,-.09,.57,-.57,.72,-.63],["z"]],w:9.843,h:8.139},"scripts.ufermata":{d:[["M",-.75,-10.77],["c",.12,0,.45,-.03,.69,-.03],["c",2.91,-.03,5.55,1.53,7.41,4.35],["c",1.17,1.71,1.95,3.72,2.43,6.03],["c",.12,.51,.12,.57,.03,.69],["c",-.12,.21,-.48,.27,-.69,.12],["c",-.12,-.09,-.18,-.24,-.27,-.69],["c",-.78,-3.63,-3.42,-6.54,-6.78,-7.38],["c",-.78,-.21,-1.2,-.24,-2.07,-.24],["c",-.63,0,-.84,0,-1.2,.06],["c",-1.83,.27,-3.42,1.08,-4.8,2.37],["c",-1.41,1.35,-2.4,3.21,-2.85,5.19],["c",-.09,.45,-.15,.6,-.27,.69],["c",-.21,.15,-.57,.09,-.69,-.12],["c",-.09,-.12,-.09,-.18,.03,-.69],["c",.33,-1.62,.78,-3,1.47,-4.38],["c",1.77,-3.54,4.44,-5.67,7.56,-5.97],["z"],["m",.33,7.47],["c",1.38,-.3,2.58,.9,2.31,2.25],["c",-.15,.72,-.78,1.35,-1.47,1.5],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.748,h:11.289},"scripts.dfermata":{d:[["M",-9.63,-.42],["c",.15,-.09,.36,-.06,.51,.03],["c",.12,.09,.18,.24,.27,.66],["c",.78,3.66,3.42,6.57,6.78,7.41],["c",.78,.21,1.2,.24,2.07,.24],["c",.63,0,.84,0,1.2,-.06],["c",1.83,-.27,3.42,-1.08,4.8,-2.37],["c",1.41,-1.35,2.4,-3.21,2.85,-5.22],["c",.09,-.42,.15,-.57,.27,-.66],["c",.21,-.15,.57,-.09,.69,.12],["c",.09,.12,.09,.18,-.03,.69],["c",-.33,1.62,-.78,3,-1.47,4.38],["c",-1.92,3.84,-4.89,6,-8.31,6],["c",-3.42,0,-6.39,-2.16,-8.31,-6],["c",-.48,-.96,-.84,-1.92,-1.14,-2.97],["c",-.18,-.69,-.42,-1.74,-.42,-1.92],["c",0,-.12,.09,-.27,.24,-.33],["z"],["m",9.21,0],["c",1.2,-.27,2.34,.63,2.34,1.86],["c",0,.9,-.66,1.68,-1.5,1.89],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.744,h:11.274},"scripts.sforzato":{d:[["M",-6.45,-3.69],["c",.06,-.03,.15,-.06,.18,-.06],["c",.06,0,2.85,.72,6.24,1.59],["l",6.33,1.65],["c",.33,.06,.45,.21,.45,.51],["c",0,.3,-.12,.45,-.45,.51],["l",-6.33,1.65],["c",-3.39,.87,-6.18,1.59,-6.21,1.59],["c",-.21,0,-.48,-.24,-.51,-.45],["c",0,-.15,.06,-.36,.18,-.45],["c",.09,-.06,.87,-.27,3.84,-1.05],["c",2.04,-.54,3.84,-.99,4.02,-1.02],["c",.15,-.06,1.14,-.24,2.22,-.42],["c",1.05,-.18,1.92,-.36,1.92,-.36],["c",0,0,-.87,-.18,-1.92,-.36],["c",-1.08,-.18,-2.07,-.36,-2.22,-.42],["c",-.18,-.03,-1.98,-.48,-4.02,-1.02],["c",-2.97,-.78,-3.75,-.99,-3.84,-1.05],["c",-.12,-.09,-.18,-.3,-.18,-.45],["c",.03,-.15,.15,-.3,.3,-.39],["z"]],w:13.5,h:7.5},"scripts.staccato":{d:[["M",-.36,-1.47],["c",.93,-.21,1.86,.51,1.86,1.47],["c",0,.93,-.87,1.65,-1.8,1.47],["c",-.54,-.12,-1.02,-.57,-1.14,-1.08],["c",-.21,-.81,.27,-1.65,1.08,-1.86],["z"]],w:2.989,h:3.004},"scripts.tenuto":{d:[["M",-4.2,-.48],["l",.12,-.06],["l",4.08,0],["l",4.08,0],["l",.12,.06],["c",.39,.21,.39,.75,0,.96],["l",-.12,.06],["l",-4.08,0],["l",-4.08,0],["l",-.12,-.06],["c",-.39,-.21,-.39,-.75,0,-.96],["z"]],w:8.985,h:1.08},"scripts.umarcato":{d:[["M",-.15,-8.19],["c",.15,-.12,.36,-.03,.45,.15],["c",.21,.42,3.45,7.65,3.45,7.71],["c",0,.12,-.12,.27,-.21,.3],["c",-.03,.03,-.51,.03,-1.14,.03],["c",-1.05,0,-1.08,0,-1.17,-.06],["c",-.09,-.06,-.24,-.36,-1.17,-2.4],["c",-.57,-1.29,-1.05,-2.34,-1.08,-2.34],["c",0,-.03,-.51,1.02,-1.08,2.34],["c",-.93,2.07,-1.08,2.34,-1.14,2.4],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.06,3.24,-7.32,3.45,-7.71],["c",.03,-.06,.09,-.15,.15,-.15],["z"]],w:7.5,h:8.245},"scripts.dmarcato":{d:[["M",-3.57,.03],["c",.03,0,.57,-.03,1.17,-.03],["c",1.05,0,1.08,0,1.17,.06],["c",.09,.06,.24,.36,1.17,2.4],["c",.57,1.29,1.05,2.34,1.08,2.34],["c",0,.03,.51,-1.02,1.08,-2.34],["c",.93,-2.07,1.08,-2.34,1.14,-2.4],["c",.06,-.03,.15,-.06,.18,-.06],["c",.15,0,.33,.18,.33,.33],["c",0,.09,-3.45,7.74,-3.54,7.83],["c",-.12,.12,-.3,.12,-.42,0],["c",-.09,-.09,-3.54,-7.74,-3.54,-7.83],["c",0,-.09,.12,-.27,.18,-.3],["z"]],w:7.5,h:8.25},"scripts.stopped":{d:[["M",-.27,-4.08],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.5],["l",0,1.47],["l",1.47,0],["l",1.5,0],["l",.15,.06],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.09,.36,0,.54],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.12,.06,-.18,.06,-1.62,.06],["l",-1.47,0],["l",0,1.47],["l",0,1.47],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-1.47],["l",0,-1.47],["l",-1.47,0],["c",-1.44,0,-1.5,0,-1.62,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.47,0],["l",1.47,0],["l",0,-1.47],["c",0,-1.44,0,-1.5,.06,-1.62],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:8.295,h:8.295},"scripts.upbow":{d:[["M",-4.65,-15.54],["c",.12,-.09,.36,-.06,.48,.03],["c",.03,.03,.09,.09,.12,.15],["c",.03,.06,.66,2.13,1.41,4.62],["c",1.35,4.41,1.38,4.56,2.01,6.96],["l",.63,2.46],["l",.63,-2.46],["c",.63,-2.4,.66,-2.55,2.01,-6.96],["c",.75,-2.49,1.38,-4.56,1.41,-4.62],["c",.06,-.15,.18,-.21,.36,-.24],["c",.15,0,.3,.06,.39,.18],["c",.15,.21,.24,-.18,-2.1,7.56],["c",-1.2,3.96,-2.22,7.32,-2.25,7.41],["c",0,.12,-.06,.27,-.09,.3],["c",-.12,.21,-.6,.21,-.72,0],["c",-.03,-.03,-.09,-.18,-.09,-.3],["c",-.03,-.09,-1.05,-3.45,-2.25,-7.41],["c",-2.34,-7.74,-2.25,-7.35,-2.1,-7.56],["c",.03,-.03,.09,-.09,.15,-.12],["z"]],w:9.73,h:15.608},"scripts.downbow":{d:[["M",-5.55,-9.93],["l",.09,-.06],["l",5.46,0],["l",5.46,0],["l",.09,.06],["l",.06,.09],["l",0,4.77],["c",0,5.28,0,4.89,-.18,5.01],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.06,-.09,-.06,-.18,-.06,-2.97],["l",0,-2.85],["l",-4.83,0],["l",-4.83,0],["l",0,2.85],["c",0,2.79,0,2.88,-.06,2.97],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.21,-.06,-4.89],["l",0,-4.77],["z"]],w:11.22,h:9.992},"scripts.turn":{d:[["M",-4.77,-3.9],["c",.36,-.06,1.05,-.06,1.44,.03],["c",.78,.15,1.5,.51,2.34,1.14],["c",.6,.45,1.05,.87,2.22,2.01],["c",1.11,1.08,1.62,1.5,2.22,1.86],["c",.6,.36,1.32,.57,1.92,.57],["c",.9,0,1.71,-.57,1.89,-1.35],["c",.24,-.93,-.39,-1.89,-1.35,-2.1],["l",-.15,-.06],["l",-.09,.15],["c",-.03,.09,-.15,.24,-.24,.33],["c",-.72,.72,-2.04,.54,-2.49,-.36],["c",-.48,-.93,.03,-1.86,1.17,-2.19],["c",.3,-.09,1.02,-.09,1.35,0],["c",.99,.27,1.74,.87,2.25,1.83],["c",.69,1.41,.63,3,-.21,4.26],["c",-.21,.3,-.69,.81,-.99,1.02],["c",-.3,.21,-.84,.45,-1.17,.54],["c",-1.23,.36,-2.49,.15,-3.72,-.6],["c",-.75,-.48,-1.41,-1.02,-2.85,-2.46],["c",-1.11,-1.08,-1.62,-1.5,-2.22,-1.86],["c",-.6,-.36,-1.32,-.57,-1.92,-.57],["c",-.9,0,-1.71,.57,-1.89,1.35],["c",-.24,.93,.39,1.89,1.35,2.1],["l",.15,.06],["l",.09,-.15],["c",.03,-.09,.15,-.24,.24,-.33],["c",.72,-.72,2.04,-.54,2.49,.36],["c",.48,.93,-.03,1.86,-1.17,2.19],["c",-.3,.09,-1.02,.09,-1.35,0],["c",-.99,-.27,-1.74,-.87,-2.25,-1.83],["c",-.69,-1.41,-.63,-3,.21,-4.26],["c",.21,-.3,.69,-.81,.99,-1.02],["c",.48,-.33,1.11,-.57,1.74,-.66],["z"]],w:16.366,h:7.893},"scripts.trill":{d:[["M",-.51,-16.02],["c",.12,-.09,.21,-.18,.21,-.18],["l",-.81,4.02],["l",-.81,4.02],["c",.03,0,.51,-.27,1.08,-.6],["c",.6,-.3,1.14,-.63,1.26,-.66],["c",1.14,-.54,2.31,-.6,3.09,-.18],["c",.27,.15,.54,.36,.6,.51],["l",.06,.12],["l",.21,-.21],["c",.9,-.81,2.22,-.99,3.12,-.42],["c",.6,.42,.9,1.14,.78,2.07],["c",-.15,1.29,-1.05,2.31,-1.95,2.25],["c",-.48,-.03,-.78,-.3,-.96,-.81],["c",-.09,-.27,-.09,-.9,-.03,-1.2],["c",.21,-.75,.81,-1.23,1.59,-1.32],["l",.24,-.03],["l",-.09,-.12],["c",-.51,-.66,-1.62,-.63,-2.31,.03],["c",-.39,.42,-.3,.09,-1.23,4.77],["l",-.81,4.14],["c",-.03,0,-.12,-.03,-.21,-.09],["c",-.33,-.15,-.54,-.18,-.99,-.18],["c",-.42,0,-.66,.03,-1.05,.18],["c",-.12,.06,-.21,.09,-.21,.09],["c",0,-.03,.36,-1.86,.81,-4.11],["c",.9,-4.47,.87,-4.26,.69,-4.53],["c",-.21,-.36,-.66,-.51,-1.17,-.36],["c",-.15,.06,-2.22,1.14,-2.58,1.38],["c",-.12,.09,-.12,.09,-.21,.6],["l",-.09,.51],["l",.21,.24],["c",.63,.75,1.02,1.47,1.2,2.19],["c",.06,.27,.06,.36,.06,.81],["c",0,.42,0,.54,-.06,.78],["c",-.15,.54,-.33,.93,-.63,1.35],["c",-.18,.24,-.57,.63,-.81,.78],["c",-.24,.15,-.63,.36,-.84,.42],["c",-.27,.06,-.66,.06,-.87,.03],["c",-.81,-.18,-1.32,-1.05,-1.38,-2.46],["c",-.03,-.6,.03,-.99,.33,-2.46],["c",.21,-1.08,.24,-1.32,.21,-1.29],["c",-1.2,.48,-2.4,.75,-3.21,.72],["c",-.69,-.06,-1.17,-.3,-1.41,-.72],["c",-.39,-.75,-.12,-1.8,.66,-2.46],["c",.24,-.18,.69,-.42,1.02,-.51],["c",.69,-.18,1.53,-.15,2.31,.09],["c",.3,.09,.75,.3,.99,.45],["c",.12,.09,.15,.09,.15,.03],["c",.03,-.03,.33,-1.59,.72,-3.45],["c",.36,-1.86,.66,-3.42,.69,-3.45],["c",0,-.03,.03,-.03,.21,.03],["c",.21,.06,.27,.06,.48,.06],["c",.42,-.03,.78,-.18,1.26,-.48],["c",.15,-.12,.36,-.27,.48,-.39],["z"],["m",-5.73,7.68],["c",-.27,-.03,-.96,-.06,-1.2,-.03],["c",-.81,.12,-1.35,.57,-1.5,1.2],["c",-.18,.66,.12,1.14,.75,1.29],["c",.66,.12,1.92,-.12,3.18,-.66],["l",.33,-.15],["l",.09,-.39],["c",.06,-.21,.09,-.42,.09,-.45],["c",0,-.03,-.45,-.3,-.75,-.45],["c",-.27,-.15,-.66,-.27,-.99,-.36],["z"],["m",4.29,3.63],["c",-.24,-.39,-.51,-.75,-.51,-.69],["c",-.06,.12,-.39,1.92,-.45,2.28],["c",-.09,.54,-.12,1.14,-.06,1.38],["c",.06,.42,.21,.6,.51,.57],["c",.39,-.06,.75,-.48,.93,-1.14],["c",.09,-.33,.09,-1.05,0,-1.38],["c",-.09,-.39,-.24,-.69,-.42,-1.02],["z"]],w:17.963,h:16.49},"scripts.segno":{d:[["M",-3.72,-11.22],["c",.78,-.09,1.59,.03,2.31,.42],["c",1.2,.6,2.01,1.71,2.31,3.09],["c",.09,.42,.09,1.2,.03,1.5],["c",-.15,.45,-.39,.81,-.66,.93],["c",-.33,.18,-.84,.21,-1.23,.15],["c",-.81,-.18,-1.32,-.93,-1.26,-1.89],["c",.03,-.36,.09,-.57,.24,-.9],["c",.15,-.33,.45,-.6,.72,-.75],["c",.12,-.06,.18,-.09,.18,-.12],["c",0,-.03,-.03,-.15,-.09,-.24],["c",-.18,-.45,-.54,-.87,-.96,-1.08],["c",-1.11,-.57,-2.34,-.18,-2.88,.9],["c",-.24,.51,-.33,1.11,-.24,1.83],["c",.27,1.92,1.5,3.54,3.93,5.13],["c",.48,.33,1.26,.78,1.29,.78],["c",.03,0,1.35,-2.19,2.94,-4.89],["l",2.88,-4.89],["l",.84,0],["l",.87,0],["l",-.03,.06],["c",-.15,.21,-6.15,10.41,-6.15,10.44],["c",0,0,.21,.15,.48,.27],["c",2.61,1.47,4.35,3.03,5.13,4.65],["c",1.14,2.34,.51,5.07,-1.44,6.39],["c",-.66,.42,-1.32,.63,-2.13,.69],["c",-2.01,.09,-3.81,-1.41,-4.26,-3.54],["c",-.09,-.42,-.09,-1.2,-.03,-1.5],["c",.15,-.45,.39,-.81,.66,-.93],["c",.33,-.18,.84,-.21,1.23,-.15],["c",.81,.18,1.32,.93,1.26,1.89],["c",-.03,.36,-.09,.57,-.24,.9],["c",-.15,.33,-.45,.6,-.72,.75],["c",-.12,.06,-.18,.09,-.18,.12],["c",0,.03,.03,.15,.09,.24],["c",.18,.45,.54,.87,.96,1.08],["c",1.11,.57,2.34,.18,2.88,-.9],["c",.24,-.51,.33,-1.11,.24,-1.83],["c",-.27,-1.92,-1.5,-3.54,-3.93,-5.13],["c",-.48,-.33,-1.26,-.78,-1.29,-.78],["c",-.03,0,-1.35,2.19,-2.91,4.89],["l",-2.88,4.89],["l",-.87,0],["l",-.87,0],["l",.03,-.06],["c",.15,-.21,6.15,-10.41,6.15,-10.44],["c",0,0,-.21,-.15,-.48,-.3],["c",-2.61,-1.44,-4.35,-3,-5.13,-4.62],["c",-.9,-1.89,-.72,-4.02,.48,-5.52],["c",.69,-.84,1.68,-1.41,2.73,-1.53],["z"],["m",8.76,9.09],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"],["m",-10.53,2.61],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"]],w:15,h:22.504},"scripts.coda":{d:[["M",-.21,-10.47],["c",.18,-.12,.42,-.06,.54,.12],["c",.06,.09,.06,.18,.06,1.5],["l",0,1.38],["l",.18,0],["c",.39,.06,.96,.24,1.38,.48],["c",1.68,.93,2.82,3.24,3.03,6.12],["c",.03,.24,.03,.45,.03,.45],["c",0,.03,.6,.03,1.35,.03],["c",1.5,0,1.47,0,1.59,.18],["c",.09,.12,.09,.3,0,.42],["c",-.12,.18,-.09,.18,-1.59,.18],["c",-.75,0,-1.35,0,-1.35,.03],["c",0,0,0,.21,-.03,.42],["c",-.24,3.15,-1.53,5.58,-3.45,6.36],["c",-.27,.12,-.72,.24,-.96,.27],["l",-.18,0],["l",0,1.38],["c",0,1.32,0,1.41,-.06,1.5],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.18,-.06,-1.5],["l",0,-1.38],["l",-.18,0],["c",-.39,-.06,-.96,-.24,-1.38,-.48],["c",-1.68,-.93,-2.82,-3.24,-3.03,-6.15],["c",-.03,-.21,-.03,-.42,-.03,-.42],["c",0,-.03,-.6,-.03,-1.35,-.03],["c",-1.5,0,-1.47,0,-1.59,-.18],["c",-.09,-.12,-.09,-.3,0,-.42],["c",.12,-.18,.09,-.18,1.59,-.18],["c",.75,0,1.35,0,1.35,-.03],["c",0,0,0,-.21,.03,-.45],["c",.24,-3.12,1.53,-5.55,3.45,-6.33],["c",.27,-.12,.72,-.24,.96,-.27],["l",.18,0],["l",0,-1.38],["c",0,-1.53,0,-1.5,.18,-1.62],["z"],["m",-.18,6.93],["c",0,-2.97,0,-3.15,-.06,-3.15],["c",-.09,0,-.51,.15,-.66,.21],["c",-.87,.51,-1.38,1.62,-1.56,3.51],["c",-.06,.54,-.12,1.59,-.12,2.16],["l",0,.42],["l",1.2,0],["l",1.2,0],["l",0,-3.15],["z"],["m",1.17,-3.06],["c",-.09,-.03,-.21,-.06,-.27,-.09],["l",-.12,0],["l",0,3.15],["l",0,3.15],["l",1.2,0],["l",1.2,0],["l",0,-.81],["c",-.06,-2.4,-.33,-3.69,-.93,-4.59],["c",-.27,-.39,-.66,-.69,-1.08,-.81],["z"],["m",-1.17,10.14],["l",0,-3.15],["l",-1.2,0],["l",-1.2,0],["l",0,.81],["c",.03,.96,.06,1.47,.15,2.13],["c",.24,2.04,.96,3.12,2.13,3.36],["l",.12,0],["l",0,-3.15],["z"],["m",3.18,-2.34],["l",0,-.81],["l",-1.2,0],["l",-1.2,0],["l",0,3.15],["l",0,3.15],["l",.12,0],["c",1.17,-.24,1.89,-1.32,2.13,-3.36],["c",.09,-.66,.12,-1.17,.15,-2.13],["z"]],w:16.035,h:21.062},"scripts.comma":{d:[["M",1.14,-4.62],["c",.3,-.12,.69,-.03,.93,.15],["c",.12,.12,.36,.45,.51,.78],["c",.9,1.77,.54,4.05,-1.08,6.75],["c",-.36,.63,-.87,1.38,-.96,1.44],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.09,-.18,-.09,-.3,.12,-.6],["c",.96,-1.44,1.44,-2.97,1.38,-4.35],["c",-.06,-.93,-.3,-1.68,-.78,-2.46],["c",-.27,-.39,-.33,-.63,-.24,-.96],["c",.09,-.27,.36,-.54,.66,-.63],["z"]],w:3.042,h:9.237},"scripts.roll":{d:[["M",1.95,-6],["c",.21,-.09,.36,-.09,.57,0],["c",.39,.15,.63,.39,1.47,1.35],["c",.66,.75,.78,.87,1.08,1.05],["c",.75,.45,1.65,.42,2.4,-.06],["c",.12,-.09,.27,-.27,.54,-.6],["c",.42,-.54,.51,-.63,.69,-.63],["c",.09,0,.3,.12,.36,.21],["c",.09,.12,.12,.3,.03,.42],["c",-.06,.12,-3.15,3.9,-3.3,4.08],["c",-.06,.06,-.18,.12,-.27,.18],["c",-.27,.12,-.6,.06,-.99,-.27],["c",-.27,-.21,-.42,-.39,-1.08,-1.14],["c",-.63,-.72,-.81,-.9,-1.17,-1.08],["c",-.36,-.18,-.57,-.21,-.99,-.21],["c",-.39,0,-.63,.03,-.93,.18],["c",-.36,.15,-.51,.27,-.9,.81],["c",-.24,.27,-.45,.51,-.48,.54],["c",-.12,.09,-.27,.06,-.39,0],["c",-.24,-.15,-.33,-.39,-.21,-.6],["c",.09,-.12,3.18,-3.87,3.33,-4.02],["c",.06,-.06,.18,-.15,.24,-.21],["z"]],w:10.817,h:6.125},"scripts.prall":{d:[["M",-4.38,-3.69],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.57,-.84,1.23,-1.83],["c",1.14,-1.68,1.23,-1.83,1.35,-1.89],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["c",-.03,0,-.57,.84,-1.23,1.83],["c",-1.14,1.68,-1.23,1.83,-1.35,1.89],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["z"]],w:15.011,h:7.5},"scripts.arpeggio":{d:[["M",1.5,0],["c",1.5,2,1.5,3,1.5,3],["s",0,1,-2,1.5],["s",-.5,3,1,5.5],["l",1.5,0],["s",-1.75,-2,-1.9,-3.25],["s",2.15,-.6,2.95,-1.6],["s",.45,-1,.5,-1.25],["s",0,-1,-2,-3.9],["l",-1.5,0],["z"]],w:5,h:10},"scripts.mordent":{d:[["M",-.21,-4.95],["c",.27,-.15,.63,0,.75,.27],["c",.06,.12,.06,.24,.06,1.44],["l",0,1.29],["l",.57,-.84],["c",.51,-.75,.57,-.84,.69,-.9],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.83,-1.89],["c",-.81,-.99,-1.5,-1.8,-1.53,-1.86],["c",-.06,-.03,-.06,-.03,-.12,.03],["c",-.06,.06,-.06,.15,-.06,2.28],["c",0,1.95,0,2.25,-.06,2.34],["c",-.18,.45,-.81,.48,-1.05,.03],["c",-.03,-.06,-.06,-.24,-.06,-1.41],["l",0,-1.35],["l",-.57,.84],["c",-.54,.78,-.6,.87,-.72,.93],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.06,-.06,.09,-.09],["c",.06,-.12,.06,-.15,.06,-2.28],["c",0,-1.92,0,-2.22,.06,-2.31],["c",.06,-.15,.15,-.24,.3,-.3],["z"]],w:15.011,h:10.012},"flags.u8th":{d:[["M",-.42,3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",0,.18],["c",0,.3,.06,.84,.12,1.23],["c",.24,1.53,.9,3.12,2.13,5.16],["l",.99,1.59],["c",.87,1.44,1.38,2.34,1.77,3.09],["c",.81,1.68,1.2,3.06,1.26,4.53],["c",.03,1.53,-.21,3.27,-.75,5.01],["c",-.21,.69,-.51,1.5,-.6,1.59],["c",-.09,.12,-.27,.21,-.42,.21],["c",-.15,0,-.42,-.12,-.51,-.21],["c",-.15,-.18,-.18,-.42,-.09,-.66],["c",.15,-.33,.45,-1.2,.57,-1.62],["c",.42,-1.38,.6,-2.58,.6,-3.9],["c",0,-.66,0,-.81,-.06,-1.11],["c",-.39,-2.07,-1.8,-4.26,-4.59,-7.14],["l",-.42,-.45],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["z"]],w:6.692,h:22.59},"flags.u16th":{d:[["M",-.42,7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,.39],["c",.06,1.08,.39,2.19,.99,3.39],["c",.45,.9,.87,1.59,1.95,3.12],["c",1.29,1.86,1.77,2.64,2.22,3.57],["c",.45,.93,.72,1.8,.87,2.64],["c",.06,.51,.06,1.5,0,1.92],["c",-.12,.6,-.3,1.2,-.54,1.71],["l",-.09,.24],["l",.18,.45],["c",.51,1.2,.72,2.22,.69,3.42],["c",-.06,1.53,-.39,3.03,-.99,4.53],["c",-.3,.75,-.36,.81,-.57,.9],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.12,-.75],["c",.66,-1.41,1.02,-2.88,1.08,-4.32],["c",0,-.6,-.03,-1.05,-.18,-1.59],["c",-.3,-1.2,-.99,-2.4,-2.25,-3.87],["c",-.42,-.48,-1.53,-1.62,-2.19,-2.22],["l",-.45,-.42],["l",-.03,1.11],["l",0,1.11],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["z"],["m",1.65,.09],["c",-.3,-.3,-.69,-.72,-.9,-.87],["l",-.33,-.33],["l",0,.15],["c",0,.3,.06,.81,.15,1.26],["c",.27,1.29,.87,2.61,2.04,4.29],["c",.15,.24,.6,.87,.96,1.38],["l",1.08,1.53],["l",.42,.63],["c",.03,0,.12,-.36,.21,-.72],["c",.06,-.33,.06,-1.2,0,-1.62],["c",-.33,-1.71,-1.44,-3.48,-3.63,-5.7],["z"]],w:6.693,h:26.337},"flags.u32nd":{d:[["M",-.42,11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,.36],["c",.09,1.68,.69,3.27,2.07,5.46],["l",.87,1.35],["c",1.02,1.62,1.47,2.37,1.86,3.18],["c",.48,1.02,.78,1.92,.93,2.88],["c",.06,.48,.06,1.5,0,1.89],["c",-.09,.42,-.21,.87,-.36,1.26],["l",-.12,.3],["l",.15,.39],["c",.69,1.56,.84,2.88,.54,4.38],["c",-.09,.45,-.27,1.08,-.45,1.47],["l",-.12,.24],["l",.18,.36],["c",.33,.72,.57,1.56,.69,2.34],["c",.12,1.02,-.06,2.52,-.42,3.84],["c",-.27,.93,-.75,2.13,-.93,2.31],["c",-.18,.15,-.45,.18,-.66,.09],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.06,-.6],["c",.21,-.36,.42,-.9,.57,-1.38],["c",.51,-1.41,.69,-3.06,.48,-4.08],["c",-.15,-.81,-.57,-1.68,-1.2,-2.55],["c",-.72,-.99,-1.83,-2.13,-3.3,-3.33],["l",-.48,-.42],["l",-.03,1.53],["l",0,1.56],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["z"],["m",1.26,-3.96],["c",-.27,-.3,-.54,-.6,-.66,-.72],["l",-.18,-.21],["l",0,.42],["c",.06,.87,.24,1.74,.66,2.67],["c",.36,.87,.96,1.86,1.92,3.18],["c",.21,.33,.63,.87,.87,1.23],["c",.27,.39,.6,.84,.75,1.08],["l",.27,.39],["l",.03,-.12],["c",.12,-.45,.15,-1.05,.09,-1.59],["c",-.27,-1.86,-1.38,-3.78,-3.75,-6.33],["z"],["m",-.27,6.09],["c",-.27,-.21,-.48,-.42,-.51,-.45],["c",-.06,-.03,-.06,-.03,-.06,.21],["c",0,.9,.3,2.04,.81,3.09],["c",.48,1.02,.96,1.77,2.37,3.63],["c",.6,.78,1.05,1.44,1.29,1.77],["c",.06,.12,.15,.21,.15,.18],["c",.03,-.03,.18,-.57,.24,-.87],["c",.06,-.45,.06,-1.32,-.03,-1.74],["c",-.09,-.48,-.24,-.9,-.51,-1.44],["c",-.66,-1.35,-1.83,-2.7,-3.75,-4.38],["z"]],w:6.697,h:32.145},"flags.u64th":{d:[["M",-.42,15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,.36],["c",.06,1.2,.39,2.37,1.02,3.66],["c",.39,.81,.84,1.56,1.8,3.09],["c",.81,1.26,1.05,1.68,1.35,2.22],["c",.87,1.5,1.35,2.79,1.56,4.08],["c",.06,.54,.06,1.56,-.03,2.04],["c",-.09,.48,-.21,.99,-.36,1.35],["l",-.12,.27],["l",.12,.27],["c",.09,.15,.21,.45,.27,.66],["c",.69,1.89,.63,3.66,-.18,5.46],["l",-.18,.39],["l",.15,.33],["c",.3,.66,.51,1.44,.63,2.1],["c",.06,.48,.06,1.35,0,1.71],["c",-.15,.57,-.42,1.2,-.78,1.68],["l",-.21,.27],["l",.18,.33],["c",.57,1.05,.93,2.13,1.02,3.18],["c",.06,.72,0,1.83,-.21,2.79],["c",-.18,1.02,-.63,2.34,-1.02,3.09],["c",-.15,.33,-.48,.45,-.78,.3],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.03,-.54],["c",.75,-1.5,1.23,-3.45,1.17,-4.89],["c",-.06,-1.02,-.42,-2.01,-1.17,-3.15],["c",-.48,-.72,-1.02,-1.35,-1.89,-2.22],["c",-.57,-.57,-1.56,-1.5,-1.92,-1.77],["l",-.12,-.09],["l",0,1.68],["l",0,1.68],["l",-.21,0],["l",-.21,0],["l",0,-15],["z"],["m",.93,-8.07],["c",-.27,-.3,-.48,-.54,-.51,-.54],["c",0,0,0,.69,.03,1.02],["c",.15,1.47,.75,2.94,2.04,4.83],["l",1.08,1.53],["c",.39,.57,.84,1.2,.99,1.44],["c",.15,.24,.3,.45,.3,.45],["c",0,0,.03,-.09,.06,-.21],["c",.36,-1.59,-.15,-3.33,-1.47,-5.4],["c",-.63,-.93,-1.35,-1.83,-2.52,-3.12],["z"],["m",.06,6.72],["c",-.24,-.21,-.48,-.42,-.51,-.45],["l",-.06,-.06],["l",0,.33],["c",0,1.2,.3,2.34,.93,3.6],["c",.45,.9,.96,1.68,2.25,3.51],["c",.39,.54,.84,1.17,1.02,1.44],["c",.21,.33,.33,.51,.33,.48],["c",.06,-.09,.21,-.63,.3,-.99],["c",.06,-.33,.06,-.45,.06,-.96],["c",0,-.6,-.03,-.84,-.18,-1.35],["c",-.3,-1.08,-1.02,-2.28,-2.13,-3.57],["c",-.39,-.45,-1.44,-1.47,-2.01,-1.98],["z"],["m",0,6.72],["c",-.24,-.21,-.48,-.39,-.51,-.42],["l",-.06,-.06],["l",0,.33],["c",0,1.41,.45,2.82,1.38,4.35],["c",.42,.72,.72,1.14,1.86,2.73],["c",.36,.45,.75,.99,.87,1.2],["c",.15,.21,.3,.36,.3,.36],["c",.06,0,.3,-.48,.39,-.75],["c",.09,-.36,.12,-.63,.12,-1.05],["c",-.06,-1.05,-.45,-2.04,-1.2,-3.18],["c",-.57,-.87,-1.11,-1.53,-2.07,-2.49],["c",-.36,-.33,-.84,-.78,-1.08,-1.02],["z"]],w:6.682,h:39.694},"flags.d8th":{d:[["M",5.67,-21.63],["c",.24,-.12,.54,-.06,.69,.15],["c",.06,.06,.21,.36,.39,.66],["c",.84,1.77,1.26,3.36,1.32,5.1],["c",.03,1.29,-.21,2.37,-.81,3.63],["c",-.6,1.23,-1.26,2.13,-3.21,4.38],["c",-1.35,1.53,-1.86,2.19,-2.4,2.97],["c",-.63,.93,-1.11,1.92,-1.38,2.79],["c",-.15,.54,-.27,1.35,-.27,1.8],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",.48,-.3],["c",1.83,-1.11,3.12,-2.1,4.17,-3.12],["c",.78,-.81,1.32,-1.53,1.71,-2.31],["c",.45,-.93,.6,-1.74,.51,-2.88],["c",-.12,-1.56,-.63,-3.18,-1.47,-4.68],["c",-.12,-.21,-.15,-.33,-.06,-.51],["c",.06,-.15,.15,-.24,.33,-.33],["z"]],w:8.492,h:21.691},"flags.ugrace":{d:[["M",6.03,6.93],["c",.15,-.09,.33,-.06,.51,0],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.06,.39,-.03,.54],["c",-.06,.15,-10.89,8.88,-11.07,8.97],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.06,-.39,.03,-.54],["c",.06,-.15,10.89,-8.88,11.07,-8.97],["z"]],w:12.019,h:9.954},"flags.dgrace":{d:[["M",-6.06,-15.93],["c",.18,-.09,.33,-.12,.48,-.06],["c",.18,.09,14.01,8.04,14.1,8.1],["c",.12,.12,.18,.33,.18,.51],["c",-.03,.21,-.15,.39,-.36,.48],["c",-.18,.09,-.33,.12,-.48,.06],["c",-.18,-.09,-14.01,-8.04,-14.1,-8.1],["c",-.12,-.12,-.18,-.33,-.18,-.51],["c",.03,-.21,.15,-.39,.36,-.48],["z"]],w:15.12,h:9.212},"flags.d16th":{d:[["M",6.84,-22.53],["c",.27,-.12,.57,-.06,.72,.15],["c",.15,.15,.33,.87,.45,1.56],["c",.06,.33,.06,1.35,0,1.65],["c",-.06,.33,-.15,.78,-.27,1.11],["c",-.12,.33,-.45,.96,-.66,1.32],["l",-.18,.27],["l",.09,.18],["c",.48,1.02,.72,2.25,.69,3.3],["c",-.06,1.23,-.42,2.28,-1.26,3.45],["c",-.57,.87,-.99,1.32,-3,3.39],["c",-1.56,1.56,-2.22,2.4,-2.76,3.45],["c",-.42,.84,-.66,1.8,-.66,2.55],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,1.14],["l",0,1.11],["l",.27,-.15],["c",1.11,-.57,1.77,-.99,2.52,-1.47],["c",2.37,-1.56,3.69,-3.15,4.05,-4.83],["c",.03,-.18,.03,-.39,.03,-.78],["c",0,-.6,-.03,-.93,-.24,-1.5],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.5],["c",-.06,-.18,-.15,-.36,-.15,-.36],["c",-.03,0,-.03,.03,-.06,.06],["c",-.06,.12,-.96,1.02,-1.95,1.98],["c",-.63,.57,-1.26,1.17,-1.44,1.35],["c",-1.53,1.62,-2.28,2.85,-2.55,4.32],["c",-.03,.18,-.03,.54,-.06,.99],["l",0,.69],["l",.18,-.09],["c",.93,-.54,2.1,-1.29,2.82,-1.83],["c",.69,-.51,1.02,-.81,1.53,-1.29],["c",1.86,-1.89,2.37,-3.66,1.68,-5.82],["z"]],w:8.475,h:22.591},"flags.d32nd":{d:[["M",6.84,-29.13],["c",.27,-.12,.57,-.06,.72,.15],["c",.12,.12,.27,.63,.36,1.11],["c",.33,1.59,.06,3.06,-.81,4.47],["l",-.18,.27],["l",.09,.15],["c",.12,.24,.33,.69,.45,1.05],["c",.63,1.83,.45,3.57,-.57,5.22],["l",-.18,.3],["l",.15,.27],["c",.42,.87,.6,1.71,.57,2.61],["c",-.06,1.29,-.48,2.46,-1.35,3.78],["c",-.54,.81,-.93,1.29,-2.46,3],["c",-.51,.54,-1.05,1.17,-1.26,1.41],["c",-1.56,1.86,-2.25,3.36,-2.37,5.01],["l",0,.33],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,1.35],["l",.03,1.35],["l",.78,-.39],["c",1.38,-.69,2.34,-1.26,3.24,-1.92],["c",1.38,-1.02,2.28,-2.13,2.64,-3.21],["c",.15,-.48,.18,-.72,.18,-1.29],["c",0,-.57,-.06,-.9,-.24,-1.47],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.2],["c",-.09,-.18,-.12,-.21,-.12,-.15],["c",-.03,.09,-1.02,1.08,-2.04,2.04],["c",-1.17,1.08,-1.65,1.56,-2.07,2.04],["c",-.84,.96,-1.38,1.86,-1.68,2.76],["c",-.21,.57,-.27,.99,-.3,1.65],["l",0,.54],["l",.66,-.33],["c",3.57,-1.86,5.49,-3.69,5.94,-5.7],["c",.06,-.39,.06,-1.2,-.03,-1.65],["c",-.06,-.39,-.24,-.9,-.36,-1.2],["z"],["m",-.06,7.2],["c",-.06,-.15,-.12,-.33,-.15,-.45],["l",-.06,-.18],["l",-.18,.21],["l",-1.83,1.83],["c",-.87,.9,-1.77,1.8,-1.95,2.01],["c",-1.08,1.29,-1.62,2.31,-1.89,3.51],["c",-.06,.3,-.06,.51,-.09,.93],["l",0,.57],["l",.09,-.06],["c",.75,-.45,1.89,-1.26,2.52,-1.74],["c",.81,-.66,1.74,-1.53,2.22,-2.16],["c",1.26,-1.53,1.68,-3.06,1.32,-4.47],["z"]],w:8.385,h:29.191},"flags.d64th":{d:[["M",7.08,-32.88],["c",.3,-.12,.66,-.03,.78,.24],["c",.18,.33,.27,2.1,.15,2.64],["c",-.09,.39,-.21,.78,-.39,1.08],["l",-.15,.3],["l",.09,.27],["c",.03,.12,.09,.45,.12,.69],["c",.27,1.44,.18,2.55,-.3,3.6],["l",-.12,.33],["l",.06,.42],["c",.27,1.35,.33,2.82,.21,3.63],["c",-.12,.6,-.3,1.23,-.57,1.8],["l",-.15,.27],["l",.03,.42],["c",.06,1.02,.06,2.7,.03,3.06],["c",-.15,1.47,-.66,2.76,-1.74,4.41],["c",-.45,.69,-.75,1.11,-1.74,2.37],["c",-1.05,1.38,-1.5,1.98,-1.95,2.73],["c",-.93,1.5,-1.38,2.82,-1.44,4.2],["l",0,.42],["l",-.21,0],["l",-.21,0],["l",0,-15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,1.86],["l",0,1.89],["c",0,0,.21,-.03,.45,-.09],["c",2.22,-.39,4.08,-1.11,5.19,-2.01],["c",.63,-.54,1.02,-1.14,1.2,-1.8],["c",.06,-.3,.06,-1.14,-.03,-1.65],["c",-.03,-.18,-.06,-.39,-.09,-.48],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.45,6.15],["c",-.03,-.18,-.06,-.42,-.06,-.54],["l",-.03,-.18],["l",-.33,.3],["c",-.42,.36,-.87,.72,-1.68,1.29],["c",-1.98,1.38,-2.25,1.59,-2.85,2.16],["c",-.75,.69,-1.23,1.44,-1.47,2.19],["c",-.15,.45,-.18,.63,-.21,1.35],["l",0,.66],["l",.39,-.18],["c",1.83,-.9,3.45,-1.95,4.47,-2.91],["c",.93,-.9,1.53,-1.83,1.74,-2.82],["c",.06,-.33,.06,-.87,.03,-1.32],["z"],["m",-.27,4.86],["c",-.03,-.21,-.06,-.36,-.06,-.36],["c",0,-.03,-.12,.09,-.24,.24],["c",-.39,.48,-.99,1.08,-2.16,2.19],["c",-1.47,1.38,-1.92,1.83,-2.46,2.49],["c",-.66,.87,-1.08,1.74,-1.29,2.58],["c",-.09,.42,-.15,.87,-.15,1.44],["l",0,.54],["l",.48,-.33],["c",1.5,-1.02,2.58,-1.89,3.51,-2.82],["c",1.47,-1.47,2.25,-2.85,2.4,-4.26],["c",.03,-.39,.03,-1.17,-.03,-1.71],["z"],["m",-.66,7.68],["c",.03,-.15,.03,-.6,.03,-.99],["l",0,-.72],["l",-.27,.33],["l",-1.74,1.98],["c",-1.77,1.92,-2.43,2.76,-2.97,3.9],["c",-.51,1.02,-.72,1.77,-.75,2.91],["c",0,.63,0,.63,.06,.6],["c",.03,-.03,.3,-.27,.63,-.54],["c",.66,-.6,1.86,-1.8,2.31,-2.31],["c",1.65,-1.89,2.52,-3.54,2.7,-5.16],["z"]],w:8.485,h:32.932},"clefs.C":{d:[["M",.06,-14.94],["l",.09,-.06],["l",1.92,0],["l",1.92,0],["l",.09,.06],["l",.06,.09],["l",0,14.85],["l",0,14.82],["l",-.06,.09],["l",-.09,.06],["l",-1.92,0],["l",-1.92,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"],["m",5.37,0],["c",.09,-.06,.09,-.06,.57,-.06],["c",.45,0,.45,0,.54,.06],["l",.06,.09],["l",0,7.14],["l",0,7.11],["l",.09,-.06],["c",.18,-.18,.72,-.84,.96,-1.2],["c",.3,-.45,.66,-1.17,.84,-1.65],["c",.36,-.9,.57,-1.83,.6,-2.79],["c",.03,-.48,.03,-.54,.09,-.63],["c",.12,-.18,.36,-.21,.54,-.12],["c",.18,.09,.21,.15,.24,.66],["c",.06,.87,.21,1.56,.57,2.22],["c",.51,1.02,1.26,1.68,2.22,1.92],["c",.21,.06,.33,.06,.78,.06],["c",.45,0,.57,0,.84,-.06],["c",.45,-.12,.81,-.33,1.08,-.6],["c",.57,-.57,.87,-1.41,.99,-2.88],["c",.06,-.54,.06,-3,0,-3.57],["c",-.21,-2.58,-.84,-3.87,-2.16,-4.5],["c",-.48,-.21,-1.17,-.36,-1.77,-.36],["c",-.69,0,-1.29,.27,-1.5,.72],["c",-.06,.15,-.06,.21,-.06,.42],["c",0,.24,0,.3,.06,.45],["c",.12,.24,.24,.39,.63,.66],["c",.42,.3,.57,.48,.69,.72],["c",.06,.15,.06,.21,.06,.48],["c",0,.39,-.03,.63,-.21,.96],["c",-.3,.6,-.87,1.08,-1.5,1.26],["c",-.27,.06,-.87,.06,-1.14,0],["c",-.78,-.24,-1.44,-.87,-1.65,-1.68],["c",-.12,-.42,-.09,-1.17,.09,-1.71],["c",.51,-1.65,1.98,-2.82,3.81,-3.09],["c",.84,-.09,2.46,.03,3.51,.27],["c",2.22,.57,3.69,1.8,4.44,3.75],["c",.36,.93,.57,2.13,.57,3.36],["c",0,1.44,-.48,2.73,-1.38,3.81],["c",-1.26,1.5,-3.27,2.43,-5.28,2.43],["c",-.48,0,-.51,0,-.75,-.09],["c",-.15,-.03,-.48,-.21,-.78,-.36],["c",-.69,-.36,-.87,-.42,-1.26,-.42],["c",-.27,0,-.3,0,-.51,.09],["c",-.57,.3,-.81,.9,-.81,2.1],["c",0,1.23,.24,1.83,.81,2.13],["c",.21,.09,.24,.09,.51,.09],["c",.39,0,.57,-.06,1.26,-.42],["c",.3,-.15,.63,-.33,.78,-.36],["c",.24,-.09,.27,-.09,.75,-.09],["c",2.01,0,4.02,.93,5.28,2.4],["c",.9,1.11,1.38,2.4,1.38,3.84],["c",0,1.5,-.3,2.88,-.84,3.96],["c",-.78,1.59,-2.19,2.64,-4.17,3.15],["c",-1.05,.24,-2.67,.36,-3.51,.27],["c",-1.83,-.27,-3.3,-1.44,-3.81,-3.09],["c",-.18,-.54,-.21,-1.29,-.09,-1.74],["c",.15,-.6,.63,-1.2,1.23,-1.47],["c",.36,-.18,.57,-.21,.99,-.21],["c",.42,0,.63,.03,1.02,.21],["c",.42,.21,.84,.63,1.05,1.05],["c",.18,.36,.21,.6,.21,.96],["c",0,.3,0,.36,-.06,.51],["c",-.12,.24,-.27,.42,-.69,.72],["c",-.57,.42,-.69,.63,-.69,1.08],["c",0,.24,0,.3,.06,.45],["c",.12,.21,.3,.39,.57,.54],["c",.42,.18,.87,.21,1.53,.15],["c",1.08,-.15,1.8,-.57,2.34,-1.32],["c",.54,-.75,.84,-1.83,.99,-3.51],["c",.06,-.57,.06,-3.03,0,-3.57],["c",-.12,-1.47,-.42,-2.31,-.99,-2.88],["c",-.27,-.27,-.63,-.48,-1.08,-.6],["c",-.27,-.06,-.39,-.06,-.84,-.06],["c",-.45,0,-.57,0,-.78,.06],["c",-1.14,.27,-2.01,1.17,-2.46,2.49],["c",-.21,.57,-.3,.99,-.33,1.65],["c",-.03,.51,-.06,.57,-.24,.66],["c",-.12,.06,-.27,.06,-.39,0],["c",-.21,-.09,-.21,-.15,-.24,-.75],["c",-.09,-1.92,-.78,-3.72,-2.01,-5.19],["c",-.18,-.21,-.36,-.42,-.39,-.45],["l",-.09,-.06],["l",0,7.11],["l",0,7.14],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.54,.06],["c",-.48,0,-.48,0,-.57,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"]],w:20.31,h:29.97},"clefs.F":{d:[["M",6.3,-7.8],["c",.36,-.03,1.65,0,2.13,.03],["c",3.6,.42,6.03,2.1,6.93,4.86],["c",.27,.84,.36,1.5,.36,2.58],["c",0,.9,-.03,1.35,-.18,2.16],["c",-.78,3.78,-3.54,7.08,-8.37,9.96],["c",-1.74,1.05,-3.87,2.13,-6.18,3.12],["c",-.39,.18,-.75,.33,-.81,.36],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.15,.06,-.21,.51,-.48],["c",3,-1.77,5.13,-3.21,6.84,-4.74],["c",.51,-.45,1.59,-1.5,1.95,-1.95],["c",1.89,-2.19,2.88,-4.32,3.15,-6.78],["c",.06,-.42,.06,-1.77,0,-2.19],["c",-.24,-2.01,-.93,-3.63,-2.04,-4.71],["c",-.63,-.63,-1.29,-1.02,-2.07,-1.2],["c",-1.62,-.39,-3.36,.15,-4.56,1.44],["c",-.54,.6,-1.05,1.47,-1.32,2.22],["l",-.09,.21],["l",.24,-.12],["c",.39,-.21,.63,-.24,1.11,-.24],["c",.3,0,.45,0,.66,.06],["c",1.92,.48,2.85,2.55,1.95,4.38],["c",-.45,.99,-1.41,1.62,-2.46,1.71],["c",-1.47,.09,-2.91,-.87,-3.39,-2.25],["c",-.18,-.57,-.21,-1.32,-.03,-2.28],["c",.39,-2.25,1.83,-4.2,3.81,-5.19],["c",.69,-.36,1.59,-.6,2.37,-.69],["z"],["m",11.58,2.52],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.3,1.17,-.72,2.19,-1.89,1.89],["c",-.99,-.21,-1.5,-1.32,-1.02,-2.25],["c",.18,-.39,.6,-.69,1.02,-.78],["z"],["m",0,7.5],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.21,.87,-.3,1.71,-1.14,1.89],["c",-.87,.21,-1.71,-.3,-1.89,-1.14],["c",-.21,-.84,.3,-1.71,1.14,-1.89],["z"]],w:20.153,h:23.142},"clefs.G":{d:[["M",9.69,-37.41],["c",.09,-.09,.24,-.06,.36,0],["c",.12,.09,.57,.6,.96,1.11],["c",1.77,2.34,3.21,5.85,3.57,8.73],["c",.21,1.56,.03,3.27,-.45,4.86],["c",-.69,2.31,-1.92,4.47,-4.23,7.44],["c",-.3,.39,-.57,.72,-.6,.75],["c",-.03,.06,0,.15,.18,.78],["c",.54,1.68,1.38,4.44,1.68,5.49],["l",.09,.42],["l",.39,0],["c",1.47,.09,2.76,.51,3.96,1.29],["c",1.83,1.23,3.06,3.21,3.39,5.52],["c",.09,.45,.12,1.29,.06,1.74],["c",-.09,1.02,-.33,1.83,-.75,2.73],["c",-.84,1.71,-2.28,3.06,-4.02,3.72],["l",-.33,.12],["l",.03,1.26],["c",0,1.74,-.06,3.63,-.21,4.62],["c",-.45,3.06,-2.19,5.49,-4.47,6.21],["c",-.57,.18,-.9,.21,-1.59,.21],["c",-.69,0,-1.02,-.03,-1.65,-.21],["c",-1.14,-.27,-2.13,-.84,-2.94,-1.65],["c",-.99,-.99,-1.56,-2.16,-1.71,-3.54],["c",-.09,-.81,.06,-1.53,.45,-2.13],["c",.63,-.99,1.83,-1.56,3,-1.53],["c",1.5,.09,2.64,1.32,2.73,2.94],["c",.06,1.47,-.93,2.7,-2.37,2.97],["c",-.45,.06,-.84,.03,-1.29,-.09],["l",-.21,-.09],["l",.09,.12],["c",.39,.54,.78,.93,1.32,1.26],["c",1.35,.87,3.06,1.02,4.35,.36],["c",1.44,-.72,2.52,-2.28,2.97,-4.35],["c",.15,-.66,.24,-1.5,.3,-3.03],["c",.03,-.84,.03,-2.94,0,-3],["c",-.03,0,-.18,0,-.36,.03],["c",-.66,.12,-.99,.12,-1.83,.12],["c",-1.05,0,-1.71,-.06,-2.61,-.3],["c",-4.02,-.99,-7.11,-4.35,-7.8,-8.46],["c",-.12,-.66,-.12,-.99,-.12,-1.83],["c",0,-.84,0,-1.14,.15,-1.92],["c",.36,-2.28,1.41,-4.62,3.3,-7.29],["l",2.79,-3.6],["c",.54,-.66,.96,-1.2,.96,-1.23],["c",0,-.03,-.09,-.33,-.18,-.69],["c",-.96,-3.21,-1.41,-5.28,-1.59,-7.68],["c",-.12,-1.38,-.15,-3.09,-.06,-3.96],["c",.33,-2.67,1.38,-5.07,3.12,-7.08],["c",.36,-.42,.99,-1.05,1.17,-1.14],["z"],["m",2.01,4.71],["c",-.15,-.3,-.3,-.54,-.3,-.54],["c",-.03,0,-.18,.09,-.3,.21],["c",-2.4,1.74,-3.87,4.2,-4.26,7.11],["c",-.06,.54,-.06,1.41,-.03,1.89],["c",.09,1.29,.48,3.12,1.08,5.22],["c",.15,.42,.24,.78,.24,.81],["c",0,.03,.84,-1.11,1.23,-1.68],["c",1.89,-2.73,2.88,-5.07,3.15,-7.53],["c",.09,-.57,.12,-1.74,.06,-2.37],["c",-.09,-1.23,-.27,-1.92,-.87,-3.12],["z"],["m",-2.94,20.7],["c",-.21,-.72,-.39,-1.32,-.42,-1.32],["c",0,0,-1.2,1.47,-1.86,2.37],["c",-2.79,3.63,-4.02,6.3,-4.35,9.3],["c",-.03,.21,-.03,.69,-.03,1.08],["c",0,.69,0,.75,.06,1.11],["c",.12,.54,.27,.99,.51,1.47],["c",.69,1.38,1.83,2.55,3.42,3.42],["c",.96,.54,2.07,.9,3.21,1.08],["c",.78,.12,2.04,.12,2.94,-.03],["c",.51,-.06,.45,-.03,.42,-.3],["c",-.24,-3.33,-.72,-6.33,-1.62,-10.08],["c",-.09,-.39,-.18,-.75,-.18,-.78],["c",-.03,-.03,-.42,0,-.81,.09],["c",-.9,.18,-1.65,.57,-2.22,1.14],["c",-.72,.72,-1.08,1.65,-1.05,2.64],["c",.06,.96,.48,1.83,1.23,2.58],["c",.36,.36,.72,.63,1.17,.9],["c",.33,.18,.36,.21,.42,.33],["c",.18,.42,-.18,.9,-.6,.87],["c",-.18,-.03,-.84,-.36,-1.26,-.63],["c",-.78,-.51,-1.38,-1.11,-1.86,-1.83],["c",-1.77,-2.7,-.99,-6.42,1.71,-8.19],["c",.3,-.21,.81,-.48,1.17,-.63],["c",.3,-.09,1.02,-.3,1.14,-.3],["c",.06,0,.09,0,.09,-.03],["c",.03,-.03,-.51,-1.92,-1.23,-4.26],["z"],["m",3.78,7.41],["c",-.18,-.03,-.36,-.06,-.39,-.06],["c",-.03,0,0,.21,.18,1.02],["c",.75,3.18,1.26,6.3,1.5,9.09],["c",.06,.72,0,.69,.51,.42],["c",.78,-.36,1.44,-.96,1.98,-1.77],["c",1.08,-1.62,1.2,-3.69,.3,-5.55],["c",-.81,-1.62,-2.31,-2.79,-4.08,-3.15],["z"]],w:19.051,h:57.057},"clefs.perc":{d:[["M",5.07,-7.44],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"],["m",6.63,0],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"]],w:21,h:14.97},"tab.big":{d:[["M",20.16,-21.66],["c",.24,-.09,.66,.09,.78,.36],["c",.09,.21,.09,.24,-.18,.54],["c",-.78,.81,-1.86,1.44,-2.94,1.71],["c",-.87,.24,-1.71,.24,-2.55,.03],["l",-.06,-.03],["l",-.18,.99],["c",-.33,1.98,-.75,4.26,-.96,5.04],["c",-.42,1.65,-1.26,3.18,-2.28,4.14],["c",-.57,.57,-1.17,.9,-1.86,1.08],["c",-.18,.06,-.33,.06,-.66,.06],["c",-.54,0,-.78,-.03,-1.23,-.27],["c",-.39,-.18,-.66,-.39,-1.38,-.99],["c",-.3,-.24,-.66,-.51,-.75,-.57],["c",-.21,-.15,-.27,-.24,-.24,-.45],["c",.06,-.27,.36,-.6,.6,-.66],["c",.18,-.03,.33,.06,.9,.57],["c",.48,.42,.72,.57,.93,.69],["c",.66,.33,1.38,.21,1.95,-.36],["c",.63,-.6,1.05,-1.62,1.23,-3],["c",.03,-.18,.09,-.66,.09,-1.11],["c",.09,-1.56,.33,-3.81,.57,-5.49],["c",.06,-.33,.09,-.63,.09,-.63],["c",-.03,-.03,-.81,-.12,-1.02,-.12],["c",-.57,0,-1.32,.12,-1.8,.33],["c",-.87,.3,-1.35,.78,-1.5,1.41],["c",-.18,.63,.09,1.26,.66,1.65],["c",.12,.06,.15,.12,.18,.24],["c",.09,.27,.06,.57,-.09,.75],["c",-.03,.06,-.12,.09,-.27,.15],["c",-.72,.21,-1.44,.15,-2.1,-.18],["c",-.54,-.27,-.96,-.66,-1.2,-1.14],["c",-.39,-.75,-.33,-1.74,.15,-2.52],["c",.27,-.42,.84,-.93,1.41,-1.23],["c",1.17,-.57,2.88,-.9,4.8,-.9],["c",.69,0,.78,0,1.08,.06],["c",.45,.09,1.11,.3,2.07,.6],["c",1.47,.48,1.83,.57,2.55,.54],["c",1.02,-.06,2.04,-.45,2.94,-1.11],["c",.12,-.09,.24,-.18,.27,-.18],["z"],["m",-5.88,13.05],["c",.21,-.03,.81,0,1.08,.06],["c",.48,.12,.9,.42,.99,.69],["c",.03,.09,.03,.15,0,.27],["c",0,.09,-.03,.57,-.06,1.08],["c",-.09,2.19,-.24,5.76,-.39,8.28],["c",-.06,1.53,-.06,1.77,.03,2.01],["c",.09,.18,.15,.24,.3,.3],["c",.24,.12,.54,.06,1.23,-.27],["c",.57,-.27,.66,-.3,.75,-.24],["c",.09,.06,.18,.3,.18,.45],["c",0,.33,-.15,.51,-.45,.63],["c",-.12,.03,-.39,.15,-.6,.27],["c",-1.17,.6,-1.38,.69,-1.8,.72],["c",-.45,.03,-.78,-.09,-1.08,-.39],["c",-.39,-.42,-.66,-1.2,-1.02,-3.12],["c",-.24,-1.23,-.36,-2.07,-.54,-3.75],["l",0,-.18],["l",-.36,.45],["c",-.6,.75,-1.32,1.59,-1.95,2.25],["c",-.15,.18,-.27,.3,-.27,.33],["c",0,0,.06,.09,.15,.18],["c",.24,.33,.6,.57,1.05,.69],["c",.18,.06,.3,.06,.69,.06],["l",.48,.03],["l",.06,.12],["c",.15,.27,.03,.72,-.21,.9],["c",-.18,.12,-.93,.27,-1.41,.27],["c",-.84,0,-1.59,-.3,-1.98,-.84],["l",-.12,-.15],["l",-.45,.42],["c",-.99,.87,-1.53,1.32,-2.16,1.74],["c",-.78,.51,-1.5,.84,-2.1,.93],["c",-.69,.12,-1.2,.03,-1.95,-.42],["c",-.21,-.12,-.51,-.27,-.66,-.36],["c",-.24,-.12,-.3,-.18,-.33,-.24],["c",-.12,-.27,.15,-.78,.45,-.93],["c",.24,-.12,.33,-.09,.9,.18],["c",.6,.3,.84,.39,1.2,.36],["c",.87,-.09,1.77,-.69,3.24,-2.31],["c",2.67,-2.85,4.59,-5.94,5.7,-9.15],["c",.15,-.45,.24,-.63,.42,-.81],["c",.21,-.24,.6,-.45,.99,-.51],["z"],["m",-3.99,16.05],["c",.18,0,.69,-.03,1.17,0],["c",3.27,.03,5.37,.75,6,2.07],["c",.45,.99,.12,2.4,-.81,3.42],["c",-.24,.27,-.57,.57,-.84,.75],["c",-.09,.06,-.18,.09,-.18,.12],["c",0,0,.18,.03,.42,.09],["c",1.23,.3,2.01,.81,2.37,1.59],["c",.27,.54,.3,1.32,.09,2.1],["c",-.12,.36,-.45,1.05,-.69,1.35],["c",-.87,1.17,-2.1,1.92,-3.54,2.25],["c",-.36,.06,-.48,.06,-.96,.06],["c",-.45,0,-.66,0,-.84,-.03],["c",-.84,-.18,-1.47,-.51,-2.07,-1.11],["c",-.33,-.33,-.45,-.51,-.45,-.63],["c",0,-.06,.03,-.15,.06,-.24],["c",.18,-.33,.69,-.6,.93,-.48],["c",.03,.03,.15,.12,.27,.24],["c",.39,.42,.99,.57,1.62,.45],["c",1.05,-.21,1.98,-1.02,2.31,-2.01],["c",.48,-1.53,-.48,-2.55,-2.58,-2.67],["c",-.21,0,-.36,-.03,-.42,-.06],["c",-.15,-.09,-.21,-.51,-.06,-.78],["c",.12,-.27,.24,-.33,.6,-.36],["c",.57,-.06,1.11,-.42,1.5,-.99],["c",.48,-.72,.54,-1.59,.18,-2.31],["c",-.12,-.21,-.45,-.54,-.69,-.69],["c",-.33,-.21,-.93,-.45,-1.35,-.51],["l",-.12,-.03],["l",-.06,.48],["c",-.54,2.94,-1.14,6.24,-1.29,6.75],["c",-.33,1.35,-.93,2.61,-1.65,3.6],["c",-.3,.36,-.81,.9,-1.14,1.14],["c",-.3,.24,-.84,.48,-1.14,.57],["c",-.33,.09,-.96,.09,-1.26,.03],["c",-.45,-.12,-.87,-.39,-1.53,-.96],["c",-.24,-.15,-.51,-.39,-.63,-.48],["c",-.3,-.21,-.33,-.33,-.21,-.63],["c",.12,-.18,.27,-.36,.42,-.45],["c",.27,-.12,.36,-.09,.87,.33],["c",.78,.6,1.08,.75,1.65,.72],["c",.45,-.03,.81,-.21,1.17,-.54],["c",.87,-.9,1.38,-2.85,1.38,-5.37],["c",0,-.6,.03,-1.11,.12,-2.04],["c",.06,-.69,.24,-2.01,.33,-2.58],["c",.06,-.24,.06,-.42,.06,-.42],["c",0,0,-.12,.03,-.21,.09],["c",-1.44,.57,-2.16,1.65,-1.74,2.55],["c",.09,.15,.18,.24,.27,.33],["c",.24,.21,.3,.27,.33,.39],["c",.06,.24,0,.63,-.15,.78],["c",-.09,.12,-.54,.21,-.96,.24],["c",-1.02,.03,-2.01,-.48,-2.43,-1.32],["c",-.21,-.45,-.27,-.9,-.15,-1.44],["c",.06,-.27,.21,-.66,.39,-.93],["c",.87,-1.29,3,-2.22,5.64,-2.43],["z"]],w:19.643,h:43.325},"tab.tiny":{d:[["M",16.02,-17.25],["c",.12,-.09,.15,-.09,.27,-.09],["c",.21,.03,.51,.3,.51,.45],["c",0,.06,-.12,.18,-.3,.36],["c",-1.11,1.08,-2.55,1.59,-3.84,1.41],["c",-.15,-.03,-.33,-.06,-.39,-.09],["c",-.06,-.03,-.09,-.03,-.12,-.03],["c",0,0,-.06,.42,-.15,.93],["c",-.33,2.01,-.66,3.69,-.84,4.26],["c",-.42,1.41,-1.23,2.67,-2.16,3.33],["c",-.27,.18,-.75,.42,-.99,.48],["c",-.3,.09,-.72,.09,-1.02,.06],["c",-.45,-.09,-.84,-.33,-1.53,-.9],["c",-.21,-.18,-.51,-.39,-.63,-.48],["c",-.27,-.21,-.3,-.24,-.3,-.36],["c",0,-.12,.09,-.36,.18,-.45],["c",.09,-.09,.27,-.18,.36,-.18],["c",.12,0,.3,.12,.66,.45],["c",.57,.51,.87,.69,1.23,.72],["c",.93,.06,1.68,-.78,1.98,-2.37],["c",.09,-.39,.15,-.75,.18,-1.53],["c",.06,-.99,.24,-2.79,.42,-4.05],["c",.03,-.3,.06,-.57,.06,-.6],["c",0,-.06,-.03,-.09,-.15,-.12],["c",-.9,-.18,-2.13,.06,-2.76,.57],["c",-.36,.3,-.51,.6,-.51,1.02],["c",0,.45,.15,.75,.48,.99],["c",.06,.06,.15,.18,.18,.24],["c",.12,.24,.03,.63,-.15,.69],["c",-.24,.12,-.6,.15,-.9,.15],["c",-.36,-.03,-.57,-.09,-.87,-.24],["c",-.78,-.36,-1.23,-1.11,-1.2,-1.92],["c",.12,-1.53,1.74,-2.49,4.62,-2.7],["c",1.2,-.09,1.47,-.03,3.33,.57],["c",.9,.3,1.14,.36,1.56,.39],["c",.45,0,.93,-.06,1.38,-.21],["c",.51,-.18,.81,-.33,1.41,-.75],["z"],["m",-4.68,10.38],["c",.39,-.06,.84,0,1.2,.15],["c",.24,.12,.36,.21,.45,.36],["l",.09,.09],["l",-.06,1.41],["c",-.09,2.19,-.18,3.96,-.27,5.49],["c",-.03,.78,-.06,1.59,-.06,1.86],["c",0,.42,0,.48,.06,.57],["c",.06,.18,.18,.24,.36,.27],["c",.18,0,.39,-.06,.84,-.27],["c",.45,-.21,.54,-.24,.63,-.18],["c",.12,.12,.15,.54,.03,.69],["c",-.03,.03,-.15,.12,-.27,.18],["c",-.15,.03,-.3,.12,-.36,.15],["c",-.87,.45,-1.02,.51,-1.26,.57],["c",-.33,.09,-.6,.06,-.84,-.06],["c",-.42,-.18,-.63,-.6,-.87,-1.44],["c",-.3,-1.23,-.57,-2.97,-.66,-4.08],["c",0,-.18,-.03,-.3,-.03,-.33],["l",-.06,.06],["c",-.18,.27,-1.11,1.38,-1.68,2.01],["l",-.33,.33],["l",.06,.09],["c",.06,.15,.27,.33,.48,.42],["c",.27,.18,.51,.24,.96,.27],["l",.39,0],["l",.03,.12],["c",.12,.21,.03,.57,-.15,.69],["c",-.03,.03,-.21,.09,-.36,.15],["c",-.27,.06,-.39,.06,-.75,.06],["c",-.48,0,-.75,-.03,-1.08,-.21],["c",-.21,-.12,-.51,-.36,-.57,-.48],["l",-.03,-.09],["l",-.39,.36],["c",-1.47,1.35,-2.49,1.98,-3.42,2.13],["c",-.54,.09,-.96,-.03,-1.62,-.39],["c",-.21,-.15,-.45,-.27,-.54,-.3],["c",-.18,-.09,-.21,-.21,-.12,-.45],["c",.06,-.27,.33,-.48,.54,-.48],["c",.03,0,.27,.09,.48,.21],["c",.48,.24,.69,.27,.99,.27],["c",.6,-.06,1.17,-.42,2.1,-1.35],["c",2.22,-2.22,4.02,-4.98,4.95,-7.59],["c",.21,-.57,.3,-.78,.48,-.93],["c",.15,-.15,.42,-.27,.66,-.33],["z"],["m",-3.06,12.84],["c",.27,-.03,1.68,0,2.01,.03],["c",1.92,.18,3.15,.69,3.63,1.5],["c",.18,.33,.24,.51,.21,.93],["c",0,.45,-.06,.72,-.24,1.11],["c",-.24,.51,-.69,1.02,-1.17,1.35],["c",-.21,.15,-.21,.15,-.12,.18],["c",.72,.15,1.11,.3,1.5,.57],["c",.39,.24,.63,.57,.75,.96],["c",.09,.3,.09,.96,0,1.29],["c",-.15,.57,-.39,1.05,-.78,1.5],["c",-.66,.75,-1.62,1.32,-2.61,1.53],["c",-.27,.06,-.42,.06,-.84,.06],["c",-.48,0,-.57,0,-.81,-.06],["c",-.6,-.18,-1.05,-.42,-1.47,-.81],["c",-.36,-.39,-.42,-.51,-.3,-.75],["c",.12,-.21,.39,-.39,.6,-.39],["c",.09,0,.15,.03,.33,.18],["c",.12,.12,.27,.24,.36,.27],["c",.96,.48,2.46,-.33,2.82,-1.5],["c",.24,-.81,-.03,-1.44,-.69,-1.77],["c",-.39,-.21,-1.02,-.33,-1.53,-.33],["c",-.18,0,-.21,0,-.27,-.09],["c",-.06,-.09,-.06,-.3,-.03,-.48],["c",.06,-.18,.18,-.36,.33,-.36],["c",.39,-.06,.51,-.09,.72,-.18],["c",.69,-.36,1.11,-1.23,.99,-2.01],["c",-.09,-.51,-.42,-.9,-.93,-1.17],["c",-.24,-.12,-.6,-.27,-.87,-.3],["c",-.09,-.03,-.09,-.03,-.12,.12],["c",0,.09,-.21,1.11,-.42,2.25],["c",-.66,3.75,-.72,3.99,-1.26,5.07],["c",-.9,1.89,-2.25,2.85,-3.48,2.61],["c",-.39,-.09,-.69,-.27,-1.38,-.84],["c",-.63,-.51,-.63,-.48,-.63,-.6],["c",0,-.18,.18,-.48,.39,-.57],["c",.21,-.12,.3,-.09,.81,.33],["c",.15,.15,.39,.3,.54,.36],["c",.18,.12,.27,.12,.48,.15],["c",.99,.06,1.71,-.78,2.04,-2.46],["c",.12,-.66,.18,-1.14,.21,-2.22],["c",.03,-1.23,.12,-2.25,.36,-3.63],["c",.03,-.24,.06,-.45,.06,-.48],["c",-.06,-.03,-.66,.27,-.9,.42],["c",-.06,.06,-.21,.18,-.33,.3],["c",-.57,.57,-.6,1.35,-.06,1.74],["c",.18,.12,.24,.24,.21,.51],["c",-.03,.3,-.15,.42,-.57,.48],["c",-1.11,.24,-2.22,-.42,-2.43,-1.38],["c",-.09,-.45,.03,-1.02,.3,-1.47],["c",.18,-.24,.6,-.63,.9,-.84],["c",.9,-.6,2.28,-1.02,3.69,-1.11],["z"]],w:15.709,h:34.656},"timesig.common":{d:[["M",6.66,-7.83],["c",.72,-.06,1.41,-.03,1.98,.09],["c",1.2,.27,2.34,.96,3.09,1.92],["c",.63,.81,1.08,1.86,1.14,2.73],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,0,-.09,-.12,-.24,-.27],["c",-1.02,-1.11,-2.55,-1.68,-4.08,-1.5],["c",-1.29,.15,-2.04,.69,-2.4,1.74],["c",-.36,.93,-.42,1.89,-.42,5.37],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.63,1.68,1.41,2.07],["c",.81,.39,2.16,.45,3.18,.09],["c",1.29,-.45,2.37,-1.53,3.03,-2.97],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.06,.39,-.42,1.38,-.69,1.89],["c",-.96,1.8,-2.49,2.94,-4.23,3.18],["c",-.99,.12,-2.58,-.06,-3.63,-.45],["c",-.96,-.36,-1.71,-.84,-2.4,-1.5],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.9,-3.45,2.01,-4.56],["c",.69,-.66,1.44,-1.11,2.37,-1.47],["c",.63,-.24,1.47,-.42,2.22,-.48],["z"]],w:13.038,h:15.689},"timesig.cut":{d:[["M",6.24,-10.44],["c",.09,-.06,.09,-.06,.48,-.06],["c",.36,0,.36,0,.45,.06],["l",.06,.09],["l",0,1.23],["l",0,1.26],["l",.27,0],["c",1.26,0,2.49,.45,3.48,1.29],["c",1.05,.87,1.8,2.28,1.89,3.48],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,-.03,-.45,-.51,-.66,-.69],["c",-.87,-.69,-1.83,-1.05,-2.94,-1.11],["l",-.42,0],["l",0,7.17],["l",0,7.14],["l",.42,0],["c",.69,-.03,1.23,-.18,1.86,-.51],["c",1.05,-.51,1.89,-1.47,2.46,-2.7],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.03,.24,-.21,.78,-.39,1.2],["c",-.96,2.37,-2.94,3.9,-5.13,3.9],["l",-.3,0],["l",0,1.26],["l",0,1.23],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.45,.06],["c",-.39,0,-.39,0,-.48,-.06],["l",-.06,-.09],["l",0,-1.29],["l",0,-1.29],["l",-.21,-.03],["c",-1.23,-.21,-2.31,-.63,-3.21,-1.29],["c",-.15,-.09,-.45,-.36,-.66,-.57],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.93,-3.45,2.04,-4.59],["c",.42,-.39,.78,-.66,1.26,-.93],["c",.75,-.45,1.65,-.75,2.61,-.9],["l",.21,-.03],["l",0,-1.29],["l",0,-1.29],["z"],["m",-.06,10.44],["c",0,-5.58,0,-6.99,-.03,-6.99],["c",-.15,0,-.63,.27,-.87,.45],["c",-.45,.36,-.75,.93,-.93,1.77],["c",-.18,.81,-.24,1.8,-.24,4.74],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.66,1.68,1.41,2.07],["c",.12,.06,.3,.12,.33,.15],["l",.09,0],["l",0,-6.96],["z"]],w:13.038,h:20.97},"timesig.imperfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.imperfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},f:{d:[["M",9.93,-14.28],["c",1.53,-.18,2.88,.45,3.12,1.5],["c",.12,.51,0,1.32,-.27,1.86],["c",-.15,.3,-.42,.57,-.63,.69],["c",-.69,.36,-1.56,.03,-1.83,-.69],["c",-.09,-.24,-.09,-.69,0,-.87],["c",.06,-.12,.21,-.24,.45,-.42],["c",.42,-.24,.57,-.45,.6,-.72],["c",.03,-.33,-.09,-.39,-.63,-.42],["c",-.3,0,-.45,0,-.6,.03],["c",-.81,.21,-1.35,.93,-1.74,2.46],["c",-.06,.27,-.48,2.25,-.48,2.31],["c",0,.03,.39,.03,.9,.03],["c",.72,0,.9,0,.99,.06],["c",.42,.15,.45,.72,.03,.9],["c",-.12,.06,-.24,.06,-1.17,.06],["l",-1.05,0],["l",-.78,2.55],["c",-.45,1.41,-.87,2.79,-.96,3.06],["c",-.87,2.37,-2.37,4.74,-3.78,5.91],["c",-1.05,.9,-2.04,1.23,-3.09,1.08],["c",-1.11,-.18,-1.89,-.78,-2.04,-1.59],["c",-.12,-.66,.15,-1.71,.54,-2.19],["c",.69,-.75,1.86,-.54,2.22,.39],["c",.06,.15,.09,.27,.09,.48],["c",0,.24,-.03,.27,-.12,.42],["c",-.03,.09,-.15,.18,-.27,.27],["c",-.09,.06,-.27,.21,-.36,.27],["c",-.24,.18,-.36,.36,-.39,.6],["c",-.03,.33,.09,.39,.63,.42],["c",.42,0,.63,-.03,.9,-.15],["c",.6,-.3,.96,-.96,1.38,-2.64],["c",.09,-.42,.63,-2.55,1.17,-4.77],["l",1.02,-4.08],["c",0,-.03,-.36,-.03,-.81,-.03],["c",-.72,0,-.81,0,-.93,-.06],["c",-.42,-.18,-.39,-.75,.03,-.9],["c",.09,-.06,.27,-.06,1.05,-.06],["l",.96,0],["l",0,-.09],["c",.06,-.18,.3,-.72,.51,-1.17],["c",1.2,-2.46,3.3,-4.23,5.34,-4.5],["z"]],w:16.155,h:19.445},m:{d:[["M",2.79,-8.91],["c",.09,0,.3,-.03,.45,-.03],["c",.24,.03,.3,.03,.45,.12],["c",.36,.15,.63,.54,.75,1.02],["l",.03,.21],["l",.33,-.3],["c",.69,-.69,1.38,-1.02,2.07,-1.02],["c",.27,0,.33,0,.48,.06],["c",.21,.09,.48,.36,.63,.6],["c",.03,.09,.12,.27,.18,.42],["c",.03,.15,.09,.27,.12,.27],["c",0,0,.09,-.09,.18,-.21],["c",.33,-.39,.87,-.81,1.29,-.99],["c",.78,-.33,1.47,-.21,2.01,.33],["c",.3,.33,.48,.69,.6,1.14],["c",.09,.42,.06,.54,-.54,3.06],["c",-.33,1.29,-.57,2.4,-.57,2.43],["c",0,.12,.09,.21,.21,.21],["c",.24,0,.75,-.3,1.2,-.72],["c",.45,-.39,.6,-.45,.78,-.27],["c",.18,.18,.09,.36,-.45,.87],["c",-1.05,.96,-1.83,1.47,-2.58,1.71],["c",-.93,.33,-1.53,.21,-1.8,-.33],["c",-.06,-.15,-.06,-.21,-.06,-.45],["c",0,-.24,.03,-.48,.6,-2.82],["c",.42,-1.71,.6,-2.64,.63,-2.79],["c",.03,-.57,-.3,-.75,-.84,-.48],["c",-.24,.12,-.54,.39,-.66,.63],["c",-.03,.09,-.42,1.38,-.9,3],["c",-.9,3.15,-.84,3,-1.14,3.15],["l",-.15,.09],["l",-.78,0],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.36,-1.38,.84,-2.97],["c",.57,-2.04,.81,-2.97,.84,-3.12],["c",.03,-.54,-.3,-.72,-.84,-.45],["c",-.24,.12,-.57,.42,-.66,.63],["c",-.06,.09,-.51,1.44,-1.05,2.97],["c",-.51,1.56,-.99,2.85,-.99,2.91],["c",-.06,.12,-.21,.24,-.36,.3],["c",-.12,.06,-.21,.06,-.9,.06],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.45,-1.38,.99,-2.97],["c",1.05,-3.18,1.05,-3.18,.93,-3.45],["c",-.12,-.27,-.39,-.3,-.72,-.15],["c",-.54,.27,-1.14,1.17,-1.56,2.4],["c",-.06,.15,-.15,.3,-.18,.36],["c",-.21,.21,-.57,.27,-.72,.09],["c",-.09,-.09,-.06,-.21,.06,-.63],["c",.48,-1.26,1.26,-2.46,2.01,-3.21],["c",.57,-.54,1.2,-.87,1.83,-1.02],["z"]],w:14.687,h:9.126},p:{d:[["M",1.92,-8.7],["c",.27,-.09,.81,-.06,1.11,.03],["c",.54,.18,.93,.51,1.17,.99],["c",.09,.15,.15,.33,.18,.36],["l",0,.12],["l",.3,-.27],["c",.66,-.6,1.35,-1.02,2.13,-1.2],["c",.21,-.06,.33,-.06,.78,-.06],["c",.45,0,.51,0,.84,.09],["c",1.29,.33,2.07,1.32,2.25,2.79],["c",.09,.81,-.09,2.01,-.45,2.79],["c",-.54,1.26,-1.86,2.55,-3.18,3.03],["c",-.45,.18,-.81,.24,-1.29,.24],["c",-.69,-.03,-1.35,-.18,-1.86,-.45],["c",-.3,-.15,-.51,-.18,-.69,-.09],["c",-.09,.03,-.18,.09,-.18,.12],["c",-.09,.12,-1.05,2.94,-1.05,3.06],["c",0,.24,.18,.48,.51,.63],["c",.18,.06,.54,.15,.75,.15],["c",.21,0,.36,.06,.42,.18],["c",.12,.18,.06,.42,-.12,.54],["c",-.09,.03,-.15,.03,-.78,0],["c",-1.98,-.15,-3.81,-.15,-5.79,0],["c",-.63,.03,-.69,.03,-.78,0],["c",-.24,-.15,-.24,-.57,.03,-.66],["c",.06,-.03,.48,-.09,.99,-.12],["c",.87,-.06,1.11,-.09,1.35,-.21],["c",.18,-.06,.33,-.18,.39,-.3],["c",.06,-.12,3.24,-9.42,3.27,-9.6],["c",.06,-.33,.03,-.57,-.15,-.69],["c",-.09,-.06,-.12,-.06,-.3,-.06],["c",-.69,.06,-1.53,1.02,-2.28,2.61],["c",-.09,.21,-.21,.45,-.27,.51],["c",-.09,.12,-.33,.24,-.48,.24],["c",-.18,0,-.36,-.15,-.36,-.3],["c",0,-.24,.78,-1.83,1.26,-2.55],["c",.72,-1.11,1.47,-1.74,2.28,-1.92],["z"],["m",5.37,1.47],["c",-.27,-.12,-.75,-.03,-1.14,.21],["c",-.75,.48,-1.47,1.68,-1.89,3.15],["c",-.45,1.47,-.42,2.34,0,2.7],["c",.45,.39,1.26,.21,1.83,-.36],["c",.51,-.51,.99,-1.68,1.38,-3.27],["c",.3,-1.17,.33,-1.74,.15,-2.13],["c",-.09,-.15,-.15,-.21,-.33,-.3],["z"]],w:14.689,h:13.127},r:{d:[["M",6.33,-9.12],["c",.27,-.03,.93,0,1.2,.06],["c",.84,.21,1.23,.81,1.02,1.53],["c",-.24,.75,-.9,1.17,-1.56,.96],["c",-.33,-.09,-.51,-.3,-.66,-.75],["c",-.03,-.12,-.09,-.24,-.12,-.3],["c",-.09,-.15,-.3,-.24,-.48,-.24],["c",-.57,0,-1.38,.54,-1.65,1.08],["c",-.06,.15,-.33,1.17,-.9,3.27],["c",-.57,2.31,-.81,3.12,-.87,3.21],["c",-.03,.06,-.12,.15,-.18,.21],["l",-.12,.06],["l",-.81,.03],["c",-.69,0,-.81,0,-.9,-.03],["c",-.09,-.06,-.18,-.21,-.18,-.3],["c",0,-.06,.39,-1.62,.9,-3.51],["c",.84,-3.24,.87,-3.45,.87,-3.72],["c",0,-.21,0,-.27,-.03,-.36],["c",-.12,-.15,-.21,-.24,-.42,-.24],["c",-.24,0,-.45,.15,-.78,.42],["c",-.33,.36,-.45,.54,-.72,1.14],["c",-.03,.12,-.21,.24,-.36,.27],["c",-.12,0,-.15,0,-.24,-.06],["c",-.18,-.12,-.18,-.21,-.06,-.54],["c",.21,-.57,.42,-.93,.78,-1.32],["c",.54,-.51,1.2,-.81,1.95,-.87],["c",.81,-.03,1.53,.3,1.92,.87],["l",.12,.18],["l",.09,-.09],["c",.57,-.45,1.41,-.84,2.19,-.96],["z"]],w:9.41,h:9.132},s:{d:[["M",4.47,-8.73],["c",.09,0,.36,-.03,.57,-.03],["c",.75,.03,1.29,.24,1.71,.63],["c",.51,.54,.66,1.26,.36,1.83],["c",-.24,.42,-.63,.57,-1.11,.42],["c",-.33,-.09,-.6,-.36,-.6,-.57],["c",0,-.03,.06,-.21,.15,-.39],["c",.12,-.21,.15,-.33,.18,-.48],["c",0,-.24,-.06,-.48,-.15,-.6],["c",-.15,-.21,-.42,-.24,-.75,-.15],["c",-.27,.06,-.48,.18,-.69,.36],["c",-.39,.39,-.51,.96,-.33,1.38],["c",.09,.21,.42,.51,.78,.72],["c",1.11,.69,1.59,1.11,1.89,1.68],["c",.21,.39,.24,.78,.15,1.29],["c",-.18,1.2,-1.17,2.16,-2.52,2.52],["c",-1.02,.24,-1.95,.12,-2.7,-.42],["c",-.72,-.51,-.99,-1.47,-.6,-2.19],["c",.24,-.48,.72,-.63,1.17,-.42],["c",.33,.18,.54,.45,.57,.81],["c",0,.21,-.03,.3,-.33,.51],["c",-.33,.24,-.39,.42,-.27,.69],["c",.06,.15,.21,.27,.45,.33],["c",.3,.09,.87,.09,1.2,0],["c",.75,-.21,1.23,-.72,1.29,-1.35],["c",.03,-.42,-.15,-.81,-.54,-1.2],["c",-.24,-.24,-.48,-.42,-1.41,-1.02],["c",-.69,-.42,-1.05,-.93,-1.05,-1.47],["c",0,-.39,.12,-.87,.3,-1.23],["c",.27,-.57,.78,-1.05,1.38,-1.35],["c",.24,-.12,.63,-.27,.9,-.3],["z"]],w:6.632,h:8.758},z:{d:[["M",2.64,-7.95],["c",.36,-.09,.81,-.03,1.71,.27],["c",.78,.21,.96,.27,1.74,.3],["c",.87,.06,1.02,.03,1.38,-.21],["c",.21,-.15,.33,-.15,.48,-.06],["c",.15,.09,.21,.3,.15,.45],["c",-.03,.06,-1.26,1.26,-2.76,2.67],["l",-2.73,2.55],["l",.54,.03],["c",.54,.03,.72,.03,2.01,.15],["c",.36,.03,.9,.06,1.2,.09],["c",.66,0,.81,-.03,1.02,-.24],["c",.3,-.3,.39,-.72,.27,-1.23],["c",-.06,-.27,-.06,-.27,-.03,-.39],["c",.15,-.3,.54,-.27,.69,.03],["c",.15,.33,.27,1.02,.27,1.5],["c",0,1.47,-1.11,2.7,-2.52,2.79],["c",-.57,.03,-1.02,-.09,-2.01,-.51],["c",-1.02,-.42,-1.23,-.48,-2.13,-.54],["c",-.81,-.06,-.96,-.03,-1.26,.18],["c",-.12,.06,-.24,.12,-.27,.12],["c",-.27,0,-.45,-.3,-.36,-.51],["c",.03,-.06,1.32,-1.32,2.91,-2.79],["l",2.88,-2.73],["c",-.03,0,-.21,.03,-.42,.06],["c",-.21,.03,-.78,.09,-1.23,.12],["c",-1.11,.12,-1.23,.15,-1.95,.27],["c",-.72,.15,-1.17,.18,-1.29,.09],["c",-.27,-.18,-.21,-.75,.12,-1.26],["c",.39,-.6,.93,-1.02,1.59,-1.2],["z"]],w:8.573,h:8.743},"+":{d:[["M",3.48,-9.3],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.29],["l",0,1.29],["l",1.29,0],["c",1.23,0,1.29,0,1.41,.06],["c",.06,.03,.15,.09,.18,.12],["c",.12,.09,.21,.33,.21,.48],["c",0,.15,-.09,.39,-.21,.48],["c",-.03,.03,-.12,.09,-.18,.12],["c",-.12,.06,-.18,.06,-1.41,.06],["l",-1.29,0],["l",0,1.29],["c",0,1.23,0,1.29,-.06,1.41],["c",-.09,.18,-.15,.24,-.3,.33],["c",-.21,.09,-.39,.09,-.57,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.41],["l",0,-1.29],["l",-1.29,0],["c",-1.23,0,-1.29,0,-1.41,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.26,0],["l",1.29,0],["l",0,-1.29],["c",0,-1.23,0,-1.29,.06,-1.41],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:7.507,h:7.515},",":{d:[["M",1.85,-3.36],["c",.57,-.15,1.17,.03,1.59,.45],["c",.45,.45,.6,.96,.51,1.89],["c",-.09,1.23,-.42,2.46,-.99,3.93],["c",-.3,.72,-.72,1.62,-.78,1.68],["c",-.18,.21,-.51,.18,-.66,-.06],["c",-.03,-.06,-.06,-.15,-.06,-.18],["c",0,-.06,.12,-.33,.24,-.63],["c",.84,-1.8,1.02,-2.61,.69,-3.24],["c",-.12,-.24,-.27,-.36,-.75,-.6],["c",-.36,-.15,-.42,-.21,-.6,-.39],["c",-.69,-.69,-.69,-1.71,0,-2.4],["c",.21,-.21,.51,-.39,.81,-.45],["z"]],w:3.452,h:8.143},"-":{d:[["M",.18,-5.34],["c",.09,-.06,.15,-.06,2.31,-.06],["c",2.46,0,2.37,0,2.46,.21],["c",.12,.21,.03,.42,-.15,.54],["c",-.09,.06,-.15,.06,-2.28,.06],["c",-2.16,0,-2.22,0,-2.31,-.06],["c",-.27,-.15,-.27,-.54,-.03,-.69],["z"]],w:5.001,h:.81},".":{d:[["M",1.32,-3.36],["c",1.05,-.27,2.1,.57,2.1,1.65],["c",0,1.08,-1.05,1.92,-2.1,1.65],["c",-.9,-.21,-1.5,-1.14,-1.26,-2.04],["c",.12,-.63,.63,-1.11,1.26,-1.26],["z"]],w:3.413,h:3.402},"scripts.wedge":{d:[["M",-3.66,-7.44],["c",.06,-.09,0,-.09,.81,.03],["c",1.86,.3,3.84,.3,5.73,0],["c",.78,-.12,.72,-.12,.78,-.03],["c",.15,.15,.12,.24,-.24,.6],["c",-.93,.93,-1.98,2.76,-2.67,4.62],["c",-.3,.78,-.51,1.71,-.51,2.13],["c",0,.15,0,.18,-.06,.27],["c",-.12,.09,-.24,.09,-.36,0],["c",-.06,-.09,-.06,-.12,-.06,-.27],["c",0,-.42,-.21,-1.35,-.51,-2.13],["c",-.69,-1.86,-1.74,-3.69,-2.67,-4.62],["c",-.36,-.36,-.39,-.45,-.24,-.6],["z"]],w:7.49,h:7.752},"scripts.thumb":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.27,1.41,-1.08,2.43,-2.16,2.73],["l",-.18,.06],["l",0,.12],["c",.03,.06,.06,.45,.09,.87],["c",.03,.57,.03,.78,0,.84],["c",-.09,.27,-.39,.48,-.66,.48],["c",-.27,0,-.57,-.21,-.66,-.48],["c",-.03,-.06,-.03,-.27,0,-.84],["c",.03,-.42,.06,-.81,.09,-.87],["l",0,-.12],["l",-.18,-.06],["c",-1.08,-.3,-1.89,-1.32,-2.16,-2.73],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.05,.9],["c",-.15,-.09,-.21,-.09,-.45,-.12],["c",-.15,0,-.3,.03,-.39,.03],["c",-.57,.18,-.9,.72,-1.08,1.74],["c",-.06,.48,-.06,1.8,0,2.28],["c",.15,.9,.42,1.44,.9,1.65],["c",.18,.09,.21,.09,.51,.09],["c",.3,0,.33,0,.51,-.09],["c",.48,-.21,.75,-.75,.9,-1.65],["c",.03,-.27,.03,-.54,.03,-1.14],["c",0,-.6,0,-.87,-.03,-1.14],["c",-.15,-.9,-.45,-1.44,-.9,-1.65],["z"]],w:5.955,h:9.75},"scripts.open":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.33,1.74,-1.47,2.85,-2.91,2.85],["c",-1.44,0,-2.58,-1.11,-2.91,-2.85],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.11,.9],["c",-.21,-.09,-.27,-.09,-.51,-.12],["c",-.3,0,-.42,.03,-.66,.15],["c",-.24,.12,-.51,.39,-.66,.63],["c",-.54,.93,-.63,2.64,-.21,3.81],["c",.21,.54,.51,.9,.93,1.11],["c",.21,.09,.24,.09,.54,.09],["c",.3,0,.33,0,.54,-.09],["c",.42,-.21,.72,-.57,.93,-1.11],["c",.36,-.99,.36,-2.37,0,-3.36],["c",-.21,-.54,-.51,-.9,-.9,-1.11],["z"]],w:5.955,h:7.5},"scripts.longphrase":{d:[["M",1.47,-15.09],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.54,.06,11.25],["l",0,11.25],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-3.39,-.03,-11.25],["l",0,-11.25],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:23.04},"scripts.mediumphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.39,.06,7.5],["l",0,7.5],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-2.28,-.03,-7.5],["l",0,-7.5],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:15.54},"scripts.shortphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.21,.06,3.75],["l",0,3.75],["l",-.42,.09],["c",-.57,.18,-1.65,.45,-1.71,.45],["c",-.03,0,-.03,-.72,-.03,-3.75],["l",0,-3.75],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:8.04},"scripts.snap":{d:[["M",4.5,-3.39],["c",.36,-.03,.96,-.03,1.35,0],["c",1.56,.15,3.15,.9,4.2,2.01],["c",.24,.27,.33,.42,.33,.6],["c",0,.27,.03,.24,-2.46,2.22],["c",-1.29,1.02,-2.4,1.86,-2.49,1.92],["c",-.18,.09,-.3,.09,-.48,0],["c",-.09,-.06,-1.2,-.9,-2.49,-1.92],["c",-2.49,-1.98,-2.46,-1.95,-2.46,-2.22],["c",0,-.18,.09,-.33,.33,-.6],["c",1.05,-1.08,2.64,-1.86,4.17,-2.01],["z"],["m",1.29,1.17],["c",-1.47,-.15,-2.97,.3,-4.14,1.2],["l",-.18,.15],["l",.06,.09],["c",.15,.12,3.63,2.85,3.66,2.85],["c",.03,0,3.51,-2.73,3.66,-2.85],["l",.06,-.09],["l",-.18,-.15],["c",-.84,-.66,-1.89,-1.08,-2.94,-1.2],["z"]],w:10.38,h:6.84}};l["noteheads.slash.whole"]={d:[["M",5,-5],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"],["m",0,-2],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",-4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"]],w:10.81,h:15.63},l["noteheads.slash.quarter"]={d:[["M",9,-6],["l",0,4],["l",-9,9],["l",0,-4],["z"]],w:9,h:9},l["noteheads.harmonic.quarter"]={d:[["M",3.63,-4.02],["c",.09,-.06,.18,-.09,.24,-.03],["c",.03,.03,.87,.93,1.83,2.01],["c",1.5,1.65,1.8,1.98,1.8,2.04],["c",0,.06,-.3,.39,-1.8,2.04],["c",-.96,1.08,-1.8,1.98,-1.83,2.01],["c",-.06,.06,-.15,.03,-.24,-.03],["c",-.12,-.09,-3.54,-3.84,-3.6,-3.93],["c",-.03,-.03,-.03,-.09,-.03,-.15],["c",.03,-.06,3.45,-3.84,3.63,-3.96],["z"]],w:7.5,h:8.165},l["noteheads.triangle.quarter"]={d:[["M",0,4],["l",9,0],["l",-4.5,-9],["z"]],w:9,h:9};var h=function(a){for(var n=[],i=0,f=a.length;i<f;i++){n[i]=[];for(var v=0,g=a[i].length;v<g;v++)n[i][v]=a[i][v]}return n},s=function(a,n,i){for(var f=0,v=a.length;f<v;f++){var g=a[f],d,o;for(d=1,o=g.length;d<o;d++)g[d]*=d%2?n:i}},t={printSymbol:function(a,n,i,f,v){if(!l[i])return null;var g=h(l[i].d);g[0][1]+=a,g[0][2]+=n;for(var d="",o=0;o<g.length;o++)d+=g[o].join(" ");return v.path=d,f.path(v)},getPathForSymbol:function(a,n,i,f,v){if(f=f||1,v=v||1,!l[i])return null;var g=h(l[i].d);return(f!==1||v!==1)&&s(g,f,v),g[0][1]+=a,g[0][2]+=n,g},getSymbolWidth:function(a){return l[a]?l[a].w:0},symbolHeightInPitches:function(a){var n=l[a]?l[a].h:0;return n/p.STEP},getSymbolAlign:function(a){return a.substring(0,7)==="scripts"&&a!=="scripts.roll"?"center":"left"},getYCorr:function(a){switch(a){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":return-2;case"timesig.common":case"timesig.cut":return 0;case"flags.d32nd":return-1;case"flags.d64th":return-2;case"flags.u32nd":return 1;case"flags.u64th":return 3;case"rests.whole":return 1;case"rests.half":return-1;case"rests.8th":return-1;case"rests.quarter":return-1;case"rests.16th":return-1;case"rests.32nd":return-1;case"rests.64th":return-1;case"f":case"m":case"p":case"s":case"z":return-4;case"scripts.trill":case"scripts.upbow":case"scripts.downbow":return-2;case"scripts.ufermata":case"scripts.wedge":case"scripts.roll":case"scripts.shortphrase":case"scripts.longphrase":return-1;case"scripts.dfermata":return 1;default:return 0}},setSymbol:function(a,n){l[a]=n}};return h0=t,h0}var u0,kn;function mc(){if(kn)return u0;kn=1;var p=Ke(),l=ze(),h=Le(),s=function(a,n){var i,f=0;a.el_type="clef";var v=new p(a,0,10,"staff-extra clef",n);switch(v.isClef=!0,a.type){case"treble":i="clefs.G";break;case"tenor":i="clefs.C";break;case"alto":i="clefs.C";break;case"bass":i="clefs.F";break;case"treble+8":i="clefs.G",f=1;break;case"tenor+8":i="clefs.C",f=1;break;case"bass+8":i="clefs.F",f=1;break;case"alto+8":i="clefs.C",f=1;break;case"treble-8":i="clefs.G",f=-1;break;case"tenor-8":i="clefs.C",f=-1;break;case"bass-8":i="clefs.F",f=-1;break;case"alto-8":i="clefs.C",f=-1;break;case"none":return null;case"perc":i="clefs.perc";break;default:v.addFixed(new h("clef="+a.type,0,0,void 0,{type:"debug"}))}var g=5;if(i){var d=l.symbolHeightInPitches(i),o=t(i);if(v.addRight(new h(i,g,l.getSymbolWidth(i),a.clefPos,{top:d+a.clefPos+o,bottom:a.clefPos+o})),f!==0){var r=.6666666666666666,c=(l.getSymbolWidth(i)-l.getSymbolWidth("8")*r)/2,e=f>0?v.top+3:v.bottom-1,u=f>0?v.top+3:v.bottom-3,m=u-2;a.type==="bass-8"&&(e=3,c=0),v.addRight(new h("8",g+c,l.getSymbolWidth("8")*r,e,{scalex:r,scaley:r,top:u,bottom:m}))}}return v};function t(a){switch(a){case"clefs.G":return-5;case"clefs.C":return-4;case"clefs.F":return-4;case"clefs.perc":return-2;default:return 0}}return u0=s,u0}var d0,_n;function yc(){if(_n)return d0;_n=1;var p=Ke(),l=ze(),h=Le(),s=function(t,a){if(t.el_type="keySignature",!t.accidentals||t.accidentals.length===0)return null;var n=new p(t,0,10,"staff-extra key-signature",a);n.isKeySig=!0;var i=0;return t.accidentals.forEach(function(f){var v,g=0;switch(f.acc){case"sharp":v="accidentals.sharp",g=-3;break;case"natural":v="accidentals.nat";break;case"flat":v="accidentals.flat",g=-1.2;break;case"quartersharp":v="accidentals.halfsharp",g=-2.5;break;case"quarterflat":v="accidentals.halfflat",g=-1.2;break;default:v="accidentals.flat"}n.addRight(new h(v,i,l.getSymbolWidth(v),f.verticalPos,{thickness:l.symbolHeightInPitches(v),top:f.verticalPos+l.symbolHeightInPitches(v)+g,bottom:f.verticalPos+g})),i+=l.getSymbolWidth(v)+2},this),n};return d0=s,d0}var p0,Tn;function wc(){if(Tn)return p0;Tn=1;var p=ze(),l=Le(),h=function(s,t,a,n){n||(n={});var i=n.dir!==void 0?n.dir:null,f=n.headx!==void 0?n.headx:0,v=n.extrax!==void 0?n.extrax:0,g=n.flag!==void 0?n.flag:null,d=n.dot!==void 0?n.dot:0,o=n.dotshiftx!==void 0?n.dotshiftx:0,r=n.scale!==void 0?n.scale:1,c=n.accidentalSlot!==void 0?n.accidentalSlot:[],e=n.shouldExtendStem!==void 0?n.shouldExtendStem:!1,u=n.printAccidentals!==void 0?n.printAccidentals:!0,m=a.verticalPos,b,x=0,T=0,E=0;if(t===void 0)s.addFixed(new l("pitch is undefined",0,0,0,{type:"debug"}));else if(t==="")b=new l(null,0,0,m);else{var D=f;if(a.printer_shift){var F=a.printer_shift==="same"?1:0;D=i==="down"?-p.getSymbolWidth(t)*r+F:p.getSymbolWidth(t)*r-F}var y={scalex:r,scaley:r,thickness:p.symbolHeightInPitches(t)*r,name:a.name};if(b=new l(t,D,p.getSymbolWidth(t)*r,m,y),b.stemDir=i,g){var A=m+(i==="down"?-7:7)*r;e&&(i==="down"&&A>6&&(A=6),i==="up"&&A<6&&(A=6));var N=i==="down"?f:f+b.w-.6;s.addRight(new l(g,N,p.getSymbolWidth(g)*r,A,{scalex:r,scaley:r}))}for(T=b.w+o-2+5*d;d>0;d--){var M=1-Math.abs(m)%2;s.addRight(new l("dots.dot",b.w+o-2+5*d,p.getSymbolWidth("dots.dot"),m+M))}}if(b&&(b.highestVert=a.highestVert),u&&a.accidental){var L;switch(a.accidental){case"quartersharp":L="accidentals.halfsharp";break;case"dblsharp":L="accidentals.dblsharp";break;case"sharp":L="accidentals.sharp";break;case"quarterflat":L="accidentals.halfflat";break;case"flat":L="accidentals.flat";break;case"dblflat":L="accidentals.dblflat";break;case"natural":L="accidentals.nat"}for(var B=!1,S=v,_=0;_<c.length;_++)if(m-c[_][0]>=6){c[_][0]=m,S=c[_][1],B=!0;break}B===!1&&(S-=p.getSymbolWidth(L)*r+2,c.push([m,S]),x=p.getSymbolWidth(L)*r+2);var P=p.symbolHeightInPitches(L);s.addExtra(new l(L,S,p.getSymbolWidth(L),m,{scalex:r,scaley:r,top:m+P/2,bottom:m-P/2})),E=p.getSymbolWidth(L)/2}return{notehead:b,accidentalshiftx:x,dotshiftx:T,extraLeft:E}};return p0=h,p0}var v0,Sn;function xc(){if(Sn)return v0;Sn=1;var p=Ke(),l=ze(),h=Le(),s=function(t,a){t.el_type="timeSignature";var n=new p(t,0,10,"staff-extra time-signature",a);if(t.type==="specified")for(var i=0,f=0;f<t.value.length;f++)if(f!==0&&(n.addRight(new h("+",i+1,l.getSymbolWidth("+"),6,{thickness:l.symbolHeightInPitches("+")})),i+=l.getSymbolWidth("+")+2),t.value[f].den){for(var v=0,g=0;g<t.value[f].num.length;g++)v+=l.getSymbolWidth(t.value[f].num[g]);var d=0;for(g=0;g<t.value[f].num.length;g++)d+=l.getSymbolWidth(t.value[f].den[g]);var o=Math.max(v,d);n.addRight(new h(t.value[f].num,i+(o-v)/2,v,8,{thickness:l.symbolHeightInPitches(t.value[f].num[0])})),n.addRight(new h(t.value[f].den,i+(o-d)/2,d,4,{thickness:l.symbolHeightInPitches(t.value[f].den[0])})),i+=o}else{for(var r=0,c=0;c<t.value[f].num.length;c++)r+=l.getSymbolWidth(t.value[f].num[c]);n.addRight(new h(t.value[f].num,i,r,6,{thickness:l.symbolHeightInPitches(t.value[f].num[0])})),i+=r}else t.type==="common_time"?n.addRight(new h("timesig.common",0,l.getSymbolWidth("timesig.common"),6,{thickness:l.symbolHeightInPitches("timesig.common")})):t.type==="cut_time"?n.addRight(new h("timesig.cut",0,l.getSymbolWidth("timesig.cut"),6,{thickness:l.symbolHeightInPitches("timesig.cut")})):t.type==="tempus_imperfectum"?n.addRight(new h("timesig.imperfectum",0,l.getSymbolWidth("timesig.imperfectum"),6,{thickness:l.symbolHeightInPitches("timesig.imperfectum")})):t.type==="tempus_imperfectum_prolatio"?n.addRight(new h("timesig.imperfectum2",0,l.getSymbolWidth("timesig.imperfectum2"),6,{thickness:l.symbolHeightInPitches("timesig.imperfectum2")})):t.type==="tempus_perfectum"?n.addRight(new h("timesig.perfectum",0,l.getSymbolWidth("timesig.perfectum"),6,{thickness:l.symbolHeightInPitches("timesig.perfectum")})):t.type==="tempus_perfectum_prolatio"?n.addRight(new h("timesig.perfectum2",0,l.getSymbolWidth("timesig.perfectum2"),6,{thickness:l.symbolHeightInPitches("timesig.perfectum2")})):console.log("time signature:",t);return n};return v0=s,v0}var g0,En;function Cc(){if(En)return g0;En=1;var p=function(h,s,t){this.type="DynamicDecoration",this.anchor=h,this.dec=s,t==="below"?this.volumeHeightBelow=6:this.volumeHeightAbove=6,this.pitch=void 0};return g0=p,g0}var b0,An;function kc(){if(An)return b0;An=1;var p=function(h,s,t,a){this.type="CrescendoElem",this.anchor1=h,this.anchor2=s,this.dir=t,a==="above"?this.dynamicHeightAbove=6:this.dynamicHeightBelow=6,this.pitch=void 0};return b0=p,b0}var m0,Mn;function _c(){if(Mn)return m0;Mn=1;var p=function(h,s){this.type="GlissandoElem",this.anchor1=h,this.anchor2=s};return m0=p,m0}var y0,Bn;function js(){if(Bn)return y0;Bn=1;var p=function(h){this.type="TieElem",this.anchor1=h.anchor1,this.anchor2=h.anchor2,h.isGrace&&(this.isGrace=!0),h.fixedY&&(this.fixedY=!0),h.stemDir&&(this.stemDir=h.stemDir),h.voiceNumber!==void 0&&(this.voiceNumber=h.voiceNumber),h.style!==void 0&&(this.dotted=!0),this.internalNotes=[]};return p.prototype.addInternalNote=function(l){this.internalNotes.push(l)},p.prototype.setEndAnchor=function(l){this.anchor2=l,this.anchor1?(this.top=Math.max(this.anchor1.pitch,this.anchor2.pitch)+4,this.bottom=Math.min(this.anchor1.pitch,this.anchor2.pitch)-4):(this.top=this.anchor2.pitch+4,this.bottom=this.anchor2.pitch-4)},p.prototype.setStartX=function(l){this.startLimitX=l},p.prototype.setEndX=function(l){this.endLimitX=l},p.prototype.setHint=function(){this.hint=!0},p.prototype.calcTieDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var l;this.anchor1?l=this.anchor1.pitch:this.anchor2?l=this.anchor2.pitch:l=14,this.anchor1&&this.anchor1.stemDir==="down"&&this.anchor2&&this.anchor2.stemDir==="down"?this.above=!0:this.anchor1&&this.anchor1.stemDir==="up"&&this.anchor2&&this.anchor2.stemDir==="up"?this.above=!1:this.anchor1&&this.anchor2?this.above=l>=6:this.anchor1?this.above=this.anchor1.stemDir==="down":this.anchor2?this.above=this.anchor2.stemDir==="down":this.above=l>=6}},p.prototype.calcSlurDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var l=!1;this.anchor1&&this.anchor1.stemDir==="down"&&(l=!0),this.anchor2&&this.anchor2.stemDir==="down"&&(l=!0);for(var h=0;h<this.internalNotes.length;h++){var s=this.internalNotes[h];s.stemDir==="down"&&(l=!0)}this.above=l}},p.prototype.calcX=function(l,h){this.anchor1?(this.startX=this.anchor1.x,this.anchor1.scalex<1&&(this.startX-=3)):this.startLimitX?this.startX=this.startLimitX.x+this.startLimitX.w:this.anchor2?this.startX=this.anchor2.x-20:this.startX=l,!this.anchor1&&this.dotted&&(this.startX-=3),this.anchor2?this.endX=this.anchor2.x:this.endLimitX?this.endX=this.endLimitX.x:this.endX=h},p.prototype.calcTieY=function(){this.anchor1?this.startY=this.anchor1.pitch:this.anchor2?this.startY=this.anchor2.pitch:this.startY=this.above?14:0,this.anchor2?this.endY=this.anchor2.pitch:this.anchor1?this.endY=this.anchor1.pitch:this.endY=this.above?14:0},p.prototype.calcSlurY=function(){if(this.anchor1&&this.anchor2){this.above&&this.anchor1.stemDir==="up"&&!this.fixedY?(this.startY=(this.anchor1.highestVert+this.anchor1.pitch)/2,this.startX+=this.anchor1.w/2):this.startY=this.anchor1.pitch;var l=this.anchor2.parent.beam&&this.anchor2.parent.beam.stemsUp&&this.anchor2.parent.beam.elems[0]!==this.anchor2.parent,h=(this.anchor2.highestVert+this.anchor2.pitch)/2;if(this.above&&this.anchor2.stemDir==="up"&&!this.fixedY&&!l&&h<this.startY?(this.endY=h,this.endX+=Math.round(this.anchor2.w/2)):this.endY=this.above&&l?this.anchor2.highestVert:this.anchor2.pitch,this.anchor1.scalex===1){var s=!!this.anchor1.parent.beam,t=!!this.anchor2.parent.beam;if(s){var a=this.anchor1.parent===this.anchor1.parent.beam.elems[this.anchor1.parent.beam.elems.length-1];a||(this.above?this.startY=this.anchor1.parent.fixed.t:this.startY=this.anchor1.parent.fixed.b)}if(t){var n=this.anchor2.parent===this.anchor2.parent.beam.elems[0];n||(this.above?this.endY=this.anchor2.parent.fixed.t:this.endY=this.anchor2.parent.fixed.b)}}}else this.anchor1?this.startY=this.endY=this.anchor1.pitch:this.anchor2?this.startY=this.endY=this.anchor2.pitch:(this.startY=this.above?14:0,this.endY=this.above?14:0)},p.prototype.avoidCollisionAbove=function(){if(this.above){for(var l=-50,h=0;h<this.internalNotes.length;h++)this.internalNotes[h].highestVert>l&&(l=this.internalNotes[h].highestVert);l>this.startY&&l>this.endY&&(this.startY=this.endY=l-1)}},p.prototype.getYBounds=function(){var l=10,h=1e3;this.isTie?(this.calcTieDirection(),this.calcX(l,h),this.calcTieY()):(this.calcSlurDirection(),this.calcX(l,h),this.calcSlurY());var s,t;return this.above?(t=Math.min(this.startY,this.endY),s=t+3):(s=Math.min(this.startY,this.endY),t=s-3),[s,t]},y0=p,y0}var w0,Nn;function Tc(){if(Nn)return w0;Nn=1;var p=Cc(),l=kc(),h=_c(),s=ze(),t=Le(),a=js(),n=function(){this.startDiminuendoX=void 0,this.startCrescendoX=void 0,this.minTop=12,this.minBottom=0},i=function(o,r,c,e,u,m,b,x,T){for(var E,D=0;D<r.length;D++){if(r[D]==="staccato"||r[D]==="tenuto"||r[D]==="accent"&&!T){var F="scripts."+r[D];if(r[D]==="accent"&&(F="scripts.sforzato"),E===void 0?E=b==="down"?c+2:x-2:E=b==="down"?E+2:E-2,r[D]==="accent")b==="up"?E--:E++;else switch(E){case 2:case 4:case 6:case 8:case 10:b==="up"?E--:E++;break}c>9&&E++;var y=e/2;s.getSymbolAlign(F)!=="center"&&(y-=s.getSymbolWidth(F)/2),u.addFixedX(new t(F,y,s.getSymbolWidth(F),E))}if(r[D]==="slide"&&u.heads[0]){var A=u.heads[0].pitch;A-=2;var N=new t("",-m-15,0,A-1),M=new t("",-m-5,0,A+1);u.addFixedX(N),u.addFixedX(M),o.addOther(new a({anchor1:N,anchor2:M,fixedY:!0}))}}return E===void 0&&(E=c),{above:E,below:u.bottom}},f=function(o,r,c,e){for(var u=0;u<r.length;u++)switch(r[u]){case"p":case"mp":case"pp":case"ppp":case"pppp":case"f":case"ff":case"fff":case"ffff":case"sfz":case"mf":var m=new p(c,r[u],e);o.addOther(m)}},v=function(o,r,c,e,u){function m(){if(e.heads.length===0)return 10;for(var E=e.heads[0].pitch,D=1;D<e.heads.length;D++)E=Math.max(E,e.heads[D].pitch);return E}function b(){if(e.heads.length===0)return 2;for(var E=e.heads[0].pitch,D=1;D<e.heads.length;D++)E=Math.min(E,e.heads[D].pitch);return E}function x(E,D){var F=u==="down"?b()+1:m()+9;u!=="down"&&D===1&&F--;var y=c/2;y+=u==="down"?-5:3;for(var A=0;A<D;A++)F-=1,e.addFixedX(new t(E,y,s.getSymbolWidth(E),F))}for(var T=0;T<o.length;T++)switch(o[T]){case"/":x("flags.ugrace",1);break;case"//":x("flags.ugrace",2);break;case"///":x("flags.ugrace",3);break;case"////":x("flags.ugrace",4);break}},g=function(o,r,c,e,u,m,b,x){function T(M,L){M==="above"?e.above+=L:e.below-=L}function E(M){var L;return M==="above"?(L=e.above,L<m&&(L=m)):(L=e.below,L>b&&(L=b)),L}function D(M,L,B){var S=E(L),_=2,P=5;c.addFixedX(new t(M,r/2,0,S+_,{type:"decoration",klass:"ornament",thickness:3,anchor:B})),T(L,P)}function F(M,L){var B=r/2;s.getSymbolAlign(M)!=="center"&&(B-=s.getSymbolWidth(M)/2);var S=s.symbolHeightInPitches(M)+1,_=E(L);_=L==="above"?_+S/2:_-S/2,c.addFixedX(new t(M,B,s.getSymbolWidth(M),_,{klass:"ornament",thickness:s.symbolHeightInPitches(M),position:L})),T(L,S)}for(var y={"+":"scripts.stopped",open:"scripts.open",snap:"scripts.snap",wedge:"scripts.wedge",thumb:"scripts.thumb",shortphrase:"scripts.shortphrase",mediumphrase:"scripts.mediumphrase",longphrase:"scripts.longphrase",trill:"scripts.trill",trillh:"scripts.trill",roll:"scripts.roll",irishroll:"scripts.roll",marcato:"scripts.umarcato",dmarcato:"scripts.dmarcato",umarcato:"scripts.umarcato",turn:"scripts.turn",uppermordent:"scripts.prall",pralltriller:"scripts.prall",mordent:"scripts.mordent",lowermordent:"scripts.mordent",downbow:"scripts.downbow",upbow:"scripts.upbow",fermata:"scripts.ufermata",invertedfermata:"scripts.dfermata",breath:",",coda:"scripts.coda",segno:"scripts.segno"},A=!1,N=0;N<o.length;N++)switch(o[N]){case"0":case"1":case"2":case"3":case"4":case"5":case"D.C.":case"D.S.":D(o[N],u,"middle"),A=!0;break;case"D.C.alcoda":D("D.C. al coda",u,"end"),A=!0;break;case"D.C.alfine":D("D.C. al fine",u,"end"),A=!0;break;case"D.S.alcoda":D("D.S. al coda",u,"end"),A=!0;break;case"D.S.alfine":D("D.S. al fine",u,"end"),A=!0;break;case"fine":D("FINE",u,"middle"),A=!0;break;case"+":case"open":case"snap":case"wedge":case"thumb":case"shortphrase":case"mediumphrase":case"longphrase":case"trill":case"trillh":case"roll":case"irishroll":case"marcato":case"dmarcato":case"turn":case"uppermordent":case"pralltriller":case"mordent":case"lowermordent":case"downbow":case"upbow":case"fermata":case"breath":case"umarcato":case"coda":case"segno":F(y[o[N]],u),A=!0;break;case"invertedfermata":F(y[o[N]],"below"),A=!0;break;case"mark":c.klass="mark";break;case"accent":x&&(F("scripts.sforzato",u),A=!0);break}return A};function d(o,r,c){for(var e=0;e<o.length;e++)switch(o[e]){case"arpeggio":for(var u=r.abcelem.minpitch-1;u<=r.abcelem.maxpitch;u+=2)r.addExtra(new t("scripts.arpeggio",-s.getSymbolWidth("scripts.arpeggio")*2-c,0,u+2,{klass:"ornament",thickness:s.symbolHeightInPitches("scripts.arpeggio")}));break}}return n.prototype.dynamicDecoration=function(o,r,c,e){for(var u,m,b,x=0;x<r.length;x++)switch(r[x]){case"diminuendo(":this.startDiminuendoX=c,u=void 0;break;case"diminuendo)":u={start:this.startDiminuendoX,stop:c},this.startDiminuendoX=void 0;break;case"crescendo(":this.startCrescendoX=c,m=void 0;break;case"crescendo)":m={start:this.startCrescendoX,stop:c},this.startCrescendoX=void 0;break;case"~(":case"glissando(":this.startGlissandoX=c,b=void 0;break;case"~)":case"glissando)":b={start:this.startGlissandoX,stop:c},this.startGlissandoX=void 0;break}u&&o.addOther(new l(u.start,u.stop,">",e)),m&&o.addOther(new l(m.start,m.stop,"<",e)),b&&o.addOther(new h(b.start,b.stop))},n.prototype.createDecoration=function(o,r,c,e,u,m,b,x,T,E,D){T||(T={ornamentPosition:"above",volumePosition:E?"above":"below",dynamicPosition:E?"above":"below"}),f(o,r,u,T.volumePosition),this.dynamicDecoration(o,r,u,T.dynamicPosition),v(r,c,e,u,b);var F=i(o,r,c,e,u,m,b,x,D);F.above=Math.max(F.above,this.minTop),F.below=Math.min(F.below,x),g(r,e,u,F,T.ornamentPosition,this.minTop,x,D),d(r,u,m)},w0=n,w0}var x0,Ln;function Sc(){if(Ln)return x0;Ln=1;var p=function(h,s,t){this.type="EndingElem",this.text=h,this.anchor1=s,this.anchor2=t,this.endingHeightAbove=5,this.pitch=void 0};return x0=p,x0}var C0,Pn;function Ec(){if(Pn)return C0;Pn=1;var p=function(l){for(var h=0,s=0;s<l.voices.length;s++){var t=l.voices[s].staff;l.voices[s].duplicate||(h+=t.top,h+=-t.bottom)}return h};return C0=p,C0}var k0,qn;function Ac(){if(qn)return k0;qn=1;var p=Ec(),l=function(h){this.getTextSize=h,this.voices=[],this.staffs=[],this.brace=void 0,this.bracket=void 0};return l.prototype.setLimit=function(h,s){s.specialY[h]&&(s.staff.specialY[h]?s.staff.specialY[h]=Math.max(s.staff.specialY[h],s.specialY[h]):s.staff.specialY[h]=s.specialY[h])},l.prototype.addVoice=function(h,s,t){var a=this.voices.length;this.voices[a]=h,this.staffs[s]?this.staffs[s].voices.push(a):this.staffs[this.staffs.length]={top:10,bottom:2,lines:t,voices:[a],specialY:{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}},h.staff=this.staffs[s]},l.prototype.setHeight=function(){this.height=p(this)},l.prototype.setWidth=function(h){this.w=h;for(var s=0;s<this.voices.length;s++)this.voices[s].setWidth(h)},l.prototype.setStaffLimits=function(h){h.staff.top=Math.max(h.staff.top,h.top),h.staff.bottom=Math.min(h.staff.bottom,h.bottom),this.setLimit("tempoHeightAbove",h),this.setLimit("partHeightAbove",h),this.setLimit("volumeHeightAbove",h),this.setLimit("dynamicHeightAbove",h),this.setLimit("endingHeightAbove",h),this.setLimit("chordHeightAbove",h),this.setLimit("lyricHeightAbove",h),this.setLimit("lyricHeightBelow",h),this.setLimit("chordHeightBelow",h),this.setLimit("volumeHeightBelow",h),this.setLimit("dynamicHeightBelow",h)},k0=l,k0}var _0,Dn;function Mc(){if(Dn)return _0;Dn=1;var p=Ke(),l=Le(),h=function(t,a,n){this.type="TempoElement",this.tempo=t,this.tempo.type="tempo",this.tuneNumber=a,this.totalHeightInPitches=6,this.tempoHeightAbove=this.totalHeightInPitches,this.pitch=void 0,this.tempo.duration&&!this.tempo.suppressBpm&&(this.note=this.createNote(n,t,a))};return h.prototype.setX=function(s){this.x=s},h.prototype.createNote=function(s,t,a){var n=.75,i=t.duration[0],f=new p(t,i,1,"tempo",a),v,g,d;i<=1/32?(d="noteheads.quarter",g="flags.u32nd",v=0):i<=1/16?(d="noteheads.quarter",g="flags.u16th",v=0):i<=3/32?(d="noteheads.quarter",g="flags.u16nd",v=1):i<=1/8?(d="noteheads.quarter",g="flags.u8th",v=0):i<=3/16?(d="noteheads.quarter",g="flags.u8th",v=1):i<=1/4?(d="noteheads.quarter",v=0):i<=3/8?(d="noteheads.quarter",v=1):i<=1/2?(d="noteheads.half",v=0):i<=3/4?(d="noteheads.half",v=1):i<=1?(d="noteheads.whole",v=0):i<=1.5?(d="noteheads.whole",v=1):i<=2?(d="noteheads.dbl",v=0):(d="noteheads.dbl",v=1);var o=s(f,d,{verticalPos:0},{dir:"up",flag:g,dot:v,scale:n}),r=o.notehead;f.addHead(r);var c;if(d!=="noteheads.whole"&&d!=="noteheads.dbl"){var e=.3333333333333333*n,u=5*n,m=r.dx+r.w,b=-.6;c=new l(null,m,0,e,{type:"stem",pitch2:u,linewidth:b}),f.addRight(c)}return f},_0=h,_0}var T0,In;function Bc(){if(In)return T0;In=1;var p=function(h,s,t){this.type="TripletElem",this.anchor1=s,this.number=h,this.durationClass=("d"+Math.round(s.parent.durationClass*1e3)/1e3).replace(/\./,"-"),this.middleElems=[],this.flatBeams=t.flatBeams};return p.prototype.isClosed=function(){return!!this.anchor2},p.prototype.middleNote=function(l){this.middleElems.push(l)},p.prototype.setCloseAnchor=function(l){this.anchor2=l,(!this.anchor1.parent.beam||this.anchor1.stemDir==="up")&&(this.endingHeightAbove=4)},T0=p,T0}var S0,Fn;function Nc(){if(Fn)return S0;Fn=1;function p(h){switch(h){case"B#":return"H#";case"B":return"H";case"B":return"H";case"Bb":return"B";case"B":return"B"}return h}function l(h,s,t){var a=h.split(`
`);for(let n=0;n<a.length;n++){let f=a[n].match(/^([ABCDEFG][]?)?([^\/]+)?(\/([ABCDEFG][#b]?))?/);if(!f)continue;let v=f[1]||"",g=f[2]||"",d=f[4]||"";t&&(v=p(v),d=p(d));const o=s?"":"",r=d?"/"+d:"";a[n]=[v,g,r].join(o)}return a.join(`
`)}return S0=l,S0}var E0,On;function Lc(){if(On)return E0;On=1;var p=Le(),l=Se();const h=Nc();var s=function(a,n,i,f,v,g,d,o){for(var r=0;r<i.chord.length;r++){var c=i.chord[r].position,e=i.chord[r].rel_position,u=c==="left"||c==="right"||c==="below"||c==="above"||!!e,m,b;u?(m="annotationfont",b="abcjs-annotation"):(m="gchordfont",b="abcjs-chord");var x=a.attr(m,b),T=i.chord[r].name,E;if(typeof T=="string")E=t(T,c,e,u,m,b,x,a,n,i,f,v,g,d,o),f=E.roomTaken,v=E.roomTakenRight;else for(var D=0;D<T.length;D++)E=t(T[D].text,c,e,u,m,b,x,a,n,i,f,v,g,d,o),f=E.roomTaken,v=E.roomTakenRight}return{roomTaken:f,roomTakenRight:v}};function t(a,n,i,f,v,g,d,o,r,c,e,u,m,b,x){for(var T=a.split(`
`),E=T.length-1;E>=0;E--){var D=T[E],F=0,y;f||(D=h(D,b,x));var A=o.calc(D,v,g),N=A.width,M=A.height/l.STEP;switch(n){case"left":e+=N+7,F=-e,y=c.averagepitch,r.addExtra(new p(D,F,N+4,y,{type:"text",height:M,dim:d,position:"left"}));break;case"right":u+=4,F=u,y=c.averagepitch,r.addRight(new p(D,F,N+4,y,{type:"text",height:M,dim:d,position:"right"}));break;case"below":r.addRight(new p(D,0,0,void 0,{type:"text",position:"below",height:M,dim:d,realWidth:N}));break;case"above":r.addRight(new p(D,0,0,void 0,{type:"text",position:"above",height:M,dim:d,realWidth:N}));break;default:if(i){var L=i.y+3*l.STEP;r.addRight(new p(D,F+i.x,0,c.minpitch+L/l.STEP,{position:"relative",type:"text",height:M,dim:d}))}else{var B="above";c.positioning&&c.positioning.chordPosition&&(B=c.positioning.chordPosition),B!=="hidden"&&r.addCentered(new p(D,m/2,N,void 0,{type:"chord",position:B,height:M,dim:d,realWidth:N}))}}}return{roomTaken:e,roomTakenRight:u}}return E0=s,E0}var A0,Rn;function Pc(){if(Rn)return A0;Rn=1;var p=Ke(),l=gc(),h=bc(),s=mc(),t=yc(),a=wc(),n=xc(),i=Tc(),f=Sc(),v=ze(),g=Le(),d=Se(),o=Ac(),r=Mc(),c=js(),e=Bc(),u=Ys(),m=Lc(),b=Hs(),x=Fe(),T=function(S){var _=0;return S.duration&&(_=S.duration),_},E=!1,D={rest:{0:"rests.whole",1:"rests.half",2:"rests.quarter",3:"rests.8th",4:"rests.16th",5:"rests.32nd",6:"rests.64th",7:"rests.128th",multi:"rests.multimeasure"},note:{"-1":"noteheads.dbl",0:"noteheads.whole",1:"noteheads.half",2:"noteheads.quarter",3:"noteheads.quarter",4:"noteheads.quarter",5:"noteheads.quarter",6:"noteheads.quarter",7:"noteheads.quarter",nostem:"noteheads.quarter"},rhythm:{"-1":"noteheads.slash.whole",0:"noteheads.slash.whole",1:"noteheads.slash.whole",2:"noteheads.slash.quarter",3:"noteheads.slash.quarter",4:"noteheads.slash.quarter",5:"noteheads.slash.quarter",6:"noteheads.slash.quarter",7:"noteheads.slash.quarter",nostem:"noteheads.slash.nostem"},x:{"-1":"noteheads.indeterminate",0:"noteheads.indeterminate",1:"noteheads.indeterminate",2:"noteheads.indeterminate",3:"noteheads.indeterminate",4:"noteheads.indeterminate",5:"noteheads.indeterminate",6:"noteheads.indeterminate",7:"noteheads.indeterminate",nostem:"noteheads.indeterminate"},harmonic:{"-1":"noteheads.harmonic.quarter",0:"noteheads.harmonic.quarter",1:"noteheads.harmonic.quarter",2:"noteheads.harmonic.quarter",3:"noteheads.harmonic.quarter",4:"noteheads.harmonic.quarter",5:"noteheads.harmonic.quarter",6:"noteheads.harmonic.quarter",7:"noteheads.harmonic.quarter",nostem:"noteheads.harmonic.quarter"},triangle:{"-1":"noteheads.triangle.quarter",0:"noteheads.triangle.quarter",1:"noteheads.triangle.quarter",2:"noteheads.triangle.quarter",3:"noteheads.triangle.quarter",4:"noteheads.triangle.quarter",5:"noteheads.triangle.quarter",6:"noteheads.triangle.quarter",7:"noteheads.triangle.quarter",nostem:"noteheads.triangle.quarter"},uflags:{3:"flags.u8th",4:"flags.u16th",5:"flags.u32nd",6:"flags.u64th"},dflags:{3:"flags.d8th",4:"flags.d16th",5:"flags.d32nd",6:"flags.d64th"}},F=function(S,_,P){this.decoration=new i,this.getTextSize=S,this.tuneNumber=_,this.isBagpipes=P.bagpipes,this.flatBeams=P.flatbeams,this.graceSlurs=P.graceSlurs,this.percmap=P.percmap,this.initialClef=P.initialClef,this.jazzchords=!!P.jazzchords,this.accentAbove=!!P.accentAbove,this.germanAlphabet=!!P.germanAlphabet,this.reset()};F.prototype.reset=function(){this.slurs={},this.ties=[],this.voiceScale=1,this.voiceColor=void 0,this.slursbyvoice={},this.tiesbyvoice={},this.endingsbyvoice={},this.scaleByVoice={},this.colorByVoice={},this.tripletmultiplier=1,this.abcline=void 0,this.accidentalSlot=void 0,this.accidentalshiftx=void 0,this.dotshiftx=void 0,this.hasVocals=!1,this.minY=void 0,this.partstartelem=void 0,this.startlimitelem=void 0,this.stemdir=void 0},F.prototype.setStemHeight=function(S){this.stemHeight=Math.round(S*10/d.STEP)/10},F.prototype.getCurrentVoiceId=function(S,_){return"s"+S+"v"+_},F.prototype.pushCrossLineElems=function(S,_){this.slursbyvoice[this.getCurrentVoiceId(S,_)]=this.slurs,this.tiesbyvoice[this.getCurrentVoiceId(S,_)]=this.ties,this.endingsbyvoice[this.getCurrentVoiceId(S,_)]=this.partstartelem,this.scaleByVoice[this.getCurrentVoiceId(S,_)]=this.voiceScale,this.voiceColor&&(this.colorByVoice[this.getCurrentVoiceId(S,_)]=this.voiceColor)},F.prototype.popCrossLineElems=function(S,_){this.slurs=this.slursbyvoice[this.getCurrentVoiceId(S,_)]||{},this.ties=this.tiesbyvoice[this.getCurrentVoiceId(S,_)]||[],this.partstartelem=this.endingsbyvoice[this.getCurrentVoiceId(S,_)],this.voiceScale=this.scaleByVoice[this.getCurrentVoiceId(S,_)],this.voiceScale===void 0&&(this.voiceScale=1),this.voiceColor=this.colorByVoice[this.getCurrentVoiceId(S,_)]},F.prototype.containsLyrics=function(S){for(var _=0;_<S.length;_++)for(var P=0;P<S[_].voices.length;P++)for(var O=0;O<S[_].voices[P].length;O++){var I=S[_].voices[P][O];if(I.lyric){(!I.positioning||I.positioning.vocalPosition==="below")&&(this.hasVocals=!0);return}}},F.prototype.createABCLine=function(S,_,P){this.minY=2,this.containsLyrics(S);var O=new o(this.getTextSize);this.tempoSet=!1;for(var I=0;I<S.length;I++)E&&this.restoreState(),E=!1,this.createABCStaff(O,S[I],_,I,P);return O},F.prototype.createABCStaff=function(S,_,P,O,I){S.getTextSize.updateFonts(_);for(var w=0;w<_.voices.length;w++){var C=new u(w,_.voices.length);w===0?(C.barfrom=_.connectBarLines==="start"||_.connectBarLines==="continue",C.barto=_.connectBarLines==="continue"||_.connectBarLines==="end"):C.duplicate=!0,_.title&&_.title[w]&&(C.header=_.title[w].replace(/\\n/g,`
`),C.headerPosition=6+S.getTextSize.baselineToCenter(C.header,"voicefont","staff-extra voice-name",w,_.voices.length)/d.STEP),_.clef&&_.clef.type==="perc"&&(C.isPercussion=!0);var k=(!this.initialClef||I===0)&&s(_.clef,this.tuneNumber);k&&(w===0&&_.barNumber&&this.addMeasureNumber(_.barNumber,k),C.addChild(k),this.startlimitelem=k);var q=t(_.key,this.tuneNumber);if(q&&(C.addChild(q),this.startlimitelem=q),_.meter){_.meter.type==="specified"?this.measureLength=_.meter.value[0].num/_.meter.value[0].den:this.measureLength=1;var R=n(_.meter,this.tuneNumber);C.addChild(R),this.startlimitelem=R}C.duplicate&&(C.children=[]);var z=_.clef.stafflines||_.clef.stafflines===0?_.clef.stafflines:5;S.addVoice(C,O,z);var H=z===1;this.createABCVoice(_.voices[w],P,O,w,H,C),S.setStaffLimits(C),w===0&&(_.brace==="start"||!S.brace&&_.brace?(S.brace||(S.brace=[]),S.brace.push(new h(C,"brace"))):_.brace==="end"&&S.brace?S.brace[S.brace.length-1].setBottomStaff(C):_.brace==="continue"&&S.brace&&S.brace[S.brace.length-1].continuing(C),_.bracket==="start"||!S.bracket&&_.bracket?(S.bracket||(S.bracket=[]),S.bracket.push(new h(C,"bracket"))):_.bracket==="end"&&S.bracket?S.bracket[S.bracket.length-1].setBottomStaff(C):_.bracket==="continue"&&S.bracket&&S.bracket[S.bracket.length-1].continuing(C))}};function y(S,_){var P=S[_];if(P.el_type!=="note"||!P.startBeam||P.endBeam)return{count:1,elem:P};for(var O=[];_<S.length&&S[_].el_type==="note"&&(O.push(S[_]),!S[_].endBeam);)_++;return{count:O.length,elem:O}}F.prototype.createABCVoice=function(S,_,P,O,I,w){this.popCrossLineElems(P,O),this.stemdir=this.isBagpipes?"down":null,this.abcline=S,this.partstartelem&&(this.partstartelem=new f("",null,null),w.addOther(this.partstartelem));var C=w.voicetotal<2?-1:w.voicenumber;for(var k in this.slurs)this.slurs.hasOwnProperty(k)&&(this.slurs[k]=new c({force:this.slurs[k].force,voiceNumber:C,stemDir:this.slurs[k].stemDir,style:this.slurs[k].dotted}),E&&this.slurs[k].setHint(),w.addOther(this.slurs[k]));for(var q=0;q<this.ties.length;q++)this.ties[q]=new c({force:this.ties[q].force,stemDir:this.ties[q].stemDir,voiceNumber:C,style:this.ties[q].dotted}),E&&this.ties[q].setHint(),w.addOther(this.ties[q]);for(var R=0;R<this.abcline.length;R++)A(this.abcline[R]),this.minY=Math.min(this.abcline[R].minpitch,this.minY);for(var z=P===0,H=0;H<this.abcline.length;){var X=y(this.abcline,H),Q=this.createABCElement(z,I,w,X.elem);if(Q)for(q=0;q<Q.length;q++){if(!this.tempoSet&&_&&!_.suppress){this.tempoSet=!0;var U=new p(_,0,0,"tempo",this.tuneNumber,{});U.addFixedX(new r(_,this.tuneNumber,a)),w.addChild(U)}w.addChild(Q[q])}H+=X.count}this.pushCrossLineElems(P,O)},F.prototype.saveState=function(){this.tiesSave=x.cloneArray(this.ties),this.slursSave=x.cloneHashOfHash(this.slurs),this.slursbyvoiceSave=x.cloneHashOfHash(this.slursbyvoice),this.tiesbyvoiceSave=x.cloneHashOfArrayOfHash(this.tiesbyvoice)},F.prototype.restoreState=function(){this.ties=x.cloneArray(this.tiesSave),this.slurs=x.cloneHashOfHash(this.slursSave),this.slursbyvoice=x.cloneHashOfHash(this.slursbyvoiceSave),this.tiesbyvoice=x.cloneHashOfArrayOfHash(this.tiesbyvoiceSave)},F.prototype.createABCElement=function(S,_,P,O){var I=[];switch(O.el_type){case void 0:I=this.createBeam(_,P,O);break;case"note":I[0]=this.createNote(O,!1,_,P),this.triplet&&this.triplet.isClosed()&&(P.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1);break;case"bar":I[0]=this.createBarLine(P,O,S),P.duplicate&&I.length>0&&(I[0].invisible=!0);break;case"meter":I[0]=n(O,this.tuneNumber),this.startlimitelem=I[0],P.duplicate&&I.length>0&&(I[0].invisible=!0);break;case"clef":if(I[0]=s(O,this.tuneNumber),!I[0])return null;P.duplicate&&I.length>0&&(I[0].invisible=!0);break;case"key":var w=t(O,this.tuneNumber);w&&(I[0]=w,this.startlimitelem=I[0]),P.duplicate&&I.length>0&&(I[0].invisible=!0);break;case"stem":this.stemdir=O.direction==="auto"?void 0:O.direction;break;case"part":var C=new p(O,0,0,"part",this.tuneNumber),k=this.getTextSize.calc(O.title,"partsfont","part");C.addFixedX(new g(O.title,0,0,void 0,{type:"part",height:k.height/d.STEP})),I[0]=C;break;case"tempo":var q=new p(O,0,0,"tempo",this.tuneNumber);q.addFixedX(new r(O,this.tuneNumber,a)),I[0]=q;break;case"style":O.head==="normal"?delete this.style:this.style=O.head;break;case"hint":E=!0,this.saveState();break;case"midi":break;case"scale":this.voiceScale=O.size;break;case"color":this.voiceColor=O.color,P.color=this.voiceColor;break;default:var R=new p(O,0,0,"unsupported",this.tuneNumber);R.addFixed(new g("element type "+O.el_type,0,0,void 0,{type:"debug"})),I[0]=R}return I};function A(S){if(S.pitches){N(S);for(var _=0,P=0;P<S.pitches.length;P++)_+=S.pitches[P].verticalPos;S.averagepitch=_/S.pitches.length,S.minpitch=S.pitches[0].verticalPos,S.maxpitch=S.pitches[S.pitches.length-1].verticalPos}}F.prototype.createBeam=function(S,_,P){var O=[],I=new l(this.stemHeight*this.voiceScale,this.stemdir,this.flatBeams,P[0]);E&&I.setHint();for(var w=0;w<P.length;w++)I.runningDirection(P[w]);I.setStemDirection();var C=this.stemdir;for(this.stemdir=I.stemsUp?"up":"down",w=0;w<P.length;w++){var k=P[w],q=this.createNote(k,!0,S,_);O.push(q),I.add(q),this.triplet&&this.triplet.isClosed()&&(_.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1)}return I.calcDir(),_.addBeam(I),this.stemdir=C,O};var N=function(S){var _;do{_=!0;for(var P=0;P<S.pitches.length-1;P++)if(S.pitches[P].pitch>S.pitches[P+1].pitch){_=!1;var O=S.pitches[P];S.pitches[P]=S.pitches[P+1],S.pitches[P+1]=O}}while(!_)},M=function(S,_,P,O,I,w,C,k,q){for(var R=P;R>11;R--)R%2===0&&!O&&S.addFixed(new g(null,k,(I+4)*q,R,{type:"ledger"}));for(R=_;R<1;R++)R%2===0&&!O&&S.addFixed(new g(null,k,(I+4)*q,R,{type:"ledger"}));for(R=0;R<w.length;R++){var z=I;C==="down"&&(z=-z),S.addFixed(new g(null,z+k,(I+4)*q,w[R],{type:"ledger"}))}};F.prototype.addGraceNotes=function(S,_,P,O,I,w,C){var k=.6,q=3.5/5;I=Math.round(I*q);var R=null,z;S.gracenotes.length>1&&(R=new l(I,"grace",w),E&&R.setHint(),R.mainNote=P);var H,X=[];for(H=S.gracenotes.length-1;H>=0;H--)C+=10,X[H]=C,S.gracenotes[H].accidental&&(C+=7);for(H=0;H<S.gracenotes.length;H++){var Q=S.gracenotes[H].verticalPos;z=R?null:D.uflags[w?5:3];var U=[],ee=a(P,"noteheads.quarter",S.gracenotes[H],{dir:"up",headx:-X[H],extrax:-X[H],flag:z,scale:k*this.voiceScale,accidentalSlot:U});ee.notehead.highestVert=ee.notehead.pitch+I;var te=ee.notehead;if(this.addSlursAndTies(P,S.gracenotes[H],te,_,"up",!0),P.addExtra(te),S.gracenotes[H].acciaccatura){var ne=S.gracenotes[H].verticalPos+7*k,V=R?5:6;P.addRight(new g("flags.ugrace",-X[H]+V,0,ne,{scalex:k,scaley:k}))}if(R){var ae=S.gracenotes[H].duration/2;w&&(ae/=2);var K={heads:[te],abcelem:{averagepitch:Q,minpitch:Q,maxpitch:Q,duration:ae}};R.add(K)}else{var se=Q+.3333333333333333*k,ce=Q+7*k,ue=te.dx+te.w,le=-.6;P.addExtra(new g(null,ue,0,se,{type:"stem",pitch2:ce,linewidth:le}))}M(P,Q,Q,!1,v.getSymbolWidth("noteheads.quarter"),[],!0,te.dx-1,.6);var ge=S.rest&&(S.rest.type==="spacer"||S.rest.type==="invisible");H===0&&!w&&this.graceSlurs&&!ge&&_.addOther(new c({anchor1:te,anchor2:O,isGrace:!0}))}return R&&(R.calcDir(),_.addBeam(R)),C};function L(S,_,P,O,I,w,C,k,q){var R,z=7,H,X,Q;switch(I&&(w==="down"&&(z=3),w==="up"&&(z=11)),C&&(P<.5||P<1?z=7:z=5),_.rest.type){case"whole":R=D.rest[0],_.averagepitch=z,_.minpitch=z,_.maxpitch=z,O=0;break;case"rest":_.style==="rhythm"?R=D.rhythm[-k]:R=D.rest[-k],_.averagepitch=z,_.minpitch=z,_.maxpitch=z;break;case"invisible":case"invisible-multimeasure":case"spacer":R="",_.averagepitch=z,_.minpitch=z,_.maxpitch=z;break;case"multimeasure":R=D.rest.multi,_.averagepitch=z,_.minpitch=z,_.maxpitch=z,O=0;var U=v.getSymbolWidth(R);S.addHead(new g(R,U,U*2,7));var ee=new g(""+_.rest.text,U,U,16,{type:"multimeasure-text"});S.addExtra(ee)}if(_.rest.type.indexOf("multimeasure")<0&&_.rest.type!=="invisible"){var te=a(S,R,{verticalPos:z},{dot:O,scale:q});H=te.notehead,H&&(S.addHead(H),X=te.accidentalshiftx,Q=te.dotshiftx)}return{noteHead:H,roomTaken:X,roomTakenRight:Q}}function B(S,_){for(var P=0;P<S.length;P++)if(JSON.stringify(S[P])===JSON.stringify(_))return;S.push(_)}return F.prototype.addNoteToAbcElement=function(S,_,P,O,I,w,C,k,q){var R=0,z,H=0,X=0,Q,U,ee=[],te=[],ne=0,V=_.averagepitch>=6?"down":"up";O&&(V=O),I=_.style?_.style:I,(!I||I==="normal")&&(I="note");var ae;w?ae=D[I].nostem:ae=D[I][-C],ae||console.log("noteSymbol:",I,C,w);var K;for(K=V==="down"?_.pitches.length-2:1;V==="down"?K>=0:K<_.pitches.length;K=V==="down"?K-1:K+1){var se=_.pitches[V==="down"?K+1:K-1],ce=_.pitches[K],ue=V==="down"?se.pitch-ce.pitch:ce.pitch-se.pitch;ue<=1&&!se.printer_shift&&(ce.printer_shift=ue?"different":"same",(ce.verticalPos>11||ce.verticalPos<1)&&ee.push(ce.verticalPos-ce.verticalPos%2),V==="down"?H=v.getSymbolWidth(ae)+2:R=v.getSymbolWidth(ae)+2)}var le=_.pitches.length;for(K=0;K<_.pitches.length;K++){if(!k){var ge;V==="down"&&K!==0||V==="up"&&K!==le-1?ge=null:ge=D[V==="down"?"dflags":"uflags"][-C]}var ve;if(_.pitches[K].style)ve=D[_.pitches[K].style][-C];else if(q.isPercussion&&this.percmap){ve=ae;var we=this.percmap[b(_.pitches[K])];we&&we.noteHead&&D[we.noteHead]&&(ve=D[we.noteHead][-C])}else ve=ae;_.pitches[K].highestVert=_.pitches[K].verticalPos;var Y=(O==="up"||V==="up")&&K===0,$=(O==="down"||V==="down")&&K===le-1;if(Y||$){if((_.startSlur||le===1)&&(_.pitches[K].highestVert=_.pitches[le-1].verticalPos,T(_)<1&&(O==="up"||V==="up")&&(_.pitches[K].highestVert+=6)),_.startSlur)for(_.pitches[K].startSlur||(_.pitches[K].startSlur=[]),U=0;U<_.startSlur.length;U++)B(_.pitches[K].startSlur,_.startSlur[U]);if(_.endSlur)for(_.pitches[K].highestVert=_.pitches[le-1].verticalPos,T(_)<1&&(O==="up"||V==="up")&&(_.pitches[K].highestVert+=6),_.pitches[K].endSlur||(_.pitches[K].endSlur=[]),U=0;U<_.endSlur.length;U++)B(_.pitches[K].endSlur,_.endSlur[U])}var G=!k&&C<=-1,W=a(S,ve,_.pitches[K],{dir:V,extrax:-H,flag:ge,dot:P,dotshiftx:R,scale:this.voiceScale,accidentalSlot:te,shouldExtendStem:!O,printAccidentals:!q.isPercussion});ne=Math.max(v.getSymbolWidth(ve),ne),S.extraw-=W.extraLeft,z=W.notehead,z&&(this.addSlursAndTies(S,_.pitches[K],z,q,G?V:null,!1),_.gracenotes&&_.gracenotes.length>0&&(z.bottom=z.bottom-1),S.addHead(z)),H+=W.accidentalshiftx,X=Math.max(X,W.dotshiftx)}if(G){var j=Math.round(70*this.voiceScale)/10,J=V==="down"?_.minpitch-j:_.minpitch+1/3;J>6&&!O&&(J=6);var re=V==="down"?_.maxpitch-1/3:_.maxpitch+j;re<6&&!O&&(re=6);var fe=V==="down"||S.heads.length===0?0:S.heads[0].w,Z=V==="down"?1:-1;z&&z.c==="noteheads.slash.quarter"&&(V==="down"?re-=1:J+=1),z&&z.c==="noteheads.triangle.quarter"&&(V==="down"?re-=.7:J-=1.2),S.addRight(new g(null,fe,0,J,{type:"stem",pitch2:re,linewidth:Z,bottom:J-1})),Q=Math.min(J,re)}return{noteHead:z,roomTaken:H,roomTakenRight:X,min:Q,additionalLedgers:ee,dir:V,symbolWidth:ne}},F.prototype.addLyric=function(S,_){var P="";_.lyric.forEach(function(w){var C=w.divider===" "?"":w.divider;P+=w.syllable+C+`
`});var O=this.getTextSize.calc(P,"vocalfont","lyric"),I=_.positioning?_.positioning.vocalPosition:"below";S.addCentered(new g(P,0,O.width,void 0,{type:"lyric",position:I,height:O.height/d.STEP,dim:this.getTextSize.attr("vocalfont","lyric")}))},F.prototype.createNote=function(S,_,P,O){var I=null,w=0,C=0,k=0,q=[],R,z=T(S),H=!1;z===0&&(H=!0,z=.25,_=!0);for(var X=Math.floor(Math.log(z)/Math.log(2)),Q=0,U=Math.pow(2,X),ee=U/2;U<z;Q++,U+=ee,ee/=2);S.startTriplet&&(this.tripletmultiplier=S.tripletMultiplier);var te=z*this.tripletmultiplier;S.rest&&S.rest.type==="multimeasure"&&(te=1),S.rest&&S.rest.type==="invisible-multimeasure"&&(te=this.measureLength*S.rest.text);var ne=S.rest?"rest":"note",V=new p(S,te,1,ne,this.tuneNumber,{durationClassOveride:S.duration*this.tripletmultiplier});if(E&&V.setHint(),S.rest){this.measureLength===z&&S.rest.type!=="invisible"&&S.rest.type!=="spacer"&&S.rest.type.indexOf("multimeasure")<0&&(S.rest.type="whole");var ae=L(V,S,z,Q,O.voicetotal>1,this.stemdir,P,X,this.voiceScale);I=ae.noteHead,w=ae.roomTaken,C=ae.roomTakenRight}else{var K=this.addNoteToAbcElement(V,S,Q,this.stemdir,this.style,H,X,_,O);K.min!==void 0&&(this.minY=Math.min(K.min,this.minY)),I=K.noteHead,w=K.roomTaken,C=K.roomTakenRight,q=K.additionalLedgers,R=K.dir,k=K.symbolWidth}if(S.lyric!==void 0&&this.addLyric(V,S),S.gracenotes!==void 0&&(w+=this.addGraceNotes(S,O,V,I,this.stemHeight*this.voiceScale,this.isBagpipes,w)),S.decoration){var se=_&&R!=="up"?Math.min(-3,V.bottom-6):V.bottom;this.decoration.createDecoration(O,S.decoration,V.top,I?I.w:0,V,w,R,se,S.positioning,this.hasVocals,this.accentAbove)}if(S.barNumber&&V.addFixed(new g(S.barNumber,-10,0,0,{type:"barNumber"})),M(V,S.minpitch,S.maxpitch,S.rest,k,q,R,-2,1),S.chord!==void 0){var ce=m(this.getTextSize,V,S,w,C,k,this.jazzchords,this.germanAlphabet);w=ce.roomTaken,C=ce.roomTakenRight}return S.startTriplet&&(this.triplet=new e(S.startTriplet,I,{flatBeams:this.flatBeams})),S.endTriplet&&this.triplet&&this.triplet.setCloseAnchor(I),this.triplet&&!S.startTriplet&&!S.endTriplet&&!(S.rest&&S.rest.type==="spacer")&&this.triplet.middleNote(I),V},F.prototype.addSlursAndTies=function(S,_,P,O,I,w){if(_.endTie&&this.ties.length>0){for(var C=!1,k=0;k<this.ties.length;k++)if(this.ties[k].anchor1&&this.ties[k].anchor1.pitch===P.pitch){this.ties[k].setEndAnchor(P),O.setRange(this.ties[k]),this.ties.splice(k,1),C=!0;break}C||(this.ties[0].setEndAnchor(P),O.setRange(this.ties[0]),this.ties.splice(0,1))}var q=O.voicetotal<2?-1:O.voicenumber;if(_.startTie){var R=new c({anchor1:P,force:this.stemdir==="down"||this.stemdir==="up",stemDir:this.stemdir,isGrace:w,voiceNumber:q,style:_.startTie.style});E&&R.setHint(),this.ties[this.ties.length]=R,O.addOther(R),S.startTie=!0}var z,H;if(_.endSlur)for(var X=0;X<_.endSlur.length;X++)H=_.endSlur[X],this.slurs[H]?(z=this.slurs[H],z.setEndAnchor(P),O.setRange(z),delete this.slurs[H]):(z=new c({anchor2:P,stemDir:this.stemdir,voiceNumber:q}),E&&z.setHint(),O.addOther(z)),this.startlimitelem&&z.setStartX(this.startlimitelem);else if(!w)for(var Q in this.slurs)this.slurs.hasOwnProperty(Q)&&this.slurs[Q].addInternalNote(P);if(_.startSlur)for(X=0;X<_.startSlur.length;X++)H=_.startSlur[X].label,z=new c({anchor1:P,stemDir:this.stemdir,voiceNumber:q,style:_.startSlur[X].style}),E&&z.setHint(),this.slurs[H]=z,O.addOther(z)},F.prototype.addMeasureNumber=function(S,_){var P=this.getTextSize.calc(S,"measurefont","bar-number"),O=0;_.isClef&&(O+=P.width/2);var I=P.width>10&&_.abcelem.type==="treble"?13.5:11;_.addFixed(new g(S,O,P.width,I+P.height/d.STEP,{type:"barNumber",dim:this.getTextSize.attr("measurefont","bar-number")}))},F.prototype.createBarLine=function(S,_,P){var O=new p(_,0,10,"bar",this.tuneNumber),I=null,w=0;_.barNumber&&this.addMeasureNumber(_.barNumber,O);var C=_.type==="bar_right_repeat"||_.type==="bar_dbl_repeat",k=_.type!=="bar_left_repeat"&&_.type!=="bar_thick_thin"&&_.type!=="bar_invisible",q=_.type==="bar_right_repeat"||_.type==="bar_dbl_repeat"||_.type==="bar_left_repeat"||_.type==="bar_thin_thick"||_.type==="bar_thick_thin",R=_.type==="bar_left_repeat"||_.type==="bar_thick_thin"||_.type==="bar_thin_thin"||_.type==="bar_dbl_repeat",z=_.type==="bar_left_repeat"||_.type==="bar_dbl_repeat";if(C||z){for(var H in this.slurs)this.slurs.hasOwnProperty(H)&&this.slurs[H].setEndX(O);this.startlimitelem=O}if(C&&(O.addRight(new g("dots.dot",w,1,7)),O.addRight(new g("dots.dot",w,1,5)),w+=6),k&&(I=new g(null,w,1,2,{type:"bar",pitch2:10,linewidth:.6}),O.addRight(I)),_.type==="bar_invisible"&&(I=new g(null,w,1,2,{type:"none",pitch2:10,linewidth:.6}),O.addRight(I)),_.decoration&&this.decoration.createDecoration(S,_.decoration,12,q?3:1,O,0,"down",2,_.positioning,this.hasVocals,this.accentAbove),q&&(w+=4,I=new g(null,w,4,2,{type:"bar",pitch2:10,linewidth:4}),O.addRight(I),w+=5),this.partstartelem&&_.endEnding&&(this.partstartelem.anchor2=I,this.partstartelem=null),R&&(w+=3,I=new g(null,w,1,2,{type:"bar",pitch2:10,linewidth:.6}),O.addRight(I)),z&&(w+=3,O.addRight(new g("dots.dot",w,1,7)),O.addRight(new g("dots.dot",w,1,5))),_.startEnding&&P&&S.voicenumber===0){var X=this.getTextSize.calc(_.startEnding,"repeatfont","").width;O.minspacing+=X+10,this.partstartelem=new f(_.startEnding,I,null),S.addOther(this.partstartelem)}return O.extraw-=5,_.chord!==void 0&&m(this.getTextSize,O,_,0,0,0,!1,this.germanAlphabet),O},A0=F,A0}var M0,Hn;function qc(){if(Hn)return M0;Hn=1;var p="http://www.w3.org/2000/svg";function l(n){this.svg=a(),this.currentGroup=[],n.appendChild(this.svg)}l.prototype.clear=function(){if(this.svg){var n=this.svg.parentNode;this.svg=a(),this.currentGroup=[],n&&(n.innerHTML="",n.appendChild(this.svg))}},l.prototype.setTitle=function(n){var i=document.createElement("title"),f=document.createTextNode(n);i.appendChild(f),this.svg.insertBefore(i,this.svg.firstChild)},l.prototype.setResponsiveWidth=function(n,i){if(this.svg.setAttribute("viewBox","0 0 "+n+" "+i),this.svg.setAttribute("preserveAspectRatio","xMinYMin meet"),this.svg.removeAttribute("height"),this.svg.removeAttribute("width"),this.svg.style.display="inline-block",this.svg.style.position="absolute",this.svg.style.top="0",this.svg.style.left="0",this.svg.parentNode){var f=this.svg.parentNode.getAttribute("class");f?f.indexOf("abcjs-container")<0&&this.svg.parentNode.setAttribute("class",f+" abcjs-container"):this.svg.parentNode.setAttribute("class","abcjs-container"),this.svg.parentNode.style.display="inline-block",this.svg.parentNode.style.position="relative",this.svg.parentNode.style.width="100%";var v=i/n*100;this.svg.parentNode.style["padding-bottom"]=v+"%",this.svg.parentNode.style["vertical-align"]="middle",this.svg.parentNode.style.overflow="hidden"}},l.prototype.setSize=function(n,i){this.svg.setAttribute("width",n),this.svg.setAttribute("height",i)},l.prototype.setAttribute=function(n,i){this.svg.setAttribute(n,i)},l.prototype.setScale=function(n){n!==1?(this.svg.style.transform="scale("+n+","+n+")",this.svg.style["-ms-transform"]="scale("+n+","+n+")",this.svg.style["-webkit-transform"]="scale("+n+","+n+")",this.svg.style["transform-origin"]="0 0",this.svg.style["-ms-transform-origin-x"]="0",this.svg.style["-ms-transform-origin-y"]="0",this.svg.style["-webkit-transform-origin-x"]="0",this.svg.style["-webkit-transform-origin-y"]="0"):(this.svg.style.transform="",this.svg.style["-ms-transform"]="",this.svg.style["-webkit-transform"]="")},l.prototype.insertStyles=function(n){var i=document.createElementNS(p,"style");i.textContent=n,this.svg.insertBefore(i,this.svg.firstChild)},l.prototype.setParentStyles=function(n){for(var i in n)n.hasOwnProperty(i)&&this.svg.parentNode&&(this.svg.parentNode.style[i]=n[i]);if(this.dummySvg){var f=document.querySelector("body");f.removeChild(this.dummySvg),this.dummySvg=null}};function h(n,i,f){var v=f-n;return"M "+n+" "+i+" l "+v+" 0 l 0 1  l "+-v+" 0  z "}function s(n,i,f){var v=f-i;return"M "+n+" "+i+" l 0 "+v+" l 1 0  l 0 "+-v+"  z "}l.prototype.rect=function(n){var i=[],f=n.x,v=n.y,g=n.x+n.width,d=n.y+n.height;return i.push(h(f,v,g)),i.push(h(f,d,g)),i.push(s(g,v,d)),i.push(s(f,d,v)),this.path({path:i.join(" "),stroke:"none","data-name":n["data-name"]})},l.prototype.dottedLine=function(n){var i=document.createElementNS(p,"line");i.setAttribute("x1",n.x1),i.setAttribute("x2",n.x2),i.setAttribute("y1",n.y1),i.setAttribute("y2",n.y2),i.setAttribute("stroke",n.stroke),i.setAttribute("stroke-dasharray","5,5"),this.svg.insertBefore(i,this.svg.firstChild)},l.prototype.rectBeneath=function(n){var i=document.createElementNS(p,"rect");i.setAttribute("x",n.x),i.setAttribute("width",n.width),i.setAttribute("y",n.y),i.setAttribute("height",n.height),n.stroke&&i.setAttribute("stroke",n.stroke),n["stroke-opacity"]&&i.setAttribute("stroke-opacity",n["stroke-opacity"]),n.fill&&i.setAttribute("fill",n.fill),n["fill-opacity"]&&i.setAttribute("fill-opacity",n["fill-opacity"]),this.svg.insertBefore(i,this.svg.firstChild)},l.prototype.text=function(n,i,f){var v=document.createElementNS(p,"text");v.setAttribute("stroke","none");for(var g in i)i.hasOwnProperty(g)&&v.setAttribute(g,i[g]);for(var d=i["data-name"]=="free-text",o=(""+n).split(`
`),r=0;r<o.length;r++)if(!(d&&o[r]=="")){var c=document.createElementNS(p,"tspan");if(c.setAttribute("x",i.x?i.x:0),r!==0&&c.setAttribute("dy","1.2em"),o[r].indexOf("")!==-1){var e=o[r].split("");if(c.textContent=e[0],e[1]){var u=document.createElementNS(p,"tspan");u.setAttribute("dy","-0.3em"),u.setAttribute("style","font-size:0.7em"),u.textContent=e[1],c.appendChild(u)}if(e[2]){var m=e[1]?"0.4em":"0.1em",b=document.createElementNS(p,"tspan");b.setAttribute("dy",m),b.setAttribute("style","font-size:0.7em"),b.textContent=e[2],c.appendChild(b)}}else d&&o[r].trim()==""?c.innerHTML="&nbsp;":c.textContent=o[r];v.appendChild(c)}return f?f.appendChild(v):this.append(v),v},l.prototype.richTextLine=function(n,i,f,v,g,d){var o=document.createElementNS(p,"text");o.setAttribute("stroke","none"),o.setAttribute("class",v),o.setAttribute("x",i),o.setAttribute("y",f),o.setAttribute("text-anchor",g),o.setAttribute("dominant-baseline","middle");for(var r=0;r<n.length;r++){for(var c=n[r],e=document.createElementNS(p,"tspan"),u=Object.keys(c.attrs),m=0;m<u.length;m++){var b=c.attrs[u[m]];b!==""&&e.setAttribute(u[m],b)}e.textContent=c.content,o.appendChild(e)}return d?d.appendChild(o):this.append(o),o},l.prototype.guessWidth=function(n,i){var f=this.createDummySvg(),v=this.text(n,i,f),g;try{g=v.getBBox(),isNaN(g.height)||!g.height?g={width:i["font-size"]/2,height:i["font-size"]+2}:g={width:g.width,height:g.height}}catch{g={width:i["font-size"]/2,height:i["font-size"]+2}}return f.removeChild(v),g},l.prototype.createDummySvg=function(){if(!this.dummySvg){this.dummySvg=a();var n=["display: block !important;","height: 1px;","width: 1px;","position: absolute;"];this.dummySvg.setAttribute("style",n.join(""));var i=document.querySelector("body");i.appendChild(this.dummySvg)}return this.dummySvg};var t={};l.prototype.getTextSize=function(n,i,f){if(typeof n=="number"&&(n=""+n),!n||n.match(/^\s+$/))return{width:0,height:0};var v;if(n.length<20&&(v=n+JSON.stringify(i),t[v]))return t[v];var g=!f;f||(f=this.text(n,i));var d;try{d=f.getBBox(),isNaN(d.height)||!d.height?d=this.guessWidth(n,i):d={width:d.width,height:d.height}}catch{d=this.guessWidth(n,i)}return g&&(this.currentGroup.length>0?this.currentGroup[0].removeChild(f):this.svg.removeChild(f)),v&&(t[v]=d),d},l.prototype.openGroup=function(n){n=n||{};var i=document.createElementNS(p,"g");return n.klass&&i.setAttribute("class",n.klass),n.fill&&i.setAttribute("fill",n.fill),n.stroke&&i.setAttribute("stroke",n.stroke),n["data-name"]&&i.setAttribute("data-name",n["data-name"]),n.prepend?this.prepend(i):this.append(i),this.currentGroup.unshift(i),i},l.prototype.closeGroup=function(){var n=this.currentGroup.shift();return n&&n.children.length===0?(n.parentElement.removeChild(n),null):n},l.prototype.path=function(n){var i=document.createElementNS(p,"path");for(var f in n)n.hasOwnProperty(f)&&(f==="path"?i.setAttributeNS(null,"d",n.path):f==="klass"?i.setAttributeNS(null,"class",n[f]):n[f]!==void 0&&i.setAttributeNS(null,f,n[f]));return this.append(i),i},l.prototype.pathToBack=function(n){var i=document.createElementNS(p,"path");for(var f in n)n.hasOwnProperty(f)&&(f==="path"?i.setAttributeNS(null,"d",n.path):f==="klass"?i.setAttributeNS(null,"class",n[f]):i.setAttributeNS(null,f,n[f]));return this.prepend(i),i},l.prototype.lineToBack=function(n){for(var i=document.createElementNS(p,"line"),f=Object.keys(n),v=0;v<f.length;v++)i.setAttribute(f[v],n[f[v]]);return this.prepend(i),i},l.prototype.append=function(n){this.currentGroup.length>0?this.currentGroup[0].appendChild(n):this.svg.appendChild(n)},l.prototype.prepend=function(n){this.currentGroup.length>0?this.currentGroup[0].appendChild(n):this.svg.insertBefore(n,this.svg.firstChild)},l.prototype.setAttributeOnElement=function(n,i){for(var f in i)i.hasOwnProperty(f)&&n.setAttributeNS(null,f,i[f])},l.prototype.moveElementToChild=function(n,i){n.appendChild(i)};function a(){var n=document.createElementNS(p,"svg");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("role","img"),n.setAttribute("fill","currentColor"),n.setAttribute("stroke","currentColor"),n}return M0=l,M0}var B0,zn;function Dc(){if(zn)return B0;zn=1;var p=Se(),l=qc(),h=function(s){this.paper=new l(s),this.controller=null,this.space=3*p.SPACE,this.padding={},this.reset(),this.firefox112=navigator.userAgent.indexOf("Firefox/112.0")>=0};return h.prototype.reset=function(){this.paper.clear(),this.y=0,this.abctune=null,this.path=null,this.isPrint=!1,this.lineThickness=0,this.initVerticalSpace()},h.prototype.newTune=function(s){this.abctune=s,this.setVerticalSpace(s.formatting),this.isPrint=s.media==="print",this.setPadding(s)},h.prototype.setLineThickness=function(s){this.lineThickness=s},h.prototype.setPaddingOverride=function(s){this.paddingOverride={top:s.paddingtop,bottom:s.paddingbottom,right:s.paddingright,left:s.paddingleft}},h.prototype.setPadding=function(s){function t(a,n,i,f,v){s.formatting[i]!==void 0?a.padding[n]=s.formatting[i]:a.paddingOverride[n]!==void 0?a.padding[n]=a.paddingOverride[n]:a.isPrint?a.padding[n]=f:a.padding[n]=v}t(this,"top","topmargin",38,15),t(this,"bottom","botmargin",38,15),t(this,"left","leftmargin",68,15),t(this,"right","rightmargin",68,15)},h.prototype.adjustNonScaledItems=function(s){this.padding.top/=s,this.padding.bottom/=s,this.padding.left/=s,this.padding.right/=s,this.abctune.formatting.headerfont.size/=s,this.abctune.formatting.footerfont.size/=s},h.prototype.initVerticalSpace=function(){this.spacing={composer:7.56,graceBefore:8.67,graceInside:10.67,graceAfter:16,info:0,lineSkipFactor:1.1,music:7.56,paragraphSkipFactor:.4,parts:11.33,slurHeight:1,staffSeparation:61.33,staffTopMargin:0,stemHeight:26.67+10,subtitle:3.78,systemStaffSeparation:48,text:18.9,title:7.56,top:30.24,vocal:0,words:0}},h.prototype.setVerticalSpace=function(s){s.staffsep!==void 0&&(this.spacing.staffSeparation=s.staffsep*4/3),s.composerspace!==void 0&&(this.spacing.composer=s.composerspace*4/3),s.partsspace!==void 0&&(this.spacing.parts=s.partsspace*4/3),s.textspace!==void 0&&(this.spacing.text=s.textspace*4/3),s.musicspace!==void 0&&(this.spacing.music=s.musicspace*4/3),s.titlespace!==void 0&&(this.spacing.title=s.titlespace*4/3),s.sysstaffsep!==void 0&&(this.spacing.systemStaffSeparation=s.sysstaffsep*4/3),s.stafftopmargin!==void 0&&(this.spacing.staffTopMargin=s.stafftopmargin*4/3),s.subtitlespace!==void 0&&(this.spacing.subtitle=s.subtitlespace*4/3),s.topspace!==void 0&&(this.spacing.top=s.topspace*4/3),s.vocalspace!==void 0&&(this.spacing.vocal=s.vocalspace*4/3),s.wordsspace!==void 0&&(this.spacing.words=s.wordsspace*4/3)},h.prototype.calcY=function(s){return this.y-s*p.STEP},h.prototype.moveY=function(s,t){t===void 0&&(t=1),this.y+=s*t},h.prototype.absolutemoveY=function(s){this.y=s},B0=h,B0}var N0,Gn;function Ic(){if(Gn)return N0;Gn=1;function p(l,h,s,t,a,n){var i=l.text;this.rows=[];var f;h&&this.rows.push({move:h});var v=s.calc("textfont","defined-text");if(i==="")this.rows.push({move:v.attr["font-size"]*2});else if(typeof i=="string"){let m=function(b){return b.replace(/^[ \t]*\n/gm,`X
`)};var u=m;this.rows.push({move:v.attr["font-size"]/2}),this.rows.push({left:t,text:i,font:"textfont",klass:"defined-text",anchor:"start",startChar:l.startChar,endChar:l.endChar,absElemType:"freeText",name:"free-text"});var g=m(i);f=n.calc(g,"textfont","defined-text"),this.rows.push({move:f.height})}else if(i){for(var d=0,o=t,r="textfont",c=0;c<i.length;c++)i[c].font?r=i[c].font:r="textfont",this.rows.push({left:o,text:i[c].text,font:r,klass:"defined-text",anchor:"start",startChar:l.startChar,endChar:l.endChar,absElemType:"freeText",name:"free-text"}),f=n.calc(i[c].text,s.calc(r,"defined-text").font,"defined-text"),o+=f.width+f.height/2,d=Math.max(d,f.height);this.rows.push({move:d})}else if(l.length===1){var e=a/2;this.rows.push({left:e,text:l[0].text,font:"textfont",klass:"defined-text",anchor:"middle",startChar:l.startChar,endChar:l.endChar,absElemType:"freeText",name:"free-text"}),f=n.calc(l[0].text,"textfont","defined-text"),this.rows.push({move:f.height})}}return N0=p,N0}var L0,Yn;function Fc(){if(Yn)return L0;Yn=1;function p(l,h,s){this.rows=[],l&&this.rows.push({move:l}),this.rows.push({separator:h,absElemType:"separator"}),s&&this.rows.push({move:s})}return L0=p,L0}var P0,Wn;function Oc(){if(Wn)return P0;Wn=1;function p(l,h,s,t,a,n){this.rows=[],l&&this.rows.push({move:l});var i=h.titleleft?"start":"middle",f=h.titleleft?a:t;this.rows.push({left:f,text:s.text,font:"subtitlefont",klass:"text subtitle",anchor:i,startChar:s.startChar,endChar:s.endChar,absElemType:"subtitle",name:"subtitle"});var v=n.calc(s.text,"subtitlefont","text subtitle");this.rows.push({move:v.height})}return P0=p,P0}var q0,Un;function ba(){if(Un)return q0;Un=1;function p(l,h,s){if(h.text){h.marginLeft||(h.marginLeft=0),h.klass||(h.klass=""),h.anchor||(h.anchor="start"),h.info||(h.info={startChar:-2,endChar:-2}),h.marginTop&&l.push({move:h.marginTop});var t={left:h.marginLeft,text:h.text,font:h.font,anchor:h.anchor,startChar:h.info.startChar,endChar:h.info.endChar,"dominant-baseline":h["dominant-baseline"]};h.absElemType&&(t.absElemType=h.absElemType),!h.inGroup&&h.klass&&(t.klass=h.klass),h.name&&(t.name=h.name),l.push(t);var a=s.calc("A",h.font,h.klass),n=h.text.split(`
`).length;if(h.text[h.text.length-1]===`
`&&n--,!h.noMove){var i=a.height*1.1*n;l.push({move:Math.round(i)}),h.marginBottom&&l.push({move:h.marginBottom})}}}return q0=p,q0}var D0,$n;function Ks(){if($n)return D0;$n=1;const p=ba();function l(h,s,t,a,n,i,f,v){var g=v.calc("i",t,a);if(s==="")h.push({move:g.height});else{if(typeof s=="string"){p(h,{marginLeft:i,text:s,font:t,klass:a,marginTop:f.marginTop,anchor:f.anchor,absElemType:f.absElemType,info:f.info,name:n},v);return}f.marginTop&&h.push({move:f.marginTop});var d=0,o={left:i,anchor:f.anchor,phrases:[]};a&&(o.klass=a),h.push(o);for(var r=0;r<s.length;r++){var c=s[r],e=c.font?c.font:v.attr(t,a).font,u={content:c.text};e&&(u.attrs={"font-family":v.getFamily(e.face),"font-size":e.size,"font-weight":e.weight,"font-style":e.style,"font-decoration":e.decoration}),o.phrases.push(u);var m=v.calc(c.text,e,a);d=Math.max(d,m.height),c.text[c.text.length-1]===" "&&g.width}h.push({move:d})}}return D0=l,D0}var I0,Vn;function Rc(){if(Vn)return I0;Vn=1;const p=ba(),l=Ks();function h(s,t,a,n,i,f,v,g,d,o){if(this.rows=[],s.header&&f){var r=o.calc("X","headerfont","abcjs-header abcjs-meta-top").height;p(this.rows,{marginLeft:v,text:s.header.left,font:"headerfont",klass:"header meta-top",marginTop:-r,info:t.header,name:"header"},o),p(this.rows,{marginLeft:v+i/2,text:s.header.center,font:"headerfont",klass:"header meta-top",marginTop:-r,anchor:"middle",info:t.header,name:"header"},o),p(this.rows,{marginLeft:v+i,text:s.header.right,font:"headerfont",klass:"header meta-top",marginTop:-r,anchor:"end",info:t.header,name:"header"},o)}f&&this.rows.push({move:g.top});var c=a.titleleft?"start":"middle",e=a.titleleft?v:v+i/2;if(s.title){var u=d?"abcjs-title":"";l(this.rows,s.title,"titlefont",u,"title",e,{marginTop:g.title,anchor:c,absElemType:"title",info:t.title},o)}if(n.length)for(var m=0;m<n.length&&n[m].subtitle;){var u=d?"abcjs-text abcjs-subtitle":"";l(this.rows,n[m].subtitle.text,"subtitlefont",u,"subtitle",e,{marginTop:g.subtitle,anchor:c,absElemType:"subtitle",info:n[m].subtitle},o),m++}if(s.rhythm||s.origin||s.composer){if(this.rows.push({move:g.composer}),s.rhythm&&s.rhythm.length>0){var b=!!(s.composer||s.origin),u=d?"abcjs-rhythm":"";p(this.rows,{marginLeft:v,text:s.rhythm,font:"infofont",klass:u,absElemType:"rhythm",noMove:b,info:t.rhythm,name:"rhythm"},o)}s.composer&&s.composer,s.origin&&s.origin;var x=s.composer?s.composer:"";if(s.origin&&(typeof x=="string"&&typeof s.origin=="string"?x+=" ("+s.origin+")":typeof x=="string"&&typeof s.origin!="string"?(x=[{text:x}],x.push({text:" ("}),x=x.concat(s.origin),x.push({text:")"})):(x.push({text:" ("}),x=x.concat(s.origin),x.push({text:")"}))),x){var u=d?"abcjs-composer":"";l(this.rows,x,"composerfont",u,"composer",v+i,{anchor:"end",absElemType:"composer",info:t.composer,ingroup:!0},o)}}if(s.author&&s.author.length>0){var u=d?"abcjs-author":"";l(this.rows,s.author,"composerfont",u,"author",v+i,{anchor:"end",absElemType:"author",info:t.author},o)}if(s.partOrder&&s.partOrder.length>0){var u=d?"abcjs-part-order":"";l(this.rows,s.partOrder,"partsfont",u,"part-order",v,{absElemType:"partOrder",info:t.partOrder,anchor:"start"},o)}}return I0=h,I0}var F0,Xn;function Hc(){if(Xn)return F0;Xn=1;const p=ba(),l=Ks();function h(a,n,i,f,v,g,d){this.rows=[],a.unalignedWords&&a.unalignedWords.length>0&&this.unalignedWords(a.unalignedWords,f,v,g,d),this.extraText(a,f,v,g,d),a.footer&&i&&this.footer(a.footer,n,f,d)}h.prototype.unalignedWords=function(a,n,i,f,v){var g=f?"abcjs-unaligned-words":"",d="wordsfont",o=v.calc("i",d,g);this.rows.push({move:i.words}),t(this.rows,"",a,n,d,"unalignedWords","unalignedWords",g,"unalignedWords",i,f,v),this.rows.push({move:o.height})};function s(a,n,i,f,v,g,d){i&&(n&&(typeof i=="string"?i=n+i:i=[{text:n}].concat(i)),v=g?"abcjs-extra-text "+v:"",l(a,i,"historyfont",v,"description",f,{absElemType:"extraText",anchor:"start"},d))}function t(a,n,i,f,v,g,d,o,r,c,e,u){if(i){o=e?"abcjs-extra-text "+o:"";var m=u.calc("A",v,o);if(typeof i=="string")n&&(i=n+`
`+i),p(a,{marginLeft:f,text:i,font:v,absElemType:"extraText",name:r,"dominant-baseline":"middle",klass:o},u);else{a.push({startGroup:d,klass:o,name:r}),a.push({move:c.info}),n&&(p(a,{marginLeft:f,text:n,font:v,absElemType:"extraText",name:r,"dominant-baseline":"middle"},u),a.push({move:m.height*3/4}));for(var b=0;b<i.length;b++)l(a,i[b],v,"",r,f,{anchor:"start"},u),b<i.length-1&&typeof i[b]=="string"&&typeof i[b+1]!="string"&&a.push({move:m.height*3/4});a.push({endGroup:d,absElemType:g,startChar:-1,endChar:-1,name:r}),a.push({move:m.height})}}}return h.prototype.extraText=function(a,n,i,f,v){s(this.rows,"Book: ",a.book,n,"abcjs-book",f,v),s(this.rows,"Source: ",a.source,n,"abcjs-source",f,v),s(this.rows,"Discography: ",a.discography,n,"abcjs-discography",f,v),t(this.rows,"Notes:",a.notes,n,"historyfont","extraText","notes","abcjs-notes","description",i,f,v),s(this.rows,"Transcription: ",a.transcription,n,"abcjs-transcription",f,v),t(this.rows,"History:",a.history,n,"historyfont","extraText","history","abcjs-history","description",i,f,v),s(this.rows,"Copyright: ",a["abc-copyright"],n,"abcjs-copyright",f,v),s(this.rows,"Creator: ",a["abc-creator"],n,"abcjs-creator",f,v),s(this.rows,"Edited By: ",a["abc-edited-by"],n,"abcjs-edited-by",f,v)},h.prototype.footer=function(a,n,i,f){var v="header meta-bottom",g="footerfont";this.rows.push({startGroup:"footer",klass:v}),p(this.rows,{marginLeft:i,text:a.left,font:g,klass:v,name:"footer"},f),p(this.rows,{marginLeft:i+n/2,text:a.center,font:g,klass:v,anchor:"middle",name:"footer"},f),p(this.rows,{marginLeft:i+n,text:a.right,font:g,klass:v,anchor:"end",name:"footer"},f)},F0=h,F0}var O0,jn;function Qs(){if(jn)return O0;jn=1;function p(h,s,t,a){if(h.indexOf(s)===0){var n=h.replace(s,""),i=parseInt(n,10);""+i===n&&(t[a]=i)}}function l(h,s){var t=[];if(h.absEl.elemset){for(var a={},n=0;n<h.absEl.elemset.length;n++){var i=h.absEl.elemset[n];if(i)for(var f=i.getAttribute("class").split(" "),v=0;v<f.length;v++)a[f[v]]=!0}for(var g=0;g<Object.keys(a).length;g++)t.push(Object.keys(a)[g])}for(var d={},o=0;o<t.length;o++)p(t[o],"abcjs-v",d,"voice"),p(t[o],"abcjs-l",d,"line"),p(t[o],"abcjs-m",d,"measure");h.staffPos&&(d.staffPos=h.staffPos);for(var r=s.target;r&&r.dataset&&!r.dataset.name&&r.tagName.toLowerCase()!=="svg";)r=r.parentNode;for(var c=s.target;c&&c.dataset&&!c.dataset.index&&c.tagName.toLowerCase()!=="svg";)c=c.parentNode;return c&&c.dataset&&(d.name=c.dataset.name,d.clickedName=r.dataset.name,d.parentClasses=c.classList),r&&r.classList&&(d.clickedClasses=r.classList),d.selectableElement=h.svgEl,{classes:t,analysis:d}}return O0=l,O0}var R0,Kn;function zc(){if(Kn)return R0;Kn=1;var p=Se(),l=Qs();function h(y,A){if(y.rangeHighlight=x,y.dragging)for(var N=0;N<y.selectables.length;N++){var M=y.selectables[N];M.svgEl.getAttribute("selectable")==="true"&&(M.svgEl.setAttribute("tabindex",0),M.svgEl.setAttribute("data-index",N),M.svgEl.addEventListener("keydown",a.bind(y)),M.svgEl.addEventListener("keyup",n.bind(y)),M.svgEl.addEventListener("focus",t.bind(y)))}for(var L=0;L<A.length;L++)A[L].addEventListener("touchstart",r.bind(y),{passive:!0}),A[L].addEventListener("touchmove",c.bind(y),{passive:!0}),A[L].addEventListener("touchend",e.bind(y),{passive:!0}),A[L].addEventListener("mousedown",r.bind(y)),A[L].addEventListener("mousemove",c.bind(y)),A[L].addEventListener("mouseup",e.bind(y))}function s(y){var A=1,N=1,M=y.target.closest("svg"),L=0;M&&M.viewBox&&M.viewBox.baseVal&&(M.viewBox.baseVal.width!==0&&(A=M.viewBox.baseVal.width/M.clientWidth),M.viewBox.baseVal.height!==0&&(N=M.viewBox.baseVal.height/M.clientHeight),L=M.viewBox.baseVal.y);var B=y.target&&y.target.tagName==="svg",S,_;return B?(S=y.offsetX,_=y.offsetY):(S=y.layerX,_=y.layerY),S=S*A,_=_*N,[S,_+L]}function t(y){this.dragMechanism==="keyboard"&&this.dragYStep!==0&&this.dragTarget&&m.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,y),this.dragYStep=0}function a(y){switch(y.keyCode){case 38:case 40:y.preventDefault()}}function n(y){var A=!1,N=y.target.dataset.index;switch(y.keyCode){case 13:case 32:A=!0,this.dragTarget=this.selectables[N],this.dragIndex=N,this.dragMechanism="keyboard",e.bind(this)(y);break;case 38:A=!0,this.dragTarget=this.selectables[N],this.dragIndex=N,this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep--,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*p.STEP+")"));break;case 40:A=!0,this.dragTarget=this.selectables[N],this.dragIndex=N,this.dragMechanism="keyboard",this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep++,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*p.STEP+")"));break;case 9:this.dragYStep!==0&&e.bind(this)(y);break}A&&y.preventDefault()}function i(y,A){if(!A)return-1;var N=A.dataset;if(!N)return-1;for(var M=N.index,L=0;L<y.length;L++){var B=y[L].svgEl.dataset;if(B&&M===B.index)return L}return-1}function f(y,A,N){for(var M=9999999,L=-1,B=0;B<y.selectables.length&&M>0;B++){var S=y.selectables[B];if(y.getDim(S),S.dim.left<A&&S.dim.right>A&&S.dim.top<N&&S.dim.bottom>N)L=B,M=0;else if(S.dim.top<N&&S.dim.bottom>N){var _=Math.min(Math.abs(S.dim.left-A),Math.abs(S.dim.right-A));_<M&&(M=_,L=B)}else if(S.dim.left<A&&S.dim.right>A){var P=Math.min(Math.abs(S.dim.top-N),Math.abs(S.dim.bottom-N));P<M&&(M=P,L=B)}else{var O=Math.abs(A-S.dim.left)>Math.abs(A-S.dim.right)?Math.abs(A-S.dim.right):Math.abs(A-S.dim.left),I=Math.abs(N-S.dim.top)>Math.abs(N-S.dim.bottom)?Math.abs(N-S.dim.bottom):Math.abs(N-S.dim.top),w=Math.sqrt(O*O+I*I);w<M&&(M=w,L=B)}}return L>=0&&M<=12?L:-1}function v(y,A,N){if(y.x<=A.offsetX&&y.x+y.width>=A.offsetX&&y.y<=A.offsetY&&y.y+y.height>=A.offsetY)return[A.offsetX,A.offsetY];var M=Math.abs(A.layerY/N-A.offsetY);return M<3?[A.offsetX,A.offsetY]:[A.layerX,A.layerY]}function g(y){if(!y)return null;if(y.tagName==="svg")return y;if(!y.getAttribute)return null;for(var A=y.getAttribute("selectable");!A;)y.parentElement?(y=y.parentElement,y.tagName==="svg"?A=!0:A=y.getAttribute("selectable")):A=!0;return y}function d(y,A){var N,M,L,B=i(y.selectables,g(A.target));return B>=0?(L=v(y.selectables[B].svgEl.getBBox(),A,y.scale),N=L[0],M=L[1]):(L=s(A),N=L[0],M=L[1],B=f(y,N,M)),{x:N,y:M,clickedOn:B}}function o(y){if(!(!y||!y.target||!y.touches||y.touches.length<1)){var A=y.target.getBoundingClientRect(),N=y.touches[0].pageX-A.left,M=y.touches[0].pageY-A.top;y.touches[0].offsetX=N,y.touches[0].offsetY=M,y.touches[0].layerX=y.touches[0].pageX,y.touches[0].layerY=y.touches[0].pageY}}function r(y){var A=y;y.type==="touchstart"&&(o(y),y.touches.length>0&&(A=y.touches[0]));var N=d(this,A);N.clickedOn>=0&&(y.type==="touchstart"||y.button===0)&&this.selectables[N.clickedOn]&&(this.dragTarget=this.selectables[N.clickedOn],this.dragIndex=N.clickedOn,this.dragMechanism="mouse",this.dragMouseStart={x:N.x,y:N.y},this.dragging&&this.dragTarget.isDraggable&&(D(this.renderer.paper,"abcjs-dragging-in-progress"),this.dragTarget.absEl.highlight(void 0,this.dragColor)))}function c(y){var A=y;if(y.type==="touchmove"&&(o(y),y.touches.length>0&&(A=y.touches[0])),this.lastTouchMove=y,!(!this.dragTarget||!this.dragging||!this.dragTarget.isDraggable||this.dragMechanism!=="mouse"||!this.dragMouseStart)){var N=d(this,A),M=Math.round((N.y-this.dragMouseStart.y)/p.STEP);M!==this.dragYStep&&(this.dragYStep=M,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+M*p.STEP+")"))}}function e(y){var A=y;y.type==="touchend"&&this.lastTouchMove&&(o(this.lastTouchMove),this.lastTouchMove&&this.lastTouchMove.touches&&this.lastTouchMove.touches.length>0&&(A=this.lastTouchMove.touches[0])),this.dragTarget&&(b.bind(this)(),this.dragTarget.absEl&&this.dragTarget.absEl.highlight&&(this.selected=[this.dragTarget.absEl],this.dragTarget.absEl.highlight(void 0,this.selectionColor)),m.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,A),this.dragTarget.svgEl&&this.dragTarget.svgEl.focus&&(this.dragTarget.svgEl.focus(),this.dragTarget=null,this.dragIndex=-1),F(this.renderer.svg,"abcjs-dragging-in-progress"))}function u(y){y>=0&&y<this.selectables.length&&(this.dragTarget=this.selectables[y],this.dragIndex=y,this.dragMechanism="keyboard",e.bind(this)({target:this.dragTarget.svgEl}))}function m(y,A,N,M,L){for(var B=l(y,L),S=B.classes,_=B.analysis,P=0;P<this.listeners.length;P++)this.listeners[P](y.absEl.abcelem,y.absEl.tuneNumber,S.join(" "),_,{step:A,max:N,index:M,setSelection:u.bind(this)},L)}function b(){for(var y=0;y<this.selected.length;y++)this.selected[y].unhighlight(void 0,this.renderer.foregroundColor);this.selected=[]}function x(y,A){b.bind(this)();for(var N=0;N<this.staffgroups.length;N++)for(var M=this.staffgroups[N].voices,L=0;L<M.length;L++)for(var B=M[L].children,S=0;S<B.length;S++){var _=B[S].abcelem.startChar,P=B[S].abcelem.endChar;(A>_&&y<P||A===y&&A===P)&&(this.selected[this.selected.length]=B[S],B[S].highlight(void 0,this.selectionColor))}}function T(y){var A=y.getAttribute("class");A||(A="");for(var N=A.split(" "),M={},L=0;L<N.length;L++)M[N[L]]=!0;return M}function E(y,A){var N=[];for(var M in A)A.hasOwnProperty(M)&&N.push(M);y.setAttribute("class",N.join(" "))}function D(y,A){if(y){var N=T(y.svg);N[A]=!0,E(y.svg,N)}}function F(y,A){if(y){var N=T(y.svg);delete N[A],E(y.svg,N)}}return R0=h,R0}var H0,Qn;function ma(){if(Qn)return H0;Qn=1;function p(l,h,s,t,a){return h+(t-h)/(s-l)*(a-l)}return H0=p,H0}var z0,Jn;function Gc(){if(Jn)return z0;Jn=1;var p=Le(),l=Se(),h=ma(),s=function(o){if(!(o.elems.length===0||o.allrests)){var r=i(o.stemsUp,o.isgrace),c=o.elems[0],e=o.elems[o.elems.length-1],u=0,m=o.stemsUp?c.abcelem.maxpitch:c.abcelem.minpitch;u=a(c,o.stemsUp,m,u),u=a(e,o.stemsUp,m,u),u=Math.max(o.stemHeight,u+3);var b=v(o.average,o.elems.length,u,o.stemsUp,c.abcelem.averagepitch,e.abcelem.averagepitch,o.isflat,o.min,o.max,o.isgrace),x=f(o.stemsUp,c,e);o.addBeam({startX:x[0],endX:x[1],startY:b[0],endY:b[1],dy:r});for(var T=d(o.elems,o.stemsUp,o.beams[0],o.isgrace,r),E=0;E<T.length;E++)o.addBeam(T[E]);g(o.elems,o.stemsUp,o.beams[0],r,o.mainNote)}},t=function(o){return o===void 0?0:Math.floor(Math.log(o)/Math.log(2))};function a(o,r,c,e){if(!o.children)return e;for(var u=0;u<o.children.length;u++){var m=o.children[u];r&&m.top!==void 0&&m.c==="flags.ugrace"?e=Math.max(e,m.top-c):!r&&m.bottom!==void 0&&m.c==="flags.ugrace"&&(e=Math.max(e,c-m.bottom+7))}return e}function n(o,r,c,e){if(e)return 0;var u=o-r,m=c/2;return u>m&&(u=m),u<-m&&(u=-m),u}function i(o,r){var c=o?l.STEP:-l.STEP;return r&&(c=c*.4),c}function f(o,r,c){var e=r.heads[o?0:r.heads.length-1],u=c.heads[o?0:c.heads.length-1],m=e.x;o&&(m+=e.w-.6);var b=u.x;return b+=o?u.w:.6,[m,b]}function v(o,r,c,e,u,m,b,x,T,E){var D=c-2,F=c-2,y=Math.round(e?Math.max(o+D,T+F):Math.min(o-D,x-F)),A=n(u,m,r,b),N=y+Math.floor(A/2),M=y+Math.floor(-A/2);return E||(e&&y<6||!e&&y>6)&&(N=6,M=6),[N,M]}function g(o,r,c,e,u){for(var m=0;m<o.length;m++){var b=o[m];if(!b.abcelem.rest){var x=!b.addExtra,T=x?u:b,E=b.heads[r?0:b.heads.length-1],D=1/5,F=E.pitch+(r?D:-D),y=r?E.w:0;x||(y+=E.dx);var A=E.x+y,N=h(c.startX,c.startY,c.endX,c.endY,A),M=r?-.6:.6;r||(N-=e/2/l.STEP),x&&(y+=b.heads[0].dx),E.c==="noteheads.slash.quarter"&&(r?F+=1:F-=1);var L=new p(null,y,0,F,{type:"stem",pitch2:N,linewidth:M});L.setX(T.x),T.addRight(L)}}}function d(o,r,c,e,u){for(var m=[],b=[],x=0;x<o.length;x++){var T=o[x];if(!T.abcelem.rest){var E=T.heads[r?0:T.heads.length-1],D=E.x+(r?E.w:0),F=h(c.startX,c.startY,c.endX,c.endY,D),y=r?-1.5:1.5;e&&(y=y*2/3);var A=T.abcelem.duration;A===0&&(A=.25);for(var N=t(A);N<-3;N++){var M=-4-N;if(b[M]?b[M].single=!1:b[M]={x:D+(r?-.6:0),y:F+y*(M+1),durlog:N,single:!0},x>0&&T.abcelem.beambr&&T.abcelem.beambr<=M+1){b[M].split||(b[M].split=[b[M].x]);var L=f(r,o[x-1],T);b[M].split[b[M].split.length-1]>=L[0]&&(L[0]+=T.w),b[M].split.push(L[0]),b[M].split.push(L[1])}}for(var B=b.length-1;B>=0;B--)if(x===o.length-1||t(o[x+1].abcelem.duration)>-B-4){var S=D,_=F+y*(B+1);b[B].single&&(S=x===0?D+5:D-5,_=h(c.startX,c.startY,c.endX,c.endY,S)+y*(B+1));var P={startX:b[B].x,endX:S,startY:b[B].y,endY:_,dy:u};if(b[B].split!==void 0){var O=b[B].split;P.endX<=O[O.length-1]&&(O[O.length-1]-=T.w),O.push(P.endX),P.split=b[B].split}m.push(P),b=b.slice(0,B)}}}return m}return z0=s,z0}var G0,Zn;function Yc(){if(Zn)return G0;Zn=1;var p=ma();function l(a){if(a.anchor1&&a.anchor2){a.hasBeam=!!a.anchor1.parent.beam&&a.anchor1.parent.beam===a.anchor2.parent.beam;var n=a.anchor1.parent.beam;if(a.hasBeam&&(n.elems[0]!==a.anchor1.parent||n.elems[n.elems.length-1]!==a.anchor2.parent)&&(a.hasBeam=!1),a.hasBeam){var i=h(n)?a.anchor1.x+a.anchor1.w:a.anchor1.x;a.yTextPos=s(i,a.anchor2.x,n),a.yTextPos+=h(n)?3:-2,a.xTextPos=t(i,a.anchor2.x),a.top=a.yTextPos+1,a.bottom=a.yTextPos-2,h(n)&&(a.endingHeightAbove=4)}else{a.startNote=Math.max(a.anchor1.parent.top,9)+4,a.endNote=Math.max(a.anchor2.parent.top,9)+4,a.anchor1.parent.type==="rest"&&a.anchor2.parent.type!=="rest"?a.startNote=a.endNote:a.anchor2.parent.type==="rest"&&a.anchor1.parent.type!=="rest"&&(a.endNote=a.startNote);for(var f=0,v=0;v<a.middleElems.length;v++)f=Math.max(f,a.middleElems[v].top);f+=4,(f>a.startNote||f>a.endNote)&&(a.startNote=f,a.endNote=f),a.flatBeams&&(a.startNote=Math.max(a.startNote,a.endNote),a.endNote=Math.max(a.startNote,a.endNote)),a.yTextPos=a.startNote+(a.endNote-a.startNote)/2,a.xTextPos=a.anchor1.x+(a.anchor2.x+a.anchor2.w-a.anchor1.x)/2,a.top=a.yTextPos+1}}delete a.middleElems,delete a.flatBeams}function h(a){return a.stemsUp}function s(a,n,i){if(i.beams.length===0)return 0;i=i.beams[0];var f=a+(n-a)/2;return p(i.startX,i.startY,i.endX,i.endY,f)}function t(a,n){return a+(n-a)/2}return G0=l,G0}var Y0,ei;function Wc(){if(ei)return Y0;ei=1;var p=Gc(),l=ma(),h=Yc(),s=function(g){for(var d=0;d<g.beams.length;d++)if(g.beams[d].type==="BeamElem"){p(g.beams[d]),t(g.beams[d]);for(var o=0;o<g.beams[d].elems.length;o++)g.adjustRange(g.beams[d].elems[o])}for(g.staff.specialY.chordLines=n(g.children),d=0;d<g.otherchildren.length;d++){var r=g.otherchildren[d];r.type==="TripletElem"&&(h(r),g.adjustRange(r))}g.staff.top=Math.max(g.staff.top,g.top),g.staff.bottom=Math.min(g.staff.bottom,g.bottom)};function t(g){for(var d=1.5,o=0;o<g.elems.length;o++){var r=g.elems[o];if(r.top)for(var c=v(r,g),e=0;e<r.children.length;e++){var u=r.children[e];if(u.klass==="ornament"&&u.position!=="below"&&u.bottom-d<c){var m=c-u.bottom+d;u.bottom+=m,u.top+=m,u.pitch+=m,c=r.top=u.top}}}}function a(g,d){var o=d.getChordDim();if(o){for(var r=0;r<g.length;r++){var c=g[r]<o.left;if(c){r>0&&d.putChordInLane(r),g[r]=o.right;return}}g.push(o.right),d.putChordInLane(g.length-1)}}function n(g){var d=[0],o=[0],r,c,e;for(r=0;r<g.length;r++){for(c=0;c<g[r].children.length;c++)e=g[r].children[c],e.chordHeightAbove&&a(d,e);for(c=g[r].children.length-1;c>=0;c--)e=g[r].children[c],e.chordHeightBelow&&a(o,e)}return(d.length>1||o.length>1)&&f(g,d.length,o.length),{above:d.length,below:o.length}}function i(g){for(var d=0,o=0;o<g.children.length;o++){var r=g.children[o];r.chordHeightBelow&&d++}return d}function f(g,d,o){for(var r=0;r<g.length;r++){i(g[r]);for(var c=0;c<g[r].children.length;c++){var e=g[r].children[c];e.chordHeightAbove&&e.invertLane(d)}}}function v(g,d){return d=d.beams[0],l(d.startX,d.startY,d.endX,d.endY,g.x)}return Y0=s,Y0}var W0,ti;function Uc(){if(ti)return W0;ti=1;var p=Se(),l=function(d,o){for(var r,c=0;c<o.staffs.length;c++){var e=o.staffs[c],u={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0};if(d.showDebug&&d.showDebug.indexOf("box")>=0&&(e.originalTop=e.top,e.originalBottom=e.bottom),s(e,u,"lyricHeightAbove"),s(e,u,"chordHeightAbove",e.specialY.chordLines.above),e.specialY.endingHeightAbove&&(e.specialY.chordHeightAbove?e.top+=2:e.top+=e.specialY.endingHeightAbove+h,u.endingHeightAbove=e.top),e.specialY.dynamicHeightAbove&&e.specialY.volumeHeightAbove?(e.top+=Math.max(e.specialY.dynamicHeightAbove,e.specialY.volumeHeightAbove)+h,u.dynamicHeightAbove=e.top,u.volumeHeightAbove=e.top):(s(e,u,"dynamicHeightAbove"),s(e,u,"volumeHeightAbove")),s(e,u,"partHeightAbove"),s(e,u,"tempoHeightAbove"),e.specialY.lyricHeightBelow&&(e.specialY.lyricHeightBelow+=d.spacing.vocal/p.STEP,u.lyricHeightBelow=e.bottom,e.bottom-=e.specialY.lyricHeightBelow+h),e.specialY.chordHeightBelow){u.chordHeightBelow=e.bottom;var m=e.specialY.chordHeightBelow;e.specialY.chordLines.below&&(m*=e.specialY.chordLines.below),e.bottom-=m+h}e.specialY.volumeHeightBelow&&e.specialY.dynamicHeightBelow?(u.volumeHeightBelow=e.bottom,u.dynamicHeightBelow=e.bottom,e.bottom-=Math.max(e.specialY.volumeHeightBelow,e.specialY.dynamicHeightBelow)+h):e.specialY.volumeHeightBelow?(u.volumeHeightBelow=e.bottom,e.bottom-=e.specialY.volumeHeightBelow+h):e.specialY.dynamicHeightBelow&&(u.dynamicHeightBelow=e.bottom,e.bottom-=e.specialY.dynamicHeightBelow+h),d.showDebug&&d.showDebug.indexOf("box")>=0&&(e.positionY=u);for(var b=0;b<e.voices.length;b++){var x=o.voices[e.voices[b]];t(u,x,d.spacing)}if(r!==void 0){var T=e.top-10,E=r+T,D=d.spacing.systemStaffSeparation/p.STEP,F=D-E;F>0&&(e.top+=F)}e.top+=d.spacing.staffTopMargin/p.STEP,r=2-e.bottom}},h=1;function s(d,o,r,c){if(d.specialY[r]){var e=d.specialY[r];c&&(e*=c),d.top+=e+h,o[r]=d.top}}function t(d,o,r){var c,e;for(c=0;c<o.children.length;c++)e=o.children[c],a(d,e,r);for(c=0;c<o.otherchildren.length;c++)switch(e=o.otherchildren[c],e.type){case"CrescendoElem":n(d,e);break;case"DynamicDecoration":i(d,e);break;case"EndingElem":f(d,e);break;case"TieElem":var u=e.getYBounds();o.staff.top=Math.max(o.staff.top,u[0]),o.staff.top=Math.max(o.staff.top,u[1]),o.staff.bottom=Math.min(o.staff.bottom,u[0]),o.staff.bottom=Math.min(o.staff.bottom,u[1]);break}}function a(d,o,r){for(var c=0;c<o.children.length;c++){var e=o.children[c];for(var u in o.specialY)o.specialY.hasOwnProperty(u)&&e[u]&&(e.pitch=d[u],e.top===void 0&&(e.type==="TempoElement"?v(d,e):g(d,e,r),o.pushTop(e.top),o.pushBottom(e.bottom)))}}function n(d,o){o.dynamicHeightAbove?o.pitch=d.dynamicHeightAbove:o.pitch=d.dynamicHeightBelow}function i(d,o){o.volumeHeightAbove?o.pitch=d.volumeHeightAbove:o.pitch=d.volumeHeightBelow}function f(d,o){o.pitch=d.endingHeightAbove-2}function v(d,o){if(o.pitch=d.tempoHeightAbove,o.top=d.tempoHeightAbove,o.bottom=d.tempoHeightAbove,o.note){var r=o.pitch-o.totalHeightInPitches+1;o.note.top=r,o.note.bottom=r;for(var c=0;c<o.note.children.length;c++){var e=o.note.children[c];e.top+=r,e.bottom+=r,e.pitch+=r,e.pitch2!==void 0&&(e.pitch2+=r)}}}function g(d,o,r){switch(o.type){case"part":o.top=d.partHeightAbove+o.height,o.bottom=d.partHeightAbove;break;case"text":case"chord":o.chordHeightAbove?(o.top=d.chordHeightAbove,o.bottom=d.chordHeightAbove):(o.top=d.chordHeightBelow,o.bottom=d.chordHeightBelow);break;case"lyric":o.lyricHeightAbove?(o.top=d.lyricHeightAbove,o.bottom=d.lyricHeightAbove):(o.top=d.lyricHeightBelow+r.vocal/p.STEP,o.bottom=d.lyricHeightBelow+r.vocal/p.STEP,o.pitch-=r.vocal/p.STEP);break;case"debug":o.top=d.chordHeightAbove,o.bottom=d.chordHeightAbove;break}(o.pitch===void 0||o.top===void 0)&&console.error("RelativeElement position not set.",o.type,o.pitch,o.top,d)}return W0=l,W0}var U0,ri;function $c(){if(ri)return U0;ri=1;var p=function(){};p.beginLayout=function(s,t){t.i=0,t.durationindex=0,t.startx=s,t.minx=s,t.nextx=s,t.spacingduration=0},p.layoutEnded=function(s){return s.i>=s.children.length},p.getNextX=function(s){return Math.max(s.minx,s.nextx)},p.getSpacingUnits=function(s){return Math.sqrt(s.spacingduration*8)},p.layoutOneItem=function(s,t,a,n,i){var f=a.children[a.i];if(!f)return 0;var v=s-a.minx,g=a.durationindex+f.duration>0?n:0;if(f.abcelem.el_type==="note"&&!f.abcelem.rest&&a.voicenumber!==0&&i){var d=i.children[i.i],o=d&&(f.abcelem.maxpitch<=d.abcelem.maxpitch+1&&f.abcelem.maxpitch>=d.abcelem.minpitch-1||f.abcelem.minpitch<=d.abcelem.maxpitch+1&&f.abcelem.minpitch>=d.abcelem.minpitch-1);if(o&&f.abcelem.minpitch===d.abcelem.minpitch&&f.abcelem.maxpitch===d.abcelem.maxpitch&&d.heads&&d.heads.length>0&&f.heads&&f.heads.length>0&&d.heads[0].c===f.heads[0].c&&(o=!1),o){var r=d.heads&&d.heads.length>0?d.heads[0].realWidth:d.fixed.w;f.adjustedWidth||(f.adjustedWidth=r+f.w),f.w=f.adjustedWidth;for(var c=0;c<f.children.length;c++){var e=f.children[c];e.name.indexOf("accidental")<0&&(e.adjustedWidth||(e.adjustedWidth=e.dx+r),e.dx=e.adjustedWidth)}}}var u=l(f,g);return v<u&&(a.i===0||f.type!=="bar"||a.children[a.i-1].type!=="part"&&a.children[a.i-1].type!=="tempo")&&(s+=u-v),f.setX(s),a.spacingduration=f.duration,a.minx=s+h(f),a.i!==a.children.length-1&&(a.minx+=f.minspacing),this.updateNextX(s,t,a),s},p.shiftRight=function(s,t){var a=t.children[t.i];a&&(a.setX(a.x+s),t.minx+=s,t.nextx+=s)},p.updateNextX=function(s,t,a){a.nextx=s+t*this.getSpacingUnits(a)},p.updateIndices=function(s){this.layoutEnded(s)||(s.durationindex+=s.children[s.i].duration,s.children[s.i].type==="bar"&&(s.durationindex=Math.round(s.durationindex*64)/64),s.i++)};function l(s,t){var a=0;return(s.type==="note"||s.type==="bar")&&(a=t),-s.extraw+a}function h(s){return s.w}return U0=p,U0}var $0,ai;function Vc(){if(ai)return $0;ai=1;var p=$c();function l(n){for(var i=0,f=0;f<n.length;f++){var v=n[f];if(v.children.length>0){var g=v.children.length-1,d=v.children[g];if(d.abcelem.el_type==="bar"){var o=d.children[0].x;o>i?i=o:d.children[0].x=i}}}}var h=function(n,i,f,v,g){var d=1e-7,o=0,r=1e3,c=g;v.startx=c;var e,u=0;for(f&&console.log("init layout",n),e=0;e<v.voices.length;e++)p.beginLayout(c,v.voices[e]);for(var m=0;!s(v.voices);){for(u=null,e=0;e<v.voices.length;e++)!p.layoutEnded(v.voices[e])&&(!u||t(v.voices[e])<u)&&(u=t(v.voices[e]));var b=[],x=[];for(e=0;e<v.voices.length;e++){var T=t(v.voices[e]);T-u>d?x.push(v.voices[e]):b.push(v.voices[e])}m=0;var E=0;for(e=0;e<b.length;e++)p.getNextX(b[e])>c&&(c=p.getNextX(b[e]),m=p.getSpacingUnits(b[e]),E=b[e].spacingduration);o+=m,r=Math.min(r,m),f&&console.log("currentduration: ",u,o,r);var D=void 0;for(e=0;e<b.length;e++){var F=b[e];F.voicenumber===0&&(D=e);var y=D!==void 0&&b[D].voicenumber!==F.voicenumber?b[D]:void 0;a(F,y)||(y=void 0);var A=p.layoutOneItem(c,n,F,i,y),N=A-c;if(N>0){c=A;for(var M=0;M<e;M++)p.shiftRight(N,b[M])}}for(e=0;e<x.length;e++)x[e].spacingduration-=E,p.updateNextX(c,n,x[e]);for(e=0;e<b.length;e++){var L=b[e];p.updateIndices(L)}}for(e=0;e<v.voices.length;e++)p.getNextX(v.voices[e])>c&&(c=p.getNextX(v.voices[e]),m=p.getSpacingUnits(v.voices[e]));return l(v.voices),o+=m,v.setWidth(c),{spacingUnits:o,minSpace:r}};function s(n){for(var i=0;i<n.length;i++)if(!p.layoutEnded(n[i]))return!1;return!0}function t(n){return n.durationindex-(n.children[n.i]&&n.children[n.i].duration>0?0:5e-7)}function a(n,i){return!n||!n.staff||!n.staff.voices||n.staff.voices.length===0||!i||!i.staff||!i.staff.voices||i.staff.voices.length===0?!1:n.staff.voices[0]===i.staff.voices[0]}return $0=h,$0}var V0,ni;function Js(){if(ni)return V0;ni=1;function p(t,a,n,i,f){var v=t.padding.left,g=0,d,o;for(d=0;d<n.length;d++)n[d].header&&(o=a.calc(n[d].header,"voicefont",""),g=Math.max(g,o.width));if(g=l(g,i,a),g=l(g,f,a),g){var r=a.calc("A","voicefont","");g+=r.width}v+=g;var c=0;return c=h(i,v,c),c=h(f,v,c),v+c}function l(t,a,n){if(a){for(var i=0;i<a.length;i++)if(a[i].header){var f=n.calc(a[i].header,"voicefont","");t=Math.max(t,f.width)}}return t}function h(t,a,n){if(t)for(var i=0;i<t.length;i++)s(a,t[i]),n=Math.max(n,t[i].getWidth());return n}function s(t,a){a.x=t}return V0=p,V0}var X0,ii;function Xc(){if(ii)return X0;ii=1;var p=Js();function l(s,t,a){var n=p(s,t.getTextSize,t.voices,t.brace,t.bracket),i=h(t,a.minPadding),f=i.totalDuration,v=i.minSpacing,g=v*f;a.minWidth&&(g=Math.max(g,a.minWidth));var d=a.minPadding?a.minPadding/2:2;t.startx=n,t.w=g+n;for(var o=0;o<t.voices.length;o++){var r=t.voices[o];r.startx=n,r.w=g+n;for(var c=n,e=!1,u=0,m=0;m<r.children.length;m++){var b=r.children[m];e||(b.duration!==0?(e=!0,u=(g+n-c)/f,t.gridStart=c):(b.x=c,c+=b.w+b.minspacing)),e&&(a.align==="center"?b.x=c+b.duration*u/2-b.w/2:b.duration===0?b.x=c+1-b.w:b.x=c+d-b.extraw,c+=b.duration*u);for(var x=0;x<b.children.length;x++){var T=b.children[x],E=T.dx?T.dx:0;T.x=b.x+E}}t.gridEnd=c}return g}function h(s,t){for(var a=0,n=0,i=0;i<s.voices.length;i++){for(var f=0,v=s.voices[i],g=0;g<v.children.length;g++){var d=v.children[g];if(f+=d.duration,d.duration){var o=(d.w+t)/d.duration;a=Math.max(a,o)}}n=Math.max(n,f)}return{totalDuration:n,minSpacing:a}}return X0=l,X0}var j0,si;function jc(){if(si)return j0;si=1;var p=Wc(),l=Uc(),h=Vc(),s=Js(),t=Xc(),a=function(v,g,d,o,r,c){var e,u,m=d;for(e=0;e<g.lines.length;e++)if(u=g.lines[e],u.staff){var b;c!==void 0?b=t(v,u.staffGroup,c):b=n(v,m,o,u.staffGroup,g.formatting,e===g.lines.length-1,!1),Math.round(b)>Math.round(m)&&(m=b,r&&(e=-1))}for(e=0;e<g.lines.length;e++)if(u=g.lines[e],u.staffGroup&&u.staffGroup.voices){for(var x=0;x<u.staffGroup.voices.length;x++)p(u.staffGroup.voices[x]);l(v,u.staffGroup)}for(e=0;e<g.lines.length;e++)u=g.lines[e],u.staffGroup&&u.staffGroup.setHeight();return m},n=function(v,g,d,o,r,c,e){for(var u=s(v,o.getTextSize,o.voices,o.brace,o.bracket),m=d,b=0;b<8;b++){var x=h(m,v.minPadding,e,o,u);if(m=i(c,r.stretchlast,g+v.padding.left,o.w,m,x.spacingUnits,x.minSpace,v.padding.left+v.padding.right),m===null)break}return f(o.voices),o.w-u};function i(v,g,d,o,r,c,e,u){if(v)if(g===void 0){if(o/d<.66)return null}else{var m=1-(o+u)/d,b=m<g;if(!b)return null}if(Math.abs(d-o)<2)return null;var x=c*r,T=o-x;return c>0?(r=(d-T)/c,r*e>50&&(r=50/e),r):null}function f(v){for(var g=0;g<v.length;g++)for(var d=v[g],o=1;o<d.children.length-1;o++){var r=d.children[o];if(r.abcelem.rest&&(r.abcelem.rest.type==="whole"||r.abcelem.rest.type==="multimeasure")){var c=d.children[o-1],e=d.children[o+1];r.center(c,e)}}}return j0=a,j0}var K0,oi;function Kc(){if(oi)return K0;oi=1;var p=function(h){this.shouldAddClasses=h.shouldAddClasses,this.reset()};return p.prototype.reset=function(){this.lineNumber=null,this.voiceNumber=null,this.measureNumber=null,this.measureTotalPerLine=[],this.noteNumber=null},p.prototype.incrLine=function(){this.lineNumber===null?this.lineNumber=0:this.lineNumber++,this.voiceNumber=null,this.measureNumber=null,this.noteNumber=null},p.prototype.incrVoice=function(){this.voiceNumber===null?this.voiceNumber=0:this.voiceNumber++,this.measureNumber=null,this.noteNumber=null},p.prototype.isInMeasure=function(){return this.measureNumber!==null},p.prototype.newMeasure=function(){this.measureNumber&&(this.measureTotalPerLine[this.lineNumber]=this.measureNumber),this.measureNumber=null,this.noteNumber=null},p.prototype.startMeasure=function(){this.measureNumber=0,this.noteNumber=0},p.prototype.incrMeasure=function(){this.measureNumber++,this.noteNumber=0},p.prototype.incrNote=function(){this.noteNumber++},p.prototype.measureTotal=function(){for(var l=0,h=0;h<this.lineNumber;h++)l+=this.measureTotalPerLine[h]?this.measureTotalPerLine[h]:0;return this.measureNumber&&(l+=this.measureNumber),l},p.prototype.getCurrent=function(l){return{line:this.lineNumber,measure:this.measureNumber,measureTotal:this.measureTotal(),voice:this.voiceNumber,note:this.noteNumber}},p.prototype.generate=function(l){if(!this.shouldAddClasses)return"";var h=[];if(l&&l.length>0&&h.push(l),l==="abcjs-tab-number")return h.join(" ");if(l==="text instrument-name")return"abcjs-text abcjs-instrument-name";if(this.lineNumber!==null&&h.push("l"+this.lineNumber),this.measureNumber!==null&&h.push("m"+this.measureNumber),this.measureNumber!==null&&h.push("mm"+this.measureTotal()),this.voiceNumber!==null&&h.push("v"+this.voiceNumber),l&&(l.indexOf("note")>=0||l.indexOf("rest")>=0||l.indexOf("lyric")>=0)&&this.noteNumber!==null&&h.push("n"+this.noteNumber),h.length>0){h=h.join(" "),h=h.split(" ");for(var s=0;s<h.length;s++)h[s].indexOf("abcjs-")!==0&&h[s].length>0&&(h[s]="abcjs-"+h[s])}return h.join(" ")},K0=p,K0}var Q0,ci;function Qc(){if(ci)return Q0;ci=1;var p=function(h,s){this.formatting=h,this.classes=s};return p.prototype.updateFonts=function(l){l.gchordfont&&(this.formatting.gchordfont=l.gchordfont),l.tripletfont&&(this.formatting.tripletfont=l.tripletfont),l.annotationfont&&(this.formatting.annotationfont=l.annotationfont),l.vocalfont&&(this.formatting.vocalfont=l.vocalfont)},p.prototype.getFamily=function(l){return l[0]==='"'&&l[l.length-1]==='"'?l.substring(1,l.length-1):l},p.prototype.calc=function(l,h){var s;typeof l=="string"?(s=this.formatting[l],s?s={face:s.face,size:Math.round(s.size*4/3),decoration:s.decoration,style:s.style,weight:s.weight,box:s.box}:s={face:"Arial",size:Math.round(48/3),decoration:"underline",style:"normal",weight:"normal"}):s={face:l.face,size:Math.round(l.size*4/3),decoration:l.decoration,style:l.style,weight:l.weight,box:l.box};var t=this.formatting.fontboxpadding?this.formatting.fontboxpadding:.1;s.padding=s.size*t;var a={"font-size":s.size,"font-style":s.style,"font-family":this.getFamily(s.face),"font-weight":s.weight,"text-decoration":s.decoration,class:this.classes.generate(h)};return{font:s,attr:a}},Q0=p,Q0}var J0,li;function Jc(){if(li)return J0;li=1;var p=function(h,s){this.getFontAndAttr=h,this.svg=s};return p.prototype.updateFonts=function(l){this.getFontAndAttr.updateFonts(l)},p.prototype.attr=function(l,h){return this.getFontAndAttr.calc(l,h)},p.prototype.getFamily=function(l){return l[0]==='"'&&l[l.length-1]==='"'?l.substring(1,l.length-1):l},p.prototype.calc=function(l,h,s,t){var a;typeof h=="string"?a=this.attr(h,s):a={font:{face:h.face,size:h.size,decoration:h.decoration,style:h.style,weight:h.weight},attr:{"font-size":h.size,"font-style":h.style,"font-family":this.getFamily(h.face),"font-weight":h.weight,"text-decoration":h.decoration,class:this.getFontAndAttr.classes.generate(s)}};var n=this.svg.getTextSize(l,a.attr,t);return a.font.box?{height:n.height+a.font.padding*4,width:n.width+a.font.padding*4}:n},p.prototype.baselineToCenter=function(l,h,s,t,a){var n=this.calc(l,h,s).height,i=this.attr(h,s).font.size;return n*.5+(a-t-2)*i},J0=p,J0}var Z0,fi;function We(){if(fi)return Z0;fi=1;var p=function(){for(var l=0,h,s=arguments[l++],t=[],a,n,i,f;s;){if(a=/^[^\x25]+/.exec(s))t.push(a[0]);else if(a=/^\x25{2}/.exec(s))t.push("%");else if(a=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(s)){if((h=arguments[a[1]||l++])==null||h==null)throw"Too few arguments.";if(/[^s]/.test(a[7])&&typeof h!="number")throw"Expecting number but found "+typeof h;switch(a[7]){case"b":h=h.toString(2);break;case"c":h=String.fromCharCode(h);break;case"d":h=parseInt(h);break;case"e":h=a[6]?h.toExponential(a[6]):h.toExponential();break;case"f":h=a[6]?parseFloat(h).toFixed(a[6]):parseFloat(h);break;case"o":h=h.toString(8);break;case"s":h=(h=String(h))&&a[6]?h.substring(0,a[6]):h;break;case"u":h=Math.abs(h);break;case"x":h=h.toString(16);break;case"X":h=h.toString(16).toUpperCase();break}h=/[def]/.test(a[7])&&a[2]&&h>0?"+"+h:h,i=a[3]?a[3]=="0"?"0":a[3][1]:" ",f=a[5]-String(h).length,n=a[5]?str_repeat(i,f):"",t.push(a[4]?h+n:n+h)}else throw"Huh ?!";s=s.substring(a[0].length)}return t.join("")};return Z0=p,Z0}var er,hi;function Pe(){if(hi)return er;hi=1;function p(l){return parseFloat(l.toFixed(2))}return er=p,er}var tr,ui;function Ge(){if(ui)return tr;ui=1;var p=Pe();function l(h,s,t){var a=s.y;if(s.phrases){var v=h.paper.richTextLine(s.phrases,s.x,s.y,s.klass,s.anchor);return v}if(s.lane){var n=s.dim.font.size*.25;a+=(s.dim.font.size+n)*s.lane}var i;s.dim?(i=s.dim,i.attr.class=s.klass):i=h.controller.getFontAndAttr.calc(s.type,s.klass),s.anchor&&(i.attr["text-anchor"]=s.anchor),s["dominant-baseline"]&&(i.attr["dominant-baseline"]=s["dominant-baseline"]),i.attr.x=s.x,i.attr.y=a,s.centerVertically||(i.attr.y+=i.font.size),s.type==="debugfont"&&(console.log("Debug msg: "+s.text),i.attr.stroke="#ff0000"),s.cursor&&(i.attr.cursor=s.cursor);var f;s.name=="free-text"?f=s.text.replace(/^[ \t]*\n/gm,` 
`):f=s.text.replace(/\n\n/g,`
 
`),f=f.replace(/^\n/,`
`),i.font.box&&(t||h.paper.openGroup({klass:i.attr.class,fill:h.foregroundColor,"data-name":s.name}),i.attr["text-anchor"]==="end"?i.attr.x-=i.font.padding:i.attr["text-anchor"]==="start"&&(i.attr.x+=i.font.padding),i.attr.y+=i.font.padding,delete i.attr.class),s.noClass&&delete i.attr.class,i.attr.x=p(i.attr.x),i.attr.y=p(i.attr.y),s.name&&(i.attr["data-name"]=s.name);var v=h.paper.text(f,i.attr);if(i.font.box){var g=v.getBBox(),d=0;i.attr["text-anchor"]==="middle"?d=g.width/2+i.font.padding:i.attr["text-anchor"]==="end"&&(d=g.width+i.font.padding*2);var o=0;s.centerVertically&&(o=g.height-i.font.padding),h.paper.rect({"data-name":"box",x:Math.round(s.x-d),y:Math.round(a-o),width:Math.round(g.width+i.font.padding*2),height:Math.round(g.height+i.font.padding*2)}),t||(v=h.paper.closeGroup())}return v}return tr=l,tr}var rr,di;function Zc(){if(di)return rr;di=1;var p=We(),l=Se(),h=Ge();function s(f,v,g){var d=v.startVoice.staff.absoluteY-l.STEP*10;return v.endVoice&&v.endVoice.staff?v.endY=v.endVoice.staff.absoluteY-l.STEP*2:v.lastContinuedVoice&&v.lastContinuedVoice.staff?v.endY=v.lastContinuedVoice.staff.absoluteY-l.STEP*2:v.endY=v.startVoice.staff.absoluteY-l.STEP*2,i(f,v.x,d,v.endY,v.type,v.header,g)}function t(f,v,g,d,o){v+=l.STEP;var r=l.STEP*.75,c=l.STEP*.75,e=d-g,u=p("M %f %f l %f %f l %f %f l %f %f z",v,g-c,0,e+c*2,r,0,0,-(e+c*2)),m=l.STEP*2,b=l.STEP;return u+=p("M %f %f q %f %f %f %f q %f %f %f %f z",v+r,g-c,m*.6,b*.2,m,-b,-m*.1,b*.3,-m,b+l.STEP),u+=p("M %f %f q %f %f %f %f q %f %f %f %f z",v+r,g+c+e,m*.6,-b*.2,m,b,-m*.1,-b*.3,-m,-b-l.STEP),f.paper.path({path:u,stroke:f.foregroundColor,fill:f.foregroundColor,class:f.controller.classes.generate(o),"data-name":o})}function a(f,v,g,d,o){var r=d-g,c=n(v,g,[7.5,-8,21,0,18.5,-10.5,7.5],[0,r/5.5,r/3.14,r/2,r/2.93,r/4.88,0]);return c+=n(v,g,[0,17.5,-7.5,6.6,-5,20,0],[r/2,r/1.46,r/1.22,r,r/1.19,r/1.42,r/2]),f.paper.path({path:c,stroke:f.foregroundColor,fill:f.foregroundColor,class:f.controller.classes.generate(o),"data-name":o})}function n(f,v,g,d){return p("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",f+g[0],v+d[0],f+g[1],v+d[1],f+g[2],v+d[2],f+g[3],v+d[3],f+g[4],v+d[4],f+g[5],v+d[5],f+g[6],v+d[6])}var i=function(f,v,g,d,o,r,c){var e;if(r){f.paper.openGroup({klass:f.controller.classes.generate("staff-extra voice-name"),"data-name":o});var u=g+(d-g)/2;u=u-f.controller.getTextSize.baselineToCenter(r,"voicefont","staff-extra voice-name",0,1),h(f,{x:f.padding.left,y:u,text:r,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0})}return o==="brace"?e=a(f,v,g,d,o):o==="bracket"&&(e=t(f,v,g,d,o)),r&&(e=f.paper.closeGroup()),c.wrapSvgEl({el_type:o,startChar:-1,endChar:-1},e),e};return rr=s,rr}var ar,pi;function at(){if(pi)return ar;pi=1;function p(l,h,s){var t=l.paper.path(h);return t}return ar=p,ar}var nr,vi;function el(){if(vi)return nr;vi=1;var p=We(),l=at(),h=Pe();function s(e,u,m){(!u.anchor1||!u.anchor2||!u.anchor1.heads||!u.anchor2.heads||u.anchor1.heads.length===0||u.anchor2.heads.length===0)&&window.console.error("Glissando Element not set.");var b=4,x=e.calcY(u.anchor1.heads[0].pitch),T=e.calcY(u.anchor2.heads[0].pitch),E=u.anchor1.x+u.anchor1.w/2,D=u.anchor2.x+u.anchor2.w/2,F=t(E,x,D,T),y=u.anchor1.w/2+b,A=u.anchor2.w/2+b,N=a(E,x,D,T),M=n(x,N,y);n(T,N,-A);var L=i(F-y-A),B=c(e,E+y,M,L,N);return m.wrapSvgEl({el_type:"glissando",startChar:-1,endChar:-1},B),[B]}function t(e,u,m,b){var x=m-e,T=b-u;return Math.sqrt(x*x+T*T)}function a(e,u,m,b){return(b-u)/(m-e)}function n(e,u,m){return h(e+m*u)}function i(e){var u=5;return Math.max(2,Math.floor((e-u*2)/6))}var f=[[3.5,-4.8]],v=[[1.5,-1],[.3,-.3],[-3.5,3.8]],g=[[-1.5,2]],d=[[3,4],[3,-4]],o=[[-3,4],[-3,-4]];function r(e,u){for(var m="",b=0;b<e.length;b++)m+="l"+e[b][0]+" "+n(e[b][1],u,e[b][0]);return m}var c=function(e,u,m,b,x){var T=p("M %f %f",u,m);T+=r(f,x);var E;for(E=0;E<b;E++)T+=r(d,x);for(T+=r(v,x),E=0;E<b;E++)T+=r(o,x);return T+=r(g,x)+"z",l(e,{path:T,highlight:"stroke",stroke:e.foregroundColor,class:e.controller.classes.generate("decoration"),"data-name":"glissando"})};return nr=s,nr}var ir,gi;function tl(){if(gi)return ir;gi=1;var p=We(),l=at(),h=Pe();function s(a,n,i){n.pitch===void 0&&window.console.error("Crescendo Element y-coordinate not set.");var f=a.calcY(n.pitch)+4,v=8,g=n.anchor1?n.anchor1.x:0,d=n.anchor2?n.anchor2.x:800,o;return n.dir==="<"?o=t(a,f+v/2,f,f+v/2,f+v,g,d):o=t(a,f,f+v/2,f+v,f+v/2,g,d),i.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1},o),[o]}var t=function(a,n,i,f,v,g,d){n=h(n),i=h(i),f=h(f),v=h(v),g=h(g),d=h(d);var o=p("M %f %f L %f %f M %f %f L %f %f",g,n,d,i,g,f,d,v);return l(a,{path:o,highlight:"stroke",stroke:a.foregroundColor,class:a.controller.classes.generate("dynamics decoration"),"data-name":"dynamics"})};return ir=s,ir}var sr,bi;function ya(){if(bi)return sr;bi=1;var p=Pe();function l(){this.ingroup=!1}l.prototype.beginGroup=function(s,t){this.paper=s,this.controller=t,this.path=[],this.lastM=[0,0],this.ingroup=!0,this.paper.openGroup()},l.prototype.isInGroup=function(){return this.ingroup},l.prototype.addPath=function(s){if(s=s||[],s.length!==0){s[0][0]="m",s[0][1]=p(s[0][1]-this.lastM[0]),s[0][2]=p(s[0][2]-this.lastM[1]),this.lastM[0]+=s[0][1],this.lastM[1]+=s[0][2],this.path.push(s[0]);for(var t=1,a=s.length;t<a;t++)s[t][0]==="m"&&(this.lastM[0]+=s[t][1],this.lastM[1]+=s[t][2]),this.path.push(s[t])}},l.prototype.endGroup=function(s,t){this.ingroup=!1;for(var a="",n=0;n<this.path.length;n++)a+=this.path[n].join(" ");this.path=[];var i=this.paper.closeGroup();return i&&(i.setAttribute("class",this.controller.classes.generate(s)),i.setAttribute("fill",this.controller.renderer.foregroundColor),i.setAttribute("stroke","none"),i.setAttribute("data-name",t)),i};var h=new l;return sr=h,sr}var or,mi;function Zs(){if(mi)return or;mi=1;var p=Ge(),l=ze(),h=ya();function s(a,n,i,f,v){var g,d;if(!f)return null;if(f.length>1&&f.indexOf(".")<0){var o=h.isInGroup()?"":v.klass;a.paper.openGroup({"data-name":v.name,klass:o});for(var r=0,c=0;c<f.length;c++){var e=f[c];d=l.getYCorr(e),g=l.printSymbol(n+r,a.calcY(i+d),e,a.paper,{stroke:v.stroke,fill:v.fill}),g?c<f.length-1&&(r+=t(e,f[c+1],l.getSymbolWidth(e))):p(a,{x:n,y:a.y,text:"no symbol:"+f,type:"debugfont",klass:"debug-msg",anchor:"start"},!1)}var u=a.paper.closeGroup();return u}else return d=l.getYCorr(f),h.isInGroup()?g=l.printSymbol(n,a.calcY(i+d),f,a.paper,{"data-name":v.name}):g=l.printSymbol(n,a.calcY(i+d),f,a.paper,{klass:v.klass,stroke:v.stroke,fill:v.fill,"data-name":v.name}),g||(p(a,{x:n,y:a.y,text:"no symbol:"+f,type:"debugfont",klass:"debug-msg",anchor:"start"},!1),null)}function t(a,n,i){var f=i;return a==="f"&&n==="f"&&(f=f*2/3),a==="p"&&n==="p"&&(f=f*5/6),a==="f"&&n==="z"&&(f=f*5/8),f}return or=s,or}var cr,yi;function rl(){if(yi)return cr;yi=1;var p=Zs();function l(h,s,t){s.pitch===void 0&&window.console.error("Dynamic Element y-coordinate not set.");var a=1,n=1,i=p(h,s.anchor.x,s.pitch,s.dec,{scalex:a,scaley:n,klass:h.controller.classes.generate("decoration dynamics"),fill:h.foregroundColor,stroke:"none",name:"dynamics"});return t.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1,decoration:s.dec},i),[i]}return cr=l,cr}var lr,wi;function al(){if(wi)return lr;wi=1;var p=We(),l=Ge(),h=at(),s=Pe();function t(i,f,v){i.paper.openGroup({klass:i.controller.classes.generate("triplet "+f.durationClass),"data-name":"triplet"}),f.hasBeam||n(i,f.anchor1.x,f.startNote,f.anchor2.x+f.anchor2.w,f.endNote),l(i,{x:f.xTextPos,y:i.calcY(f.yTextPos-1),text:""+f.number,type:"tripletfont",anchor:"middle",centerVertically:!0,noClass:!0,name:""+f.number},!0);var g=i.paper.closeGroup();return v.wrapSvgEl({el_type:"triplet",startChar:-1,endChar:-1},g),g}function a(i,f,v,g){return p("M %f %f L %f %f",s(i),s(f),s(v),s(g))}function n(i,f,v,g,d){v=i.calcY(v),d=i.calcY(d);var o=5,r="";r+=a(f,v,f,v+o),r+=a(g,d,g,d+o);var c=f+(g-f)/2,e=8,u=(d-v)/(g-f),m=c-e,b=v+(m-f)*u;r+=a(f,v,m,b);var x=c+e,T=v+(x-f)*u;r+=a(x,T,g,d),h(i,{path:r,stroke:i.foregroundColor,"data-name":"triplet-bracket"})}return lr=t,lr}var fr,xi;function nl(){if(xi)return fr;xi=1;var p=We(),l=Ge(),h=at(),s=Pe();function t(a,n,i,f,v){n.pitch===void 0&&window.console.error("Ending Element y-coordinate not set.");var g=s(a.calcY(n.pitch)),d=20,o="";n.anchor1&&(i=s(n.anchor1.x+n.anchor1.w),o+=p("M %f %f L %f %f ",i,g,i,s(g+d))),n.anchor2&&(f=s(n.anchor2.x),o+=p("M %f %f L %f %f ",f,g,f,s(g+d))),o+=p("M %f %f L %f %f ",i,g,f,g),a.paper.openGroup({klass:a.controller.classes.generate("ending"),fill:a.foregroundColor,"data-name":"ending"}),h(a,{path:o,stroke:a.foregroundColor,fill:a.foregroundColor,"data-name":"line"}),n.anchor1&&l(a,{x:s(i+5),y:s(a.calcY(n.pitch-.5)),text:n.text,type:"repeatfont",klass:"ending",anchor:"start",noClass:!0,name:n.text});var r=a.paper.closeGroup();return v.wrapSvgEl({el_type:"ending",startChar:-1,endChar:-1},r),[r]}return fr=t,fr}var hr,Ci;function il(){if(Ci)return hr;Ci=1;var p=We(),l=Pe();function h(a,n,i,f,v){s(n,i,f);var g="";n.anchor1?g+="abcjs-start-m"+n.anchor1.parent.counters.measure+"-n"+n.anchor1.parent.counters.note:g+="abcjs-start-edge",n.anchor2?g+=" abcjs-end-m"+n.anchor2.parent.counters.measure+"-n"+n.anchor2.parent.counters.note:g+=" abcjs-end-edge",n.hint&&(g="abcjs-hint");var d=n.fixedY?1.5:0,o=t(a,n.startX,n.endX,n.startY+d,n.endY+d,n.above,g,n.isTie,n.dotted),r=-1;n.anchor1&&!n.isTie&&(r=n.anchor1.parent.abcelem.startChar-1);var c=-1;return n.anchor2&&!n.isTie&&(c=n.anchor2.parent.abcelem.endChar+1),v.wrapSvgEl({el_type:"slur",startChar:r,endChar:c},o),[o]}var s=function(a,n,i){!a.anchor1||!a.anchor2||a.anchor1.pitch===a.anchor2.pitch&&a.internalNotes.length===0?a.isTie=!0:a.isTie=!1,a.isTie?(a.calcTieDirection(),a.calcX(n,i),a.calcTieY()):(a.calcSlurDirection(),a.calcX(n,i),a.calcSlurY()),a.avoidCollisionAbove()},t=function(a,n,i,f,v,g,d,o,r){var c=o?1.2:1.5;n=l(n+6),i=l(i+4),f=f+(g?c:-c),v=v+(g?c:-c);var e=l(a.calcY(f)),u=l(a.calcY(v)),m=i-n,b=u-e,x=Math.sqrt(m*m+b*b),T=m/x,E=b/x,D=x/3.5,F=o?10:25,y=(g?-1:1)*Math.min(F,Math.max(4,D)),A=l(n+D*T-y*E),N=l(e+D*E+y*T),M=l(i-D*T-y*E),L=l(u-D*E+y*T),B=2;d?d+=" slur":d="slur",d+=o?" tie":" legato";var S;if(r){d+=" dotted";var _=p("M %f %f C %f %f %f %f %f %f",n,e,A,N,M,L,i,u);S=a.paper.path({path:_,stroke:a.foregroundColor,fill:"none","stroke-dasharray":"5 5",class:a.controller.classes.generate(d),"data-name":o?"tie":"slur"})}else{var P=p("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",n,e,A,N,M,L,i,u,l(M-B*E),l(L+B*T),l(A-B*E),l(N+B*T),n,e);S=a.paper.path({path:P,stroke:"none",fill:a.foregroundColor,class:a.controller.classes.generate(d),"data-name":o?"tie":"slur"})}return S};return hr=h,hr}var ur,ki;function sl(){if(ki)return ur;ki=1;var p=at(),l=Pe();function h(n,i){if(i.beams.length!==0){for(var f="",v=0;v<i.beams.length;v++){var g=i.beams[v];if(g.split){for(var d=t(n,g.startX,g.startY,g.endX,g.endY),o=[],r=0;r<g.split.length;r+=2)o.push([g.split[r],g.split[r+1]]);for(r=0;r<o.length;r++){var c=a(g.startX,g.startY,d,o[r][0]),e=a(g.startX,g.startY,d,o[r][1]);f+=s(n,o[r][0],c,o[r][1],e,g.dy)}}else f+=s(n,g.startX,g.startY,g.endX,g.endY,g.dy)}var u=("abcjs-d"+i.duration).replace(/\./g,"-"),m=n.controller.classes.generate("beam-elem "+u),b=p(n,{path:f,stroke:"none",fill:n.foregroundColor,class:m});return[b]}}function s(n,i,f,v,g,d){f=l(n.calcY(f)),g=l(n.calcY(g)),i=l(i),v=l(v);var o=l(f+d),r=l(g+d);return"M"+i+" "+f+" L"+v+" "+g+"L"+v+" "+r+" L"+i+" "+o+"z"}function t(n,i,f,v,g){return(g-f)/(v-i)}function a(n,i,f,v){var g=v-n;return i+g*f}return ur=h,ur}var dr,_i;function eo(){if(_i)return dr;_i=1;var p=ya(),l=Pe();function h(s,t,a,n,i,f,v){if(a<0||n<i){var g=l(i);i=l(n),n=g}else n=l(n),i=l(i);t=l(t);var d=l(t+a);if(s.firefox112){t+=a/2;var r={x1:t,x2:t,y1:n,y2:i,stroke:s.foregroundColor,"stroke-width":Math.abs(a)};return f&&(r.class=f),v&&(r["data-name"]=v),s.paper.lineToBack(r)}for(var o=[["M",t,n],["L",t,i],["L",d,i],["L",d,n],["z"]],r={path:""},c=0;c<o.length;c++)r.path+=o[c].join(" ");return f&&(r.class=f),v&&(r["data-name"]=v),p.isInGroup()||(r.stroke="none",r.fill=s.foregroundColor),s.paper.pathToBack(r)}return dr=h,dr}var pr,Ti;function ol(){if(Ti)return pr;Ti=1;var p=We(),l=Pe();function h(s,t,a,n,i,f,v){var g=s.foregroundColor;t=l(t),a=l(a);var d=l(n-v),o=l(n+v);if(s.firefox112){n+=v/2;var r={x1:t,x2:a,y1:n,y2:n,stroke:s.foregroundColor,"stroke-width":Math.abs(v*2)};return i&&(r.class=i),f&&(r["data-name"]=f),s.paper.lineToBack(r)}var c=p("M %f %f L %f %f L %f %f L %f %f z",t,d,a,d,a,o,t,o),e={path:c,stroke:"none",fill:g};f&&(e["data-name"]=f),i&&(e.class=i);var u=s.paper.pathToBack(e);return u}return pr=h,pr}var vr,Si;function to(){if(Si)return vr;Si=1;var p=ol();function l(h,s,t,a,n,i,f){var v=h.calcY(a);return p(h,s,t,v,n,i,f)}return vr=l,vr}var gr,Ei;function ro(){if(Ei)return gr;Ei=1;var p=Ge(),l=eo(),h=to(),s=Zs();function t(n,i,f){i.pitch===void 0&&window.console.error(i.type+" Relative Element y-coordinate not set.");var v=n.calcY(i.pitch);switch(i.type){case"symbol":if(i.c===null)return null;var g="symbol";i.klass&&(g+=" "+i.klass),i.graphelem=s(n,i.x,i.pitch,i.c,{scalex:i.scalex,scaley:i.scaley,klass:n.controller.classes.generate(g),name:i.name});break;case"debug":i.graphelem=p(n,{x:i.x,y:n.calcY(15),text:""+i.c,type:"debugfont",klass:n.controller.classes.generate("debug-msg"),anchor:"start",centerVertically:!1,dim:i.dim},!1);break;case"tabNumber":var d="middle",o="tabnumberfont",r="abcjs-tab-number";i.isGrace&&(o="tabgracefont",v+=2.5,r="tab-grace"),i.graphelem=p(n,{x:i.x,y:v,text:""+i.c,type:o,klass:n.controller.classes.generate(r),anchor:d,centerVertically:!1,dim:i.dim,cursor:"default"},!1);break;case"barNumber":i.graphelem=p(n,{x:i.x,y:v,text:""+i.c,type:"measurefont",klass:n.controller.classes.generate("bar-number"),anchor:"middle",dim:i.dim,name:"bar-number"},!0);break;case"lyric":i.graphelem=p(n,{x:i.x,y:v,text:i.c,type:"vocalfont",klass:n.controller.classes.generate("lyric"),anchor:"middle",dim:i.dim,name:"lyric"},!1);break;case"chord":i.graphelem=p(n,{x:i.x,y:v,text:i.c,type:"gchordfont",klass:n.controller.classes.generate("chord"),anchor:"middle",dim:i.dim,lane:i.getLane(),name:"chord"},!1);break;case"decoration":i.graphelem=p(n,{x:i.x,y:v+6,text:i.c,type:"annotationfont",klass:n.controller.classes.generate("annotation"),anchor:i.anchor,centerVertically:!0,dim:i.dim},!1);break;case"text":i.graphelem=p(n,{x:i.x,y:v,text:i.c,type:"annotationfont",klass:n.controller.classes.generate("annotation"),anchor:"start",centerVertically:i.centerVertically,dim:i.dim,lane:i.getLane(),name:"annotation"},!1);break;case"multimeasure-text":i.graphelem=p(n,{x:i.x+i.w/2,y:v,text:i.c,type:"tempofont",klass:n.controller.classes.generate("rest"),anchor:"middle",centerVertically:!1,dim:i.dim},!1);break;case"part":i.graphelem=p(n,{x:i.x,y:v,text:i.c,type:"partsfont",klass:n.controller.classes.generate("part"),anchor:"start",dim:i.dim,name:i.c},!0);break;case"bar":i.graphelem=l(n,i.x,i.linewidth+n.lineThickness,v,f||n.calcY(i.pitch2),null,"bar");break;case"stem":var c=i.linewidth>0?i.linewidth+n.lineThickness:i.linewidth-n.lineThickness;i.graphelem=l(n,i.x,c,v,n.calcY(i.pitch2),"abcjs-stem","stem");break;case"ledger":i.graphelem=h(n,i.x,i.x+i.w,i.pitch,"abcjs-ledger","ledger",.35+n.lineThickness);break}return i.scalex!==1&&i.graphelem&&a(n.paper,i.graphelem,i.scalex,i.scaley,i.x,v),i.graphelem}function a(n,i,f,v,g,d){n.setAttributeOnElement(i,{style:"transform:scale("+f+","+v+");transform-origin:"+g+"px "+d+"px;"})}return gr=t,gr}var br,Ai;function cl(){if(Ai)return br;Ai=1;var p=ro(),l=Ge();function h(s,t){var a=t.x;t.pitch===void 0&&window.console.error("Tempo Element y-coordinate not set."),t.tempo.el_type="tempo";var n=s.calcY(t.pitch)+2,i,f;if(t.tempo.preString){i=l(s,{x:a,y:n,text:t.tempo.preString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"pre"},!0),f=s.controller.getTextSize.calc(t.tempo.preString,"tempofont","tempo",i);var v=f.width,g=v/t.tempo.preString.length;a+=v+g}if(t.note){t.note.setX(a);for(var d=0;d<t.note.children.length;d++)p(s,t.note.children[d],a);a+=t.note.w+5;var o="= "+t.tempo.bpm;i=l(s,{x:a,y:n,text:o,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"beats"}),f=s.controller.getTextSize.calc(o,"tempofont","tempo",i);var r=f.width,c=r/o.length;a+=r+c}t.tempo.postString&&l(s,{x:a,y:n,text:t.tempo.postString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"post"},!0)}return br=h,br}var mr,Mi;function ll(){if(Mi)return mr;Mi=1;var p=cl(),l=ro(),h=Se(),s=ga(),t=ya();function a(n,i,f,v,g){if(!i.invisible){var d=i.children.length>0&&i.children[0].type==="TempoElement";i.elemset=[],t.beginGroup(n.paper,n.controller);for(var o=0;o<i.children.length;o++){var r=i.children[o];switch(r.type){case"TempoElement":p(n,r);break;default:var c=l(n,r,f);r.type==="symbol"&&r.c&&r.c.indexOf("notehead")>=0&&c.setAttribute("class","abcjs-notehead")}}var e=i.type;if((i.type==="note"||i.type==="rest")&&(i.counters=n.controller.classes.getCurrent(),e+=" d"+Math.round(i.durationClass*1e3)/1e3,e=e.replace(/\./g,"-"),i.abcelem.pitches))for(var u=0;u<i.abcelem.pitches.length;u++)e+=" p"+i.abcelem.pitches[u].pitch;var m=t.endGroup(e,i.type);if(m){if(i.cloned&&(i.cloned.overrideClasses=m.className.baseVal),i.overrideClasses){var b=m.classList&&m.classList.length>0?m.classList[0]+" ":"";m.setAttribute("class",b+i.overrideClasses)}if(d)i.startChar=i.abcelem.startChar,i.endChar=i.abcelem.endChar,v.add(i,m,!1,g);else{i.elemset.push(m);var x=!1;(i.type==="note"||i.type==="tabNumber")&&(x=!0),v.add(i,m,x,g)}}else i.elemset.length>0&&v.add(i,i.elemset[0],i.type==="note",g);if(i.klass&&s(i.elemset,"mark","","#00ff00"),i.hint&&s(i.elemset,"abcjs-hint","",null),i.abcelem.abselem=i,i.heads&&i.heads.length>0){i.notePositions=[];for(var T=0;T<i.heads.length;T++)i.notePositions.push({x:i.heads[T].x+i.heads[T].w/2,y:g.zero-i.heads[T].pitch*h.STEP})}}}return mr=a,mr}var yr,Bi;function fl(){if(Bi)return yr;Bi=1;var p=el(),l=tl(),h=rl(),s=al(),t=nl(),a=il(),n=sl(),i=Ge(),f=ll();function v(d,o,r,c,e){var u=o.w-1;d.staffbottom=o.staff.bottom;var m=d.foregroundColor;if(o.color&&(d.foregroundColor=o.color),o.header){var b=i(d,{x:d.padding.left,y:d.calcY(o.headerPosition),text:o.header,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0,name:"voice-name"},!0);c.wrapSvgEl({el_type:"voiceName",startChar:-1,endChar:-1,text:o.header},b)}var x,T,E=!1;for(x=0;x<o.children.length;x++){T=o.children[x],(T.type==="note"||T.type==="rest")&&(E=!0);var D=!1;T.type!=="staff-extra"&&!d.controller.classes.isInMeasure()&&(d.controller.classes.startMeasure(),D=!0),o.staff.isTabStaff&&(T.invisible=!1,T.type=="bar"&&T.abcelem.lastBar&&(r=o.topLine)),f(d,T,o.barto||x===o.children.length-1?r:0,c,e),(T.type==="note"||g(T))&&d.controller.classes.incrNote(),T.type==="bar"&&!D&&E&&d.controller.classes.incrMeasure()}for(d.controller.classes.startMeasure(),x=0;x<o.beams.length;x++){var F=o.beams[x];F==="bar"?d.controller.classes.incrMeasure():n(d,F,c)}for(d.controller.classes.startMeasure(),x=0;x<o.otherchildren.length;x++)if(T=o.otherchildren[x],T==="bar")d.controller.classes.incrMeasure();else switch(T.type){case"GlissandoElem":T.elemset=p(d,T,c);break;case"CrescendoElem":T.elemset=l(d,T,c);break;case"DynamicDecoration":T.elemset=h(d,T,c);break;case"TripletElem":s(d,T,c);break;case"EndingElem":T.elemset=t(d,T,o.startx+10,u,c);break;case"TieElem":T.elemset=a(d,T,o.startx+10,u,c);break;default:console.log(T),f(d,T,o.startx+10,u,c,e)}d.foregroundColor=m}function g(d){return d.type!=="rest"?!1:!!(d.abcelem&&d.abcelem.rest&&d.abcelem.rest.type!=="spacer")}return yr=v,yr}var wr,Ni;function hl(){if(Ni)return wr;Ni=1;var p=to();function l(h,s,t,a,n,i){var f="abcjs-top-line",v=2;n&&(v=n),h.paper.openGroup({prepend:!0,klass:h.controller.classes.generate("abcjs-staff")});var g=0,d=0;if(a===1)p(h,s,t,6,f,null,i+h.lineThickness),g=h.calcY(10),d=h.calcY(2);else for(var o=a-1;o>=0;o--){var r=(o+1)*v;d=h.calcY(r),g===0&&(g=d),p(h,s,t,r,f,null,i+h.lineThickness),f=void 0}return h.paper.closeGroup(),[g,d]}return wr=l,wr}var xr,Li;function ul(){if(Li)return xr;Li=1;function p(l,h,s){var t=l.paper.rectBeneath(h);return s&&l.paper.text(s,{x:0,y:h.y+7,"text-anchor":"start","font-size":"14px",fill:"rgba(0,0,255,.4)",stroke:"rgba(0,0,255,.4)"}),t}return xr=p,xr}var Cr,Pi;function dl(){if(Pi)return Cr;Pi=1;function p(l,h){var s="rgba(0,0,0,255)",t="rgba(0,0,0,0)",a=Math.round(l.y),n=l.controller.width,i=(n-h)/2,f=i+h,v="M "+i+" "+a+" L "+f+" "+a+" L "+f+" "+(a+1)+" L "+i+" "+(a+1)+" L "+i+" "+a+" z";l.paper.pathToBack({path:v,stroke:t,fill:s,class:l.controller.classes.generate("defined-text")})}return Cr=p,Cr}var kr,qi;function ao(){if(qi)return kr;qi=1;var p=dl(),l=Ge();function h(s,t,a){for(var n=0;n<t.rows.length;n++){var i=t.rows[n];if(i.absmove)s.absolutemoveY(i.absmove);else if(i.move)s.moveY(i.move);else if(i.text||i.phrases){var f=i.left?i.left:0,v=l(s,{x:f,y:s.y,text:i.text,phrases:i.phrases,"dominant-baseline":i["dominant-baseline"],type:i.font,klass:i.klass,name:i.name,anchor:i.anchor});i.absElemType&&a.wrapSvgEl({el_type:i.absElemType,name:i.name,startChar:i.startChar,endChar:i.endChar,text:i.text},v)}else if(i.separator)p(s,i.separator);else if(i.startGroup)s.paper.openGroup({klass:i.klass,"data-name":i.name});else if(i.endGroup){var g=s.paper.closeGroup();i.absElemType&&a.wrapSvgEl({el_type:i.absElemType,name:i.name,startChar:i.startChar,endChar:i.endChar,text:""},g)}}}return kr=h,kr}var _r,Di;function pl(){if(Di)return _r;Di=1;var p=Se(),l=Zc(),h=fl(),s=hl(),t=ul(),a=eo(),n=ao();function i(g,d,o,r){for(var c,e=g.y,u=0;u<d.staffs.length;u++){var m=d.staffs[u];g.moveY(p.STEP,m.top),m.absoluteY=g.y,g.showDebug&&(g.showDebug.indexOf("box")>=0&&m.voices&&v(g,d.voices,m.voices),g.showDebug.indexOf("grid")>=0&&(g.paper.dottedLine({x1:g.padding.left,x2:g.padding.left+g.controller.width,y1:e,y2:e,stroke:"#0000ff"}),t(g,{x:g.padding.left,y:g.calcY(m.originalTop),width:g.controller.width,height:g.calcY(m.originalBottom)-g.calcY(m.originalTop),fill:g.foregroundColor,stroke:g.foregroundColor,"fill-opacity":.1,"stroke-opacity":.1}),c=0,S(m,"chordHeightAbove"),S(m,"chordHeightBelow"),S(m,"dynamicHeightAbove"),S(m,"dynamicHeightBelow"),S(m,"endingHeightAbove"),S(m,"lyricHeightAbove"),S(m,"lyricHeightBelow"),S(m,"partHeightAbove"),S(m,"tempoHeightAbove"),S(m,"volumeHeightAbove"),S(m,"volumeHeightBelow"))),g.moveY(p.STEP,-m.bottom),g.showDebug&&g.showDebug.indexOf("grid")>=0&&g.paper.dottedLine({x1:g.padding.left,x2:g.padding.left+g.controller.width,y1:g.y,y2:g.y,stroke:"#0000aa"})}for(var b,x,T=2,E=0,D=0;D<d.voices.length;D++){var F=d.voices[D].staff,y=d.voices[D].tabNameInfos;if(g.y=F.absoluteY,g.controller.classes.incrVoice(),!d.voices[D].duplicate){if(b||(b=g.calcY(10)),x=g.calcY(T),F.lines!==0){F.linePitch&&(T=F.linePitch),g.controller.classes.newMeasure();var A=s(g,d.startx,d.w,F.lines,F.linePitch,.35);x=A[1],F.bottomLine=x,F.topLine=A[0],F.hasTab&&(E=F.topLine),F.hasStaff&&(E=F.hasStaff.topLine,d.voices[D].barto=!0,d.voices[D].topLine=b)}f(g,F.absoluteY,d.brace,D,o),f(g,F.absoluteY,d.bracket,D,o)}h(g,d.voices[D],E,o,{top:e,zero:g.y,height:d.height*p.STEP});var N=0;if(y){var M={rows:[]};M.rows.push({absmove:x+2});var L=8;M.rows.push({left:d.startx+L,text:y.name,font:"tablabelfont",klass:"text instrument-name",anchor:"start"}),M.rows.push({move:y.textSize.height}),n(g,M),N=y.textSize.height}g.controller.classes.newMeasure(),d.voices[D].duplicate||(E=g.calcY(2+N))}g.controller.classes.newMeasure();var B=d.staffs.length;B>1&&(b=d.staffs[0].topLine,x=d.staffs[B-1].bottomLine,a(g,d.startx,.6,b,x,null)),g.y=e;function S(_,P){var O=["rgb(207,27,36)","rgb(168,214,80)","rgb(110,161,224)","rgb(191,119,218)","rgb(195,30,151)","rgb(31,170,177)","rgb(220,166,142)"];if(_.positionY&&_.positionY[P]){var I=_.specialY[P]*p.STEP;P==="chordHeightAbove"&&_.specialY.chordLines&&_.specialY.chordLines.above&&(I*=_.specialY.chordLines.above),P==="chordHeightBelow"&&_.specialY.chordLines&&_.specialY.chordLines.below&&(I*=_.specialY.chordLines.below),t(g,{x:g.padding.left,y:g.calcY(_.positionY[P]),width:g.controller.width,height:I,fill:O[c],stroke:O[c],"fill-opacity":.4,"stroke-opacity":.4},P.substr(0,4)),c+=1,c>6&&(c=0)}}}function f(g,d,o,r,c){if(o)for(var e=0;e<o.length;e++)o[e].isStartVoice(r)&&(o[e].startY=d-p.STEP*10,o[e].elemset=l(g,o[e],c))}function v(g,d,o){for(var r=0;r<o.length;r++)for(var c=d[o[r]].children,e=0;e<c.length;e++){var u=c[e],m=u.getFixedCoords();if(!(u.invisible||m.t===void 0||m.b===void 0)){var b=(m.t-m.b)*p.STEP;t(g,{x:m.x,y:g.calcY(m.t),width:m.w,height:b,fill:"#88e888","fill-opacity":.4,stroke:"#4aa93d","stroke-opacity":.8});for(var x=0;x<u.children.length;x++){var T=u.children[x],E=T.getChordDim();if(E){var D=g.calcY(T.pitch);D+=T.dim.font.size*T.getLane(),t(g,{x:E.left,y:D,width:E.right-E.left,height:T.dim.font.size,fill:"none",stroke:"#4aa93d","stroke-opacity":.8})}}}}}return _r=i,_r}var Tr,Ii;function vl(){if(Ii)return Tr;Ii=1;function p(l,h,s,t){var a=(h+l.padding.left+l.padding.right)*s,n=(l.y+l.padding.bottom)*s;if(l.isPrint&&(n=Math.max(n,1056)),l.ariaLabel!==""){var i="Sheet Music";l.abctune&&l.abctune.metaText&&l.abctune.metaText.title&&(i+=' for "'+l.abctune.metaText.title+'"'),l.paper.setTitle(i);var f=l.ariaLabel?l.ariaLabel:i;l.paper.setAttribute("aria-label",f)}var v=["-webkit-touch-callout: none;","-webkit-user-select: none;","-khtml-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;"];l.paper.insertStyles(".abcjs-dragging-in-progress text, .abcjs-dragging-in-progress tspan {"+v.join(" ")+"}");var g={overflow:"hidden"};t==="resize"?l.paper.setResponsiveWidth(a,n):(g.width="",g.height=n+"px",s<1?(g.width=a+"px",l.paper.setSize(a/s,n/s)):l.paper.setSize(a,n)),l.paper.setScale(s),l.paper.setParentStyles(g)}return Tr=p,Tr}var Sr,Fi;function gl(){if(Fi)return Sr;Fi=1;var p=Ws(),l=Us();function h(s,t,a){this.elements=[],this.paper=s,this.tuneNumber=a,this.selectTypes=t}return h.prototype.getElements=function(){return this.elements},h.prototype.add=function(s,t,a,n){if(this.canSelect(s)){var i;this.selectTypes===void 0?i={selectable:!1,"data-index":this.elements.length}:i={selectable:!0,tabindex:0,"data-index":this.elements.length},this.paper.setAttributeOnElement(t,i);var f={absEl:s,svgEl:t,isDraggable:a};n!==void 0&&(f.staffPos=n),this.elements.push(f)}},h.prototype.canSelect=function(s){return this.selectTypes===!1||!s||!s.abcelem?!1:this.selectTypes===!0?!0:this.selectTypes===void 0?s.abcelem.el_type==="note"||s.abcelem.el_type==="tabNumber":this.selectTypes.indexOf(s.abcelem.el_type)>=0},h.prototype.wrapSvgEl=function(s,t){var a={tuneNumber:this.tuneNumber,abcelem:s,elemset:[t],highlight:p,unhighlight:l};this.add(a,t,!1)},Sr=h,Sr}var Er,Oi;function bl(){if(Oi)return Er;Oi=1;var p=pl(),l=vl(),h=ao(),s=Se(),t=gl();function a(f,v,g,d,o,r,c,e,u,m){var b=new t(f.paper,e,u),x={};v.shouldAddClasses&&(x.klass="abcjs-meta-top"),f.paper.openGroup(x),f.moveY(f.padding.top),h(f,g.topText,b),f.paper.closeGroup(),f.moveY(f.spacing.music);for(var T=[],E=0,D=0;D<g.lines.length;D++){v.incrLine();var F=g.lines[D];if(F.staff){if(E++,g.formatting.maxStaves&&E>g.formatting.maxStaves)break;v.shouldAddClasses&&(x.klass="abcjs-staff-wrapper abcjs-l"+v.lineNumber),f.paper.openGroup(x),F.vskip&&f.moveY(F.vskip),T.length>=1&&i(f,f.spacing.staffSeparation,T[T.length-1],F.staffGroup);var y=n(f,F.staffGroup,b,D);y.line=m+D,T.push(y),f.paper.closeGroup()}else F.nonMusic&&(v.shouldAddClasses&&(x.klass="abcjs-non-music"),f.paper.openGroup(x),h(f,F.nonMusic,b),f.paper.closeGroup())}return v.reset(),g.bottomText&&g.bottomText.rows&&g.bottomText.rows.length>0&&(v.shouldAddClasses&&(x.klass="abcjs-meta-bottom"),f.paper.openGroup(x),f.moveY(24),h(f,g.bottomText,b),f.paper.closeGroup()),l(f,o,c,r),{staffgroups:T,selectables:b.getElements()}}function n(f,v,g,d){p(f,v,g,d);var o=v.height*s.STEP;return f.y+=o,v}function i(f,v,g,d){var o=g.staffs[g.staffs.length-1],r=-(o.bottom-2),c=d.staffs[0].top-10,e=c+r,u=e*s.STEP;u<v&&f.moveY(v-u)}return Er=a,Er}var Ar,Ri;function ml(){if(Ri)return Ar;Ri=1;var p=Qs();function l(h){for(var s=h;s&&s.attributes&&s.tagName.toLowerCase()!=="svg"&&!s.attributes.selectable;)s=s.parentNode;if(s&&s.attributes&&s.attributes.selectable){var t=s.attributes["data-index"].nodeValue;if(t&&(t=parseInt(t,10),t>=0&&t<this.selectables.length)){var a=this.selectables[t],n=p(a,h);return n.index=t,n.element=a,n}}return null}return Ar=l,Ar}var Mr,Hi;function no(){if(Hi)return Mr;Hi=1;var p=Se(),l=Pc(),h=Dc(),s=Ic(),t=Fc(),a=Oc(),n=Rc(),i=Hc(),f=zc(),v=jc(),g=Kc(),d=Qc(),o=Jc(),r=bl(),c=Xs(),e=ml(),u=function(x,T){T=T||{},this.findSelectableElement=e,this.oneSvgPerLine=T.oneSvgPerLine,this.selectionColor=T.selectionColor,this.dragColor=T.dragColor?T.dragColor:T.selectionColor,this.dragging=!!T.dragging,this.selectTypes=T.selectTypes,this.responsive=T.responsive,this.space=3*p.SPACE,this.initialClef=T.initialClef,this.timeBasedLayout=T.timeBasedLayout,this.expandToWidest=!!T.expandToWidest,this.scale=T.scale?parseFloat(T.scale):0,this.classes=new g({shouldAddClasses:T.add_classes}),this.scale>.1||(this.scale=void 0),T.staffwidth?(this.staffwidthScreen=T.staffwidth,this.staffwidthPrint=T.staffwidth):(this.staffwidthScreen=740,this.staffwidthPrint=680),this.listeners=[],T.clickListener&&this.addSelectListener(T.clickListener),this.renderer=new h(x),this.renderer.setPaddingOverride(T),T.showDebug&&(this.renderer.showDebug=T.showDebug),T.jazzchords&&(this.jazzchords=T.jazzchords),T.accentAbove&&(this.accentAbove=T.accentAbove),T.germanAlphabet&&(this.germanAlphabet=T.germanAlphabet),T.lineThickness&&(this.lineThickness=T.lineThickness),this.renderer.controller=this,this.renderer.foregroundColor=T.foregroundColor?T.foregroundColor:"currentColor",T.ariaLabel!==void 0&&(this.renderer.ariaLabel=T.ariaLabel),this.renderer.minPadding=T.minPadding?T.minPadding:0,this.reset()};u.prototype.reset=function(){this.selected=[],this.staffgroups=[],this.engraver&&this.engraver.reset(),this.engraver=null,this.renderer.reset(),this.dragTarget=null,this.dragIndex=-1,this.dragMouseStart={x:-1,y:-1},this.dragYStep=0,this.lineThickness&&this.renderer.setLineThickness(this.lineThickness)},u.prototype.engraveABC=function(x,T,E){x[0]===void 0&&(x=[x]),this.reset();for(var D=0;D<x.length;D++)T===void 0&&(T=D),this.getFontAndAttr=new d(x[D].formatting,this.classes),this.getTextSize=new o(this.getFontAndAttr,this.renderer.paper),this.engraveTune(x[D],T,E)},u.prototype.adjustNonScaledItems=function(x){this.width/=x,this.renderer.adjustNonScaledItems(x)},u.prototype.getMeasureWidths=function(x){this.reset(),this.getFontAndAttr=new d(x.formatting,this.classes),this.getTextSize=new o(this.getFontAndAttr,this.renderer.paper);var T=this.jazzchords;this.setupTune(x,0),this.constructTuneElements(x),v(this.renderer,x,0,this.space,this.timeBasedLayout);for(var E=[],D,F=!0,y=0;y<x.lines.length;y++){var A=x.lines[y];if(A.staff){if(F&&(D={left:0,measureWidths:[],total:0},E.push(D),F=!1),A.staffGroup.voices.length>0)for(var N=A.staffGroup.voices[0],M=!1,L=0,B=0;B<N.children.length;B++){var S=N.children[B];!M&&!S.isClef&&!S.isKeySig&&(M=!0,D.left=S.x,L=S.x),S.type==="bar"&&(D.measureWidths.push(S.x-L),D.total+=S.x-L,L=S.x)}}else F=!0}return this.jazzchords=T,E},u.prototype.setupTune=function(x,T){this.classes.reset(),x.formatting.jazzchords!==void 0&&(this.jazzchords=x.formatting.jazzchords),x.formatting.accentAbove!==void 0&&(this.accentAbove=x.formatting.accentAbove),this.renderer.newTune(x),this.engraver=new l(this.getTextSize,T,{bagpipes:x.formatting.bagpipes,flatbeams:x.formatting.flatbeams,graceSlurs:x.formatting.graceSlurs!==!1,percmap:x.formatting.percmap,initialClef:this.initialClef,jazzchords:this.jazzchords,timeBasedLayout:this.timeBasedLayout,accentAbove:this.accentAbove,germanAlphabet:this.germanAlphabet}),this.engraver.setStemHeight(this.renderer.spacing.stemHeight),this.engraver.measureLength=x.getMeterFraction().num/x.getMeterFraction().den,x.formatting.staffwidth?this.width=x.formatting.staffwidth*1.33:this.width=this.renderer.isPrint?this.staffwidthPrint:this.staffwidthScreen;var E=x.formatting.scale?x.formatting.scale:this.scale;return this.responsive==="resize"&&(E=void 0),E===void 0&&(E=this.renderer.isPrint?.75:1),this.adjustNonScaledItems(E),E},u.prototype.constructTuneElements=function(x){x.topText=new n(x.metaText,x.metaTextInfo,x.formatting,x.lines,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize);var T,E,D=!1,F=!1;for(T=0;T<x.lines.length;T++)if(E=x.lines[T],E.staff)F=!0,E.staffGroup=this.engraver.createABCLine(E.staff,D?null:x.metaText.tempo,T),D=!0;else if(E.subtitle){if(F){var y=this.width/2+this.renderer.padding.left;E.nonMusic=new a(this.renderer.spacing.subtitle,x.formatting,E.subtitle,y,this.renderer.padding.left,this.getTextSize)}}else E.text!==void 0?(F=!0,E.nonMusic=new s(E.text,E.vskip,this.getFontAndAttr,this.renderer.padding.left,this.width,this.getTextSize)):E.separator!==void 0&&E.separator.lineLength&&(F=!0,E.nonMusic=new t(E.separator.spaceAbove,E.separator.lineLength,E.separator.spaceBelow));x.bottomText=new i(x.metaText,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize)},u.prototype.engraveTune=function(x,T,E){var D=this.jazzchords,F=this.setupTune(x,T);this.constructTuneElements(x);var y=v(this.renderer,x,this.width,this.space,this.expandToWidest,this.timeBasedLayout);if(this.expandToWidest&&y>this.width+1&&(x.topText=new n(x.metaText,x.metaTextInfo,x.formatting,x.lines,y,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize),x.lines&&x.lines.length>0))for(var A=x.lines.length,N=0;N<A;++N){var M=x.lines[N];if(M.nonMusic&&M.nonMusic.rows&&M.nonMusic.rows.length>0)for(var L=M.nonMusic.rows.length,B=0;B<L;++B){var S=M.nonMusic.rows[B];S.left&&(M.subtitle?S.left=y/2+this.renderer.padding.left:M.text&&M.text.length>0&&M.text[0].center&&(S.left=y/2+this.renderer.padding.left))}}x.tablatures&&c.layoutTablatures(this.renderer,x);var _=r(this.renderer,this.classes,x,this.width,y,this.responsive,F,this.selectTypes,T,E);if(this.staffgroups=_.staffgroups,this.selectables=_.selectables,this.oneSvgPerLine){var P=this.renderer.paper.svg.parentNode;this.svgs=m(this.renderer,P,x.metaText.title,this.responsive,F)}else this.svgs=[this.renderer.paper.svg];f(this,this.svgs),this.jazzchords=D};function m(x,T,E,D,F){E||(E="Untitled");var y=T.querySelector("svg");D==="resize"&&(T.style.paddingBottom="");for(var A=y.querySelector("style"),N=D==="resize"?y.viewBox.baseVal.width:y.getAttribute("width"),M=T.querySelectorAll("svg > g"),L=0,B=[],S=0;S<M.length;S++){var _=M[S],P=_.getBBox(),O=P.y-L,I=P.height+O,w=document.createElement("div"),C="overflow: hidden;";D!=="resize"&&(C+="height:"+I*F+"px;"),w.setAttribute("style",C);var k=b(y),q='Sheet Music for "'+E+'" section '+(S+1);k.setAttribute("aria-label",q),D!=="resize"&&k.setAttribute("height",I),D==="resize"&&(k.style.position="");var R=x.firefox112?I+1:I;k.setAttribute("viewBox","0 "+L+" "+N+" "+R),k.appendChild(A.cloneNode(!0));var z=document.createElement("title");z.innerText=q,k.appendChild(z),k.appendChild(_),w.appendChild(k),B.push(k),T.appendChild(w),L=P.y+P.height}return T.removeChild(y),B}function b(x){for(var T="http://www.w3.org/2000/svg",E=document.createElementNS(T,"svg"),D=0;D<x.attributes.length;D++){var F=x.attributes[D];F.name!=="height"&&F.name!="aria-label"&&E.setAttribute(F.name,F.value)}return E}return u.prototype.getDim=function(x){if(!x.dim){var T=x.svgEl.getBBox();x.dim={left:Math.round(T.x),top:Math.round(T.y),right:Math.round(T.x+T.width),bottom:Math.round(T.y+T.height)}}return x.dim},u.prototype.addSelectListener=function(x){this.listeners[this.listeners.length]=x},Mr=u,Mr}var Br,zi;function io(){if(zi)return Br;zi=1;var p=gt();zs();var l=no(),h=Gs(),s=Os(),t={};function a(){var v=window.innerWidth;for(var g in t)if(t.hasOwnProperty(g)){var d=t[g],o=d.offsetLeft;v-=o*2,d.style.width=v+"px"}}try{window.addEventListener("resize",a),window.addEventListener("orientationChange",a)}catch{}function n(v,g,d,o,r){d.viewportHorizontal?(v.innerHTML='<div class="abcjs-inner"></div>',d.scrollHorizontal?(v.style.overflowX="auto",v.style.overflowY="hidden"):v.style.overflow="hidden",t[v.id]=v,v=v.children[0]):d.viewportVertical?(v.innerHTML='<div class="abcjs-inner scroll-amount"></div>',v.style.overflowX="hidden",v.style.overflowY="auto",v=v.children[0]):v.innerHTML="";var c=new l(v,d);if(c.engraveABC(g,o,r),g.engraver=c,d.viewportVertical||d.viewportHorizontal){var e=v.parentNode;e.style.width=v.style.width}}var i=function(v,g,d,o,r){var c={},e;if(d){for(e in d)d.hasOwnProperty(e)&&(c[e]=d[e]);c.warnings_id&&c.tablature&&(c.tablature.warning_id=c.warnings_id)}if(o)for(e in o)o.hasOwnProperty(e)&&(e==="listener"?o[e].highlight&&(c.clickListener=o[e].highlight):c[e]=o[e]);if(r)for(e in r)r.hasOwnProperty(e)&&(c[e]=r[e]);function u(m,b,x,T){var E=!1;return m==="*"&&(E=!0,m=document.createElement("div"),m.setAttribute("style","visibility: hidden;"),document.body.appendChild(m)),!E&&c.wrap&&c.staffwidth?(b=f(m,b,x,T,c),b):(c.afterParsing&&c.afterParsing(b,x,T),n(m,b,c,x,0),E&&m.parentNode.removeChild(m),null)}return p.renderEngine(u,v,g,c)};function f(v,g,d,o,r){var c=new l(v,r),e=c.getMeasureWidths(g),u=s.calcLineWraps(g,e,r);if(u.reParse){var m=new h;m.parse(o,u.revisedParams),g=m.getTune();var b=m.getWarnings();b&&(g.warnings=b)}return r.afterParsing&&r.afterParsing(g,d,o),n(v,g,u.revisedParams,d,0),g.explanation=u.explanation,g}return Br=i,Br}var Nr,Gi;function yl(){if(Gi)return Nr;Gi=1;var p=gt(),l=no(),h=function(s,t){function a(n,i,f,v){n=document.createElement("div"),n.setAttribute("style","visibility: hidden;"),document.body.appendChild(n);var g=new l(n,t),d=g.getMeasureWidths(i);return n.parentNode.removeChild(n),{sections:d}}return p.renderEngine(a,"*",s,t)};return Nr=h,Nr}var Lr,Yi;function wa(){if(Yi)return Lr;Yi=1;var p={};return Lr=p,Lr}var Pr,Wi;function wl(){if(Wi)return Pr;Wi=1;var p=wa(),l=function(h,s,t,a){p[s]||(p[s]={});var n=p[s];return n[t]||(n[t]=new Promise(function(i,f){var v=new XMLHttpRequest;let g=h+s+"-mp3/"+t+".mp3";v.open("GET",g,!0),v.responseType="arraybuffer",v.onload=function(){if(v.status!==200){f(Error("Can't load sound at "+g+" status="+v.status));return}var d=function(r){i({instrument:s,name:t,status:"loaded",audioBuffer:r})},o=a.decodeAudioData(v.response,d,function(){f(Error("Can't decode sound at "+g))});o&&typeof o.catch=="function"&&o.catch(f)},v.onerror=function(){f(Error("Can't load sound at "+g))},v.send()}).catch(i=>{throw console.error("Didn't load note",s,t,":",i.message),i})),n[t]};return Pr=l,Pr}var qr,Ui;function xa(){if(Ui)return qr;Ui=1;var p=["acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_1","electric_piano_2","harpsichord","clavinet","celesta","glockenspiel","music_box","vibraphone","marimba","xylophone","tubular_bells","dulcimer","drawbar_organ","percussive_organ","rock_organ","church_organ","reed_organ","accordion","harmonica","tango_accordion","acoustic_guitar_nylon","acoustic_guitar_steel","electric_guitar_jazz","electric_guitar_clean","electric_guitar_muted","overdriven_guitar","distortion_guitar","guitar_harmonics","acoustic_bass","electric_bass_finger","electric_bass_pick","fretless_bass","slap_bass_1","slap_bass_2","synth_bass_1","synth_bass_2","violin","viola","cello","contrabass","tremolo_strings","pizzicato_strings","orchestral_harp","timpani","string_ensemble_1","string_ensemble_2","synth_strings_1","synth_strings_2","choir_aahs","voice_oohs","synth_choir","orchestra_hit","trumpet","trombone","tuba","muted_trumpet","french_horn","brass_section","synth_brass_1","synth_brass_2","soprano_sax","alto_sax","tenor_sax","baritone_sax","oboe","english_horn","bassoon","clarinet","piccolo","flute","recorder","pan_flute","blown_bottle","shakuhachi","whistle","ocarina","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass_lead","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","sitar","banjo","shamisen","koto","kalimba","bagpipe","fiddle","shanai","tinkle_bell","agogo","steel_drums","woodblock","taiko_drum","melodic_tom","synth_drum","reverse_cymbal","guitar_fret_noise","breath_noise","seashore","bird_tweet","telephone_ring","helicopter","applause","gunshot","percussion"];return qr=p,qr}var Dr,$i;function xl(){if($i)return Dr;$i=1;var p=xa(),l=function(h){for(var s=[],t=0;t<h.tracks.length;t++)s.push([]);var a=p[0];return h.tracks.forEach(function(n,i){n.forEach(function(f){switch(f.cmd){case"note":var v=f.instrument!==void 0?p[f.instrument]:a;if(f.duration>0){var g=f.gap?f.gap:0,d=f.duration;g=Math.min(g,d*2/3);var o={pitch:f.pitch,instrument:v,start:Math.round(f.start*1e6)/1e6,end:Math.round((f.start+d-g)*1e6)/1e6,volume:f.volume};f.startChar&&(o.startChar=f.startChar),f.endChar&&(o.endChar=f.endChar),f.style&&(o.style=f.style),f.cents&&(o.cents=f.cents),s[i].push(o)}break;case"program":a=p[f.instrument];break;case"text":break;default:console.log("Unhandled midi event",f)}})}),s};return Dr=l,Dr}var Ir,Vi;function bt(){if(Vi)return Ir;Vi=1;function p(l){if(l)window.abcjsAudioContext=l;else if(!window.abcjsAudioContext){var h=window.AudioContext||window.webkitAudioContext;if(h)window.abcjsAudioContext=new h;else return!1}return window.abcjsAudioContext.state!=="suspended"}return Ir=p,Ir}var Fr,Xi;function Qe(){if(Xi)return Fr;Xi=1;var p=bt();function l(){return window.abcjsAudioContext||p(),window.abcjsAudioContext}return Fr=l,Fr}var Or,ji;function mt(){if(ji)return Or;ji=1;var p=Qe();function l(){if(!window.Promise||!window.AudioContext&&!window.webkitAudioContext&&!navigator.mozAudioContext&&!navigator.msAudioContext)return!1;var h=p();if(h)return h.resume!==void 0}return Or=l,Or}var Rr,Ki;function Ca(){if(Ki)return Rr;Ki=1;var p={21:"A0",22:"Bb0",23:"B0",24:"C1",25:"Db1",26:"D1",27:"Eb1",28:"E1",29:"F1",30:"Gb1",31:"G1",32:"Ab1",33:"A1",34:"Bb1",35:"B1",36:"C2",37:"Db2",38:"D2",39:"Eb2",40:"E2",41:"F2",42:"Gb2",43:"G2",44:"Ab2",45:"A2",46:"Bb2",47:"B2",48:"C3",49:"Db3",50:"D3",51:"Eb3",52:"E3",53:"F3",54:"Gb3",55:"G3",56:"Ab3",57:"A3",58:"Bb3",59:"B3",60:"C4",61:"Db4",62:"D4",63:"Eb4",64:"E4",65:"F4",66:"Gb4",67:"G4",68:"Ab4",69:"A4",70:"Bb4",71:"B4",72:"C5",73:"Db5",74:"D5",75:"Eb5",76:"E5",77:"F5",78:"Gb5",79:"G5",80:"Ab5",81:"A5",82:"Bb5",83:"B5",84:"C6",85:"Db6",86:"D6",87:"Eb6",88:"E6",89:"F6",90:"Gb6",91:"G6",92:"Ab6",93:"A6",94:"Bb6",95:"B6",96:"C7",97:"Db7",98:"D7",99:"Eb7",100:"E7",101:"F7",102:"Gb7",103:"G7",104:"Ab7",105:"A7",106:"Bb7",107:"B7",108:"C8",109:"Db8",110:"D8",111:"Eb8",112:"E8",113:"F8",114:"Gb8",115:"G8",116:"Ab8",117:"A8",118:"Bb8",119:"B8",120:"C9",121:"Db9"};return Rr=p,Rr}var Hr,Qi;function Cl(){if(Qi)return Hr;Qi=1;var p=function(h){return window.URL.createObjectURL(l(h.audioBuffers))};function l(h){var s=h[0],t=s.numberOfChannels,a=s.length*t*2+44,n=new ArrayBuffer(a),i=new DataView(n),f=[],v,g,d=0,o=0;for(c(1179011410),c(a-8),c(1163280727),c(544501094),c(16),r(1),r(t),c(s.sampleRate),c(s.sampleRate*2*t),r(t*2),r(16),c(1635017060),c(a-o-4),v=0;v<t;v++)f.push(s.getChannelData(v));for(;o<a;){for(v=0;v<f.length;v++)g=Math.max(-1,Math.min(1,f[v][d])),g=(.5+g<0?g*32768:g*32767)|0,i.setInt16(o,g,!0),o+=2;d++}return new Blob([n],{type:"audio/wav"});function r(e){i.setUint16(o,e,!0),o+=2}function c(e){i.setUint32(o,e,!0),o+=4}}return Hr=p,Hr}var zr,Ji;function so(){if(Ji)return zr;Ji=1;function p(l){return Math.pow(2,l/1200)}return zr=p,zr}var Gr,Zi;function kl(){if(Zi)return Gr;Zi=1;var p=wa(),l=Ca(),h=so();function s(a,n,i,f,v,g,d,o,r){var c=window.OfflineAudioContext||window.webkitOfflineAudioContext,e=i.len*i.tempoMultiplier;g&&(e+=g/1e3),e-=o,e<0&&(e=.005);var u=new c(2,Math.floor((e+d)*n),n),m=l[i.pitch];if(!p[i.instrument])return r&&r("placeNote skipped (instrument empty): "+i.instrument+":"+m),Promise.resolve();var b=p[i.instrument][m];return b?b.then(function(x){var T=u.createBufferSource();T.buffer=x.audioBuffer;var E=i.volume/96*v;T.gainNode=u.createGain(),i.pan&&u.createStereoPanner&&(T.panNode=u.createStereoPanner(),T.panNode.pan.setValueAtTime(i.pan,0)),T.gainNode.gain.value=E,T.gainNode.gain.linearRampToValueAtTime(T.gainNode.gain.value,e),T.gainNode.gain.linearRampToValueAtTime(0,e+d),i.cents&&(T.playbackRate.value=h(i.cents)),T.panNode?(T.panNode.connect(u.destination),T.gainNode.connect(T.panNode)):T.gainNode.connect(u.destination),T.connect(T.gainNode),T.start(0),T.noteOff?T.noteOff(e+d):T.stop(e+d);var D;return u.oncomplete=function(F){if(F.renderedBuffer&&F.renderedBuffer.getChannelData)for(var y=0;y<f.length;y++){var A=f[y]*i.tempoMultiplier;g&&(A-=g/1e3),A<0&&(A=0),A=Math.floor(A*n),t(a,F.renderedBuffer,A)}r&&r("placeNote: "+i.instrument+":"+m),D()},u.startRendering(),new Promise(function(F){D=F})}).catch(function(x){return r&&r("placeNote catch: "+x.message),Promise.reject(x)}):(r&&r("placeNote skipped: "+i.instrument+":"+m),Promise.resolve())}var t=function(a,n,i){for(var f=0;f<2;f++)for(var v=n.getChannelData(f),g=a.getChannelData(f),d=0;d<v.length;d++)g[d+i]+=v[d]};return Gr=s,Gr}var Yr,es;function ka(){if(es)return Yr;es=1;var p=wl(),l=xl(),h=bt(),s=Qe(),t=mt(),a=Ca(),n=xa(),i=Cl(),f=kl(),v=wa(),g="MIDI is not supported in this browser.",d="https://paulrosen.github.io/midi-js-soundfonts/abcjs/",o="https://paulrosen.github.io/midi-js-soundfonts/FluidR3_GM/",r="https://paulrosen.github.io/midi-js-soundfonts/MusyngKite/";function c(){var e=this;e.audioBufferPossible=void 0,e.directSource=[],e.startTimeSec=void 0,e.pausedTimeSec=void 0,e.audioBuffers=[],e.duration=void 0,e.isRunning=!1,e.options={},e.pickupLength=0,e.init=function(b){b||(b={}),b.options&&(e.options=b.options),h(b.audioContext);var x=s().currentTime;if(e.debugCallback=b.debugCallback,e.debugCallback&&e.debugCallback("init called"),e.audioBufferPossible=e._deviceCapable(),!e.audioBufferPossible)return Promise.reject({status:"NotSupported",message:g});var T=b.options?b.options:{};e.soundFontUrl=T.soundFontUrl?T.soundFontUrl:o,e.soundFontUrl[e.soundFontUrl.length-1]!=="/"&&(e.soundFontUrl+="/"),T.soundFontVolumeMultiplier||T.soundFontVolumeMultiplier===0?e.soundFontVolumeMultiplier=T.soundFontVolumeMultiplier:e.soundFontUrl===o||e.soundFontUrl===r?e.soundFontVolumeMultiplier=3:e.soundFontUrl===d?e.soundFontVolumeMultiplier=.4:e.soundFontVolumeMultiplier=1,T.programOffsets?e.programOffsets=T.programOffsets:e.soundFontUrl===d?e.programOffsets={bright_acoustic_piano:20,honkytonk_piano:20,electric_piano_1:30,electric_piano_2:30,harpsichord:40,clavinet:20,celesta:20,glockenspiel:40,vibraphone:30,marimba:35,xylophone:30,tubular_bells:35,dulcimer:30,drawbar_organ:20,percussive_organ:25,rock_organ:20,church_organ:40,reed_organ:40,accordion:40,harmonica:40,acoustic_guitar_nylon:20,acoustic_guitar_steel:30,electric_guitar_jazz:25,electric_guitar_clean:15,electric_guitar_muted:35,overdriven_guitar:25,distortion_guitar:20,guitar_harmonics:30,electric_bass_finger:15,electric_bass_pick:30,fretless_bass:40,violin:105,viola:50,cello:40,contrabass:60,trumpet:10,trombone:90,alto_sax:20,tenor_sax:20,clarinet:20,flute:50,banjo:50,woodblock:20}:e.programOffsets={};var E=T.fadeLength!==void 0?parseInt(T.fadeLength,10):NaN;if(e.fadeLength=isNaN(E)?200:E,E=T.noteEnd!==void 0?parseInt(T.noteEnd,10):NaN,e.noteEnd=isNaN(E)?0:E,e.pan=T.pan,e.meterSize=1,b.visualObj){e.flattened=b.visualObj.setUpAudio(T);var D=b.visualObj.getMeterFraction();D.den&&(e.meterSize=b.visualObj.getMeterFraction().num/b.visualObj.getMeterFraction().den),e.pickupLength=b.visualObj.getPickupLength()}else if(b.sequence)e.flattened=b.sequence;else return Promise.reject(new Error("Must pass in either a visualObj or a sequence"));e.millisecondsPerMeasure=b.millisecondsPerMeasure?b.millisecondsPerMeasure:b.visualObj?b.visualObj.millisecondsPerMeasure(e.flattened.tempo):1e3,e.beatsPerMeasure=b.visualObj?b.visualObj.getBeatsPerMeasure():4,e.sequenceCallback=T.sequenceCallback,e.callbackContext=T.callbackContext,e.onEnded=T.onEnded,e.meterFraction=b.visualObj?b.visualObj.getMeterFraction():{den:1};var F={},y=[],A=[],N=n[0];e.flattened.tracks.forEach(function(_){_.forEach(function(P){if(P.cmd==="program"&&n[P.instrument]&&(N=n[P.instrument]),P.pitch!==void 0){var O=P.pitch,I=a[O],w=P.instrument!==void 0?n[P.instrument]:N;if(I)if(F[w]||(F[w]={}),!v[w]||!v[w][I])F[w][I]=!0;else{var C=w+":"+I;y.indexOf(C)<0&&y.push(C)}else{var k=w+":"+I;console.log("Can't find note: ",O,k),A.indexOf(k)<0&&A.push(k)}}})}),e.debugCallback&&e.debugCallback("note gathering time = "+Math.floor((s().currentTime-x)*1e3)+"ms"),x=s().currentTime;var M=[];Object.keys(F).forEach(function(_){Object.keys(F[_]).forEach(function(P){M.push({instrument:_,note:P})})}),e.debugCallback&&e.debugCallback("notes "+JSON.stringify(M));for(var L=[],B=256,S=0;S<M.length;S+=B)L.push(M.slice(S,S+B));return new Promise(function(_,P){var O={cached:y,error:A,loaded:[]},I=0,w=function(){e.debugCallback&&e.debugCallback("loadBatch idx="+I+" len="+L.length),I<L.length?e._loadBatch(L[I],e.soundFontUrl,x).then(function(C){e.debugCallback&&e.debugCallback("loadBatch then"),x=s().currentTime,C&&(C.error&&(O.error=O.error.concat(C.error)),C.loaded&&(O.loaded=O.loaded.concat(C.loaded))),I++,w()},P):(e.debugCallback&&e.debugCallback("resolve init"),_(O))};w()})},e._loadBatch=(function(b,x,T,E){var D=[];return b.forEach(function(F){e.debugCallback&&e.debugCallback("getNote "+F.instrument+":"+F.note),D.push(p(x,F.instrument,F.note,s()))}),Promise.all(D).then(function(F){e.debugCallback&&e.debugCallback("mp3 load time = "+Math.floor((s().currentTime-T)*1e3)+"ms");for(var y=[],A=[],N=[],M=[],L=0;L<F.length;L++){var B=F[L],S=B.instrument+":"+B.name;B.status==="loaded"?y.push(S):B.status==="pending"?N.push(S):B.status==="cached"?A.push(S):M.push(S+" "+B.message)}if(N.length>0){if(e.debugCallback&&e.debugCallback("pending "+JSON.stringify(N)),E?E=E*2:E=50,E<9e4)return new Promise(function(O,I){setTimeout(function(){var w=[];for(L=0;L<N.length;L++)S=N[L].split(":"),w.push({instrument:S[0],note:S[1]});e.debugCallback&&e.debugCallback("retry "+JSON.stringify(w)),e._loadBatch(w,x,T,E).then(function(C){O(C)}).catch(function(C){I(C)})},E)});for(var _=[],P=0;P<b.length;P++)_.push(b[P].instrument+"/"+b[P].note);return e.debugCallback&&e.debugCallback("loadBatch timeout"),Promise.reject(new Error("timeout attempting to load: "+_.join(", ")))}else return e.debugCallback&&e.debugCallback("loadBatch resolve"),Promise.resolve({loaded:y,cached:A,error:M})}).catch(function(F){e.debugCallback&&e.debugCallback("loadBatch catch "+F.message)})}),e.prime=function(){var b=e.fadeLength/1e3;return e.isRunning=!1,e.audioBufferPossible?(e.debugCallback&&e.debugCallback("prime called"),new Promise(function(x,T){try{let I=function(w){var C=w&&w.audioBuffers&&w.audioBuffers.length>0?w.audioBuffers[0].duration:0;return{status:s().state,duration:C}};var O=I,E=s().currentTime,D=e.millisecondsPerMeasure/1e3/e.meterSize;if(e.duration=e.flattened.totalDuration*D,e.duration<=0)return e.audioBuffers=[],x({status:"empty",seconds:0});e.duration+=b;var F=Math.floor(s().sampleRate*e.duration);e.stop();var y=l(e.flattened);e.options.swing&&m(y,e.options.swing,e.meterFraction,e.pickupLength),e.sequenceCallback&&e.sequenceCallback(y,e.callbackContext);var A=u(y.length,e.pan),N={};y.forEach(function(w,C){var k=A&&A.length>C?A[C]:0;w.forEach(function(q){var R=q.instrument+":"+q.pitch+":"+q.volume+":"+Math.round((q.end-q.start)*1e3)/1e3+":"+k+":"+D+":"+(q.cents?q.cents:0);e.debugCallback&&e.debugCallback("noteMapTrack "+R),N[R]||(N[R]=[]),N[R].push(q.start)})});for(var M=[],L=s().createBuffer(2,F,s().sampleRate),B=0;B<Object.keys(N).length;B++){var S=Object.keys(N)[B],_=S.split(":"),P=_[6]!==void 0?parseFloat(_[6]):0;_={instrument:_[0],pitch:parseInt(_[1],10),volume:parseInt(_[2],10),len:parseFloat(_[3]),pan:parseFloat(_[4]),tempoMultiplier:parseFloat(_[5]),cents:P},M.push(f(L,s().sampleRate,_,N[S],e.soundFontVolumeMultiplier,e.programOffsets[_.instrument],b,e.noteEnd/1e3,e.debugCallback))}e.audioBuffers=[L],e.debugCallback&&(e.debugCallback("sampleRate = "+s().sampleRate),e.debugCallback("totalSamples = "+F),e.debugCallback("creationTime = "+Math.floor((s().currentTime-E)*1e3)+"ms")),Promise.all(M).then(function(){s().state==="suspended"?s().resume().then(function(){x(I(e))}):s().state==="interrupted"?s().suspend().then(function(){s().resume().then(function(){x(I(e))})}):x(I(e))}).catch(function(w){T(w)})}catch(I){T(I)}})):Promise.reject(new Error(g))};function u(b,x){if(x==null)return null;var T=[];if(x.length){for(var E=0;E<b;E++)if(E<x.length){var D=parseFloat(x[E]);D<-1?D=-1:D>1&&(D=1),T.push(D)}else T.push(0);return T}else{var F=parseFloat(x);if(F*(b-1)>2)return null;for(var y=b%2===0,A=y?0-F/2:0,N=A+F,M=0;M<b;M++)y=M%2===0,y?(T.push(A),A-=F):(T.push(N),N+=F);return T}}e.start=function(){if(!e.audioBufferPossible)throw new Error(g);e.debugCallback&&e.debugCallback("start called");var b=e.pausedTimeSec?e.pausedTimeSec:0;e._kickOffSound(b),e.startTimeSec=s().currentTime-b,e.pausedTimeSec=void 0,e.debugCallback&&e.debugCallback("MIDI STARTED",e.startTimeSec)},e.pause=function(){if(!e.audioBufferPossible)throw new Error(g);return e.debugCallback&&e.debugCallback("pause called"),e.pausedTimeSec=e.stop(),e.pausedTimeSec},e.resume=function(){e.start()},e.seek=function(b,x){var T;switch(x){case"seconds":T=b;break;case"beats":T=b*e.millisecondsPerMeasure/e.beatsPerMeasure/1e3;break;default:T=(e.duration-e.fadeLength/1e3)*b;break}if(!e.audioBufferPossible)throw new Error(g);e.debugCallback&&e.debugCallback("seek called sec="+T),e.isRunning?(e.stop(),e._kickOffSound(T)):e.pausedTimeSec=T,e.pausedTimeSec=T},e.stop=function(){e.isRunning=!1,e.pausedTimeSec=void 0,e.directSource.forEach(function(x){try{x.stop()}catch(T){console.log("direct source didn't stop:",T)}}),e.directSource=[];var b=s().currentTime-e.startTimeSec;return b},e.finished=function(){e.startTimeSec=void 0,e.pausedTimeSec=void 0,e.isRunning=!1},e.download=function(){return i(e)},e.getAudioBuffer=function(){return e.audioBuffers[0]},e.getIsRunning=function(){return e.isRunning},e._deviceCapable=function(){return t()?!0:(console.warn(g),e.debugCallback&&e.debugCallback(g),!1)},e._kickOffSound=function(b){e.isRunning=!0,e.directSource=[],e.audioBuffers.forEach(function(x,T){e.directSource[T]=s().createBufferSource(),e.directSource[T].buffer=x,e.directSource[T].connect(s().destination)}),e.directSource.forEach(function(x){x.start(0,b)}),e.onEnded&&(e.directSource[0].onended=function(){e.onEnded(e.callbackContext)})};function m(b,x,T,E){if(!(T.den!=4&&T.den!=8)&&(x=parseFloat(x),!(isNaN(x)||x<=50))){x>75&&(x=75),x=x/50-1;var D=0,F=.25;T.den===8&&(F=F/2);for(var y=F/2,A=y*x,N=0;N<b.length;N++)for(var M=b[N],L=0;L<M.length;L++){var B=M[L];if((B.start-E)%y==0&&(B.start-E)%F!=0&&(L==0||M[L-1].start<=M[L].start-y)&&(L==M.length-1||M[L+1].start>=M[L].start+y)){var S=B.start;B.start+=A,B.volume*=1+D,L>0&&M[L-1].end==S&&(M[L-1].end=B.start,M[L-1].volume*=1-D)}}}}}return Yr=c,Yr}var Wr,ts;function oo(){if(ts)return Wr;ts=1;var p=function(){var l=this;l.tracks=[],l.totalDuration=0,l.currentInstrument=[],l.starts=[],l.addTrack=function(){return l.tracks.push([]),l.currentInstrument.push(0),l.starts.push(0),l.tracks.length-1},l.setInstrument=function(h,s){l.tracks[h].push({channel:0,cmd:"program",instrument:s}),l.currentInstrument[h]=s},l.appendNote=function(h,s,t,a,n){var i={cmd:"note",duration:t,gap:0,instrument:l.currentInstrument[h],pitch:s,start:l.starts[h],volume:a};n&&(i.cents=n),l.tracks[h].push(i),l.starts[h]+=t,l.totalDuration=Math.max(l.totalDuration,l.starts[h])}};return Wr=p,Wr}var Ur,rs;function _l(){if(rs)return Ur;rs=1;var p=`
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 700" preserveAspectRatio="xMidYMid meet">
	<g transform="translate(0,700) scale(0.1,-0.1)" >
	<path d="M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55
	-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128
	-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79
	-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60
	-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507
	-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21
	-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12
	-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33
	-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0
	-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51
	153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48
	107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57
	74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52
	100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45
	143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29
	165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34
	115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33
	-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90
	-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138
	115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191
	50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21
	7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17
	-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10
	-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66
	50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73
	39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53
	-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43
	-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339
	-19z"></path>
	<path d="M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0
	-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72
	l69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279
	268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74
	-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19
	-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31
	93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59
	62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89
	89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146
	67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56
	31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64
	48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22
	25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14
	18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50
	47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138
	-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10
	-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20
	-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19
	-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25
	-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18
	-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11
	-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168
	16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71
	37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108
	63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65
	61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86
	12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030
	0 -1086 -11z"></path>
	</g>
</svg>
`;return Ur=p,Ur}var $r,as;function Tl(){if(as)return $r;as=1;var p=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-play-svg">
    <g>
    <polygon points="4 0 23 12.5 4 25"/>
    </g>
</svg>
`;return $r=p,$r}var Vr,ns;function Sl(){if(ns)return Vr;ns=1;var p=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-pause-svg">
  <g>
    <rect width="8.23" height="25"/>
    <rect width="8.23" height="25" x="17"/>
  </g>
</svg>
`;return Vr=p,Vr}var Xr,is;function El(){if(is)return Xr;is=1;var p=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="abcjs-loading-svg">
    <circle cx="50" cy="50" fill="none" stroke-width="20" r="35" stroke-dasharray="160 55"></circle>
</svg>
`;return Xr=p,Xr}var jr,ss;function Al(){if(ss)return jr;ss=1;var p=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25">
  <g>
    <polygon points="5 12.5 24 0 24 25"/>
    <rect width="3" height="25" x="0" y="0"/>
  </g>
</svg>
`;return jr=p,jr}var Kr,os;function co(){if(os)return Kr;os=1;var p=mt(),l=bt(),h=Qe(),s=_l(),t=Tl(),a=Sl(),n=El(),i=Al();function f(r,c){var e=this;if(typeof r=="string"){var u=r;if(r=document.querySelector(u),!r)throw new Error('Cannot find element "'+u+'" in the DOM.')}else if(!(r instanceof HTMLElement))throw new Error("The first parameter must be a valid element or selector in the DOM.");if(e.parent=r,e.options={},c&&(e.options=Object.assign({},c)),e.options.ac&&l(e.options.ac),v(e.parent,e.options),o(e),e.disable=function(b){var x=e.parent.querySelector(".abcjs-inline-audio");b?x.classList.add("abcjs-disabled"):x.classList.remove("abcjs-disabled")},e.setWarp=function(b,x){var T=e.parent.querySelector(".abcjs-midi-tempo");T.value=Math.round(x),e.setTempo(b)},e.setTempo=function(b){var x=e.parent.querySelector(".abcjs-midi-current-tempo");x&&(x.innerHTML=Math.round(b))},e.resetAll=function(){for(var b=e.parent.querySelectorAll(".abcjs-pushed"),x=0;x<b.length;x++){var T=b[x];T.classList.remove("abcjs-pushed")}},e.pushPlay=function(b){var x=e.parent.querySelector(".abcjs-midi-start");x&&(b?x.classList.add("abcjs-pushed"):x.classList.remove("abcjs-pushed"))},e.pushLoop=function(b){var x=e.parent.querySelector(".abcjs-midi-loop");x&&(b?x.classList.add("abcjs-pushed"):x.classList.remove("abcjs-pushed"))},e.setProgress=function(b,x){var T=e.parent.querySelector(".abcjs-midi-progress-background"),E=e.parent.querySelector(".abcjs-midi-progress-indicator");if(!(!T||!E)){var D=T.clientWidth,F=D*b;E.style.left=F+"px";var y=e.parent.querySelector(".abcjs-midi-clock");if(y){var A=x*b/1e3,N=Math.floor(A/60),M=Math.floor(A%60),L=M<10?"0"+M:M;y.innerHTML=N+":"+L}}},e.options.afterResume){var m=!1;e.options.ac?m=e.options.ac.state!=="suspended":h()&&(m=h().state!=="suspended"),m&&e.options.afterResume()}}function v(r,c){var e=!!c.loopHandler,u=!!c.restartHandler,m=!!c.playHandler||!!c.playPromiseHandler,b=!!c.progressHandler,x=!!c.warpHandler,T=c.hasClock!==!1,E=`<div class="abcjs-inline-audio">
`;if(e){var D=c.repeatTitle?c.repeatTitle:"Click to toggle play once/repeat.",F=c.repeatAria?c.repeatAria:D;E+='<button type="button" class="abcjs-midi-loop abcjs-btn" title="'+D+'" aria-label="'+F+'">'+s+`</button>
`}if(u){var y=c.restartTitle?c.restartTitle:"Click to go to beginning.",A=c.restartAria?c.restartAria:y;E+='<button type="button" class="abcjs-midi-reset abcjs-btn" title="'+y+'" aria-label="'+A+'">'+i+`</button>
`}if(m){var N=c.playTitle?c.playTitle:"Click to play/pause.",M=c.playAria?c.playAria:N;E+='<button type="button" class="abcjs-midi-start abcjs-btn" title="'+N+'" aria-label="'+M+'">'+t+a+n+`</button>
`}if(b){var L=c.randomTitle?c.randomTitle:"Click to change the playback position.",B=c.randomAria?c.randomAria:L;E+='<button type="button" class="abcjs-midi-progress-background" title="'+L+'" aria-label="'+B+`"><span class="abcjs-midi-progress-indicator"></span></button>
`}if(T&&(E+=`<span class="abcjs-midi-clock"></span>
`),x){var S=c.warpTitle?c.warpTitle:"Change the playback speed.",_=c.warpAria?c.warpAria:S,P=c.bpm?c.bpm:"BPM";E+='<span class="abcjs-tempo-wrapper"><label><input class="abcjs-midi-tempo" type="number" min="1" max="300" value="100" title="'+S+'" aria-label="'+_+'">%</label><span>&nbsp;(<span class="abcjs-midi-current-tempo"></span> '+P+`)</span></span>
`}E+='<div class="abcjs-css-warning" style="font-size: 12px;color:red;border: 1px solid red;text-align: center;width: 300px;margin-top: 4px;font-weight: bold;border-radius: 4px;">CSS required: load abcjs-audio.css</div>',E+=`</div>
`,r.innerHTML=E}function g(r,c,e,u,m){var b=!0;if(h()?b=h().state==="suspended":l(),!p())throw{status:"NotSupported",message:"This browser does not support audio."};(b||m)&&e&&e.classList.add("abcjs-loading"),b?h().resume().then(function(){u?u().then(function(x){d(r,c,e,m)}):d(r,c,e,m)}):d(r,c,e,m)}function d(r,c,e,u){u?r(c).then(function(){e&&e.classList.remove("abcjs-loading")}):(r(c),e&&e.classList.remove("abcjs-loading"))}function o(r){var c=!!r.options.loopHandler,e=!!r.options.restartHandler,u=!!r.options.playHandler||!!r.options.playPromiseHandler,m=!!r.options.progressHandler,b=!!r.options.warpHandler,x=r.parent.querySelector(".abcjs-midi-start");c&&r.parent.querySelector(".abcjs-midi-loop").addEventListener("click",function(T){g(r.options.loopHandler,T,x,r.options.afterResume)}),e&&r.parent.querySelector(".abcjs-midi-reset").addEventListener("click",function(T){g(r.options.restartHandler,T,x,r.options.afterResume)}),u&&x.addEventListener("click",function(T){g(r.options.playPromiseHandler||r.options.playHandler,T,x,r.options.afterResume,!!r.options.playPromiseHandler)}),m&&r.parent.querySelector(".abcjs-midi-progress-background").addEventListener("click",function(T){g(r.options.progressHandler,T,x,r.options.afterResume)}),b&&r.parent.querySelector(".abcjs-midi-tempo").addEventListener("change",function(T){g(r.options.warpHandler,T,x,r.options.afterResume)})}return Kr=f,Kr}var Qr,cs;function Ml(){if(cs)return Qr;cs=1;var p=oo(),l=ka(),h=Qe();function s(a,n,i,f,v){for(var g=new p,d=0;d<a.length;d++){var o=a[d],r=g.addTrack();if(g.setInstrument(r,o.instrument),d===0&&n)for(var c=0;c<n.length;c++){var e=n[c];g.appendNote(r,e.pitch,1/64,e.volume,e.cents)}g.appendNote(r,o.pitch,o.duration,o.volume,o.cents)}var u=h();return u.state==="suspended"?u.resume().then(function(){return t(g,i,f,v)}):t(g,i,f,v)}function t(a,n,i,f){var v=new l;return v.init({sequence:a,millisecondsPerMeasure:n,options:{soundFontUrl:i},debugCallback:f}).then(function(){return v.prime()}).then(function(){return v.start(),Promise.resolve()})}return Qr=s,Qr}var Jr,ls;function lo(){if(ls)return Jr;ls=1;var p=co(),l=ka(),h=da(),s=Qe();function t(){var a=this;a.warp=100,a.cursorControl=null,a.visualObj=null,a.timer=null,a.midiBuffer=null,a.options=null,a.currentTempo=null,a.control=null,a.isLooping=!1,a.isStarted=!1,a.isLoaded=!1,a.isLoading=!1,a.load=function(i,f,v){v||(v={}),v.displayPlay===void 0&&(v.displayPlay=!0),v.displayProgress===void 0&&(v.displayProgress=!0),a.control=new p(i,{loopHandler:v.displayLoop?a.toggleLoop:void 0,restartHandler:v.displayRestart?a.restart:void 0,playPromiseHandler:v.displayPlay?a.play:void 0,progressHandler:v.displayProgress?a.randomAccess:void 0,warpHandler:v.displayWarp?a.onWarp:void 0,afterResume:a.init}),a.cursorControl=f,a.disable(!0)},a.disable=function(i){a.control&&a.control.disable(i)},a.setTune=function(i,f,v){return a.visualObj=i,a.disable(!1),a.options=v||{},a.control&&(a.pause(),a.setProgress(0,1),a.control.resetAll(),a.restart(),a.isStarted=!1),a.isLooping=!1,f?a.go():Promise.resolve({status:"no-audio-context"})},a.go=function(){a.isLoading=!0;var i=a.visualObj.millisecondsPerMeasure()*100/a.warp;a.currentTempo=Math.round(a.visualObj.getBeatsPerMeasure()/i*6e4),a.control&&a.control.setTempo(a.currentTempo),a.percent=0;var f;return a.midiBuffer||(a.midiBuffer=new l),s().resume().then(function(v){return a.midiBuffer.init({visualObj:a.visualObj,options:a.options,millisecondsPerMeasure:i})}).then(function(v){return f=v,a.midiBuffer.prime()}).then(function(){var v=16;return a.cursorControl&&a.cursorControl.beatSubdivisions!==void 0&&parseInt(a.cursorControl.beatSubdivisions,10)>=1&&parseInt(a.cursorControl.beatSubdivisions,10)<=64&&(v=parseInt(a.cursorControl.beatSubdivisions,10)),a.timer=new h(a.visualObj,{beatCallback:a.beatCallback,eventCallback:a.eventCallback,lineEndCallback:a.lineEndCallback,qpm:a.currentTempo,extraMeasuresAtBeginning:a.cursorControl?a.cursorControl.extraMeasuresAtBeginning:void 0,lineEndAnticipation:a.cursorControl?a.cursorControl.lineEndAnticipation:0,beatSubdivisions:v}),a.cursorControl&&a.cursorControl.onReady&&typeof a.cursorControl.onReady=="function"&&a.cursorControl.onReady(a),a.isLoaded=!0,a.isLoading=!1,Promise.resolve({status:"created",notesStatus:f})})},a.destroy=function(){a.timer&&(a.timer.reset(),a.timer.stop(),a.timer=null),a.midiBuffer&&(a.midiBuffer.stop(),a.midiBuffer=null),a.setProgress(0,1),a.control&&a.control.resetAll()},a.play=function(){return a.runWhenReady(a._play,void 0)};function n(i){return new Promise(function(f){setTimeout(f,i)})}a.runWhenReady=function(i,f){return a.visualObj?a.isLoading?n(500).then(function(){return a.isLoading?a.runWhenReady(i,f):i(f)}):a.isLoaded?i(f):a.go().then(function(){return i(f)}):Promise.resolve({status:"loading"})},a._play=function(){return s().resume().then(function(){return a.isStarted=!a.isStarted,a.isStarted?(a.cursorControl&&a.cursorControl.onStart&&typeof a.cursorControl.onStart=="function"&&a.cursorControl.onStart(),a.midiBuffer.start(),a.timer.start(a.percent),a.control&&a.control.pushPlay(!0)):a.pause(),Promise.resolve({status:"ok"})})},a.pause=function(){a.timer&&(a.timer.pause(),a.midiBuffer.pause(),a.control&&a.control.pushPlay(!1))},a.toggleLoop=function(){a.isLooping=!a.isLooping,a.control&&a.control.pushLoop(a.isLooping)},a.restart=function(){a.timer&&(a.timer.setProgress(0),a.midiBuffer.seek(0))},a.randomAccess=function(i){return a.runWhenReady(a._randomAccess,i)},a._randomAccess=function(i){var f=i.target.classList.contains("abcjs-midi-progress-indicator")?i.target.parentNode:i.target,v=(i.x-f.getBoundingClientRect().left)/f.offsetWidth;return v<0&&(v=0),v>1&&(v=1),a.seek(v),Promise.resolve({status:"ok"})},a.seek=function(i,f){a.timer&&a.midiBuffer&&(a.timer.setProgress(i,f),a.midiBuffer.seek(i,f))},a.setWarp=function(i){if(parseInt(i,10)>0){a.warp=parseInt(i,10);var f=a.isStarted,v=a.percent;return a.destroy(),a.isStarted=!1,a.go().then(function(){return a.setProgress(v,a.midiBuffer.duration*1e3),a.control&&a.control.setWarp(a.currentTempo,a.warp),f?a.play().then(function(){return a.seek(v),Promise.resolve()}):(a.seek(v),Promise.resolve())})}return Promise.resolve()},a.onWarp=function(i){var f=i.target.value;return a.setWarp(f)},a.setProgress=function(i,f){a.percent=i,a.control&&a.control.setProgress(i,f)},a.finished=function(){if(a.timer.reset(),a.isLooping)return a.timer.start(0),a.midiBuffer.finished(),a.midiBuffer.start(),"continue";a.timer.stop(),a.isStarted&&(a.control&&a.control.pushPlay(!1),a.isStarted=!1,a.midiBuffer.finished(),a.cursorControl&&a.cursorControl.onFinished&&typeof a.cursorControl.onFinished=="function"&&a.cursorControl.onFinished(),a.setProgress(0,1))},a.beatCallback=function(i,f,v,g){var d=i/f;a.setProgress(d,v),a.cursorControl&&a.cursorControl.onBeat&&typeof a.cursorControl.onBeat=="function"&&a.cursorControl.onBeat(i,f,v,g)},a.eventCallback=function(i){if(i)a.cursorControl&&a.cursorControl.onEvent&&typeof a.cursorControl.onEvent=="function"&&a.cursorControl.onEvent(i);else return a.finished()},a.lineEndCallback=function(i,f){a.cursorControl&&a.cursorControl.onLineEnd&&typeof a.cursorControl.onLineEnd=="function"&&a.cursorControl.onLineEnd(i,f)},a.getUrl=function(){return a.midiBuffer.download()},a.download=function(i){var f=a.getUrl(),v=document.createElement("a");document.body.appendChild(v),v.setAttribute("style","display: none;"),v.href=f,v.download=i||"output.wav",v.click(),window.URL.revokeObjectURL(f),document.body.removeChild(v)}}return Jr=t,Jr}var Zr,fs;function fo(){if(fs)return Zr;fs=1;var p=so(),l;return(function(){function h(o,r){for(var c in r)r.hasOwnProperty(c)&&o.setAttribute(c,r[c]);return o}function s(){this.trackstrings="",this.trackcount=0,this.noteOnAndChannel="%90",this.noteOffAndChannel="%80"}s.prototype.setTempo=function(o){this.trackcount===0&&(this.startTrack(),this.track+="%00%FF%51%03"+v(Math.round(6e7/o),6),this.endTrack())},s.prototype.setGlobalInfo=function(o,r,c,e){if(this.trackcount===0){this.startTrack();var u=Math.round(6e7/o);this.track+="%00%FF%51%03"+v(u,6),c&&(this.track+=n(c)),e&&(this.track+=i(e)),r&&(this.track+=a(r,"%01")),this.endTrack()}},s.prototype.startTrack=function(){this.noteWarped={},this.track="",this.trackName="",this.trackInstrument="",this.silencelength=0,this.trackcount++,this.instrument&&this.setInstrument(this.instrument)},s.prototype.endTrack=function(){this.track=this.trackName+this.trackInstrument+this.track;var o=v(this.track.length/3+4,8);this.track="MTrk"+o+this.track+"%00%FF%2F%00",this.trackstrings+=this.track},s.prototype.setText=function(o,r){switch(o){case"name":this.trackName=a(r,"%03");break}},s.prototype.setInstrument=function(o){this.trackInstrument="%00%C0"+v(o,2),this.instrument=o},s.prototype.setChannel=function(o,r){this.channel=o;var c="%00%B"+this.channel.toString(16);this.track+=c+"%79%00",this.track+=c+"%40%00",this.track+=c+"%5B%30",r||(r=0),r=Math.round((r+1)*64),this.track+=c+"%0A"+v(r,2),this.track+=c+"%07%64",this.noteOnAndChannel="%9"+this.channel.toString(16),this.noteOffAndChannel="%8"+this.channel.toString(16)};var t=4096;s.prototype.startNote=function(o,r,c){if(this.track+=d(this.silencelength),this.silencelength=0,c){this.track+="%e"+this.channel.toString(16);var e=Math.round(p(c)*t);this.track+=g(8192+e),this.track+=d(0),this.noteWarped[o]=!0}this.track+=this.noteOnAndChannel,this.track+="%"+o.toString(16)+v(r,2)},s.prototype.endNote=function(o){this.track+=d(this.silencelength),this.silencelength=0,this.noteWarped[o]&&(this.track+="%e"+this.channel.toString(16),this.track+=g(8192),this.track+=d(0),this.noteWarped[o]=!1),this.track+=this.noteOffAndChannel,this.track+="%"+o.toString(16)+"%00"},s.prototype.addRest=function(o){this.silencelength+=o,this.silencelength<0&&(this.silencelength=0)},s.prototype.getData=function(){return"data:audio/midi,MThd%00%00%00%06%00%01"+v(this.trackcount,4)+"%01%e0"+this.trackstrings},s.prototype.embed=function(o,r){var c=this.getData(),e=h(document.createElement("a"),{href:c});if(e.innerHTML="download midi",o.insertBefore(e,o.firstChild),!r){var u=h(document.createElement("embed"),{src:c,type:"video/quicktime",controller:"true",autoplay:"false",loop:"false",enablejavascript:"true",style:"display:block; height: 20px;"});o.insertBefore(u,o.firstChild)}};function a(o,r){for(var c="",e=0;e<o.length;e++)c+=v(o.charCodeAt(e),2);return"%00%FF"+r+v(c.length/3,2)+c}function n(o){if(!o||!o.accidentals)return"";for(var r="%00%FF%59%02",c=0,e=256,u=0;u<o.accidentals.length;u++)o.accidentals[u].acc==="sharp"?c++:o.accidentals[u].acc==="flat"&&e--;var m=v(e!==256?e:c,2),b=o.mode==="m"?"%01":"%00";return r+m+b}function i(o){var r="%00%FF%58%04"+v(o.num,2),c={1:0,2:1,4:2,8:3,16:4,32:5},e=c[o.den];if(!e)return"";r+=v(e,2);var u;switch(o.num+"/"+o.den){case"2/4":case"3/4":case"4/4":case"5/4":u=24;break;case"6/4":u=72;break;case"2/2":case"3/2":case"4/2":u=48;break;case"3/8":case"6/8":case"9/8":case"12/8":u=36;break}return u?(r+=v(u,2),r+"%08"):""}function f(o){for(var r="",c=0;c<o.length;c+=2)r+="%",r+=o.substr(c,2);return r}function v(o,r){var c=o.toString(16);for(c=c.split(".")[0];c.length<r;)c="0"+c;return c.length>r&&(c=c.substring(0,r)),f(c)}function g(o){o=Math.round(o);var r=o%128,c=o-r;return v(c*2+r,4)}function d(o){var r=0,c=[];for(o=Math.round(o);o!==0;)c.push(o&127),o=o>>7;for(var e=c.length-1;e>=0;e--){r=r<<8;var u=c[e];e!==0&&(u=u|128),r=r|u}var m=r.toString(16).length;return m+=m%2,v(r,m)}l=function(){return new s}})(),Zr=l,Zr}var ea,hs;function Bl(){if(hs)return ea;hs=1;var p=fo(),l;return(function(){var h=1920;l=function(a,n){n===void 0&&(n={});var i=a.setUpAudio(n),f=p(),v=a.metaText?a.metaText.title:void 0;v&&v.length>128&&(v=v.substring(0,124)+"...");var g=a.getKeySignature(),d=a.getMeterFraction(),o=i.tempo,r=o/60;if(d.den==8){var c=a.millisecondsPerMeasure();o=6e4/(c/d.num)/2,r=o/60}f.setGlobalInfo(o,v,g,d);for(var e=0;e<i.tracks.length;e++){f.startTrack();for(var u={},m=0;m<i.tracks[e].length;m++){var b=i.tracks[e][m];switch(b.cmd){case"text":f.setText(b.type,b.text);break;case"program":var x=0;n.pan&&n.pan.length>e&&(x=n.pan[e]),b.instrument===128?(f.setChannel(9,x),f.setInstrument(0)):(f.setChannel(b.channel,x),f.setInstrument(b.instrument));break;case"note":var T=b.gap*r,E=b.start,D=E+b.duration-T;u[E]||(u[E]=[]),u[E].push({pitch:b.pitch,volume:b.volume,cents:b.cents}),u[D]||(u[D]=[]),u[D].push({pitch:b.pitch,volume:0});break;default:console.log("MIDI create Unknown: "+b.cmd)}}s(f,u,h),f.endTrack()}return f.getData()};function s(t,a,n){for(var i=Object.keys(a),f=0;f<i.length;f++)i[f]=parseFloat(i[f]);i.sort(function(e,u){return e-u});for(var v=0,g=0;g<i.length;g++){var d=a[i[g]];if(i[g]>v){var o=(i[g]-v)*n;t.addRest(o),v=i[g]}for(var r=0;r<d.length;r++){var c=d[r];c.volume?t.startNote(c.pitch,c.volume,c.cents):t.endNote(c.pitch)}}}})(),ea=l,ea}var ta,us;function Nl(){if(us)return ta;us=1;var p=gt(),l=Bl(),h=function(a,n){var i={};if(n)for(var f in n)n.hasOwnProperty(f)&&(i[f]=n[f]);i.generateInline=!1;function v(g,d,o){var r=l(d,i);switch(i.midiOutputType){case"encoded":return r;case"binary":var c=r.replace("data:audio/midi,","");c=c.replace(/MThd/g,"%4d%54%68%64"),c=c.replace(/MTrk/g,"%4d%54%72%6b");for(var e=new ArrayBuffer(c.length/3),u=new Uint8Array(e),m=0;m<c.length/3;m++){var b=m*3+1,x=parseInt(c.substring(b,b+2),16);u[m]=x}return u;case"link":default:return t(d,i,r,o)}}return typeof a=="string"?p.renderEngine(v,"*",a,i):v(null,a,0)};function s(a){var n={};return a&&n.toString.call(a)==="[object Function]"}var t=function(a,n,i,f){var v=["abcjs-download-midi","abcjs-midi-"+f];n.downloadClass&&v.push(n.downloadClass);var g='<div class="'+v.join(" ")+'">';n.preTextDownload&&(g+=n.preTextDownload);var d=a.metaText&&a.metaText.title?a.metaText.title:"Untitled",o;n.downloadLabel&&s(n.downloadLabel)?o=n.downloadLabel(a,f):n.downloadLabel?o=n.downloadLabel.replace(/%T/,d):o='Download MIDI for "'+d+'"',d=d.toLowerCase().replace(/'/g,"").replace(/\W/g,"_").replace(/__/g,"_");var r=n.fileName?n.fileName:d+".midi";return g+='<a download="'+r+'" href="'+i+'">'+o+"</a>",n.postTextDownload&&(g+=n.postTextDownload),g+"</div>"};return ta=h,ta}var ra,ds;function ho(){if(ds)return ra;ds=1;try{if(typeof window.CustomEvent!="function"){var p=function(h,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(h,s.bubbles,s.cancelable,s.detail),t};p.prototype=window.Event.prototype,window.CustomEvent=p}}catch{}var l=function(h){this.isEditArea=!0,typeof h=="string"?(this.textarea=document.getElementById(h),this.textarea||(this.textarea=document.querySelector(h))):this.textarea=h,this.initialText=this.textarea.value,this.isDragging=!1};return l.prototype.addSelectionListener=function(h){this.textarea.onmousemove=function(s){this.isDragging&&h.fireSelectionChanged()}},l.prototype.addChangeListener=function(h){this.changelistener=h,this.textarea.onkeyup=function(){h.fireChanged()},this.textarea.onmousedown=function(){this.isDragging=!0,h.fireSelectionChanged()},this.textarea.onmouseup=function(){this.isDragging=!1,h.fireChanged()},this.textarea.onchange=function(){h.fireChanged()}},l.prototype.getSelection=function(){return{start:this.textarea.selectionStart,end:this.textarea.selectionEnd}},l.prototype.setSelection=function(h,s){if(this.textarea.setSelectionRange)this.textarea.setSelectionRange(h,s);else if(this.textarea.createTextRange){var t=this.textarea.createTextRange();t.collapse(!0),t.moveEnd("character",s),t.moveStart("character",h),t.select()}this.textarea.focus()},l.prototype.getString=function(){return this.textarea.value},l.prototype.setString=function(h){this.textarea.value=h,this.initialText=this.getString(),this.changelistener&&this.changelistener.fireChanged()},l.prototype.getElem=function(){return this.textarea},ra=l,ra}var aa,ps;function Ll(){if(ps)return aa;ps=1;var p=Fe(),l=lo(),h=mt(),s=io(),t=ho();function a(i){var f={},v;if(i.abcjsParams)for(v in i.abcjsParams)i.abcjsParams.hasOwnProperty(v)&&(f[v]=i.abcjsParams[v]);if(i.midi_options)for(v in i.midi_options)i.midi_options.hasOwnProperty(v)&&(f[v]=i.midi_options[v]);if(i.parser_options)for(v in i.parser_options)i.parser_options.hasOwnProperty(v)&&(f[v]=i.parser_options[v]);if(i.render_options)for(v in i.render_options)i.render_options.hasOwnProperty(v)&&(f[v]=i.render_options[v]);return f.tablature&&i.warnings_id&&(f.tablature.warnings_id=i.warnings_id),f}var n=function(i,f){this.abcjsParams=a(f),f.indicate_changed&&(this.indicate_changed=!0),typeof i=="string"?this.editarea=new t(i):i.isEditArea?this.editarea=i:this.editarea=new t(i),this.editarea.addSelectionListener(this),this.editarea.addChangeListener(this),f.canvas_id?this.div=f.canvas_id:f.paper_id?this.div=f.paper_id:(this.div=document.createElement("DIV"),this.editarea.getElem().parentNode.insertBefore(this.div,this.editarea.getElem())),typeof this.div=="string"&&(this.div=document.getElementById(this.div)),f.selectionChangeCallback&&(this.selectionChangeCallback=f.selectionChangeCallback),this.clientClickListener=this.abcjsParams.clickListener,this.abcjsParams.clickListener=this.highlight.bind(this),f.synth&&h()&&(this.synth={el:f.synth.el,cursorControl:f.synth.cursorControl,options:f.synth.options}),f.generate_midi&&(this.generate_midi=f.generate_midi,this.abcjsParams.generateDownload&&(typeof f.midi_download_id=="string"?this.downloadMidi=document.getElementById(f.midi_download_id):f.midi_download_id&&(this.downloadMidi=f.midi_download_id)),this.abcjsParams.generateInline!==!1&&(typeof f.midi_id=="string"?this.inlineMidi=document.getElementById(f.midi_id):f.midi_id&&(this.inlineMidi=f.midi_id))),f.warnings_id?typeof f.warnings_id=="string"?this.warningsdiv=document.getElementById(f.warnings_id):this.warningsdiv=f.warnings_id:f.generate_warnings&&(this.warningsdiv=document.createElement("div"),this.div.parentNode.insertBefore(this.warningsdiv,this.div)),this.onchangeCallback=f.onchange,this.redrawCallback=f.redrawCallback,this.currentAbc="",this.tunes=[],this.bReentry=!1,this.parseABC(),this.modelChanged(),this.addClassName=function(v,g){var d=function(o,r){var c=o.className;return c.length>0&&(c===r||new RegExp("(^|\\s)"+r+"(\\s|$)").test(c))};return d(v,g)||(v.className+=(v.className?" ":"")+g),v},this.removeClassName=function(v,g){return v.className=p.strip(v.className.replace(new RegExp("(^|\\s+)"+g+"(\\s+|$)")," ")),v},this.setReadOnly=function(v){var g="abc_textarea_readonly",d=this.editarea.getElem();v?(d.setAttribute("readonly","yes"),this.addClassName(d,g)):(d.removeAttribute("readonly"),this.removeClassName(d,g))}};return n.prototype.redrawMidi=function(){if(this.generate_midi&&!this.midiPause){var i=new window.CustomEvent("generateMidi",{detail:{tunes:this.tunes,abcjsParams:this.abcjsParams,downloadMidiEl:this.downloadMidi,inlineMidiEl:this.inlineMidi,engravingEl:this.div}});window.dispatchEvent(i)}if(this.synth){var f=this.synth.synthControl;this.synth.synthControl||(this.synth.synthControl=new l,this.synth.synthControl.load(this.synth.el,this.synth.cursorControl,this.synth.options)),this.synth.synthControl.setTune(this.tunes[0],f,this.synth.options)}},n.prototype.modelChanged=function(){if(!this.bReentry){this.bReentry=!0;try{this.timerId=null,this.redrawCallback&&this.redrawCallback(!0),this.synth&&this.synth.synthControl&&this.synth.synthControl.disable(!0),this.tunes=s(this.div,this.currentAbc,this.abcjsParams),this.tunes.length>0&&(this.warnings=this.tunes[0].warnings),this.redrawMidi(),this.redrawCallback&&this.redrawCallback(!1)}catch(i){console.error("ABCJS error: ",i),this.warnings||(this.warnings=[]),this.warnings.push(i.message)}this.warningsdiv&&(this.warningsdiv.innerHTML=this.warnings?this.warnings.join("<br />"):"No errors"),this.updateSelection(),this.bReentry=!1}},n.prototype.paramChanged=function(i){if(i)for(var f in i)i.hasOwnProperty(f)&&(this.abcjsParams[f]=i[f]);this.currentAbc="",this.fireChanged()},n.prototype.getTunes=function(){return this.tunes},n.prototype.synthParamChanged=function(i){if(this.synth){if(this.synth.options={},i)for(var f in i)i.hasOwnProperty(f)&&(this.synth.options[f]=i[f]);this.currentAbc="",this.fireChanged()}},n.prototype.parseABC=function(){var i=this.editarea.getString();return i===this.currentAbc?(this.updateSelection(),!1):(this.currentAbc=i,!0)},n.prototype.updateSelection=function(){var i=this.editarea.getSelection();try{this.tunes.length>0&&this.tunes[0].engraver&&this.tunes[0].engraver.rangeHighlight(i.start,i.end)}catch{}this.selectionChangeCallback&&this.selectionChangeCallback(i.start,i.end)},n.prototype.fireSelectionChanged=function(){this.updateSelection()},n.prototype.setDirtyStyle=function(i){if(this.indicate_changed!==void 0){var f=function(o,r){var c=function(e,u){var m=e.className;return m.length>0&&(m===u||new RegExp("(^|\\s)"+u+"(\\s|$)").test(m))};return c(o,r)||(o.className+=(o.className?" ":"")+r),o},v=function(o,r){return o.className=p.strip(o.className.replace(new RegExp("(^|\\s+)"+r+"(\\s+|$)")," ")),o},g="abc_textarea_dirty",d=this.editarea.getElem();i?f(d,g):v(d,g)}},n.prototype.fireChanged=function(){if(!this.bIsPaused&&this.parseABC()){var i=this;this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){i.modelChanged()},300);var f=this.isDirty();this.wasDirty!==f&&(this.wasDirty=f,this.setDirtyStyle(f)),this.onchangeCallback&&this.onchangeCallback(this)}},n.prototype.setNotDirty=function(){this.editarea.initialText=this.editarea.getString(),this.wasDirty=!1,this.setDirtyStyle(!1)},n.prototype.isDirty=function(){return this.indicate_changed===void 0?!1:this.editarea.initialText!==this.editarea.getString()},n.prototype.highlight=function(i,f,v,g,d,o){this.editarea.setSelection(i.startChar,i.endChar),this.selectionChangeCallback&&this.selectionChangeCallback(i.startChar,i.endChar),this.clientClickListener&&this.clientClickListener(i,f,v,g,d,o)},n.prototype.pause=function(i){this.bIsPaused=i,i||this.fireChanged()},n.prototype.millisecondsPerMeasure=function(){return!this.synth||!this.synth.synthControl||!this.synth.synthControl.visualObj?0:this.synth.synthControl.visualObj.millisecondsPerMeasure()},n.prototype.pauseMidi=function(i){this.midiPause=i,i||this.redrawMidi()},aa=n,aa}var na,vs;function Pl(){if(vs)return na;vs=1;var p=Qo(),l=Jo(),h=gt(),s=Rs(),t=vc(),a={};a.signature="abcjs-basic v"+p,Object.keys(l).forEach(function(x){a[x]=l[x]}),Object.keys(h).forEach(function(x){a[x]=h[x]}),a.renderAbc=io(),a.tuneMetrics=yl(),a.TimingCallbacks=da();var n=ze();a.setGlyph=n.setSymbol,a.strTranspose=t;var i=ka(),f=xa(),v=Ca(),g=oo(),d=co(),o=bt(),r=Qe(),c=mt(),e=Ml(),u=lo(),m=Nl(),b=fo();return a.synth={CreateSynth:i,instrumentIndexToName:f,pitchToNoteName:v,SynthController:u,SynthSequence:g,CreateSynthControl:d,registerAudioContext:o,activeAudioContext:r,supportsAudio:c,playEvent:e,getMidiFile:m,sequence:s,midiRenderer:b},a.Editor=Ll(),a.EditArea=ho(),na=a,na}var ql=Pl();const ct=Ko(ql);function ia(p,l,h,s,t){var a,n,i,f;(a=p==null?void 0:p.setAttribute)==null||a.call(p,"x1",l.toString()),(n=p==null?void 0:p.setAttribute)==null||n.call(p,"x2",h.toString()),(i=p==null?void 0:p.setAttribute)==null||i.call(p,"y1",s.toString()),(f=p==null?void 0:p.setAttribute)==null||f.call(p,"y2",t.toString())}class Dl{constructor(l){Ze(this,"staff");Ze(this,"lastSvg");Ze(this,"beatSubdivisions");this.staff=l,this.lastSvg=null}onStart(){this.staff.querySelectorAll("svg").forEach(h=>{if(!h.querySelector(".abcjs-cursor")){const s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("class","abcjs-cursor"),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","0"),s.setAttributeNS(null,"y2","0"),h.appendChild(s)}}),this.lastSvg=null}onEvent(l){var a;if(l.measureStart&&l.left===null)return;const h=this.staff.querySelectorAll("svg .highlight");for(let n=0;n<h.length;n++)h[n].classList.remove("highlight");for(let n=0;n<l.elements.length;n++){const i=l.elements[n];for(let f=0;f<i.length;f++)i[f].classList.add("highlight")}if(!((a=l.elements)!=null&&a[0].length))return;const s=l.elements[0][0].closest("svg");this.lastSvg===null?this.lastSvg=s:this.lastSvg.parentElement.offsetTop!==s.parentElement.offsetTop&&(ia(this.lastSvg.querySelector(".abcjs-cursor"),0,0,0,0),this.lastSvg=s);const t=s.querySelector(".abcjs-cursor");ia(t,l.left-2,l.left-2,l.top,l.top+l.height)}onFinished(){const l=this.staff.querySelectorAll("svg .highlight");for(let s=0;s<l.length;s++)l[s].classList.remove("highlight");const h=this.staff.querySelector("svg .abcjs-cursor");ia(h,0,0,0,0)}}const Il=p=>`<div class="na-message"><p class="na-paragraph">${p}</p></div>`;class Fl{constructor(l=document.body){Ze(this,"queue");this.queue=document.createElement("div"),this.queue.className="na-message-queue",l.append(this.queue)}async emit(l){const h=document.createElement("div");let s=2e3,t="",a={},n=l??"";if(typeof n!="string"&&(s=n.duration??2e3,t=`${n.primary||""}`,a=n.style??{},n=`${n.content??""}`),h.innerHTML=Il(n),t){const i=h.firstElementChild;i.dataset.primary=t,Object.entries(a).map(f=>i.style.setProperty(...f))}this.queue.appendChild(h),h.style.height=`${h.offsetHeight}px`,h.style.transition="opacity 1s, height 2s",await bs(s),h.style.opacity="0",h.style.height="0",await bs(2e3),this.queue.removeChild(h)}}const Ol=new Fl,Rl=(...p)=>Ol.emit(...p);function gs(...p){const l=[...p];let h=l.pop();for(const s of l.reverse())h=s+(s.at(-1)==="/"?h:"/"+h);return h}function bs(p){return new Promise(l=>setTimeout(l,p))}function Hl(p){const l=["C","C","D","D","E","F","F","G","G","A","A","B"][p.pitch%12],h=~~(p.pitch/12)-2;return`${l}${h}`}function zl(p){return`${p.root}${p.mode}`}async function ms(p){var l,h;return ct.synth.playEvent(p.midiPitches,void 0,1e3),Rl({content:((h=(l=p.midiPitches)==null?void 0:l.map)==null?void 0:h.call(l,s=>Hl(s)).join(" ").trim())||"",primary:!0})}var Gl=je('<section class="na-layout overflow-x-hidden overflow-y-auto relative"><main class="na-layout-content overflow-unset! select-none"></main><footer class="na-layout-footer bottom-0 sticky">');const Yl=p=>{let l,h;const s=new ct.synth.CreateSynth;let t,a,n;ks(ko(p.ABCAccessor,async f=>{var v,g,d;(v=a==null?void 0:a.pause)==null||v.call(a),a=new ct.synth.SynthController,a.load(h,t??(t=new Dl(l)),{displayPlay:!0,displayProgress:!0}),n=ct.renderAbc(l,f,{scale:1,clickListener:(o,r,c,e,u,m)=>{m.type==="mouseup"&&(o.rest||ms(o))},viewportVertical:!0,responsive:"resize"});try{const o=(d=(g=n==null?void 0:n[0])==null?void 0:g.getKeySignature)==null?void 0:d.call(g);console.info(zl(o),o),await s.init({visualObj:n[0]}),await a.setTune(n[0],!1,{chordsOff:!0,onEnded:()=>{}})}catch(o){console.warn("Audio problem:",o)}}));function i(f){var v,g,d;if(document.activeElement==document.body&&f.key==="Enter"&&n[0].engraver.selected.length){const o=n[0].engraver.selected[0];o.type==="note"&&ms(o.abcelem),(d=(g=(v=o.elemset)==null?void 0:v[0])==null?void 0:g.scrollIntoView)==null||d.call(g,{behavior:"smooth",block:"center"})}}return window.addEventListener("keyup",i),_s(()=>window.removeEventListener("keyup",i)),(()=>{var f=Gl(),v=f.firstChild,g=v.nextSibling,d=l;typeof d=="function"?ca(d,v):l=v;var o=h;return typeof o=="function"?ca(o,g):h=g,f})()};var Wl=je("<ul class=na-menu>"),Ul=je("<li>");const $l=p=>{var l;return(l=p.match(/\/(.*?).abc$/))==null?void 0:l.at(-1)},[Vl,Xl]=qe("Air auf der G-Saite"),jl=p=>Re(Ns,{get when(){return p.files.length>0},get children(){var l=Wl();return dt(l,Re(qo,{get each(){return p.files},children:h=>{const s=$l(h.path),t=Xe(()=>s===Vl());return(()=>{var a=Ul();return Ps(a,Bs({get classList(){return{"na-menu-item":!0,truncate:!0,"cursor-pointer":!t()}},get style(){return{order:s==="Air auf der G-Saite"?-1:1}}},()=>t()?{"data-selected":""}:{},{onClick:()=>{Xl(s),p.onclick(h)}}),!1),dt(a,s),a})()}})),l}}),Kl=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<path d="M6 11H42" stroke-linecap="butt"></path>
<path d="M22 24L42 24" stroke-linecap="butt"></path>
<path d="M6 37L42 37" stroke-linecap="butt"></path>
<path d="M8 20.8823L12.8185 24.0002L8 27.1181L8 20.8823Z" stroke-linecap="butt"></path>
</svg>`,Ql=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<path d="M42 11H6" stroke-linecap="butt"></path>
<path d="M42 24L22 24" stroke-linecap="butt"></path>
<path d="M42 37L6 37" stroke-linecap="butt"></path>
<path d="M13.6593 26.912L8.84075 23.7941L13.6593 20.6762V26.912Z" stroke-linecap="butt"></path>
</svg>`,uo={"theme-button":"_theme-button_1wq7r_1","menu-fold-button":"_menu-fold-button_1wq7r_2"};var Jl=je('<button title="menu fold toggle"data-round>');const Zl=p=>(()=>{var l=Jl();return l.$$click=()=>p.collapsed[1](!p.collapsed[0]()),l.innerHTML=Ql+Kl,Ye(()=>ua(l,`na-button ${uo["menu-fold-button"]}`)),l})();ha(["click"]);const e1=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<path d="M39.979 29.2412C40.0886 28.897 39.7495 28.587 39.4053 28.6965C37.8741 29.1836 36.243 29.4465 34.5504 29.4465C25.7155 29.4465 18.5534 22.2844 18.5534 13.4495C18.5534 11.757 18.8162 10.1258 19.3033 8.59469C19.4128 8.25051 19.1028 7.9114 18.7586 8.02095C11.9396 10.1915 7 16.576 7 24.1143C7 33.44 14.56 41 23.8857 41C31.424 41 37.8086 36.0603 39.979 29.2412Z" stroke-linecap="butt"></path>
</svg>`,t1=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="4">
<circle cx="24" cy="24" r="7" stroke-linecap="butt"></circle>
<rect x="23" y="7" width="2" height="2" stroke-linecap="butt"></rect>
<rect x="23" y="39" width="2" height="2" stroke-linecap="butt"></rect>
<rect x="41" y="23" width="2" height="2" transform="rotate(90 41 23)" stroke-linecap="butt"></rect>
<rect x="9" y="23" width="2" height="2" transform="rotate(90 9 23)" stroke-linecap="butt"></rect>
<rect x="36.7285" y="35.3135" width="2" height="2" transform="rotate(135 36.7285 35.3135)" stroke-linecap="butt"></rect>
<rect x="14.0996" y="12.6865" width="2" height="2" transform="rotate(135 14.0996 12.6865)" stroke-linecap="butt"></rect>
<rect x="12.6875" y="36.728" width="2" height="2" transform="rotate(-135 12.6875 36.728)" stroke-linecap="butt"></rect>
<rect x="35.3145" y="14.1006" width="2" height="2" transform="rotate(-135 35.3145 14.1006)" stroke-linecap="butt"></rect>
<rect x="23" y="7" width="2" height="2" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="23" y="39" width="2" height="2" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="41" y="23" width="2" height="2" transform="rotate(90 41 23)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="9" y="23" width="2" height="2" transform="rotate(90 9 23)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="36.7285" y="35.3135" width="2" height="2" transform="rotate(135 36.7285 35.3135)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="14.0996" y="12.6865" width="2" height="2" transform="rotate(135 14.0996 12.6865)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="12.6875" y="36.728" width="2" height="2" transform="rotate(-135 12.6875 36.728)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
<rect x="35.3145" y="14.1006" width="2" height="2" transform="rotate(-135 35.3145 14.1006)" fill="currentColor" stroke="none" stroke-width="none" stroke-linecap="butt"></rect>
</svg>`;var po=["dark","light"];function vo(p){return po.includes(p)}function r1(p){var l;return vo((l=p??{})==null?void 0:l.detail)}var ys=po;function a1(p,l=document.documentElement){vo(p)||(r1(p)?p=p.detail:p=ys.at(ys.indexOf(window.theme)-1)),l.dataset.theme=p,localStorage.setItem("theme",p)}var n1=je('<button title="theme toggle"data-round>');const i1=(()=>(()=>{var p=n1();return Ls(p,"click",a1,!0),p.innerHTML=e1+t1,Ye(()=>ua(p,`na-button ${uo["theme-button"]}`)),p})());ha(["click"]);const ws=s1;function s1(p,l,h){const{immediate:s=!0,once:t,parseFn:a,defaultValue:n,...i}=h??{},[f,v]=qe(typeof n=="function"?n():void 0),[g,d]=qe(),[o,r]=qe(encodeURI(p)),[c,e]=qe(0),[u,m]=qe(i),b=()=>{t&&c()>0||fetch(o(),u()).then(T=>{try{if(l=="blob")return T.blob();if(l=="json")return T.json();if(l=="text")return T.text()}catch(E){return Promise.reject(E)}}).then(T=>{if(l=="json"&&typeof a=="function"){v(a(T));return}v(T)}).catch(T=>{d(T)}).finally(()=>{e(T=>T+1)})},x=(T,E)=>{T&&r(encodeURI(T)),E&&m(E),b()};return _o(()=>{s&&b()}),[f,{error:g,refetch:x}]}var o1=je('<aside class="na-layout-aside na-watermark pt-1em">');const c1=()=>{const[p]=ws("https://ungh.cc/repos/holy-two/musicbox-papertape/files/main/","json",{parseFn(a){return a.files.filter(n=>new RegExp("^tapes/.*.abc$").test(n.path))},defaultValue(){return[]}}),[l,{refetch:h}]=ws(gs("https://ungh.cc/repos/holy-two/musicbox-papertape/files/main/","tapes/","Air auf der G-Saite.abc"),"text",{}),s=a=>h(gs("https://ungh.cc/repos/holy-two/musicbox-papertape/files/main/",a.path)),t=qe(!0);return[(()=>{var a=o1();return Ps(a,Bs(()=>t[0]()?{"data-collapsed":""}:{}),!1),dt(a,Re(jl,{onclick:s,get files(){return p()}})),a})(),Re(Ns,{get when(){return!!l()},get children(){return Re(Yl,{ABCAccessor:l})}}),Re(i1,{}),Re(Zl,{collapsed:t})]},l1=document.getElementById("root");Yo(()=>Re(c1,{}),l1);
